<!DOCTYPE html>
<html data-gtm-id="GTM-T5VVWV85" data-hubspot-script-url="https://js.hs-scripts.com/43855380.js" lang="en-NZ">
 <head>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" name="robots">
   <!-- This site is optimized with the Yoast SEO Premium plugin v23.4 (Yoast SEO v23.4) - https://yoast.com/wordpress/plugins/seo/ -->
   <title>
    MEGA: Protect your Online Privacy
   </title>
   <meta content="Secure and private cloud storage for everyone. Store and share files, chat, meet, back up, sync, and more." name="description"/>
   <link href="https://mega.io" rel="canonical"/>
   <meta content="en_US" property="og:locale"/>
   <meta content="website" property="og:type"/>
   <meta content="Home" property="og:title"/>
   <meta content="Secure and private cloud storage for everyone. Store and share files, chat, meet, back up, sync, and more." property="og:description"/>
   <meta content="https://mega.io/" property="og:url"/>
   <meta content="MEGA" property="og:site_name"/>
   <meta content="https://www.facebook.com/MEGAprivacy" property="article:publisher"/>
   <meta content="2024-10-31T20:06:03+00:00" property="article:modified_time"/>
   <meta content="https://mega.io/wp-content/uploads/2023/02/Preview-logo.png" property="og:image"/>
   <meta content="1200" property="og:image:width"/>
   <meta content="630" property="og:image:height"/>
   <meta content="image/png" property="og:image:type"/>
   <meta content="summary_large_image" name="twitter:card"/>
   <meta content="@MEGAprivacy" name="twitter:site"/>
   <script class="yoast-schema-graph" type="application/ld+json">
    {"@context":"https://schema.org","@graph":[{"@type":"WebPage","@id":"https://mega.io/","url":"https://mega.io/","name":"MEGA: Protect your Online Privacy","isPartOf":{"@id":"https://mega.io/#website"},"about":{"@id":"https://mega.io/#organization"},"datePublished":"2022-11-30T11:58:07+00:00","dateModified":"2024-10-31T20:06:03+00:00","description":"Secure and private cloud storage for everyone. Store and share files, chat, meet, back up, sync, and more.","breadcrumb":{"@id":"https://mega.io/#breadcrumb"},"inLanguage":"en-NZ","potentialAction":[{"@type":"ReadAction","target":["https://mega.io/"]}]},{"@type":"BreadcrumbList","@id":"https://mega.io/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home"}]},{"@type":"WebSite","@id":"https://mega.io/#website","url":"https://mega.io/","name":"MEGA","description":"The Privacy Company","publisher":{"@id":"https://mega.io/#organization"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://mega.io/?s={search_term_string}"},"query-input":{"@type":"PropertyValueSpecification","valueRequired":true,"valueName":"search_term_string"}}],"inLanguage":"en-NZ"},{"@type":"Organization","@id":"https://mega.io/#organization","name":"MEGA","url":"https://mega.io/","logo":{"@type":"ImageObject","inLanguage":"en-NZ","@id":"https://mega.io/#/schema/logo/image/","url":"https://mega.io/wp-content/uploads/logo-mega.png","contentUrl":"https://mega.io/wp-content/uploads/logo-mega.png","width":512,"height":512,"caption":"MEGA"},"image":{"@id":"https://mega.io/#/schema/logo/image/"},"sameAs":["https://www.facebook.com/MEGAprivacy","https://x.com/MEGAprivacy"]}]}
   </script>
   <!-- / Yoast SEO Premium plugin. -->
   <link href="https://mega.io/xmlrpc.php?rsd" rel="EditURI" title="RSD" type="application/rsd+xml"/>
   <link href="/" hreflang="x-default" rel="alternate"/>
   <link href="/" hreflang="en-NZ" rel="alternate"/>
   <link href="/ar" hreflang="ar" rel="alternate"/>
   <link href="/de" hreflang="de-DE" rel="alternate"/>
   <link href="/es" hreflang="es-ES" rel="alternate"/>
   <link href="/fr" hreflang="fr-FR" rel="alternate"/>
   <link href="/id" hreflang="id-ID" rel="alternate"/>
   <link href="/it" hreflang="it-IT" rel="alternate"/>
   <link href="/ja" hreflang="ja" rel="alternate"/>
   <link href="/ko" hreflang="ko-KR" rel="alternate"/>
   <link href="/nl" hreflang="nl-NL" rel="alternate"/>
   <link href="/pl" hreflang="pl-PL" rel="alternate"/>
   <link href="/pt-br" hreflang="pt-PT" rel="alternate"/>
   <link href="/ro" hreflang="ro-RO" rel="alternate"/>
   <link href="/ru" hreflang="ru-RU" rel="alternate"/>
   <link href="/th" hreflang="th" rel="alternate"/>
   <link href="/vi" hreflang="vi" rel="alternate"/>
   <link href="/zh-hans" hreflang="zh-CN" rel="alternate"/>
   <link href="/zh-hant" hreflang="zh-TW" rel="alternate"/>
   <link href="https://mega.io/wp-content/uploads/logo-mega-150x150.png" rel="icon" sizes="32x32">
    <link href="https://mega.io/wp-content/uploads/logo-mega-300x300.png" rel="icon" sizes="192x192">
     <link href="https://mega.io/wp-content/uploads/logo-mega-300x300.png" rel="apple-touch-icon">
      <meta content="https://mega.io/wp-content/uploads/logo-mega-300x300.png" name="msapplication-TileImage"/>
     </link>
    </link>
   </link>
  </meta>
  <style>
   /**
 * Font-face declarations common to all MEGA Wordpress sites.
 */

@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: normal;
  src: url('../fonts/Poppins-Regular.woff2') format("woff2");
  font-display: swap;
}
@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: bold;
  src: url('../fonts/Poppins-Bold.woff2') format("woff2");
  font-display: swap;
}
@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 600;
  src: url('../fonts/Poppins-SemiBold.woff2') format("woff2");
  font-display: swap;
}
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: normal;
  src: url('../fonts/Inter-Regular.woff2') format("woff2");
  font-display: swap;
}
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: bold;
  src: url('../fonts/Inter-Bold.woff2') format("woff2");
  font-display: swap;
}
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 600;
  src: url('../fonts/Inter-SemiBold.woff2') format("woff2");
  font-display: swap;
}
@font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 500;
    src: url('../fonts/Inter-Medium.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Inter';
    font-style: italic;
    font-weight: normal;
    src: url('../fonts/Inter-Italic.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Almarai';
    font-style: normal;
    font-weight: 800;
    src: url('../fonts/Almarai-ExtraBold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Almarai';
    font-style: normal;
    font-weight: 700;
    src: url('../fonts/Almarai-Bold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Almarai';
    font-style: normal;
    font-weight: 400;
    src: url('../fonts/Almarai-Regular.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Lexend';
    font-style: normal;
    font-weight: 700;
    src: url('../fonts/Lexend-Bold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Lexend';
    font-style: normal;
    font-weight: 600;
    src: url('../fonts/Lexend-SemiBold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Lexend';
    font-style: normal;
    font-weight: 400;
    src: url('../fonts/Lexend-Regular.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Lexend';
    font-style: normal;
    font-weight: 500;
    src: url('../fonts/Lexend-Medium.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Mulish';
    font-style: normal;
    font-weight: 800;
    src: url('../fonts/Mulish-ExtraBold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Mulish';
    font-style: normal;
    font-weight: 900;
    src: url('../fonts/Mulish-Black.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Mulish';
    font-style: normal;
    font-weight: 400;
    src: url('../fonts/Mulish-Regular.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Mulish';
    font-style: normal;
    font-weight: 500;
    src: url('../fonts/Mulish-Medium.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Mulish';
    font-style: normal;
    font-weight: 600;
    src: url('../fonts/Mulish-SemiBold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Mulish';
    font-style: italic;
    font-weight: normal;
    src: url('../fonts/Mulish-Italic.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'M PLUS 1p';
    font-style: normal;
    font-weight: 800;
    src: url('../fonts/MPLUS1p-ExtraBold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'M PLUS 1p';
    font-style: normal;
    font-weight: 700;
    src: url('../fonts/MPLUS1p-Bold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'M PLUS 1p';
    font-style: normal;
    font-weight: 400;
    src: url('../fonts/MPLUS1p-Regular.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'M PLUS 1p';
    font-style: normal;
    font-weight: 500;
    src: url('../fonts/MPLUS1p-Medium.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans KR';
    font-style: normal;
    font-weight: 900;
    src: url('../fonts/NotoSansKR-Black.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans KR';
    font-style: normal;
    font-weight: 700;
    src: url('../fonts/NotoSansKR-Bold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans KR';
    font-style: normal;
    font-weight: 400;
    src: url('../fonts/NotoSansKR-Regular.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans KR';
    font-style: normal;
    font-weight: 500;
    src: url('../fonts/NotoSansKR-Medium.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans KR';
    font-style: normal;
    font-weight: 600;
    src: url('../fonts/NotoSansKR-SemiBold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans SC';
    font-style: normal;
    font-weight: 900;
    src: url('../fonts/NotoSansSC-Black.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans SC';
    font-style: normal;
    font-weight: 700;
    src: url('../fonts/NotoSansSC-Bold.woff2') format("woff2");
    font-display: swap;
}
@font-face {
    font-family: 'Noto Sans SC';
    font-style: normal;
    font-weight: 500;
    src: url('../fonts/NotoSansSC-Medium.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans SC';
    font-style: normal;
    font-weight: 400;
    src: url('../fonts/NotoSansSC-Regular.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans SC';
    font-style: normal;
    font-weight: 600;
    src: url('../fonts/NotoSansSC-SemiBold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans TC';
    font-style: normal;
    font-weight: 900;
    src: url('../fonts/NotoSansTC-Black.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans TC';
    font-style: normal;
    font-weight: 700;
    src: url('../fonts/NotoSansTC-Bold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans TC';
    font-style: normal;
    font-weight: 600;
    src: url('../fonts/NotoSansTC-SemiBold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans TC';
    font-style: normal;
    font-weight: 500;
    src: url('../fonts/NotoSansTC-Medium.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Noto Sans TC';
    font-style: normal;
    font-weight: 400;
    src: url('../fonts/NotoSansTC-Regular.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Prompt';
    font-style: normal;
    font-weight: 700;
    src: url('../fonts/Prompt-Bold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Prompt';
    font-style: normal;
    font-weight: 600;
    src: url('../fonts/Prompt-SemiBold.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Prompt';
    font-style: normal;
    font-weight: 400;
    src: url('../fonts/Prompt-Regular.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Prompt';
    font-style: normal;
    font-weight: 500;
    src: url('../fonts/Prompt-Medium.woff2') format("woff2");
    font-display: swap;
}

@font-face {
    font-family: 'Prompt';
    font-style: italic;
    font-weight: normal;
    src: url('../fonts/Prompt-Italic.woff2') format("woff2");
    font-display: swap;
}

/**
 * MEGA's common styling for Wordpress sites.
 *
 * Contains atomic components:
 * spacing: https://www.figma.com/file/U90j8OCD0pvFFO3fO1YlkN/Website-design-system-v1?node-id=412%3A9850&t=uSRFKSkVWXzRUaXK-0
 * typography: https://www.figma.com/file/U90j8OCD0pvFFO3fO1YlkN/Website-design-system-v1?node-id=121%3A738&t=D5tLygUnvOk9VyVT-0
 * color: https://www.figma.com/file/U90j8OCD0pvFFO3fO1YlkN/Website-design-system-v1?node-id=112%3A12
 */

/* region MEGA Atomic Component: Spacing */

/* Breakpoints XL and L */
:root {
    --spacing-1: 2px;
    --spacing-2: 4px;
    --spacing-3: 8px;
    --spacing-4: 12px;
    --spacing-5: 16px;
    --spacing-6: 20px;
    --spacing-7: 24px;
    --spacing-8: 32px;
    --spacing-9: 40px;
    --spacing-10: 48px;
    --spacing-11: 64px;
    --spacing-12: 80px;
    --spacing-13: 96px;
    --spacing-14: 120px;
    --spacing-15: 160px;
}


/* Breakpoints M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    :root {
        --spacing-1: 2px;
        --spacing-2: 4px;
        --spacing-3: 8px;
        --spacing-4: 12px;
        --spacing-5: 16px;
        --spacing-6: 20px;
        --spacing-7: 24px;
        --spacing-8: 28px;
        --spacing-9: 36px;
        --spacing-10: 44px;
        --spacing-11: 56px;
        --spacing-12: 72px;
        --spacing-13: 80px;
        --spacing-14: 96px;
        --spacing-15: 144px;
    }
}

/* Breakpoints S and XS */
@media screen and (min-width: 0px) and (max-width: 768px) {
    :root {
        --spacing-1: 2px;
        --spacing-2: 4px;
        --spacing-3: 8px;
        --spacing-4: 12px;
        --spacing-5: 16px;
        --spacing-6: 20px;
        --spacing-7: 24px;
        --spacing-8: 28px;
        --spacing-9: 32px;
        --spacing-10: 40px;
        --spacing-11: 48px;
        --spacing-12: 64px;
        --spacing-13: 72px;
        --spacing-14: 80px;
        --spacing-15: 120px;
    }
}

/* endregion */

/* region MEGA Atomic Component: Typography */

/**
 * See https://www.figma.com/file/U90j8OCD0pvFFO3fO1YlkN/Website-design-system-v1?node-id=121%3A738&t=D5tLygUnvOk9VyVT-0
 *
 * Poppins font: https://fonts.google.com/specimen/Poppins?query=poppins
 * Inter font: https://fonts.google.com/specimen/Inter?query=inter
 */

:root {
    --font-family-poppins: Poppins, arial, sans-serif;
    --font-family-inter: "Inter", arial, sans-serif;
    --font-family-almarai: "Almarai", arial, sans-serif;
    --font-family-lexend: "Lexend", arial, sans-serif;
    --font-family-noto-sans-kr: "Noto Sans KR", arial, sans-serif;
    --font-family-noto-sans-tc: "Noto Sans TC", arial, sans-serif;
    --font-family-noto-sans-sc: "Noto Sans SC", arial, sans-serif;
    --font-family-mulish: "Mulish", arial, sans-serif;
    --font-family-prompt: "Prompt", arial, sans-serif;
    --font-family-m-plus-1p: "M PLUS 1p", arial, sans-serif;
}

:root,
:root .page-container :lang(en) {
    --font-family-for-headings: var(--font-family-poppins);
    --font-family-for-copy: var(--font-family-inter);
}

:root :lang(ar) {
    --font-family-for-headings: var(--font-family-almarai);
    --font-family-for-copy: var(--font-family-almarai);
}
:root :lang(vi) {
    --font-family-for-headings: var(--font-family-lexend);
    --font-family-for-copy: var(--font-family-lexend);
}
:root :lang(kr) {
    --font-family-for-headings: var(--font-family-noto-sans-kr);
    --font-family-for-copy: var(--font-family-noto-sans-kr);
}
:root :lang(zh-hant) {
    --font-family-for-headings: var(--font-family-noto-sans-tc);
    --font-family-for-copy: var(--font-family-noto-sans-tc);
}
:root :lang(zh-hans) {
    --font-family-for-headings: var(--font-family-noto-sans-sc);
    --font-family-for-copy: var(--font-family-noto-sans-sc);
}
:root :lang(ru)  {
    --font-family-for-headings: var( --font-family-mulish);
    --font-family-for-copy: var( --font-family-mulish);
}
:root :lang(th)  {
    --font-family-for-headings: var( --font-family-prompt);
    --font-family-for-copy: var( --font-family-prompt);
}
:root :lang(ja)  {
    --font-family-for-headings: var( --font-family-m-plus-1p);
    --font-family-for-copy: var( --font-family-m-plus-1p);
}
/* Breakpoints XL and L */
:root,
:root .page-container :lang(en) {
    /* Headings */
    --font-h1: normal bold 60px/72px var(--font-family-for-headings);
    --font-h1-spacing: -0.3px;

    --font-h2: normal 600 48px/56px var(--font-family-for-headings);
    --font-h2-spacing: -0.24px;

    --font-h3: normal 600 40px/48px var(--font-family-for-headings);
    --font-h3-spacing: 0;

    --font-h4: normal 600 32px/40px var(--font-family-for-headings);
    --font-h4-spacing: 0.08px;

    --font-h5: normal 600 24px/28px var(--font-family-for-headings);
    --font-h5-spacing: 0;

    --font-h6: normal bold 20px/24px var(--font-family-for-copy);
    --font-h6-spacing: 0.0025em;

    /* Body Copy */
    --font-copy-lg: normal normal 18px/28px var(--font-family-for-copy);
    --font-copy-lg-bold: normal bold 18px/28px var(--font-family-for-copy);
    --font-copy-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-copy-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-copy-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-copy-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* For font-copy-allcaps: Use uppercase text (via source text only, for localisation support) */
    --font-copy-allcaps-lg: normal bold 20px/24px var(--font-family-for-copy);
    --font-copy-allcaps-lg-spacing: 0.08em;
    --font-copy-allcaps-md: normal bold 18px/20px var(--font-family-for-copy);
    --font-copy-allcaps-md-spacing: 0.08em;
    --font-copy-allcaps-sm: normal bold 12px/16px var(--font-family-for-copy);
    --font-copy-allcaps-sm-spacing: 0.08em;
    --font-copy-allcaps-sm-wide-spacing: 0.2em;

    /* Link fonts (common to all grid sizes and all with text-underline) */
    --font-link-lg: normal normal 18px/24px var(--font-family-for-copy);
    --font-link-lg-bold: normal bold 18px/24px var(--font-family-for-copy);
    --font-link-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-link-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-link-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-link-sm-semibold: normal 600 14px/20px var(--font-family-for-copy);
    --font-link-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* buttons fonts */
    --font-btn-xl: normal 600 18px/24px var(--font-family-for-copy);
    --font-btn-xl-spacing: 0.01em;
    --font-btn-lg: normal 600 16px/24px var(--font-family-for-copy);
    --font-btn-lg-spacing: 0;
    --font-btn-md: normal 600 16px/20px var(--font-family-for-copy);
    --font-btn-md-spacing: 0;
    --font-btn-sm: normal 600 14px/20px var(--font-family-for-copy);
    --font-btn-sm-spacing: 0;

    /* caption fonts */
    --font-caption-lg: normal 400 14px/20px var(--font-family-for-copy);
    --font-caption-lg-bold: normal 600 14px/20px var(--font-family-for-copy);
    --font-caption-lg-spacing: 0;
    --font-caption-md: normal 500 12px/18px var(--font-family-for-copy);
    --font-caption-md-bold: normal 600 12px/18px var(--font-family-for-copy);
    --font-caption-md-spacing: 0.02em;

    /* Quotation */
    --font-quote: italic 400 18px/28px var(--font-family-for-copy);
    --font-quote-bold: normal 400 32px/44px var(--font-family-for-copy);

    /* Input Fields */
    --font-input-xl: normal normal 18px/24px var(--font-family-for-copy);
    --font-input-lg: normal normal 16px/24px var(--font-family-for-copy);
    --font-input-md: normal normal 16px/20px var(--font-family-for-copy);
    --font-input-sm: normal medium 14px/20px var(--font-family-for-copy);

    /* Data */
    --font-data-zero: normal 600 56px/64px var(--font-family-for-headings);
    --font-data-one: normal 600 48px/56px var(--font-family-for-headings);
    --font-data-two: normal 600 40px/48px var(--font-family-for-headings);
}

:root :lang(ar) {
    --font-h1: normal 800 60px/72px var(--font-family-for-headings);
    --font-h1-spacing: 0;
    --font-h2: normal 700 48px/56px var(--font-family-for-headings);
    --font-h2-spacing: -0.48px;
    --font-h3: normal 700 40px/48px var(--font-family-for-headings);
    --font-h3-spacing: 0;
    --font-h4: normal 700 32px/40px var(--font-family-for-headings);
    --font-h4-spacing: 0.08px;
    --font-h5: normal 700 24px/28px var(--font-family-for-headings);
    --font-h6: normal bold 20px/24px var(--font-family-for-copy);
    --font-h5-spacing: 0;
    --font-data-zero: normal 700 56px/64px var(--font-family-for-headings);
    --font-data-one: normal 700 48px/56px var(--font-family-for-headings);
    --font-data-two: normal 700 40px/48px var(--font-family-for-headings);

    /* Body Copy */
    --font-copy-lg: normal normal 18px/28px var(--font-family-for-copy);
    --font-copy-lg-bold: normal bold 18px/28px var(--font-family-for-copy);
    --font-copy-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-copy-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-copy-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-copy-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* For font-copy-allcaps: Use uppercase text (via source text only, for localisation support) */
    --font-copy-allcaps-lg: normal bold 20px/24px var(--font-family-for-copy);
    --font-copy-allcaps-md: normal bold 18px/20px var(--font-family-for-copy);
    --font-copy-allcaps-sm: normal bold 12px/16px var(--font-family-for-copy);

    /* Link fonts (common to all grid sizes and all with text-underline) */
    --font-link-lg: normal normal 18px/24px var(--font-family-for-copy);
    --font-link-lg-bold: normal bold 18px/24px var(--font-family-for-copy);
    --font-link-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-link-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-link-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-link-sm-semibold: normal 600 14px/20px var(--font-family-for-copy);
    --font-link-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* buttons fonts */
    --font-btn-xl: normal 600 18px/24px var(--font-family-for-copy);
    --font-btn-lg: normal 600 16px/24px var(--font-family-for-copy);
    --font-btn-md: normal 600 16px/20px var(--font-family-for-copy);
    --font-btn-sm: normal 600 14px/20px var(--font-family-for-copy);

    /* caption fonts */
    --font-caption-lg: normal 400 14px/20px var(--font-family-for-copy);
    --font-caption-lg-bold: normal 600 14px/20px var(--font-family-for-copy);
    --font-caption-md: normal 500 12px/18px var(--font-family-for-copy);
    --font-caption-md-bold: normal 600 12px/18px var(--font-family-for-copy);

    /* Quotation */
    --font-quote: italic 400 18px/28px var(--font-family-for-copy);
    --font-quote-bold: normal 400 32px/44px var(--font-family-for-copy);

    /* Input Fields */
    --font-input-xl: normal normal 18px/24px var(--font-family-for-copy);
    --font-input-lg: normal normal 16px/24px var(--font-family-for-copy);
    --font-input-md: normal normal 16px/20px var(--font-family-for-copy);
    --font-input-sm: normal medium 14px/20px var(--font-family-for-copy);
}

:root :lang(vi) {
    --font-h1: normal 700 60px/72px var(--font-family-for-headings);
    --font-h1-spacing: -0.9px;
    --font-h2: normal 600 48px/56px var(--font-family-for-headings);
    --font-h2-spacing: -0.72px;
    --font-h3: normal 600 40px/48px var(--font-family-for-headings);
    --font-h3-spacing: 0;
    --font-h4: normal 600 32px/40px var(--font-family-for-headings);
    --font-h4-spacing: 0.08px;
    --font-h5: normal 600 24px/28px var(--font-family-for-headings);
    --font-h6: normal bold 20px/24px var(--font-family-for-copy);
    --font-h5-spacing: 0;
    --font-data-zero: normal 600 56px/64px var(--font-family-for-headings);
    --font-data-one: normal 600 48px/56px var(--font-family-for-headings);
    --font-data-two: normal 600 40px/48px var(--font-family-for-headings);

    /* Body Copy */
    --font-copy-lg: normal normal 18px/28px var(--font-family-for-copy);
    --font-copy-lg-bold: normal bold 18px/28px var(--font-family-for-copy);
    --font-copy-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-copy-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-copy-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-copy-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* For font-copy-allcaps: Use uppercase text (via source text only, for localisation support) */
    --font-copy-allcaps-lg: normal bold 20px/24px var(--font-family-for-copy);
    --font-copy-allcaps-md: normal bold 18px/20px var(--font-family-for-copy);
    --font-copy-allcaps-sm: normal bold 12px/16px var(--font-family-for-copy);

    /* Link fonts (common to all grid sizes and all with text-underline) */
    --font-link-lg: normal normal 18px/24px var(--font-family-for-copy);
    --font-link-lg-bold: normal bold 18px/24px var(--font-family-for-copy);
    --font-link-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-link-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-link-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-link-sm-semibold: normal 600 14px/20px var(--font-family-for-copy);
    --font-link-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* buttons fonts */
    --font-btn-xl: normal 600 18px/24px var(--font-family-for-copy);
    --font-btn-lg: normal 600 16px/24px var(--font-family-for-copy);
    --font-btn-md: normal 600 16px/20px var(--font-family-for-copy);
    --font-btn-sm: normal 600 14px/20px var(--font-family-for-copy);

    /* caption fonts */
    --font-caption-lg: normal 400 14px/20px var(--font-family-for-copy);
    --font-caption-lg-bold: normal 600 14px/20px var(--font-family-for-copy);
    --font-caption-md: normal 500 12px/18px var(--font-family-for-copy);
    --font-caption-md-bold: normal 600 12px/18px var(--font-family-for-copy);

    /* Quotation */
    --font-quote: italic 400 18px/28px var(--font-family-for-copy);
    --font-quote-bold: normal 400 32px/44px var(--font-family-for-copy);

    /* Input Fields */
    --font-input-xl: normal normal 18px/24px var(--font-family-for-copy);
    --font-input-lg: normal normal 16px/24px var(--font-family-for-copy);
    --font-input-md: normal normal 16px/20px var(--font-family-for-copy);
    --font-input-sm: normal medium 14px/20px var(--font-family-for-copy);
}

:root :lang(kr) {
    --font-h1: normal 900 60px/72px var(--font-family-for-headings);
    --font-h1-spacing: 0;
    --font-h2: normal 700 48px/56px var(--font-family-for-headings);
    --font-h2-spacing: 0;
    --font-h3: normal 700 40px/48px var(--font-family-for-headings);
    --font-h3-spacing: 0;
    --font-h4: normal 700 32px/40px var(--font-family-for-headings);
    --font-h4-spacing: 0;
    --font-h5: normal 700 24px/28px var(--font-family-for-headings);
    --font-h6: normal bold 20px/24px var(--font-family-for-copy);
    --font-h5-spacing: 0;
    --font-data-zero: normal 700 56px/64px var(--font-family-for-headings);
    --font-data-one: normal 700 48px/56px var(--font-family-for-headings);
    --font-data-two: normal 700 40px/48px var(--font-family-for-headings);

    /* Body Copy */
    --font-copy-lg: normal normal 18px/28px var(--font-family-for-copy);
    --font-copy-lg-bold: normal bold 18px/28px var(--font-family-for-copy);
    --font-copy-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-copy-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-copy-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-copy-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* For font-copy-allcaps: Use uppercase text (via source text only, for localisation support) */
    --font-copy-allcaps-lg: normal bold 20px/24px var(--font-family-for-copy);
    --font-copy-allcaps-md: normal bold 18px/20px var(--font-family-for-copy);
    --font-copy-allcaps-sm: normal bold 12px/16px var(--font-family-for-copy);

    /* Link fonts (common to all grid sizes and all with text-underline) */
    --font-link-lg: normal normal 18px/24px var(--font-family-for-copy);
    --font-link-lg-bold: normal bold 18px/24px var(--font-family-for-copy);
    --font-link-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-link-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-link-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-link-sm-semibold: normal 600 14px/20px var(--font-family-for-copy);
    --font-link-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* buttons fonts */
    --font-btn-xl: normal 600 18px/24px var(--font-family-for-copy);
    --font-btn-lg: normal 600 16px/24px var(--font-family-for-copy);
    --font-btn-md: normal 600 16px/20px var(--font-family-for-copy);
    --font-btn-sm: normal 600 14px/20px var(--font-family-for-copy);

    /* caption fonts */
    --font-caption-lg: normal 400 14px/20px var(--font-family-for-copy);
    --font-caption-lg-bold: normal 600 14px/20px var(--font-family-for-copy);
    --font-caption-md: normal 500 12px/18px var(--font-family-for-copy);
    --font-caption-md-bold: normal 600 12px/18px var(--font-family-for-copy);

    /* Quotation */
    --font-quote: italic 400 18px/28px var(--font-family-for-copy);
    --font-quote-bold: normal 400 32px/44px var(--font-family-for-copy);

    /* Input Fields */
    --font-input-xl: normal normal 18px/24px var(--font-family-for-copy);
    --font-input-lg: normal normal 16px/24px var(--font-family-for-copy);
    --font-input-md: normal normal 16px/20px var(--font-family-for-copy);
    --font-input-sm: normal medium 14px/20px var(--font-family-for-copy);
}

:root :lang(zh-hant) {
    --font-h1: normal 900 60px/72px var(--font-family-for-headings);
    --font-h1-spacing: 0;
    --font-h2: normal 700 48px/56px var(--font-family-for-headings);
    --font-h2-spacing: 0;
    --font-h3: normal 700 40px/48px var(--font-family-for-headings);
    --font-h3-spacing: 0;
    --font-h4: normal 700 32px/40px var(--font-family-for-headings);
    --font-h4-spacing: 0;
    --font-h5: normal 700 24px/28px var(--font-family-for-headings);
    --font-h6: normal bold 20px/24px var(--font-family-for-copy);
    --font-h5-spacing: 0;
    --font-data-zero: normal 700 56px/64px var(--font-family-for-headings);
    --font-data-one: normal 700 48px/56px var(--font-family-for-headings);
    --font-data-two: normal 700 40px/48px var(--font-family-for-headings);

    /* Body Copy */
    --font-copy-lg: normal normal 18px/28px var(--font-family-for-copy);
    --font-copy-lg-bold: normal bold 18px/28px var(--font-family-for-copy);
    --font-copy-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-copy-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-copy-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-copy-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* For font-copy-allcaps: Use uppercase text (via source text only, for localisation support) */
    --font-copy-allcaps-lg: normal bold 20px/24px var(--font-family-for-copy);
    --font-copy-allcaps-md: normal bold 18px/20px var(--font-family-for-copy);
    --font-copy-allcaps-sm: normal bold 12px/16px var(--font-family-for-copy);

    /* Link fonts (common to all grid sizes and all with text-underline) */
    --font-link-lg: normal normal 18px/24px var(--font-family-for-copy);
    --font-link-lg-bold: normal bold 18px/24px var(--font-family-for-copy);
    --font-link-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-link-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-link-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-link-sm-semibold: normal 600 14px/20px var(--font-family-for-copy);
    --font-link-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* buttons fonts */
    --font-btn-xl: normal 600 18px/24px var(--font-family-for-copy);
    --font-btn-lg: normal 600 16px/24px var(--font-family-for-copy);
    --font-btn-md: normal 600 16px/20px var(--font-family-for-copy);
    --font-btn-sm: normal 600 14px/20px var(--font-family-for-copy);

    /* caption fonts */
    --font-caption-lg: normal 400 14px/20px var(--font-family-for-copy);
    --font-caption-lg-bold: normal 600 14px/20px var(--font-family-for-copy);
    --font-caption-md: normal 500 12px/18px var(--font-family-for-copy);
    --font-caption-md-bold: normal 600 12px/18px var(--font-family-for-copy);

    /* Quotation */
    --font-quote: italic 400 18px/28px var(--font-family-for-copy);
    --font-quote-bold: normal 400 32px/44px var(--font-family-for-copy);

    /* Input Fields */
    --font-input-xl: normal normal 18px/24px var(--font-family-for-copy);
    --font-input-lg: normal normal 16px/24px var(--font-family-for-copy);
    --font-input-md: normal normal 16px/20px var(--font-family-for-copy);
    --font-input-sm: normal medium 14px/20px var(--font-family-for-copy);
}

:root :lang(zh-hans) {
    --font-h1: normal 900 60px/72px var(--font-family-for-headings);
    --font-h1-spacing: 0;
    --font-h2: normal 700 48px/56px var(--font-family-for-headings);
    --font-h2-spacing: 0;
    --font-h3: normal 700 40px/48px var(--font-family-for-headings);
    --font-h3-spacing: 0;
    --font-h4: normal 700 32px/40px var(--font-family-for-headings);
    --font-h4-spacing: 0;
    --font-h5: normal 700 24px/28px var(--font-family-for-headings);
    --font-h6: normal bold 20px/24px var(--font-family-for-copy);
    --font-h5-spacing: 0;
    --font-data-zero: normal 700 56px/64px var(--font-family-for-headings);
    --font-data-one: normal 700 48px/56px var(--font-family-for-headings);
    --font-data-two: normal 700 40px/48px var(--font-family-for-headings);

    /* Body Copy */
    --font-copy-lg: normal normal 18px/28px var(--font-family-for-copy);
    --font-copy-lg-bold: normal bold 18px/28px var(--font-family-for-copy);
    --font-copy-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-copy-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-copy-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-copy-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* For font-copy-allcaps: Use uppercase text (via source text only, for localisation support) */
    --font-copy-allcaps-lg: normal bold 20px/24px var(--font-family-for-copy);
    --font-copy-allcaps-md: normal bold 18px/20px var(--font-family-for-copy);
    --font-copy-allcaps-sm: normal bold 12px/16px var(--font-family-for-copy);

    /* Link fonts (common to all grid sizes and all with text-underline) */
    --font-link-lg: normal normal 18px/24px var(--font-family-for-copy);
    --font-link-lg-bold: normal bold 18px/24px var(--font-family-for-copy);
    --font-link-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-link-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-link-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-link-sm-semibold: normal 600 14px/20px var(--font-family-for-copy);
    --font-link-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* buttons fonts */
    --font-btn-xl: normal 600 18px/24px var(--font-family-for-copy);
    --font-btn-lg: normal 600 16px/24px var(--font-family-for-copy);
    --font-btn-md: normal 600 16px/20px var(--font-family-for-copy);
    --font-btn-sm: normal 600 14px/20px var(--font-family-for-copy);

    /* caption fonts */
    --font-caption-lg: normal 400 14px/20px var(--font-family-for-copy);
    --font-caption-lg-bold: normal 600 14px/20px var(--font-family-for-copy);
    --font-caption-md: normal 500 12px/18px var(--font-family-for-copy);
    --font-caption-md-bold: normal 600 12px/18px var(--font-family-for-copy);

    /* Quotation */
    --font-quote: italic 400 18px/28px var(--font-family-for-copy);
    --font-quote-bold: normal 400 32px/44px var(--font-family-for-copy);

    /* Input Fields */
    --font-input-xl: normal normal 18px/24px var(--font-family-for-copy);
    --font-input-lg: normal normal 16px/24px var(--font-family-for-copy);
    --font-input-md: normal normal 16px/20px var(--font-family-for-copy);
    --font-input-sm: normal medium 14px/20px var(--font-family-for-copy);
}

:root :lang(ru) {
    --font-h1: normal 900 60px/72px var(--font-family-for-headings);
    --font-h1-spacing: -0.6px;
    --font-h2: normal 800 48px/56px var(--font-family-for-headings);
    --font-h2-spacing: -0.48px;
    --font-h3: normal 800 40px/48px var(--font-family-for-headings);
    --font-h3-spacing: 0;
    --font-h4: normal 800 32px/40px var(--font-family-for-headings);
    --font-h4-spacing: 0.08px;
    --font-h5: normal 800 24px/28px var(--font-family-for-headings);
    --font-h6: normal bold 20px/24px var(--font-family-for-copy);
    --font-h5-spacing: 0;
    --font-data-zero: normal 800 56px/64px var(--font-family-for-headings);
    --font-data-one: normal 800 48px/56px var(--font-family-for-headings);
    --font-data-two: normal 800 40px/48px var(--font-family-for-headings);

    /* Body Copy */
    --font-copy-lg: normal normal 18px/28px var(--font-family-for-copy);
    --font-copy-lg-bold: normal bold 18px/28px var(--font-family-for-copy);
    --font-copy-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-copy-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-copy-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-copy-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* For font-copy-allcaps: Use uppercase text (via source text only, for localisation support) */
    --font-copy-allcaps-lg: normal bold 20px/24px var(--font-family-for-copy);
    --font-copy-allcaps-md: normal bold 18px/20px var(--font-family-for-copy);
    --font-copy-allcaps-sm: normal bold 12px/16px var(--font-family-for-copy);

    /* Link fonts (common to all grid sizes and all with text-underline) */
    --font-link-lg: normal normal 18px/24px var(--font-family-for-copy);
    --font-link-lg-bold: normal bold 18px/24px var(--font-family-for-copy);
    --font-link-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-link-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-link-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-link-sm-semibold: normal 600 14px/20px var(--font-family-for-copy);
    --font-link-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* buttons fonts */
    --font-btn-xl: normal 600 18px/24px var(--font-family-for-copy);
    --font-btn-lg: normal 600 16px/24px var(--font-family-for-copy);
    --font-btn-md: normal 600 16px/20px var(--font-family-for-copy);
    --font-btn-sm: normal 600 14px/20px var(--font-family-for-copy);

    /* caption fonts */
    --font-caption-lg: normal 400 14px/20px var(--font-family-for-copy);
    --font-caption-lg-bold: normal 600 14px/20px var(--font-family-for-copy);
    --font-caption-md: normal 500 12px/18px var(--font-family-for-copy);
    --font-caption-md-bold: normal 600 12px/18px var(--font-family-for-copy);

    /* Quotation */
    --font-quote: italic 400 18px/28px var(--font-family-for-copy);
    --font-quote-bold: normal 400 32px/44px var(--font-family-for-copy);

    /* Input Fields */
    --font-input-xl: normal normal 18px/24px var(--font-family-for-copy);
    --font-input-lg: normal normal 16px/24px var(--font-family-for-copy);
    --font-input-md: normal normal 16px/20px var(--font-family-for-copy);
    --font-input-sm: normal medium 14px/20px var(--font-family-for-copy);
}

:root :lang(th) {
    --font-h1: normal 700 60px/72px var(--font-family-for-headings);
    --font-h1-spacing: 0;
    --font-h2: normal 600 48px/56px var(--font-family-for-headings);
    --font-h2-spacing: 0;
    --font-h3: normal 600 40px/48px var(--font-family-for-headings);
    --font-h3-spacing: 0;
    --font-h4: normal 600 32px/40px var(--font-family-for-headings);
    --font-h4-spacing: 0;
    --font-h5: normal 600 24px/28px var(--font-family-for-headings);
    --font-h6: normal 600 20px/24px var(--font-family-for-copy);
    --font-h5-spacing: 0;
    --font-data-zero: normal 600 56px/64px var(--font-family-for-headings);
    --font-data-one: normal 600 48px/56px var(--font-family-for-headings);
    --font-data-two: normal 600 40px/48px var(--font-family-for-headings);

    /* Body Copy */
    --font-copy-lg: normal normal 18px/28px var(--font-family-for-copy);
    --font-copy-lg-bold: normal bold 18px/28px var(--font-family-for-copy);
    --font-copy-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-copy-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-copy-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-copy-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* For font-copy-allcaps: Use uppercase text (via source text only, for localisation support) */
    --font-copy-allcaps-lg: normal bold 20px/24px var(--font-family-for-copy);
    --font-copy-allcaps-md: normal bold 18px/20px var(--font-family-for-copy);
    --font-copy-allcaps-sm: normal bold 12px/16px var(--font-family-for-copy);

    /* Link fonts (common to all grid sizes and all with text-underline) */
    --font-link-lg: normal normal 18px/24px var(--font-family-for-copy);
    --font-link-lg-bold: normal bold 18px/24px var(--font-family-for-copy);
    --font-link-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-link-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-link-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-link-sm-semibold: normal 600 14px/20px var(--font-family-for-copy);
    --font-link-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* buttons fonts */
    --font-btn-xl: normal 600 18px/24px var(--font-family-for-copy);
    --font-btn-lg: normal 600 16px/24px var(--font-family-for-copy);
    --font-btn-md: normal 600 16px/20px var(--font-family-for-copy);
    --font-btn-sm: normal 600 14px/20px var(--font-family-for-copy);

    /* caption fonts */
    --font-caption-lg: normal 400 14px/20px var(--font-family-for-copy);
    --font-caption-lg-bold: normal 600 14px/20px var(--font-family-for-copy);
    --font-caption-md: normal 500 12px/18px var(--font-family-for-copy);
    --font-caption-md-bold: normal 600 12px/18px var(--font-family-for-copy);

    /* Quotation */
    --font-quote: italic 400 18px/28px var(--font-family-for-copy);
    --font-quote-bold: normal 400 32px/44px var(--font-family-for-copy);

    /* Input Fields */
    --font-input-xl: normal normal 18px/24px var(--font-family-for-copy);
    --font-input-lg: normal normal 16px/24px var(--font-family-for-copy);
    --font-input-md: normal normal 16px/20px var(--font-family-for-copy);
    --font-input-sm: normal medium 14px/20px var(--font-family-for-copy);
}

:root :lang(ja) {
    --font-h1: normal 800 60px/72px var(--font-family-for-headings);
    --font-h1-spacing: -0.48px;
    --font-h2: normal 700 48px/56px var(--font-family-for-headings);
    --font-h2-spacing: -0.24px;
    --font-h3: normal 700 40px/48px var(--font-family-for-headings);
    --font-h3-spacing: 0;
    --font-h4: normal 700 32px/40px var(--font-family-for-headings);
    --font-h4-spacing: 0;
    --font-h5: normal 700 24px/28px var(--font-family-for-headings);
    --font-h6: normal 700 20px/24px var(--font-family-for-copy);
    --font-h5-spacing: 0;
    --font-data-zero: normal 700 56px/64px var(--font-family-for-headings);
    --font-data-one: normal 700 48px/56px var(--font-family-for-headings);
    --font-data-two: normal 700 40px/48px var(--font-family-for-headings);

    /* Body Copy */
    --font-copy-lg: normal normal 18px/28px var(--font-family-for-copy);
    --font-copy-lg-bold: normal bold 18px/28px var(--font-family-for-copy);
    --font-copy-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-copy-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-copy-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-copy-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* For font-copy-allcaps: Use uppercase text (via source text only, for localisation support) */
    --font-copy-allcaps-lg: normal bold 20px/24px var(--font-family-for-copy);
    --font-copy-allcaps-md: normal bold 18px/20px var(--font-family-for-copy);
    --font-copy-allcaps-sm: normal bold 12px/16px var(--font-family-for-copy);

    /* Link fonts (common to all grid sizes and all with text-underline) */
    --font-link-lg: normal normal 18px/24px var(--font-family-for-copy);
    --font-link-lg-bold: normal bold 18px/24px var(--font-family-for-copy);
    --font-link-md: normal normal 16px/24px var(--font-family-for-copy);
    --font-link-md-bold: normal bold 16px/24px var(--font-family-for-copy);
    --font-link-sm: normal normal 14px/20px var(--font-family-for-copy);
    --font-link-sm-semibold: normal 600 14px/20px var(--font-family-for-copy);
    --font-link-sm-bold: normal bold 14px/20px var(--font-family-for-copy);

    /* buttons fonts */
    --font-btn-xl: normal 600 18px/24px var(--font-family-for-copy);
    --font-btn-lg: normal 600 16px/24px var(--font-family-for-copy);
    --font-btn-md: normal 600 16px/20px var(--font-family-for-copy);
    --font-btn-sm: normal 600 14px/20px var(--font-family-for-copy);

    /* caption fonts */
    --font-caption-lg: normal 400 14px/20px var(--font-family-for-copy);
    --font-caption-lg-bold: normal 600 14px/20px var(--font-family-for-copy);
    --font-caption-md: normal 500 12px/18px var(--font-family-for-copy);
    --font-caption-md-bold: normal 600 12px/18px var(--font-family-for-copy);

    /* Quotation */
    --font-quote: italic 400 18px/28px var(--font-family-for-copy);
    --font-quote-bold: normal 400 32px/44px var(--font-family-for-copy);

    /* Input Fields */
    --font-input-xl: normal normal 18px/24px var(--font-family-for-copy);
    --font-input-lg: normal normal 16px/24px var(--font-family-for-copy);
    --font-input-md: normal normal 16px/20px var(--font-family-for-copy);
    --font-input-sm: normal medium 14px/20px var(--font-family-for-copy);
}

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    :root,
    :root .page-container :lang(en) {
        /* Headings */
        --font-h1: normal bold 48px/56px var(--font-family-for-headings);
        --font-h1-spacing: -0.24px;
        --font-h2: normal 600 40px/48px var(--font-family-for-headings);
        --font-h2-spacing: 0;
        --font-h3: normal 600 32px/40px var(--font-family-for-headings);
        --font-h3-spacing: 0.08px;
        --font-h4: normal 600 24px/28px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 600 20px/24px var(--font-family-for-headings);
        --font-h5-spacing: 0.05px;
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h6-spacing: 0;

        /* Captions */
        --font-caption-lg: normal 400 14px/20px var(--font-family-for-copy);
        --font-caption-lg-bold: normal 600 14px/20px var(--font-family-for-copy);
        --font-caption-lg-spacing: 0;
        --font-caption-md: normal 500 12px/18px var(--font-family-for-copy);
        --font-caption-md-bold: normal 600 12px/18px var(--font-family-for-copy);
        --font-caption-md-spacing: 0.02em;

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);

        /* Data */
        --font-data-zero: normal 600 48px/56px var(--font-family-for-headings);
        --font-data-one: normal 600 40px/48px var(--font-family-for-headings);
        --font-data-two: normal 600 32px/40px var(--font-family-for-headings);
    }

    :root :lang(ar) {
        --font-h1: normal 900 48px/56px var(--font-family-mulish);
        --font-h1-spacing: 0;
        --font-h2: normal 700 40px/48px var(--font-family-for-headings);
        --font-h2-spacing: -0.4px;
        --font-h3: normal 700 32px/40px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 700 24px/28px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 700 20px/24px var(--font-family-for-headings);
        --font-h6: normal 700 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 700 56px/64px var(--font-family-for-headings);
        --font-data-one: normal 700 48px/56px var(--font-family-for-headings);
        --font-data-two: normal 700 40px/48px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }

    :root :lang(vi) {
        --font-h1: normal 700 48px/56px var(--font-family-for-headings);
        --font-h1-spacing: -0.72px;
        --font-h2: normal 600 40px/48px var(--font-family-for-headings);
        --font-h2-spacing: -0.6px;
        --font-h3: normal 600 32px/40px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 600 24px/28px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 600 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 600 56px/64px var(--font-family-for-headings);
        --font-data-one: normal 600 48px/56px var(--font-family-for-headings);
        --font-data-two: normal 600 40px/48px var(--font-family-for-headings);


        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }

    :root :lang(kr) {
        --font-h1: normal 900 48px/56px var(--font-family-for-headings);
        --font-h1-spacing: 0;
        --font-h2: normal 700 40px/48px var(--font-family-for-headings);
        --font-h2-spacing: 0;
        --font-h3: normal 700 32px/40px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 700 24px/28px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 700 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 700 56px/64px var(--font-family-for-headings);
        --font-data-one: normal 700 48px/56px var(--font-family-for-headings);
        --font-data-two: normal 700 40px/48px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }

    :root :lang(zh-hant) {
        --font-h1: normal 900 48px/56px var(--font-family-for-headings);
        --font-h1-spacing: 0;
        --font-h2: normal 700 40px/48px var(--font-family-for-headings);
        --font-h2-spacing: 0;
        --font-h3: normal 700 32px/40px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 700 24px/28px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 700 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 700 56px/64px var(--font-family-for-headings);
        --font-data-one: normal 700 48px/56px var(--font-family-for-headings);
        --font-data-two: normal 700 40px/48px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }

    :root :lang(zh-hans) {
        --font-h1: normal 900 48px/56px var(--font-family-noto-sans-sc);
        --font-h1-spacing: 0;
        --font-h2: normal 700 40px/48px var(--font-family-noto-sans-sc);
        --font-h2-spacing: 0;
        --font-h3: normal 700 32px/40px var(--font-family-noto-sans-sc);
        --font-h3-spacing: 0;
        --font-h4: normal 700 24px/28px var(--font-family-noto-sans-sc);
        --font-h4-spacing: 0;
        --font-h5: normal 700 20px/24px var(--font-family-noto-sans-sc);
        --font-h6: normal 600 20px/24px var(--font-family-for-headings);
        --font-h5-spacing: 0;
        --font-data-zero: normal 700 56px/64px var(--font-family-for-headings);
        --font-data-one: normal 700 48px/56px var(--font-family-for-headings);
        --font-data-two: normal 700 40px/48px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-noto-sans-sc);
        --font-quote-bold: normal 400 24px/34px var(--font-family-noto-sans-sc);
    }

    :root :lang(ru) {
        --font-h1: normal 900 48px/56px var(--font-family-for-headings);
        --font-h1-spacing: -0.48px;
        --font-h2: normal 800 40px/48px var(--font-family-for-headings);
        --font-h2-spacing: -0.4px;
        --font-h3: normal 800 32px/40px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 800 24px/28px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 800 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 800 56px/64px var(--font-family-for-headings);
        --font-data-one: normal 800 48px/56px var(--font-family-for-headings);
        --font-data-two: normal 800 40px/48px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }

    :root :lang(th) {
        --font-h1: normal 700 48px/56px var(--font-family-for-headings);
        --font-h1-spacing: 0;
        --font-h2: normal 600 40px/48px var(--font-family-for-headings);
        --font-h2-spacing: 0;
        --font-h3: normal 600 32px/40px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 600 24px/28px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 600 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 600 56px/64px var(--font-family-for-headings);
        --font-data-one: normal 600 48px/56px var(--font-family-for-headings);
        --font-data-two: normal 600 40px/48px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }

    :root :lang(ja) {
        --font-h1: normal 800 48px/56px var(--font-family-for-headings);
        --font-h1-spacing: -0.384px;
        --font-h2: normal 700 40px/48px var(--font-family-for-headings);
        --font-h2-spacing: -0.2px;
        --font-h3: normal 700 32px/40px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 700 24px/28px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 700 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 700 56px/64px var(--font-family-for-headings);
        --font-data-one: normal 700 48px/56px var(--font-family-for-headings);
        --font-data-two: normal 700 40px/48px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    :root,
    :root .page-container :lang(en) {
        /* Headings */
        --font-h1: normal bold 32px/40px var(--font-family-for-headings);
        --font-h1-spacing: 0.08px;
        --font-h2: normal 600 28px/36px var(--font-family-for-headings);
        --font-h2-spacing: 0;
        --font-h3: normal 600 24px/28px var(--font-family-for-headings);
        --font-h3-spacing: 0.12px;
        --font-h4: normal 600 22px/26px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 600 20px/24px var(--font-family-for-headings);
        --font-h5-spacing: 0.05px;
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h6-spacing: 0;

        /* Captions */
        --font-caption-lg: normal 400 14px/20px var(--font-family-for-copy);
        --font-caption-lg-bold: normal 600 14px/20px var(--font-family-for-copy);
        --font-caption-lg-spacing: 0;
        --font-caption-md: normal 500 12px/18px var(--font-family-for-copy);
        --font-caption-md-bold: normal 600 12px/18px var(--font-family-for-copy);
        --font-caption-md-spacing: 0.02em;

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);

        /* Data */
        --font-data-zero: normal 600 40px/48px var(--font-family-for-headings);
        --font-data-one: normal 600 32px/40px var(--font-family-for-headings);
        --font-data-two: normal 600 28px/36px var(--font-family-for-headings);
    }

    :root :lang(ar) {
        --font-h1: normal 900 32px/40px var(--font-family-mulish);
        --font-h1-spacing: 0;
        --font-h2: normal 700 28px/36px var(--font-family-for-headings);
        --font-h2-spacing: -0.07px;
        --font-h3: normal 700 24px/28px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 700 22px/26px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 700 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 700 40px/48px var(--font-family-for-headings);
        --font-data-one: normal 700 32px/40px var(--font-family-for-headings);
        --font-data-two: normal 700 28px/36px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }

    :root :lang(vi) {
        --font-h1: normal 700 32px/40px var(--font-family-for-headings);
        --font-h1-spacing: -0.32px;
        --font-h2: normal 600 28px/36px var(--font-family-for-headings);
        --font-h2-spacing: -0.28px;
        --font-h3: normal 600 24px/28px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 600 22px/26px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 600 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 600 40px/48px var(--font-family-for-headings);
        --font-data-one: normal 600 32px/40px var(--font-family-for-headings);
        --font-data-two: normal 600 28px/36px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }

    :root :lang(kr) {
        --font-h1: normal 900 32px/40px var(--font-family-for-headings);
        --font-h1-spacing: 0;
        --font-h2: normal 700 28px/36px var(--font-family-for-headings);
        --font-h2-spacing: 0;
        --font-h3: normal 700 24px/28px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 700 22px/26px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 700 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 700 40px/48px var(--font-family-for-copy);
        --font-data-one: normal 700 32px/40px var(--font-family-for-copy);
        --font-data-two: normal 700 28px/36px var(--font-family-for-copy);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-headings);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-headings);
    }

    :root :lang(zh-hant) {
        --font-h1: normal 900 32px/40px var(--font-family-for-headings);
        --font-h1-spacing: 0;
        --font-h2: normal 700 28px/36px var(--font-family-for-headings);
        --font-h2-spacing: 0;
        --font-h3: normal 700 24px/28px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 700 22px/26px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 700 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 700 40px/48px var(--font-family-for-headings);
        --font-data-one: normal 700 32px/40px var(--font-family-for-headings);
        --font-data-two: normal 700 28px/36px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }

    :root :lang(zh-hans) {
        --font-h1: normal 900 32px/40px var(--font-family-for-headings);
        --font-h1-spacing: 0;
        --font-h2: normal 700 28px/36px var(--font-family-for-headings);
        --font-h2-spacing: 0;
        --font-h3: normal 700 24px/28px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 700 22px/26px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 700 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-headings);
        --font-h5-spacing: 0;
        --font-data-zero: normal 700 40px/48px var(--font-family-for-headings);
        --font-data-one: normal 700 32px/40px var(--font-family-for-headings);
        --font-data-two: normal 700 28px/36px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }

    :root :lang(ru) {
        --font-h1: normal 900 32px/40px var(--font-family-for-headings);
        --font-h1-spacing: -0.08px;
        --font-h2: normal 800 28px/36px var(--font-family-for-headings);
        --font-h2-spacing: -0.07px;
        --font-h3: normal 800 24px/28px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 800 22px/26px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 800 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 800 40px/48px var(--font-family-for-headings);
        --font-data-one: normal 800 32px/40px var(--font-family-for-headings);
        --font-data-two: normal 800 28px/36px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }

    :root :lang(th) {
        --font-h1: normal 700 32px/40px var(--font-family-for-headings);
        --font-h1-spacing: 0;
        --font-h2: normal 600 28px/36px var(--font-family-for-headings);
        --font-h2-spacing: 0;
        --font-h3: normal 600 24px/28px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 600 22px/26px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 600 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 600 40px/48px var(--font-family-for-headings);
        --font-data-one: normal 600 32px/40px var(--font-family-for-headings);
        --font-data-two: normal 600 28px/36px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }

    :root :lang(ja) {
        --font-h1: normal 800 32px/40px var(--font-family-for-headings);
        --font-h1-spacing: -0.16px;
        --font-h2: normal 700 28px/36px var(--font-family-for-headings);
        --font-h2-spacing: -0.07px;
        --font-h3: normal 700 24px/28px var(--font-family-for-headings);
        --font-h3-spacing: 0;
        --font-h4: normal 700 22px/26px var(--font-family-for-headings);
        --font-h4-spacing: 0;
        --font-h5: normal 700 20px/24px var(--font-family-for-headings);
        --font-h6: normal bold 18px/24px var(--font-family-for-copy);
        --font-h5-spacing: 0;
        --font-data-zero: normal 700 40px/48px var(--font-family-for-headings);
        --font-data-one: normal 700 32px/40px var(--font-family-for-headings);
        --font-data-two: normal 700 28px/36px var(--font-family-for-headings);

        /* Quotation */
        --font-quote: italic normal 18px/28px var(--font-family-for-copy);
        --font-quote-bold: normal 400 24px/34px var(--font-family-for-copy);
    }
}
/* endregion */

/* region MEGA Atomic Component: Colour */

/**
 * See https://www.figma.com/file/U90j8OCD0pvFFO3fO1YlkN/Website-design-system-v1?node-id=112%3A12
 */

:root {
    --color-brand-red: #DD1405;
    --color-brand-black: #04101E;
    --color-brand-white: #FFFFFF;
}

/* region Light Theme */

:root {
    --color-bg-page: #FFFFFF;
    --color-bg-surface-1: #F9F9FB;
    --color-bg-surface-2: #F5F5F6;
    --color-bg-surface-3: #EDEDED;
    --color-bg-transparent: #0000000D;

    /* Per designer request: only these bg-tinted colours are added; others subject to change */
    --color-bg-tinted-peach: #F8D0CD;
    --color-bg-tinted-pink: #FCE8E6;
    --color-bg-tinted-pale-pink: #FDF3F3;
    --color-bg-tinted-blue: #F8FCFE;

    --color-heading: #04101E;
    --color-copy-primary: #333333;
    --color-copy-secondary: #6E6E6E;

    --color-link-enabled: #04101E;
    --color-link-hovered: #38404A;
    --color-link-pressed: #515861;
    --color-link-disabled: #D4D4D4;
    --color-link-visited: #606060;

    --color-system-success: #00B256;
    --color-system-alert: #E09706;
    --color-system-error: #E40046;
    --color-system-info: #2490B2;

    --color-grey-50: #F8F8F9;
    --color-grey-100: #EDEDEE;
    --color-grey-150: #E2E3E3;
    --color-grey-200: #D7D8D9;
    --color-grey-250: #CCCDCE;
    --color-grey-300: #C1C2C4;
    --color-grey-350: #B6B7B9;
    --color-grey-400: #AAACAF;
    --color-grey-450: #9FA1A4;
    --color-grey-500: #94979A;
    --color-grey-550: #898C8F;
    --color-grey-600: #7E8185;
    --color-grey-650: #73767A;
    --color-grey-700: #686B70;
    --color-grey-750: #5D6065;
    --color-grey-800: #52555B;
    --color-grey-850: #464B50;
    --color-grey-900: #3B4046;
    --color-grey-950: #30353B;
    --color-grey-1000: #1A1F26;

    --color-primary-red-50: #E08F85;
    --color-primary-red-100: #DC796E;
    --color-primary-red-200: #D76457;
    --color-primary-red-300: #D35040;
    --color-primary-red-400: #CE3F2D;
    --color-primary-red-500: #DD1405;
    --color-primary-red-600: #B72C1C;
    --color-primary-red-700: #A22618;
    --color-primary-red-800: #8E2114;
    --color-primary-red-900: #7A1C10;

    --color-primary-black-50: #EDEDED;
    --color-primary-black-100: #B5B7BC;
    --color-primary-black-200: #9C9FA4;
    --color-primary-black-300: #8F9195;
    --color-primary-black-400: #83888E;
    --color-primary-black-500: #697077;
    --color-primary-black-600: #515861;
    --color-primary-black-700: #38404A;
    --color-primary-black-800: #1F2834;
    --color-primary-black-900: #04101E;

    /* TODO: add secondary colours */
    --color-secondary-cobalt-50: #F5F9FF;
    --color-secondary-cobalt-100: #ADC1EA;
    --color-secondary-cobalt-200: #82A2DD;
    --color-secondary-cobalt-300: #5784D1;
    --color-secondary-cobalt-400: #2B67C3;
    --color-secondary-cobalt-500: #004BB5;
    --color-secondary-cobalt-600: #003C9C;
    --color-secondary-cobalt-700: #002E82;
    --color-secondary-cobalt-800: #002267;
    --color-secondary-cobalt-900: #00174C;

    --color-opacities-05: rgba(0, 0, 0, 0.05);
    --color-opacities-10: rgba(0, 0, 0, 0.1);
    --color-opacities-30: rgba(0, 0, 0, 0.3);
    --color-opacities-50: rgba(0, 0, 0, 0.5);
    --color-opacities-70: rgba(0, 0, 0, 0.7);
    --color-opacities-90: rgba(0, 0, 0, 0.9);
}

/* endregion */

/* region Dark Theme */

.theme-dark {
    --color-bg-page: #1A1F26;
    --color-bg-surface-1: #1F242A;
    --color-bg-surface-2: #23282F;
    --color-bg-surface-3: #2F333C;
    --color-bg-transparent: #00000033;

    --color-bg-tinted-peach: #3E2527;
    --color-bg-tinted-pink: #402D30;
    --color-bg-tinted-pale-pink: #423539;

    --color-heading: #FFFFFF;
    --color-copy-primary: #E5E5E5;
    --color-copy-secondary: #999999;

    --color-link-enabled: #EDEDED;
    --color-link-hovered: #B5B7BC;
    --color-link-pressed: #9C94A4;
    --color-link-disabled: #686B70;
    --color-link-visited: #A3A3A3;

    --color-system-success: #66E79D;
    --color-system-alert: #F0CF6D;
    --color-system-error: #F5828B;
    --color-system-info: #8BC3D9;

    --color-grey-50: #1A1F26;
    --color-grey-100: #30353B;
    --color-grey-150: #3B4046;
    --color-grey-200: #464B50;
    --color-grey-250: #52555B;
    --color-grey-300: #5D6065;
    --color-grey-350: #686B70;
    --color-grey-400: #73767A;
    --color-grey-450: #7E8185;
    --color-grey-500: #898C8F;
    --color-grey-550: #94979A;
    --color-grey-600: #9FA1A4;
    --color-grey-650: #AAACAF;
    --color-grey-700: #B6B7B9;
    --color-grey-750: #C1C2C4;
    --color-grey-800: #CCCDCE;
    --color-grey-850: #D7D8D9;
    --color-grey-900: #E2E3E3;
    --color-grey-950: #EDEDEE;
    --color-grey-1000: #F8F8F9;

    --color-primary-red-50: #7A1C10;
    --color-primary-red-100: #8E2114;
    --color-primary-red-200: #A22618;
    --color-primary-red-300: #B72C1C;
    --color-primary-red-400: #DD1405;
    --color-primary-red-500: #CE3F2D;
    --color-primary-red-600: #D35040;
    --color-primary-red-700: #D76457;
    --color-primary-red-800: #DC796E;
    --color-primary-red-900: #E08F85;

    --color-primary-black-50: #04101E;
    --color-primary-black-100: #1F2834;
    --color-primary-black-200: #38404A;
    --color-primary-black-300: #515861;
    --color-primary-black-400: #697077;
    --color-primary-black-500: #83888E;
    --color-primary-black-600: #8F9195;
    --color-primary-black-700: #9C9FA4;
    --color-primary-black-800: #B5B7BC;
    --color-primary-black-900: #EDEDED;

    /* TODO: add secondary colours */
    --color-secondary-cobalt-50: #00174C;
    --color-secondary-cobalt-100: #002267;
    --color-secondary-cobalt-200: #002E82;
    --color-secondary-cobalt-300: #003C9C;
    --color-secondary-cobalt-400: #004BB5;
    --color-secondary-cobalt-500: #2B67C3;
    --color-secondary-cobalt-600: #5784D1;
    --color-secondary-cobalt-700: #82A2DD;
    --color-secondary-cobalt-800: #ADC1EA;
    --color-secondary-cobalt-900: #D9E1F5;

    --color-opacities-05: rgba(255, 255, 255, 0.05);
    --color-opacities-10: rgba(255, 255, 255, 0.1);
    --color-opacities-30: rgba(255, 255, 255, 0.3);
    --color-opacities-50: rgba(255, 255, 255, 0.5);
    --color-opacities-70: rgba(255, 255, 255, 0.7);
    --color-opacities-90: rgba(255, 255, 255, 0.9);
}

/* endregion */

/* endregion */

/* region Transition */

:root {
    --transition-all: all 200ms ease-in-out;
    --transition-transform: transform 300ms ease-out;
    --transition-opacity: opacity 200ms ease-in-out;
    --transition-maxheight: max-height 200ms ease-in-out;
}

/* endregion */

/* region Element Defaults */

body {
    background-color: var(--color-bg-page);
    font: var(--font-copy-md);
    color: var(--color-copy-primary);
}

p {
    margin: 0; /* We never want default margin */
}

h1, h2, h3, h4, h5, h6 {
    color: var(--color-heading);
    margin: 0; /* We never want default margin */
}

h1 {
    font: var(--font-h1);
    letter-spacing: var(--font-h1-spacing);
}
h2 {
    font: var(--font-h2);
    letter-spacing: var(--font-h2-spacing);
}
h3 {
    font: var(--font-h3);
    letter-spacing: var(--font-h3-spacing);
}
h4 {
    font: var(--font-h4);
    letter-spacing: var(--font-h4-spacing);
}
h5 {
    font: var(--font-h5);
    letter-spacing: var(--font-h5-spacing);
}

h6 {
    font: var(--font-h6);
    letter-spacing: var(--font-h6-spacing);
}
/* endregion */

/**
 * Variable declarations and styling for icons common to all MEGA Wordpress sites.
 *
 * Design file: https://www.figma.com/file/pYAcv0NZhLfqe9NRLaHPbG/Brand-library?node-id=22%3A3
 * M / S: medium / small, T / R: thin (light) / regular, O / S: outline / solid
 */

:root {
    /* region Mono icons */

    --icon-airplay-mto: url('../../megalib/images/airplay-mto.svg');
    --icon-alert-triangle-sro: url('../../megalib/images/alert-triangle-sro.svg');
    --icon-archive-arrow-up-mto: url('../../megalib/images/archive-arrow-up-mto.svg');
    --icon-arrow-left-mro: url('../../megalib/images/arrow-left-mro.svg');
    --icon-arrow-right-mro: url('../../megalib/images/arrow-right-mro.svg');
    --icon-atom-mro: url('../../megalib/images/atom-mro.svg');
    --icon-atom-mto: url('../../megalib/images/atom-mto.svg');
    --icon-bell-ringing-mto: url('../../megalib/images/bell-ringing-mto.svg');
    --icon-bucket-triangle-mro: url('../../megalib/images/bucket-triangle-mro.svg');
    --icon-calendar-01-mro: url('../../megalib/images/calendar-01-mro.svg');
    --icon-cast-mto: url('../../megalib/images/cast-mto.svg');
    --icon-check-mro: url('../../megalib/images/check-mro.svg');
    --icon-check-circle-mro: url('../../megalib/images/check-circle-mro.svg');
    --icon-check-circle-mto: url('../../megalib/images/check-circle-mto.svg');
    --icon-chevrons-left-sro: url('../../megalib/images/chevrons-left-sro.svg');
    --icon-chevrons-right-sro: url('../../megalib/images/chevrons-right-sro.svg');
    --icon-chevron-down-mro: url('../../megalib/images/chevron-down-mro.svg');
    --icon-chevron-left-sro: url('../../megalib/images/chevron-left-sro.svg');
    --icon-chevron-right-sro: url('../../megalib/images/chevron-right-sro.svg');
    --icon-chevron-up-mro: url('../../megalib/images/chevron-up-mro.svg');
    --icon-clock-rotate-mto: url('../../megalib/images/clock-rotate-mto.svg');
    --icon-cloud-mro: url('../../megalib/images/cloud-mro.svg');
    --icon-cloud-mrs: url('../../megalib/images/cloud-mrs.svg');
    --icon-cloud-download-mto: url('../../megalib/images/cloud-download-mto.svg');
    --icon-cloud-mto: url('../../megalib/images/cloud-mto.svg');
    --icon-cloud-upload-mro: url('../../megalib/images/cloud-upload-mro.svg');
    --icon-cloud-upload-mto: url('../../megalib/images/cloud-upload-mto.svg');
    --icon-code-mro: url('../../megalib/images/code-mro.svg');
    --icon-code-browser-mro: url('../../megalib/images/code-browser-mro.svg');
    --icon-code-browser-mto: url('../../megalib/images/code-browser-mto.svg');
    --icon-copy-mro: url('../../megalib/images/copy-mro.svg');
    --icon-crown-mto: url('../../megalib/images/crown-mto.svg');
    --icon-currency-dollar-circle-mro: url('../../megalib/images/currency-dollar-circle-mro.svg');
    --icon-currency-dollar-circle-mto: url('../../megalib/images/currency-dollar-circle-mto.svg');
    --icon-database-mro: url('../../megalib/images/database-mro.svg');
    --icon-database-mto: url('../../megalib/images/database-mto.svg');
    --icon-more-horizontal-mro: url('../../megalib/images/more-horizontal-mro.svg');
    --icon-move-mto: url('../../megalib/images/move-mto.svg');
    --icon-edit-3-mto: url('../../megalib/images/edit-3-mto.svg');
    --icon-emoji-happy-mto: url('../../megalib/images/emoji-happy-mto.svg');
    --icon-emoji-smile-mto: url('../../megalib/images/emoji-smile-mto.svg');
    --icon-emoji-wink-mto: url('../../megalib/images/emoji-wink-mto.svg');
    --icon-expand-mro: url('../../megalib/images/expand-mro.svg');
    --icon-expand-mto: url('../../megalib/images/expand-mto.svg');
    --icon-file-attachment-02-mro: url('../../megalib/images/file-attachment-02-mro.svg');
    --icon-file-edit-mro: url('../../megalib/images/file-edit-mro.svg');
    --icon-file-text-mro: url('../../megalib/images/file-text-mro.svg');
    --icon-file-text-mto: url('../../megalib/images/file-text-mto.svg');
    --icon-file-upload-mto: url('../../megalib/images/file-upload-mto.svg');
    --icon-filter-mro: url('../../megalib/images/filter-mro.svg');
    --icon-folder-arrow-01-mto: url('../../megalib/images/folder-arrow-01-mto.svg');
    --icon-folder-lock-mro: url('../../megalib/images/folder-lock-mro.svg');
    --icon-folder-mro: url('../../megalib/images/folder-mro.svg');
    --icon-folder-sync-mto: url('../../megalib/images/folder-sync-mto.svg');
    --icon-globe-01-mro: url('../../megalib/images/globe-01-mro.svg');
    --icon-globe-02-mto: url('../../megalib/images/globe-02-mto.svg');
    --icon-globe-eurafrica-mro: url('../../megalib/images/globe-eurafrica-mro.svg');
    --icon-globe-eurafrica-mto: url('../../megalib/images/globe-eurafrica-mto.svg');
    --icon-hard-drive-mro: url('../../megalib/images/hard-drive-mro.svg');
    --icon-headset-mro: url('../../megalib/images/headset-mro.svg');
    --icon-headset-mto: url('../../megalib/images/headset-mto.svg');
    --icon-heart-mto: url('../../megalib/images/heart-mto.svg');
    --icon-help-circle-mro: url('../../megalib/images/help-circle-mro.svg');
    --icon-image-01-mto: url('../../megalib/images/image-01-mto.svg');
    --icon-info-mro: url('../../megalib/images/info-mro.svg');
    --icon-key-01-mro: url('../../megalib/images/key-01-mro.svg');
    --icon-key-01-mto: url('../../megalib/images/key-01-mto.svg');
    --icon-lightbulb-mro: url('../../megalib/images/lightbulb-mro.svg');
    --icon-link-01-mro: url('../../megalib/images/link-01-mro.svg');
    --icon-lock-mro: url('../../megalib/images/lock-mro.svg');
    --icon-lock-mto: url('../../megalib/images/lock-mto.svg');
    --icon-mail-mto: url('../../megalib/images/mail-mto.svg');
    --icon-map-pin-mto: url('../../megalib/images/map-pin-mto.svg');
    --icon-mega-mto: url('../../megalib/images/mega-mto.svg');
    --icon-menu-mro: url('../../megalib/images/menu-mro.svg');
    --icon-message-check-mto: url('../../megalib/images/message-check-mto.svg');
    --icon-message-circle-mto: url('../../megalib/images/message-circle-mto.svg');
    --icon-message-square-mro: url('../../megalib/images/message-square-mro.svg');
    --icon-minus-mro: url('../../megalib/images/minus-mro.svg');
    --icon-minus-circle-mro: url('../../megalib/images/minus-circle-mro.svg');
    --icon-monitor-mro: url('../../megalib/images/monitor-mro.svg');
    --icon-monitor-mto: url('../../megalib/images/monitor-mto.svg');
    --icon-moon-mro: url('../../megalib/images/moon-mro.svg');
    --icon-objects-mro: url('../../megalib/images/objects-mro.svg');
    --icon-palette-mto: url('../../megalib/images/palette-mto.svg');
    --icon-password-mro: url('../../megalib/images/password-mro.svg');
    --icon-play-square-mto: url('../../megalib/images/play-square-mto.svg');
    --icon-plus-mro: url('../../megalib/images/plus-mro.svg');
    --icon-plus-circle-mro: url('../../megalib/images/plus-circle-mro.svg');
    --icon-printer-mro: url('../images/printer-mro.svg');
    --icon-printer-mto: url('../images/printer-mto.svg');
    --icon-rocket-mto: url('../../megalib/images/rocket-mto.svg');
    --icon-rss: url('../../megalib/images/rss.svg');
    --icon-search-sro: url('../../megalib/images/search-sro.svg');
    --icon-server-mto: url('../../megalib/images/server-mto.svg');
    --icon-share-mro: url('../../megalib/images/share-mro.svg');
    --icon-share-mto: url('../../megalib/images/share-mto.svg');
    --icon-shield-mro: url('../../megalib/images/shield-mro.svg');
    --icon-shield-mto: url('../../megalib/images/shield-mto.svg');
    --icon-sliders-horizontal-01-mro: url('../../megalib/images/sliders-horizontal-01-mro.svg');
    --icon-sliders-vertical-01-mto: url('../../megalib/images/sliders-vertical-01-mto.svg');
    --icon-star-mto: url('../../megalib/images/star-mto.svg');
    --icon-star-spark-mto: url('../../megalib/images/star-spark-mto.svg');
    --icon-sun-mro: url('../../megalib/images/sun-mro.svg');
    --icon-sync-mro: url('../../megalib/images/sync-mro.svg');
    --icon-sync-mto: url('../../megalib/images/sync-mto.svg');
    --icon-user-circle-mto: url('../../megalib/images/user-circle-mto.svg');
    --icon-user-plus-mto: url('../../megalib/images/user-plus-mto.svg');
    --icon-users-mro: url('../../megalib/images/users-mro.svg');
    --icon-users-mto: url('../../megalib/images/users-mto.svg');
    --icon-video-mro: url('../../megalib/images/video-mro.svg');
    --icon-video-mto: url('../../megalib/images/video-mto.svg');
    --icon-x-mro: url('../../megalib/images/x-mro.svg');
    --icon-x-sto: url('../../megalib/images/x-sto.svg');
    --icon-zap-mro: url('../../megalib/images/zap-mro.svg');
    --icon-zap-mto: url('../../megalib/images/zap-mto.svg');
    --icon-zap-off-mro: url('../../megalib/images/zap-off-mro.svg');
    --icon-zap-off-mto: url('../../megalib/images/zap-off-mto.svg');

    /* endregion */

    /* region Duotone icons */

    --icon-android: url('../images/android-01-duotone.svg');
    --icon-brain: url('../../megalib/images/brain-duotone.svg');
    --icon-bug: url('../../megalib/images/bug-duotone.svg');
    --icon-c-plus-plus: url('../../megalib/images/c++-duotone.svg');
    --icon-CMD: url('../../megalib/images/CMD-duotone.svg');
    --icon-copyright: url('../../megalib/images/copyright.svg');
    --icon-extension: url('../../megalib/images/extension-duotone.svg');
    --icon-hand: url('../../megalib/images/hand-duotone.svg');
    --icon-iOS: url('../../megalib/images/iOS-duotone.svg');
    --icon-lifebuoy: url('../../megalib/images/lifebuoy-duotone.svg');
    --icon-lightbulb: url('../../megalib/images/lightbulb-duotone.svg');
    --icon-media: url('../../megalib/images/media-duotone.svg');
    --icon-mega-sync: url('../images/sync-duotone.svg');
    --icon-privacy: url('../../megalib/images/privacy-duotone.svg');
    --icon-SDK: url('../../megalib/images/SDK-duotone.svg');
    --icon-scale: url('../../megalib/images/scale-duotone.svg');
    --icon-shield-duotone: url('../../megalib/images/shield-duotone.svg');
    --icon-thunderbird: url('../../megalib/images/thunderbird.svg');
    --icon-tm: url('../../megalib/images/tm-duotone.svg');
    --icon-web: url('../images/web-01-duotone.svg');

    /* endregion */

    /* region Social icons */

    --icon-social-facebook-m: url('../../megalib/images/social-facebook-m.svg');
    --icon-social-instagram-m: url('../../megalib/images/social-instagram-m.svg');
    --icon-social-linkedin-m: url('../../megalib/images/social-linkedin-m.svg');
    --icon-social-threads-m: url('../../megalib/images/social-threads-m.svg');
    --icon-social-x-m: url('../../megalib/images/social-x-m.svg');
    --icon-social-youtube-m: url('../../megalib/images/social-youtube-m.svg');

    /* endregion */

    --icon-rectangle-748: url('../../megalib/images/rectangle-748.svg');
    --icon-union-start: url('../../megalib/images/union.svg');
    --icon-union-end: url('../../megalib/images/unionend.svg');
}

.icon-box {
    --icon-size: 24px;
    flex-shrink: 0; /* Don't shrink if used in a flexbox context */
    width: var(--icon-size);
    height: var(--icon-size);
}

.icon {
    display: block;
    width: 100%;
    height: 100%;
    mask-position: center;
    -webkit-mask-position: center;
    mask-size: contain;
    -webkit-mask-size: contain;
    mask-repeat: no-repeat;
    -webkit-mask-repeat: no-repeat;
    color: inherit;
    background-color: currentColor;
}

/* region Mono icons */

.icon.alert-triangle {
    mask-image: var(--icon-alert-triangle-sro);
    -webkit-mask-image: var(--icon-alert-triangle-sro);
}

.icon.airplay-mto {
    mask-image: var(--icon-airplay-mto);
    -webkit-mask-image: var(--icon-airplay-mto);
}

.icon.archive-arrow-up-mto {
    mask-image: var(--icon-archive-arrow-up-mto);
    -webkit-mask-image: var(--icon-archive-arrow-up-mto);
}

.icon.arrow-left {
    mask-image: var(--icon-arrow-left-mro);
    -webkit-mask-image: var(--icon-arrow-left-mro);
}

.icon.arrow-right {
    mask-image: var(--icon-arrow-right-mro);
    -webkit-mask-image: var(--icon-arrow-right-mro);
}

.icon.atom-mro {
    mask-image: var(--icon-atom-mro);
    -webkit-mask-image: var(--icon-atom-mro);
}

.icon.atom-mto {
    mask-image: var(--icon-atom-mto);
    -webkit-mask-image: var(--icon-atom-mto);
}

.icon.bell-ringing-mto {
    mask-image: var(--icon-bell-ringing-mto);
    -webkit-mask-image: var(--icon-bell-ringing-mto);
}

.icon.bucket-triangle-mro {
    mask-image: var(--icon-bucket-triangle-mro);
    -webkit-mask-image: var(--icon-bucket-triangle-mro);
}

.icon.calendar {
    mask-image: var(--icon-calendar-01-mro);
    -webkit-mask-image: var(--icon-calendar-01-mro);
}

.icon.cast-mto {
    mask-image: var(--icon-cast-mto);
    -webkit-mask-image: var(--icon-cast-mto);
}

.icon.check {
    mask-image: var(--icon-check-mro);
    -webkit-mask-image: var(--icon-check-mro);
}

.icon.check-circle {
    mask-image: var(--icon-check-circle-mro);
    -webkit-mask-image: var(--icon-check-circle-mro);
}

.icon.check-circle-mto {
    mask-image: var(--icon-check-circle-mto);
    -webkit-mask-image: var(--icon-check-circle-mto);
}

.icon.chevron-2left {
    mask-image: var(--icon-chevrons-left-sro);
    -webkit-mask-image: var(--icon-chevrons-left-sro);
}

.icon.chevron-2right {
    mask-image: var(--icon-chevrons-right-sro);
    -webkit-mask-image: var(--icon-chevrons-right-sro);
}

.icon.chevron-down {
    mask-image: var(--icon-chevron-down-mro);
    -webkit-mask-image: var(--icon-chevron-down-mro);
}

.icon.chevron-left {
    mask-image: var(--icon-chevron-left-sro);
    -webkit-mask-image: var(--icon-chevron-left-sro);
}

.icon.chevron-right {
    mask-image: var(--icon-chevron-right-sro);
    -webkit-mask-image: var(--icon-chevron-right-sro);
}

.icon.chevron-up {
    mask-image: var(--icon-chevron-up-mro);
    -webkit-mask-image: var(--icon-chevron-up-mro);
}

.icon.clock-rotate-mto {
    mask-image: var(--icon-clock-rotate-mto);
    -webkit-mask-image: var(--icon-clock-rotate-mto);
}

.icon.cloud {
    mask-image: var(--icon-cloud-mro);
    -webkit-mask-image: var(--icon-cloud-mro);
}

.icon.cloud-download-mto {
    mask-image: var(--icon-cloud-download-mto);
    -webkit-mask-image: var(--icon-cloud-download-mto);
}

.icon.cloud-mto {
    mask-image: var(--icon-cloud-mto);
    -webkit-mask-image: var(--icon-cloud-mto);
}

.icon.cloud-upload-mro {
    mask-image: var(--icon-cloud-upload-mro);
    -webkit-mask-image: var(--icon-cloud-upload-mro);
}

.icon.cloud-upload-mto {
    mask-image: var(--icon-cloud-upload-mto);
    -webkit-mask-image: var(--icon-cloud-upload-mto);
}

.icon.cloud-white {
    mask-image: var(--icon-cloud-mrs);
    -webkit-mask-image: var(--icon-cloud-mrs);
}

.icon.code {
    mask-image: var(--icon-code-mro);
    -webkit-mask-image: var(--icon-code-mro);
}

.icon.code-browser-mro {
    mask-image: var(--icon-code-browser-mro);
    -webkit-mask-image: var(--icon-code-browser-mro);
}

.icon.code-browser-mto {
    mask-image: var(--icon-code-browser-mto);
    -webkit-mask-image: var(--icon-code-browser-mto);
}

.icon.copy {
    mask-image: var(--icon-copy-mro);
    -webkit-mask-image: var(--icon-copy-mro);
}

.icon.crown-mto {
    mask-image: var(--icon-crown-mto);
    -webkit-mask-image: var(--icon-crown-mto);
}

.icon.currency-dollar-circle-mro {
    mask-image: var(--icon-currency-dollar-circle-mro);
    -webkit-mask-image: var(--icon-currency-dollar-circle-mro);
}

.icon.currency-dollar-circle-mto {
    mask-image: var(--icon-currency-dollar-circle-mto);
    -webkit-mask-image: var(--icon-currency-dollar-circle-mto);
}

.icon.database {
    mask-image: var(--icon-database-mro);
    -webkit-mask-image: var(--icon-database-mro);
}

.icon.database-mto {
    mask-image: var(--icon-database-mto);
    -webkit-mask-image: var(--icon-database-mto);
}

.icon.edit-3-mto {
    mask-image: var(--icon-edit-3-mto);
    -webkit-mask-image: var(--icon-edit-3-mto);
}

.icon.emoji-happy-mto {
    mask-image: var(--icon-emoji-happy-mto);
    -webkit-mask-image: var(--icon-emoji-happy-mto);
}

.icon.emoji-smile-mto {
    mask-image: var(--icon-emoji-smile-mto);
    -webkit-mask-image: var(--icon-emoji-smile-mto);
}

.icon.emoji-wink-mto {
    mask-image: var(--icon-emoji-wink-mto);
    -webkit-mask-image: var(--icon-emoji-wink-mto);
}

.icon.expand-mro {
    mask-image: var(--icon-expand-mro);
    -webkit-mask-image: var(--icon-expand-mro);
}

.icon.expand-mto {
    mask-image: var(--icon-expand-mto);
    -webkit-mask-image: var(--icon-expand-mto);
}

.icon.file-attachment-02-mro {
    mask-image: var(--icon-file-attachment-02-mro);
    -webkit-mask-image: var(--icon-file-attachment-02-mro);
}

.icon.file-edit-mro {
    mask-image: var(--icon-file-edit-mro);
    -webkit-mask-image: var(--icon-file-edit-mro);
}

.icon.file-text-mro {
    mask-image: var(--icon-file-text-mro);
    -webkit-mask-image: var(--icon-file-text-mro);
}

.icon.file-text-mto {
    mask-image: var(--icon-file-text-mto);
    -webkit-mask-image: var(--icon-file-text-mto);
}

.icon.file-upload-mto {
    mask-image: var(--icon-file-upload-mto);
    -webkit-mask-image: var(--icon-file-upload-mto);
}

.icon.file-filter {
    mask-image: var(--icon-filter-mro);
    -webkit-mask-image: var(--icon-filter-mro);
}

.icon.folder-arrow-01-mto {
    mask-image: var(--icon-folder-arrow-01-mto);
    -webkit-mask-image: var(--icon-folder-arrow-01-mto);
}

.icon.folder-lock-mro {
    mask-image: var(--icon-folder-lock-mro);
    -webkit-mask-image: var(--icon-folder-lock-mro);
}

.icon.folder-mro {
    mask-image: var(--icon-folder-mro);
    -webkit-mask-image: var(--icon-folder-mro);
}

.icon.folder-sync-mto {
    mask-image: var(--icon-folder-sync-mto);
    -webkit-mask-image: var(--icon-folder-sync-mto);
}

.icon.globe {
    mask-image: var(--icon-globe-01-mro);
    -webkit-mask-image: var(--icon-globe-01-mro);
}

.icon.globe-02-mto {
    mask-image: var(--icon-globe-02-mto);
    -webkit-mask-image: var(--icon-globe-02-mto);
}

.icon.globe-eurafrica-mro {
    mask-image: var(--icon-globe-eurafrica-mro);
    -webkit-mask-image: var(--icon-globe-eurafrica-mro);
}

.icon.globe-eurafrica-mto {
    mask-image: var(--icon-globe-eurafrica-mto);
    -webkit-mask-image: var(--icon-globe-eurafrica-mto);
}

.icon.hard-drive {
    mask-image: var(--icon-hard-drive-mro);
    -webkit-mask-image: var(--icon-hard-drive-mro);
}

.icon.headset-mro {
    mask-image: var(--icon-headset-mro);
    -webkit-mask-image: var(--icon-headset-mro);
}

.icon.headset-mto {
    mask-image: var(--icon-headset-mto);
    -webkit-mask-image: var(--icon-headset-mto);
}

.icon.heart-mto {
    mask-image: var(--icon-heart-mto);
    -webkit-mask-image: var(--icon-heart-mto);
}

.icon.help-circle {
    mask-image: var(--icon-help-circle-mro);
    -webkit-mask-image: var(--icon-help-circle-mro);
}

.icon.image-01-mto {
    mask-image: var(--icon-image-01-mto);
    -webkit-mask-image: var(--icon-image-01-mto);
}

.icon.info {
    mask-image: var(--icon-info-mro);
    -webkit-mask-image: var(--icon-info-mro);
}

.icon.key-01-mro {
    mask-image: var(--icon-key-01-mro);
    -webkit-mask-image: var(--icon-key-01-mro);
}

.icon.key-01-mto {
    mask-image: var(--icon-key-01-mto);
    -webkit-mask-image: var(--icon-key-01-mto);
}

.icon.lightbulb-mro {
    mask-image: var(--icon-lightbulb-mro);
    -webkit-mask-image: var(--icon-lightbulb-mro);
}

.icon.link-01-mro {
    mask-image: var(--icon-link-01-mro);
    -webkit-mask-image: var(--icon-link-01-mro);
}

.icon.lock-mro {
    mask-image: var(--icon-lock-mro);
    -webkit-mask-image: var(--icon-lock-mro);
}

.icon.lock-mto {
    mask-image: var(--icon-lock-mto);
    -webkit-mask-image: var(--icon-lock-mto);
}

.icon.mail {
    mask-image: var(--icon-mail-mto);
    -webkit-mask-image: var(--icon-mail-mto);
}

.icon.mail-mto {
    mask-image: var(--icon-mail-mto);
    -webkit-mask-image: var(--icon-mail-mto);
}

.icon.map-pin {
    mask-image: var(--icon-map-pin-mto);
    -webkit-mask-image: var(--icon-map-pin-mto);
}

.icon.map-pin-mto {
    mask-image: var(--icon-map-pin-mto);
    -webkit-mask-image: var(--icon-map-pin-mto);
}

.icon.mega-mto {
    mask-image: var(--icon-mega-mto);
    -webkit-mask-image: var(--icon-mega-mto);
}

.icon.menu {
    mask-image: var(--icon-menu-mro);
    -webkit-mask-image: var(--icon-menu-mro);
}

.icon.message-check-mto {
    mask-image: var(--icon-message-check-mto);
    -webkit-mask-image: var(--icon-message-check-mto);
}

.icon.message-circle-mto {
    mask-image: var(--icon-message-circle-mto);
    -webkit-mask-image: var(--icon-message-circle-mto);
}

.icon.message-square {
    mask-image: var(--icon-message-square-mro);
    -webkit-mask-image: var(--icon-message-square-mro);
}

.icon.minus {
    mask-image: var(--icon-minus-mro);
    -webkit-mask-image: var(--icon-minus-mro);
}

.icon.minus-circle-mro {
    mask-image: var(--icon-minus-circle-mro);
    -webkit-mask-image: var(--icon-minus-circle-mro);
}

.icon.monitor-mro {
    mask-image: var(--icon-monitor-mro);
    -webkit-mask-image: var(--icon-monitor-mro);
}

.icon.monitor-mto {
    mask-image: var(--icon-monitor-mto);
    -webkit-mask-image: var(--icon-monitor-mto);
}

.icon.moon {
    mask-image: var(--icon-moon-mro);
    -webkit-mask-image: var(--icon-moon-mro);
}

.icon.more-horizontal-mro {
    mask-image: var(--icon-more-horizontal-mro);
    -webkit-mask-image: var(--icon-more-horizontal-mro);
}

.icon.move-mto {
    mask-image: var(--icon-move-mto);
    -webkit-mask-image: var(--icon-move-mto);
}

.icon.objects-mro {
    mask-image: var(--icon-objects-mro);
    -webkit-mask-image: var(--icon-objects-mro);
}

.icon.palette-mto {
    mask-image: var(--icon-palette-mto);
    -webkit-mask-image: var(--icon-palette-mto);
}

.icon.password-mro {
    mask-image: var(--icon-password-mro);
    -webkit-mask-image: var(--icon-password-mro);
}

.icon.play-square-mto {
    mask-image: var(--icon-play-square-mto);
    -webkit-mask-image: var(--icon-play-square-mto);
}

.icon.plus {
    mask-image: var(--icon-plus-mro);
    -webkit-mask-image: var(--icon-plus-mro);
}

.icon.plus-circle {
    mask-image: var(--icon-plus-circle-mro);
    -webkit-mask-image: var(--icon-plus-circle-mro);
}

.icon.printer-mro {
    mask-image: var(--icon-printer-mro);
    -webkit-mask-image: var(--icon-printer-mro);
}

.icon.printer-mto {
    mask-image: var(--icon-printer-mto);
    -webkit-mask-image: var(--icon-printer-mto);
}

.icon.rocket-mto {
    mask-image: var(--icon-rocket-mto);
    -webkit-mask-image: var(--icon-rocket-mto);
}

.icon.rss {
    mask-image: var(--icon-rss);
    -webkit-mask-image: var(--icon-rss);
}

.icon.search {
    mask-image: var(--icon-search-sro);
    -webkit-mask-image: var(--icon-search-sro);
}

.icon.server-mto {
    mask-image: var(--icon-server-mto);
    -webkit-mask-image: var(--icon-server-mto);
}

.icon.share {
    mask-image: var(--icon-share-mro);
    -webkit-mask-image: var(--icon-share-mro);
}

.icon.share-mto {
    mask-image: var(--icon-share-mto);
    -webkit-mask-image: var(--icon-share-mto);
}

.icon.shield {
    mask-image: var(--icon-shield-mro);
    -webkit-mask-image: var(--icon-shield-mro);
}

.icon.shield-mto {
    mask-image: var(--icon-shield-mto);
    -webkit-mask-image: var(--icon-shield-mto);
}

.icon.sliders-horizontal-01-mro {
    mask-image: var(--icon-sliders-horizontal-01-mro);
    -webkit-mask-image: var(--icon-sliders-horizontal-01-mro);
}

.icon.sliders-vertical-01-mto {
    mask-image: var(--icon-sliders-vertical-01-mto);
    -webkit-mask-image: var(--icon-sliders-vertical-01-mto);
}

.icon.star-mto {
    mask-image: var(--icon-star-mto);
    -webkit-mask-image: var(--icon-star-mto);
}

.icon.star-spark-mto {
    mask-image: var(--icon-star-spark-mto);
    -webkit-mask-image: var(--icon-star-spark-mto);
}

.icon.sun {
    mask-image: var(--icon-sun-mro);
    -webkit-mask-image: var(--icon-sun-mro);
}

.icon.sync {
    mask-image: var(--icon-sync-mro);
    -webkit-mask-image: var(--icon-sync-mro);
}

.icon.sync-mto {
    mask-image: var(--icon-sync-mto);
    -webkit-mask-image: var(--icon-sync-mto);
}

.icon.user-circle-mto {
    mask-image: var(--icon-user-circle-mto);
    -webkit-mask-image: var(--icon-user-circle-mto);
}

.icon.user-plus-mto {
    mask-image: var(--icon-user-plus-mto);
    -webkit-mask-image: var(--icon-user-plus-mto);
}

.icon.users-mro {
    mask-image: var(--icon-users-mro);
    -webkit-mask-image: var(--icon-users-mro);
}

.icon.users-mto {
    mask-image: var(--icon-users-mto);
    -webkit-mask-image: var(--icon-users-mto);
}

.icon.video-mro {
    mask-image: var(--icon-video-mro);
    -webkit-mask-image: var(--icon-video-mro);
}

.icon.video-mto {
    mask-image: var(--icon-video-mto);
    -webkit-mask-image: var(--icon-video-mto);
}

.icon.x {
    mask-image: var(--icon-x-sto);
    -webkit-mask-image: var(--icon-x-sto);
}

.icon.x-mro {
    mask-image: var(--icon-x-mro);
    -webkit-mask-image: var(--icon-x-mro);
}

.icon.zap-mro {
    mask-image: var(--icon-zap-mro);
    -webkit-mask-image: var(--icon-zap-mro);
}

.icon.zap-mto {
    mask-image: var(--icon-zap-mto);
    -webkit-mask-image: var(--icon-zap-mto);
}

.icon.zap-off-mro {
    mask-image: var(--icon-zap-off-mro);
    -webkit-mask-image: var(--icon-zap-off-mro);
}

.icon.zap-off-mto {
    mask-image: var(--icon-zap-off-mto);
    -webkit-mask-image: var(--icon-zap-off-mto);
}

/* endregion */

/* region Duotone icons */

.icon.android {
    mask-image: var(--icon-android);
    -webkit-mask-image: var(--icon-android);
}

.icon.brain {
    mask-image: var(--icon-brain);
    -webkit-mask-image: var(--icon-brain);
}

.icon.bug {
    mask-image: var(--icon-bug);
    -webkit-mask-image: var(--icon-bug);
}

.icon.c-plus-plus {
    mask-image: var(--icon-c-plus-plus);
    -webkit-mask-image: var(--icon-c-plus-plus);
}

.icon.CMD {
    mask-image: var(--icon-CMD);
    -webkit-mask-image: var(--icon-CMD);
}

.icon.copyright {
    mask-image: var(--icon-copyright);
    -webkit-mask-image: var(--icon-copyright);
}

.icon.extension {
    mask-image: var(--icon-extension);
    -webkit-mask-image: var(--icon-extension);
}

.icon.hand {
    mask-image: var(--icon-hand);
    -webkit-mask-image: var(--icon-hand);
}

.icon.iOS {
    mask-image: var(--icon-iOS);
    -webkit-mask-image: var(--icon-iOS);
}

.icon.lifebuoy {
    mask-image: var(--icon-lifebuoy);
    -webkit-mask-image: var(--icon-lifebuoy);
}

.icon.lightbulb {
    mask-image: var(--icon-lightbulb);
    -webkit-mask-image: var(--icon-lightbulb);
}

.icon.media {
    mask-image: var(--icon-media);
    -webkit-mask-image: var(--icon-media);
}

.icon.mega-sync {
    mask-image: var(--icon-mega-sync);
    -webkit-mask-image: var(--icon-mega-sync);
}

.icon.privacy {
    mask-image: var(--icon-privacy);
    -webkit-mask-image: var(--icon-privacy);
}

.icon.scale {
    mask-image: var(--icon-scale);
    -webkit-mask-image: var(--icon-scale);
}

.icon.SDK {
    mask-image: var(--icon-SDK);
    -webkit-mask-image: var(--icon-SDK);
}

.icon.shield-duotone {
    mask-image: var(--icon-shield-duotone);
    -webkit-mask-image: var(--icon-shield-duotone);
}

.icon.thunderbird {
    mask-image: var(--icon-thunderbird);
    -webkit-mask-image: var(--icon-thunderbird);
}

.icon.tm {
    mask-image: var(--icon-tm);
    -webkit-mask-image: var(--icon-tm);
}

.icon.web {
    mask-image: var(--icon-web);
    -webkit-mask-image: var(--icon-web);
}

/* endregion */

/* region Social icons */

.icon.social-facebook {
    mask-image: var(--icon-social-facebook-m);
    -webkit-mask-image: var(--icon-social-facebook-m);
}

.icon.social-instagram {
    mask-image: var(--icon-social-instagram-m);
    -webkit-mask-image: var(--icon-social-instagram-m);
}

.icon.social-linkedin {
    mask-image: var(--icon-social-linkedin-m);
    -webkit-mask-image: var(--icon-social-linkedin-m);
}

.icon.social-threads {
    mask-image: var(--icon-social-threads-m);
    -webkit-mask-image: var(--icon-social-threads-m);
}

.icon.social-X {
    mask-image: var(--icon-social-x-m);
    -webkit-mask-image: var(--icon-social-x-m);
}

.icon.social-youtube {
    mask-image: var(--icon-social-youtube-m);
    -webkit-mask-image: var(--icon-social-youtube-m);
}

/* endregion */

.icon.rectangle-748 {
    mask-image: var(--icon-rectangle-748);
    -webkit-mask-image: var(--icon-rectangle-748);
}

.icon.union-start {
    mask-image: var(--icon-union-start);
    -webkit-mask-image: var(--icon-union-start);
}

/**
 * Styling for buttons common to all MEGA Wordpress sites.
 *
 * Button sizes are the same, regardless of grid size.
 *
 * There are three button bases:
 * - 'button' for regular buttons that can include before/after icons and text,
 * - 'icon-button' for square buttons with just an icon and
 * - 'text-button', similar to 'button' but without the button shape.
 *
 * Design file: https://www.figma.com/file/U90j8OCD0pvFFO3fO1YlkN/Website-design-system-v1?node-id=1%3A70
 */

/* region Common styling to all buttons */

.button, .text-button, .icon-button {
    all: unset;
    display: flex;
    justify-content: center;
    align-items: center;
    box-sizing: border-box;
    border-radius: 8px;
    cursor: pointer;
    scroll-margin-top: var(--top-height);
}

/* endregion */

/* region Common styling for 'button' and 'text-button' */

/* Base */
.button, .text-button {
    width: fit-content;
    flex-direction: row;
    gap: var(--btn-gap);
    min-height: var(--btn-height);
    font: var(--btn-font);
    letter-spacing: var(--btn-letter-spacing);
    text-align: center;
}

/* Size */
.button.xl, .text-button.xl {
    --btn-height: 56px;
    --btn-icon-size: 24px;
    --btn-gap: 12px;
    --btn-padding: 0 24px; /* Static regardless of grid size */
    --btn-font: var(--font-btn-xl);
    --btn-letter-spacing: var(--font-btn-xl-spacing);
}
.button.lg, .text-button.lg {
    --btn-height: 48px;
    --btn-icon-size: 24px;
    --btn-gap: 12px;
    --btn-padding: 0 24px;
    --btn-font: var(--font-btn-lg);
    --btn-letter-spacing: var(--font-btn-lg-spacing);
}
.button.md, .text-button.md {
    --btn-height: 40px;
    --btn-icon-size: 20px;
    --btn-gap: 8px;
    --btn-padding: 0 24px;
    --btn-font: var(--font-btn-md);
    --btn-letter-spacing: var(--font-btn-md-spacing);
}
.button.sm, .text-button.sm {
    --btn-height: 36px;
    --btn-icon-size: 16px;
    --btn-gap: 8px;
    --btn-padding: 0 16px;
    --btn-font: var(--font-btn-sm);
    --btn-letter-spacing: var(--font-btn-sm-spacing);
}

/* Icons */
.button .before, .button .after,
.text-button .before, .text-button .after {
    width: var(--btn-icon-size);
    height: var(--btn-icon-size);
    flex-shrink: 0;
    text-align: center;
    mask-position: center;
    -webkit-mask-position: center;
    background-color: currentColor;
    transition: var(--transition-transform);
}
/* Special animation for all 'arrow-right' icons in the 'after' position */
.button .after.icon.arrow-right,
.text-button .after.icon.arrow-right {
    transition: var(--transition-transform);
}
.button:hover .after.icon.arrow-right, .button:active .after.icon.arrow-right,
.text-button:hover .after.icon.arrow-right, .text-button:active .after.icon.arrow-right {
    transform: translateX(4px);
}
/* endregion */

/* region MEGA Molecular Component: Button */

/* Base */
.button {
    padding: var(--btn-padding);
}
.button:disabled {
    cursor: default;
}

/* region Style - Light Theme */

/* Primary */
.button.primary {
    color: var(--color-grey-50);
    background-color: var(--color-primary-red-500);
}
.button.primary:hover:not(:disabled),
.button.primary:focus:not(:disabled) {
    background-color: var(--color-primary-red-600);
}
.button.primary:active:not(:disabled) {
    background-color: var(--color-primary-red-700);
}
.button.primary:disabled {
    color: var(--color-link-disabled);
    background-color: var(--color-grey-100);
}

/* Secondary */
.button.secondary {
    color: var(--color-primary-red-500);
    background-color: var(--color-bg-tinted-pale-pink);
}
.button.secondary:hover:not(:disabled),
.button.secondary:focus:not(:disabled) {
    background-color: var(--color-bg-tinted-pink);
}
.button.secondary:active:not(:disabled) {
    background-color: var(--color-bg-tinted-peach);
}
.button.secondary:disabled {
    color: var(--color-link-disabled);
    background-color: var(--color-grey-100);
}

.theme-dark .button.secondary {
    color: var(--color-primary-red-800);
    background-color: var(--color-bg-tinted-peach);
}
.theme-dark .button.secondary:active:not(:disabled) {
    background-color: var(--color-bg-tinted-pale-pink);
}


/* Outline */
.button.outline {
    color: var(--color-primary-red-500);
    border: 2px solid var(--color-primary-red-500);
}
.button.outline:hover:not(:disabled),
.button.outline:focus:not(:disabled) {
    color: var(--color-primary-red-600);
    border-color: var(--color-primary-red-600);
}
.button.outline:active:not(:disabled) {
    color: var(--color-primary-red-700);
    border-color: var(--color-primary-red-700);
}
.button.outline:disabled {
    color: var(--color-link-disabled);
    border-color: var(--color-grey-100);
}

/* Text */
.button.text {
    color: var(--color-primary-red-700);
    text-decoration: underline;
}
.button.text:hover:not(:disabled),
.button.text:focus:not(:disabled) {
    background-color: var(--color-grey-50);
}
.button.text:active:not(:disabled) {
    background-color: var(--color-grey-100);
}
.button.text:disabled {
    color: var(--color-link-disabled);
}

/* Primary, muted */
.button.primary-muted {
    color: var(--color-grey-50);
    background-color: var(--color-primary-black-900);
}
.button.primary-muted:hover:not(:disabled),
.button.primary-muted:focus:not(:disabled) {
    background-color: var(--color-primary-black-700);
}
.button.primary-muted:active:not(:disabled) {
    background-color: var(--color-primary-black-600);
}
.button.primary-muted:disabled {
    color: var(--color-link-disabled);
    background-color: var(--color-grey-100);
}

/* Secondary, muted */
.button.secondary-muted {
    color: var(--color-primary-black-900);
    background-color: var(--color-grey-100);
}
.button.secondary-muted:hover:not(:disabled),
.button.secondary-muted:focus:not(:disabled) {
    background-color: var(--color-grey-150);
}
.button.secondary-muted:active:not(:disabled) {
    background-color: var(--color-grey-200);
}
.button.secondary-muted:disabled {
    color: var(--color-link-disabled);
    background-color: var(--color-grey-100);
}

/* Outline, muted */
.button.outline-muted {
    color: var(--color-primary-black-900);
    border: 2px solid currentColor;
}
.button.outline-muted:hover:not(:disabled),
.button.outline-muted:focus:not(:disabled) {
    color: var(--color-primary-black-900);
    background-color: var(--color-bg-surface-1);
}
.button.outline-muted:active:not(:disabled) {
    color: var(--color-primary-black-800);
    background-color: var(--color-bg-surface-2);
}
.button.outline-muted:disabled {
    color: var(--color-link-disabled);
    background-color: unset;
}

/* Text, muted */
.button.text-muted {
    color: var(--color-primary-black-900);
    text-decoration: underline;
}
.button.text-muted:hover:not(:disabled),
.button.text-muted:focus:not(:disabled) {
    background-color: var(--color-grey-50);
}
.button.text-muted:active:not(:disabled) {
    background-color: var(--color-grey-100);
}
.button-text-muted:disabled {
    color: var(--color-link-disabled);
    background-color: unset;
}

/* endregion */

/* region Style - Dark Theme (applied after Light Theme) */

/* Primary */
.theme-dark .button.primary {
    color: var(--color-grey-1000);
}

/* Secondary */
.theme-dark .button.secondary {
    color: var(--color-primary-red-800);
    background-color: var(--color-bg-tinted-peach);
}
.theme-dark .button.secondary:hover:not(:disabled),
.theme-dark .button.secondary:focus:not(:disabled) {
    color: var(--color-primary-red-800);
    background-color: var(--color-bg-tinted-pink);
}
.theme-dark .button.secondary:active:not(:disabled) {
    color: var(--color-primary-red-800);
    background-color: var(--color-bg-tinted-pale-pink);
}

/* Outline */
.theme-dark .button.outline:hover:not(:disabled),
.theme-dark .button.outline:focus:not(:disabled) {
    background-color: var(--color-bg-surface-1);
}
.theme-dark .button.outline:active:not(:disabled) {
    background-color: var(--color-bg-surface-2);
}

/* Text */
.theme-dark .button.text {
    color: var(--color-primary-red-700);
}
.theme-dark .button.text:hover:not(:disabled),
.theme-dark .button.text:focus:not(:disabled) {
    color: var(--color-primary-red-800);
    background-color: var(--color-grey-100);
}
.theme-dark .button.text:active:not(:disabled) {
    color: var(--color-primary-red-800);
    background-color: var(--color-grey-150);
}

/* Primary, muted */
.theme-dark .button.primary-muted:hover:not(:disabled),
.theme-dark .button.primary-muted:focus:not(:disabled) {
    background-color: var(--color-primary-black-800);
}
.theme-dark .button.primary-muted:active:not(:disabled) {
    background-color: var(--color-primary-black-700);
}

/* Outline, muted */
.theme-dark .button.outline-muted:hover:not(:disabled),
.theme-dark .button.outline-muted:focus:not(:disabled) {
    border-color: var(--color-primary-black-900);
}
.theme-dark .button.outline-muted:active:not(:disabled) {
    border-color: var(--color-primary-black-800);
}
.theme-dark .button.outline-muted:disabled {
    color: var(--color-link-disabled);
    background-color: unset;
    border-color: var(--color-grey-100);
}

/* Text, muted */
.theme-dark .button.text-muted:hover:not(:disabled),
.theme-dark .button.text-muted:focus:not(:disabled) {
    background-color: var(--color-grey-100);
}
.theme-dark .button.text-muted:active:not(:disabled) {
    background-color: var(--color-grey-150);
}
.theme-dark .button-text-muted:disabled {
    background-color: unset;
}

/* endregion */

/* endregion */

/* region MEGA Molecular Component: Text Button */

/* Light Theme */
.text-button {
    color: var(--color-primary-black-900);
    text-decoration: underline;
}
.text-button:visited:not(:disabled) {
    color: var(--color-primary-black-900);
}
.text-button:hover:not(:disabled),
.text-button:focus:not(:disabled) {
    color: var(--color-primary-black-700);
    text-decoration: underline;
}
.text-button:active:not(:disabled) {
    color: var(--color-primary-black-600);
}
.text-button:disabled {
    color: var(--color-link-disabled);
}

/* Dark Theme */
.theme-dark .text-button:hover:not(:disabled),
.theme-dark .text-button:focus:not(:disabled) {
    color: var(--color-primary-black-800);
}
.theme-dark .text-button:active:not(:disabled) {
    color: var(--color-primary-black-700);
}

/* endregion */

/* region MEGA Molecular Component: Icon Button */

/* Base */
.icon-button {
    width: var(--icon-btn-size);
    height: var(--icon-btn-size);
    padding: var(--icon-btn-padding);
    flex-shrink: 0; /* Don't shrink if used in a flexbox context */
    color: var(--color-primary-black-900);
}
.icon-button:disabled {
    color: var(--color-link-disabled);
    cursor: default;
}

/* Size */
.icon-button.xl {
    --icon-btn-size: 56px;
    --icon-btn-padding: 16px;
}
.icon-button.lg {
    --icon-btn-size: 48px;
    --icon-btn-padding: 12px;
}
.icon-button.md {
    --icon-btn-size: 40px;
    --icon-btn-padding: 10px;
}
.icon-button.sm {
    --icon-btn-size: 36px;
    --icon-btn-padding: 10px;
}

/* Style - Light Theme */

/* Primary */
.icon-button.primary {
    background-color: var(--color-grey-100);
}
.icon-button.primary:hover:not(:disabled),
.icon-button.primary:focus:not(:disabled) {
    background-color: var(--color-grey-150);
}
.icon-button.primary:active:not(:disabled) {
    background-color: var(--color-grey-200);
}
.icon-button.primary:disabled {
    background-color: var(--color-grey-100);
}

/* Transparent */
.icon-button.transparent {
    background-color: unset;
}
.icon-button.transparent:hover:not(:disabled),
.icon-button.transparent:focus:not(:disabled) {
    background-color: var(--color-grey-50);
}
.icon-button.transparent:active:not(:disabled) {
    background-color: var(--color-grey-100);
}
.icon-button.transparent:disabled {
    background-color: unset;
}

/* Style - Dark Theme */

/* Transparent */
.theme-dark .icon-button.transparent:hover:not(:disabled),
.theme-dark .icon-button.transparent:focus:not(:disabled) {
    background-color: var(--color-grey-100);
}
.theme-dark .icon-button.transparent:active:not(:disabled) {
    background-color: var(--color-grey-150);
}

/* endregion */


/* region Radio Button */

.radio-option-btn {
    all: unset;
    height: var(--radio-option-btn-height);
    padding: var(--radio-option-btn-padding) 16px;
    color: var(--color-link-enabled);
    box-sizing: border-box;
    border: 1px solid var(--color-grey-200);
    border-radius: 5px;
    cursor: pointer;
}

.radio-option-btn.lg {
    --radio-option-btn-height: 48px;
    --radio-option-btn-padding: 12px;
    font: var(--font-btn-lg);
    letter-spacing: var(--font-btn-lg-spacing);
}
.radio-option-btn.md {
    --radio-option-btn-height: 40px;
    --radio-option-btn-padding: 10px;
    font: var(--font-btn-md);
    letter-spacing: var(--font-btn-md-spacing);
}
.radio-option-btn.sm {
    --radio-option-btn-height: 36px;
    --radio-option-btn-padding: 8px;
    font: var(--font-btn-sm);
    letter-spacing: var(--font-btn-sm-spacing);
}

.radio-option-btn:hover:not(:disabled),
.radio-option-btn:focus:not(:disabled) {
    color: var(--color-grey-50);
    background-color: var(--color-primary-black-800);
    border-color: var(--color-primary-black-800);
}
.radio-option-btn:active:not(:disabled),
.radio-option-btn.active:not(:disabled) {
    color: var(--color-grey-50);
    background-color: var(--color-primary-black-900);
    border-color: var(--color-primary-black-900);
}
.radio-option-btn:disabled {
    color: var(--color-link-disabled);
    background-color: var(--color-grey-50);
    border-color: var(--color-grey-50);
    cursor: default;
}
.radio-option-btn.error {
    border-color: var(--color-system-error);
}

/* endregion */

/* region Pagination */

.pagination-container {
    --nav-btn-size: 36px;
    display: flex;
    justify-content: center;
    width: 100%;
}

/* Button */
/* span for active/disabled buttons, a for link buttons */
.pagination-container a,
.pagination-container span {
    width: var(--nav-btn-size);
    height: var(--nav-btn-size);
    margin-left: var(--spacing-3);
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 8px;
    font: var(--font-btn-sm);
    letter-spacing: var(--font-btn-sm-spacing);
    text-decoration: none;
}

.pagination-container a,
.pagination-container span {
    color: var(--color-primary-black-800);
    background-color: var(--color-grey-100);
}
.pagination-container a:hover,
.pagination-container a:focus,
.pagination-container span:hover,
.pagination-container span:focus {
    color: var(--color-grey-50);
    background-color: var(--color-primary-black-800);
}
.pagination-container a:active,
.pagination-container span.current {
    color: var(--color-grey-50);
    background-color: var(--color-primary-black-900);
}
.pagination-container span:not(.current) {
    color: var(--color-link-disabled);
    background-color: var(--color-grey-100);
}

.pagination-container .icon {
    width: 100%;
    height: 100%;
    mask-position: center;
    -webkit-mask-position: center;
    mask-size: auto;
    -webkit-mask-size: auto;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    background-color: currentColor;
}
.pagination-container span.dots {
    background-color: unset;
    background-image: var(--icon-more-horizontal-mro);
    background-repeat: no-repeat;
    background-position: center;
    background-size: auto;
}
.theme-dark .pagination-container span.dots {
    filter: invert(100%) sepia(100%) saturate(0%) hue-rotate(288deg) brightness(102%);
}

/* endregion */

/**
 * Styling for common elements to all MEGA Wordpress sites such as header, footer.
 */

:root {
    --max-width: 1320px;
    --default-padding: var(--spacing-9);
    --grid-column-gap: var(--spacing-8);
    /** Please consider using centred container div with max-width instead */
    --default-padding-wide-bg: max(calc(((100vw - var(--max-width)) / 2) + var(--default-padding)), var(--default-padding));
    --top-height: var(--header-height);
    scroll-behavior: smooth;
}

body {
    margin: auto;
    font: var(--font-copy-md);
    word-wrap: break-word; /* for Chromium to not break static div layouts */
}

/* Give scroll margin to everything - more elements need it than not */
* {
    scroll-margin-top: var(--top-height);
}

.hidden {
    display: none !important;
}
.no-scroll {
    overflow: hidden;
}
.no-scrollbar {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
}
.no-scrollbar::-webkit-scrollbar {
    display: none; /* Chromium */
}

.page-container {
    margin-top: var(--header-height);
    box-sizing: border-box;
}

.page-container > * {
    width: 100%;
    max-width: var(--max-width);
    margin: 0 auto;
    padding: 0 var(--default-padding);
    box-sizing: border-box;
}

.main-grid {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    column-gap: var(--grid-column-gap);
}
.main-grid > * {
    /* Default to full-width */
    grid-column: 1 / -1;
}

/* Common CSS for image boxes
 * TODO: replace with <img> tag and use object-fit, object-position, etc - when the spec is more widely supported. */
.img-box .img {
    width: 100%;
    height: 100%;
    background-position: center;
    background-size: contain;
    background-repeat: no-repeat;
}

img.inline-emoji {
    height: 1em;
    width: 1.67em; /* may stretch some flags */
}

.overlay {
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    visibility: hidden;
    transition: var(--transition-opacity);
}
.overlay.standard {
    z-index: 30; /* Above header */
    background-color: var(--color-opacities-30);
    backdrop-filter: blur(4px);
}
.overlay.with-header {
    background-color: var(--color-primary-black-900);
    opacity: 0.7;
}
.theme-dark .overlay.with-header {
    /* Override: want --color-primary-black-900 (light mode) here */
    background-color: var(--color-primary-black-50);
}
.overlay.active {
    visibility: visible;
}
.overlay.with-header.active {
    z-index: 9;
}

/* region Content */

.content a:not(.button) {
    text-decoration: underline;
}

.content a:not(.button):link {
    color: var(--color-link-enabled);
}

.content a:not(.button):hover {
    color: var(--color-link-hovered);
    text-decoration: none;
}

.content a:not(.button):active {
    color: var(--color-link-pressed);
}

.content a:not(.button):visited {
    color: var(--color-link-visited);
}

/* endregion */

/* region WP Admin Bar */

#wpadminbar {
    position: fixed;
    top: 0;
}

:root {
    --wp-admin-bar-height: 0px;
    --top-height: calc(var(--header-height) + var(--wp-admin-bar-height));
}
:root .admin {
    --wp-admin-bar-height: 32px;
    --top-height: calc(var(--header-height) + var(--wp-admin-bar-height));
}

@media screen and (max-width: 782px) { /* WP admin bar breakpoint */
    :root .admin {
        --wp-admin-bar-height: 46px;
        --top-height: calc(var(--header-height) + var(--wp-admin-bar-height));
    }
}

/* endregion */

/* region Breakpoints M, S and XS */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    :root {
        --default-padding: var(--spacing-7);
        --grid-column-gap: var(--spacing-7);
    }
}
/* endregion */

/* region Breakpoints S and XS */
@media screen and (min-width: 0px) and (max-width: 768px) {
    body {
        max-width: 768px;
        margin: auto;
    }

    .main-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}
/* endregion */

/* region Search Component */

.search-component {
    display: flex;
    height: var(--search-component-size);
    position: relative;
}
.search-component.lg {
    --search-component-size: 48px;
    --search-component-font: var(--font-input-lg);
    --search-component-radius: 8px;
    --search-clear-box-space: 12px;
    --search-clear-box-size: 24px;
    --search-field-padding: 10px 44px 10px 16px;
    --search-btn-padding: 12px;
}
.search-component.md {
    --search-component-size: 40px;
    --search-component-font: var(--font-input-md);
    --search-component-radius: 8px;
    --search-clear-box-space: 16px;
    --search-clear-box-size: 20px;
    --search-field-padding: 12px 46px 12px 20px;
    --search-btn-padding: 10px;
}
.search-component.sm {
    --search-component-size: 36px;
    --search-component-font: var(--font-input-sm);
    --search-component-radius: 8px;
    --search-clear-box-space: 12px;
    --search-clear-box-size: 16px;
    --search-field-padding: 8px 34px 8px 12px;
    --search-btn-padding: 10px;
}
.direction-rtl .search-component.lg {
    --search-field-padding: 12px 16px 12px 44px;
}
.direction-rtl .search-component.md {
    --search-field-padding: 12px 20px 12px 46px;
}
.direction-rtl .search-component.sm {
    --search-field-padding: 8px 12px 8px 34px;
}

.search-component .search-field {
    width: 100%;
    height: 100%;
    flex-grow: 1;
    box-sizing: border-box;
    padding: var(--search-field-padding);
    font: var(--search-component-font);
    color: var(--color-copy-primary);
    background-color: var(--color-bg-page);
    border: 1px solid var(--color-grey-200);
    border-radius: var(--search-component-radius) 0 0 var(--search-component-radius);
    outline: none;
}
.search-component .search-field::placeholder {
    color: var(--color-grey-700);
    opacity: 1; /* for FF */
}
.search-component .search-field:focus,
.search-component .search-field:not(:placeholder-shown) {
    border-color:  var(--color-primary-black-800);
}
.search-component .search-field:disabled {
    color: var(--color-grey-400);
    background-color: var(--color-grey-100);
}

.search-component .search-button {
    height: 100%;
    width: var(--search-component-size);
    padding: var(--search-btn-padding);
    color: var(--color-grey-100);
    background-color: var(--color-primary-black-800);
    border: none;
    border-radius: 0 var(--search-component-radius) var(--search-component-radius) 0;
}
.direction-rtl .search-component .search-field {
    border-radius: 0 var(--search-component-radius) var(--search-component-radius) 0;
}
.direction-rtl .search-component .search-button {
    border-radius: var(--search-component-radius) 0 0 var(--search-component-radius);
}
.search-component .search-button:disabled {
    color: var(--color-grey-400);
    background-color: var(--color-grey-100);
}
.search-component .search-button .icon {
    padding: 0;
    cursor: inherit;
}

.search-component .input-clear-txt {
    width: var(--search-clear-box-size);
    height: var(--search-clear-box-size);
    position: absolute;
    inset-inline-end: calc(var(--search-clear-box-space) + var(--search-component-size));
    top: calc((var(--search-component-size) - var(--search-clear-box-size)) / 2);
    padding: 4px;
    color: var(--color-primary-black-800);
    background-color: var(--color-grey-100);
}
.search-component .search-field:not(:valid) ~ .input-clear-txt {
    display: none;
}

.search-component .search-suggestions {
    position: absolute;
    z-index: 20;
    top: calc(var(--search-component-size) + var(--spacing-3));
    width: 100%;
    display: flex;
    flex-flow: column wrap;
    background-color: var(--color-bg-page);
    border: 1px solid var(--color-primary-black-50);
    border-radius: 4px;
}

.search-component .search-suggestions a {
    padding: var(--spacing-5);
    font: var(--font-copy-md);
    text-decoration: none;
    color: var(--color-copy-primary);
}
.direction-rtl .search-component .search-suggestions a {
    text-align: right;
}
.search-component .search-suggestions a strong {
    font: var(--font-copy-md-bold);
}
.search-component .search-suggestions a:hover {
    background-color: var(--color-bg-surface-2);
}

/* endregion */

/* region Accordion Component */

/* endregion */

/* region Dropdown Component  */

.dropdown {
    position: relative;
}

.dropdown.lg {
    --dropdown-height: 48px;
    --dropdown-selector-padding: 12px 20px 12px 20px;
    --dropdown-selector-icon-margin: 12px 16px 12px 10px;
    --dropdown-selector-font: var(--font-copy-lg);
    --dropdown-option-padding: 12px 16px;
}
.dropdown.md {
    --dropdown-height: 40px;
    --dropdown-selector-padding: 10px 16px 10px 16px;
    --dropdown-selector-icon-margin: 12px 16px 12px 8px;
    --dropdown-selector-font: var(--font-copy-md);
    --dropdown-option-padding: 8px 16px;
}
.dropdown.sm {
    --dropdown-height: 36px;
    --dropdown-selector-padding: 8px 12px 8px 12px;
    --dropdown-selector-icon-margin: 10px 12px 10px 6px;
    --dropdown-selector-font: var(--font-copy-sm);
    --dropdown-option-padding: 8px 16px;
}

.dropdown .selector {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: var(--dropdown-height);
    box-sizing: border-box;
    border: 1px solid var(--color-grey-200);
    border-radius: 8px;
    color: var(--color-grey-700);
    cursor: pointer;
    user-select: none;
}
.dropdown .selector:focus-visible {
    outline: none;
    border-color: var(--color-primary-black-800);
}
.dropdown.active .selector {
    color: var(--color-copy-primary);
    border-color: var(--color-primary-black-800);
}
.dropdown .selector.error-highlight {
    border-color: var(--color-system-error);
}

.direction-rtl .dropdown .selector {
    padding-inline-start: 20px;
}

.dropdown .selector .selector-text {
    padding: var(--dropdown-selector-padding);
    font: var(--dropdown-selector-font);
    color: var(--color-grey-700);
    white-space: nowrap;
    overflow: hidden;
    direction: ltr;
}
.dropdown .selector .selector-text:empty::before {
    content: attr(data-placeholder);
}

.direction-rtl .dropdown .selector .selector-text {
    padding-right: 0;
}

.dropdown .selector .selector-icon {
    --icon-size: 16px;
    margin: var(--dropdown-selector-icon-margin);
    color: var(--color-grey-700);
    flex: none;
}

.dropdown .options-list {
    position: absolute;
    width: 100%;
    max-height: calc(var(--dropdown-height) * 10);
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-top: 8px;
    padding: 8px 0;
    overflow-x: auto;
    background-color: var(--color-brand-white);
    box-shadow: 2px 2px 16px rgba(0, 0, 0, 0.16);
    z-index: 5;
}
.theme-dark .options-list {
    background-color: var(--color-grey-100);
}

.dropdown .options-list .option {
    display: flex;
    justify-content: space-between;
    padding: var(--dropdown-option-padding);
    cursor: pointer;
}
.dropdown .options-list .option.selected {
    background-color: var(--color-bg-surface-2);
}
.dropdown .options-list .option:focus,
.dropdown .options-list .option:focus-visible,
.dropdown .options-list .option:hover,
.dropdown .options-list .option.selected:focus,
.dropdown .options-list .option.selected:focus-visible,
.dropdown .options-list .option.selected:hover {
    outline: none;
    background-color: var(--color-bg-surface-1);
}

.dropdown .options-list .option .name {
    cursor: pointer;
}

.dropdown .options-list .option .icon-box {
    display: none;
}
.dropdown .options-list .option.selected .icon-box {
    display: block;
}

/* endregion */

/* region Multiselect Dropdown */

.dropdown.multiselect .options-list .option {
    justify-content: flex-start;
}

.dropdown.multiselect .options-list .option .checkbox {
    width: 20px;
    height: 20px;
    margin-inline-end: var(--spacing-3);
    margin-top: var(--spacing-1);
    flex-shrink: 0;
    accent-color: var(--color-link-enabled);
    cursor: pointer;
}

/* endregion */

/* region Toggle Control */

.toggle-control {
    --accent-color: var(--color-primary-black-900);
    width: 48px;
    height: 24px;
    box-sizing: border-box;
    border: 1px solid var(--accent-color);
    border-radius: 12px;
    accent-color: var(--accent-color);
    cursor: pointer;
}
.toggle-control.on {
    background-color: var(--accent-color);
}
.toggle-control.off {
    background-color: var(--color-bg-page);
}
.toggle-control.disabled {
    --accent-color: var(--color-link-disabled);
    cursor: default;
}

.toggle-control svg.handle {
    margin: 3px;
    transition: transform 50ms;
}
.toggle-control.on svg.handle {
    fill: var(--color-bg-page);
    transform: translateX(150%);
}
.direction-rtl .toggle-control.on svg.handle {
    transform: translateX(-150%);
}
.toggle-control.off svg.handle {
    fill: var(--accent-color);
}

.toggle-control.on svg.handle .strike {
    display: none;
}
.toggle-control.off svg.handle .strike {
    display: unset;
}

.toggle-control.on svg.handle .tick {
    display: unset;
}
.toggle-control.off svg.handle .tick {
    display: none;
}

/* endregion */

/* region Text Input */

.m-text {
    height: var(--input-height);
    padding: var(--input-padding);
    box-sizing: border-box;
    background: var(--color-bg-page);
    border: 1px solid var(--color-grey-200);
    border-radius: 8px;
    font: var(--input-font);
    color: var(--color-copy-primary);
}

.m-text.xl {
    --input-height: 56px;
    --input-padding: 16px;
    --input-font: var(--font-input-xl);
}
.m-text.lg {
    --input-height: 48px;
    --input-padding: 12px;
    --input-font: var(--font-input-lg);
}
.m-text.md {
    --input-height: 40px;
    --input-padding: 10px 12px;
    --input-font: var(--font-input-md);
}
.m-text.sm {
    --input-height: 36px;
    --input-padding: 8px 12px;
    --input-font: var(--font-input-sm);
}

.m-text:focus-visible {
    border-color: var(--color-primary-black-800);
    outline: none;
}
.m-text.error-highlight {
    border-color: var(--color-system-error);
}
.m-text[disabled], .m-text[readonly] {
    background: var(--color-grey-100);
    color: var(--color-link-disabled);
    border-color: var(--color-grey-200);
}
.theme-dark .m-text[disabled], .theme-dark .m-text[readonly] {
    background: var(--color-bg-page);
}

/* endregion */

/* region Textarea Input */

.m-textarea {
    height: var(--input-height);
    padding: var(--input-padding);
    box-sizing: border-box;
    background: var(--color-bg-page);
    border: 1px solid var(--color-grey-200);
    border-radius: 8px;
    font: var(--input-font);
    color: var(--color-copy-primary);
    resize: none;
}

.m-textarea.xl {
    --input-height: calc(56px * 2);
    --input-padding: 16px;
    --input-font: var(--font-input-xl);
}
.m-textarea.lg {
    --input-height: calc(48px * 2);
    --input-padding: 12px;
    --input-font: var(--font-input-lg);
}
.m-textarea.md {
    --input-height: calc(40px * 2);
    --input-padding: 10px 12px;
    --input-font: var(--font-input-md);
}
.m-textarea.sm {
    --input-height: calc(36px * 2);
    --input-padding: 8px 12px;
    --input-font: var(--font-input-sm);
}

.m-textarea:focus-visible {
    border-color: var(--color-primary-black-800);
    outline: none;
}
.m-textarea.error-highlight {
    border-color: var(--color-system-error);
}

/* endregion */

/* region Code input */

.code-input {
    display: flex;
    flex-flow: row wrap;
    gap: var(--spacing-5);
}

.code-input-char {
    width: 64px;
    height: 64px;
    background: var(--color-bg-page);
    border: 1px solid var(--color-grey-200);
    border-radius: 8px;
    font: var(--font-input-xl);
    font-size: 28px;
    color: var(--color-copy-primary);
    -moz-appearance: textfield;
    box-sizing: border-box;
    text-align: center;
}
.code-input .code-input-char:focus-visible {
    border-color: var(--color-primary-black-800);
    outline: none;
}
.code-input .code-input-char.error-highlight {
    border-color: var(--color-system-error);
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .code-input-char {
        width: 48px;
        height: 48px;
        font-size: 24px;
    }
}


/* endregion */

/* region Forms */

.m-form .fields {
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-9);
}

.m-form .field {
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-3);
}

.m-form .field > label {
    font: var(--font-copy-md-bold);
    color: var(--color-heading);
}

.m-form .field .optional-label {
    display: none;
    margin-inline-start: var(--spacing-3);
    font: var(--font-copy-md);
    color: var(--color-copy-secondary);
}
.m-form .field.optional .optional-label {
    display: inline;
}

.m-form .agree-checkboxes {
    margin-top: var(--spacing-9);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-7);
}

.m-form .error-box {
    margin-top: var(--spacing-3);
    display: flex;
    gap: var(--spacing-3);
    color: var(--color-system-error);
}
.m-form .error-box .error-icon {
    --icon-size: 16px;
    margin-top: var(--spacing-1);
}
.m-form .error-box .error-msg {
    font: var(--font-copy-sm);
}

.m-form .submit-msg {
    display: flex;
    flex-flow: row nowrap;
    gap: var(--spacing-3);
}

.m-form .submit-msg.fail {
    margin-top: var(--spacing-7);
    color: var(--color-system-error);
}

/* Breakpoints M and S */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    .m-form .field {
        gap: var(--spacing-2);
    }
}

/* endregion */

/* region Show/Hide */

.show-hide .show-hide-toggle {
    display: flex;
    align-items: center;
    gap: var(--show-hide-toggle-gap);
    color: var(--color-copy-primary);
    text-decoration: underline;
    cursor: pointer;
}
.show-hide .show-hide-toggle .icon-box {
    --icon-size: var(--show-hide-icon-size);
}
.show-hide .show-hide-toggle .icon {
    mask-image: var(--icon-chevron-down-mro);
    -webkit-mask-image: var(--icon-chevron-down-mro);
}
.show-hide.expanded .show-hide-toggle .icon {
    mask-image: var(--icon-chevron-up-mro);
    -webkit-mask-image: var(--icon-chevron-up-mro);
}

.show-hide .show-hide-content {
    display: none;
}
.show-hide.expanded .show-hide-content {
    display: block;
}

/* Breakpoints L, XL and larger */
@media screen and (min-width: 1080px) {
    .show-hide {
        --show-hide-toggle-gap: 8px;
        --show-hide-icon-size: 24px;
    }

    .show-hide .show-hide-toggle {
        font: var(--font-link-md-bold);
    }
}

/* Breakpoints M, S and XS */
@media screen and (max-width: 1080px) {
    .show-hide {
        --show-hide-toggle-gap: 4px;
        --show-hide-icon-size: 20px;
    }

    .show-hide .show-hide-toggle {
        font: var(--font-link-sm-bold);
    }
}

/* endregion Show/Hide */

/* region Radio Group */

.m-radio-options {
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-4);
}

.m-radio-options .m-radio-option {
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-3);
}

.m-radio-options .m-radio-option .input-n-label {
    display: flex;
}

.m-radio-options .m-radio-option .input-n-label input {
    appearance: none;
    width: 20px;
    height: 20px;
    margin-top: var(--spacing-1);
    margin-inline-start: var(--spacing-1);
    margin-inline-end: var(--spacing-3);
    background-clip: content-box;
    padding: 3px;
    flex-shrink: 0;
    border: 2px solid var(--color-grey-1000);
    border-radius: 50%;
    accent-color: var(--color-grey-1000);
    cursor: pointer;
}
.m-radio-options .m-radio-option .input-n-label input:checked {
    background-color: var(--color-grey-1000);
}

.m-radio-options .m-radio-option .input-n-label label {
    cursor: pointer;
    user-select: none;
}

.m-radio-options input.custom-input {
    width: 50%;
}

/* endregion */

/* region Tooltip */

.tooltip {
    position: relative;
}
.tooltip:before {
    display: none;
    position: absolute;
    z-index: 80;
    width: fit-content;
    box-sizing: border-box;
    padding: 8px 12px;
    border-radius: 4px;
    background: var(--color-primary-black-800);
    color: var(--color-grey-50);
    font: var(--font-caption-md);
    letter-spacing: var(--font-caption-md-spacing);
    text-align: center;
    white-space: nowrap;
    content: attr(data-tooltiptext);
}

.tooltip.top:before {
    bottom: 100%;
    margin-bottom: 15px;
}
.tooltip.bottom:before {
    top: 100%;
    margin-top: 15px;
}
.tooltip.left:before {
    right: 100%;
    margin-right: 15px;
}
.tooltip.right:before {
    left: 100%;
    margin-left: 15px;
}

/* Tooltip arrow */
.tooltip:after {
    display:none;
    position: absolute;
    z-index: 80;
    border: 8px solid transparent;
    content: '';
}
.tooltip.top:after {
    bottom: 100%;
    border-color: var(--color-primary-black-800) transparent transparent transparent;
}
.tooltip.bottom:after {
    top: 100%;
    border-color:  transparent transparent var(--color-primary-black-800) transparent;
}
.tooltip.left:after {
    right: 100%;
    border-color: transparent transparent transparent var(--color-primary-black-800);
}
.tooltip.right:after {
    left: 100%;
    border-color: transparent var(--color-primary-black-800) transparent transparent;
}

.tooltip:hover:before,
.tooltip:hover:after {
    display: block;
}

@media (hover: hover) {
    .tooltip:hover:before,
    .tooltip:hover:after {
        display: block;
    }
}
@media (hover: none) {
    .tooltip:active:before,
    .tooltip:active:after {
        display: block;
    }
}

/* endregion */

/* region Collections */

.menu-collection {
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-5);
}

.menu-collection .heading {
    font: var(--font-copy-allcaps-sm);
    letter-spacing: var(--font-copy-allcaps-sm-spacing);
    color: var(--color-copy-secondary);
}

.menu-collection a {
    font: var(--font-copy-sm);
    color: var(--color-heading);
    text-decoration: none;
}
.menu-collection a:hover {
    color: var(--color-primary-red-500);
}
.menu-collection a:active {
    color: var(--color-primary-red-700);
}
.menu-collection a:hover {
    color: var(--color-primary-red-700);
}
.menu-collection a:active {
    color: var(--color-primary-red-900);
}

/* endregion */

/* region Icon-descriptions */

.icon-descs .heading {
    font: var(--font-copy-allcaps-sm);
    letter-spacing: var(--font-copy-allcaps-sm-spacing);
    color: var(--color-copy-secondary);
}

.icon-descs .icon-desc {
    --icon-color: var(--color-primary-black-900);
    --label-color: var(--color-heading);
    display: flex;
    flex-flow: row nowrap;
    align-items: flex-start;
    gap: var(--spacing-5);
    color: var(--icon-color);
    text-decoration: none;
}
.icon-descs .icon-desc:hover {
    --icon-color: var(--color-primary-red-500);
    --label-color: var(--color-primary-red-500);
}
.icon-descs .icon-desc:active {
    --icon-color: var(--color-primary-red-700);
    --label-color: var(--color-primary-red-700);
}
.icon-descs .icon-desc:hover {
    --icon-color: var(--color-primary-red-700);
    --label-color: var(--color-primary-red-700);
}
.icon-descs .icon-desc:active {
    --icon-color: var(--color-primary-red-900);
    --label-color: var(--color-primary-red-900);
}
.icon-descs .icon-desc .right-pane {
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-2);
}
.icon-descs .icon-desc .label {
    font: var(--font-copy-md);
    color: var(--label-color);
}
.icon-descs .icon-desc .description {
    font: var(--font-copy-sm);
    color: var(--color-copy-secondary);
}

/* endregion */

/* region Cookie banner */

.cookie-banner {
    all: unset;
    position: fixed;
    bottom: 0;
    width: 100%;
    z-index: 10;
}

.cookie-banner .icon-button.close {
    position: absolute;
    top: var(--spacing-1);
    right: var(--spacing-1);
}

.cookie-banner .inner-content {
    margin: 0 auto;
    padding: var(--spacing-10) var(--default-padding) var(--spacing-10);
    align-items: center;
    box-sizing: border-box;
    background-color: var(--color-brand-black);
}

.theme-dark .cookie-banner .inner-content {
    background-color: var(--color-primary-black-900);
}

.cookie-banner .banner-heading {
    grid-column: 3 / -3;
    color: var(--color-grey-50);
    margin-bottom: var(--spacing-3);
}

.cookie-banner .banner-text {
    grid-column: 3 / -3;
    font: var(--font-copy-sm);
    color: var(--color-grey-250);
}

.cookie-banner .banner-text a {
    color: var(--color-secondary-cobalt-200);
}

.cookie-banner .customise-cookie {
    color: var(--color-primary-black-100);
}

.cookie-banner .banner-buttons .customise-cookie:hover,
.cookie-banner .banner-buttons .customise-cookie:focus {
    color: var(--color-primary-black-50);
    background-color: var(--color-brand-black);
    border: 2px solid var(--color-primary-black-50);
}

.cookie-banner .banner-buttons .customise-cookie:active {
    color: var(--color-primary-black-100);
    border: 2px solid var(--color-primary-black-100);
}

.theme-dark .cookie-banner .customise-cookie {
    color: var(--color-primary-black-100);
}

.theme-dark .cookie-banner .banner-buttons .customise-cookie:hover,
.theme-dark .cookie-banner .banner-buttons .customise-cookie:focus {
    background-color: var(--color-primary-black-900);
    color: var(--color-primary-black-300);
    border: 2px solid currentColor;
}

.theme-dark .cookie-banner .banner-buttons .customise-cookie:active {
    background-color: var(--color-primary-black-900);
    color: var(--color-primary-black-500);
    border: 2px solid currentColor;
}

.theme-dark .cookie-banner .banner-text {
    color: var(--color-grey-250);
}

.theme-dark .accept-all {
    background-color: var(--color-primary-black-50);
}

.theme-dark .cookie-banner .banner-text a {
    color: var(--color-secondary-cobalt-400);
}
.theme-dark .cookie-banner .banner-text a:visited {
    color: var(--color-secondary-cobalt-700);
}
.theme-dark .cookie-banner .banner-text a:hover {
    color: var(--color-secondary-cobalt-600);
}

.theme-dark .cookie-banner .accept-all:hover,
.theme-dark .cookie-banner .accept-all:focus {
    background-color: var(--color-grey-150);
}
.theme-dark .cookie-banner .accept-all:active {
    background-color: var(--color-primary-black-400);
}

.cookie-banner .banner-buttons .reject {
    color: var(--color-grey-350)
}

.cookie-banner .banner-buttons .reject:hover,
.cookie-banner .banner-buttons .reject:focus,
.theme-dark .cookie-banner .banner-buttons .reject:active {
    color: var(--color-primary-black-200)
}

.cookie-banner .banner-buttons .reject:active,
.theme-dark .cookie-banner .banner-buttons .reject {
    color: var(--color-primary-black-100);
}

.theme-dark .cookie-banner .reject:hover,
.theme-dark .cookie-banner .reject:focus {
    color: var(--color-primary-black-400);
}

.cookie-banner .banner-buttons {
    grid-column: 3 / -3;
    margin-top: var(--spacing-7);
    justify-content: space-between;
    display: flex;
    flex-flow: row nowrap;
    align-items: center;
    gap: var(--spacing-7);
}

.cookie-banner .banner-buttons:has(.reject.hidden) {
    justify-self: end;
}

.cookie-banner .banner-customise-accept-buttons {
    display: flex;
    gap: var(--spacing-7);
    flex-direction: row;
}

/* Breakpoints M and S */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    .cookie-banner .inner-content {
        border-radius: var(--spacing-3) var(--spacing-3) 0 0;
    }

    .cookie-banner .banner-heading,
    .cookie-banner .banner-text,
    .cookie-banner .banner-buttons {
        grid-column: 1 / -1;
    }
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .cookie-banner .banner-heading {
        margin-bottom: var(--spacing-5);
    }

    .cookie-banner .banner-buttons {
        flex-flow: column nowrap;
        gap: var(--spacing-5);
    }

    .cookie-banner .banner-buttons:has(.reject.hidden) {
        justify-self: unset;
    }

    .cookie-banner .banner-buttons .banner-customise-accept-buttons > button,
    .cookie-banner .banner-buttons .banner-customise-accept-buttons > a {
        width: 100%;
        max-width: 320px;
    }

    .cookie-banner .banner-customise-accept-buttons {
        width: 100%;
        align-items: center;
        flex-direction: column;
        gap: var(--spacing-5);
    }
}

/* endregion */

/* region Promotional banner */

.promo-banner .heading {
    font: var(--font-copy-md-bold);
    color: var(--color-copy-primary);
}
.promo-banner .promo-content {
    display: flex;
    flex-flow: row nowrap;
    gap: var(--spacing-8);
}
.promo-banner .right-pane {
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-4);
}
.promo-banner .description {
    font: var(--font-caption-lg);
    letter-spacing: var(--font-caption-lg-spacing);
    color: var(--color-copy-secondary);
}
.promo-banner .text-button {
    width: fit-content;
}

/* endregion */

/* region Carousel */

.carousel .carousel-content {
    overflow-x: scroll;
}

.carousel .carousel-controls {
    display: flex;
    flex-direction: row;
    width: fit-content;
    margin: var(--spacing-7) auto 0;
    gap: var(--spacing-8);
    direction: ltr;
}

/* endregion */

/* region Super and Subscriptions  */

sup {
    vertical-align: baseline;
    position: relative;
    top: -0.4em;
}
sub {
    vertical-align: baseline;
    position: relative;
    top: 0.4em;
}

/* endregion */

/* region Checkboxes */

.checkbox-component {
    display: grid;
    grid-template-columns: 20px auto;
    column-gap: var(--spacing-3);
}

.checkbox-component input {
    height: 20px;
    margin: 2px 0;
    display: grid;
    place-content: center;
    appearance: none;
    -webkit-appearance: none;
    background-color: transparent;
    border: 2px solid var(--color-link-enabled);
    border-radius: 3px;
}
.checkbox-component input:checked {
    background-color: var(--color-link-enabled);
}
.checkbox-component input:checked::before {
    content: '';
    width: 16px;
    height: 16px;
    clip-path: polygon(91.75% 19.09%, 93.32% 22.57%, 92.2% 26.23%, 89.47% 29.02%, 86.71% 31.78%, 83.95% 34.55%, 81.18% 37.31%, 78.42% 40.07%, 75.66% 42.84%, 72.89% 45.6%, 70.13% 48.36%, 67.37% 51.13%, 64.6% 53.89%, 61.84% 56.65%, 59.08% 59.42%, 56.31% 62.18%, 53.55% 64.94%, 50.79% 67.71%, 48.02% 70.47%, 45.26% 73.23%, 42.5% 76%, 39.73% 78.76%, 36.92% 81.47%, 33.23% 82.48%, 29.8% 80.79%, 27.04% 78.03%, 24.27% 75.27%, 21.51% 72.5%, 18.75% 69.74%, 15.98% 66.98%, 13.22% 64.21%, 10.46% 61.45%, 7.74% 58.65%, 6.69% 54.97%, 8.32% 51.52%, 11.84% 50.01%, 15.47% 51.19%, 18.26% 53.93%, 21.02% 56.69%, 23.78% 59.46%, 26.55% 62.22%, 29.31% 64.98%, 32.07% 67.75%, 34.84% 68.34%, 37.6% 65.57%, 40.36% 62.81%, 43.13% 60.05%, 45.89% 57.28%, 48.65% 54.52%, 51.42% 51.76%, 54.18% 48.99%, 56.94% 46.23%, 59.71% 43.47%, 62.47% 40.7%, 65.23% 37.94%, 68% 35.18%, 70.76% 32.41%, 73.52% 29.65%, 76.29% 26.89%, 79.05% 24.12%, 81.81% 21.36%, 84.61% 18.63%, 88.26% 17.51%, 91.75% 19.09%);
    background-color: var(--color-bg-page);
}

.checkbox-component label {
    font: var(--font-copy-md);
    color: var(--color-link-enabled);
}

.checkbox-component .blurb {
    grid-column: -2 / -1;
    font: var(--font-copy-sm);
    color: var(--color-copy-secondary);
}

.checkbox-component.disabled input {
    border-color: var(--color-link-disabled);
}
.checkbox-component.disabled input:checked {
    background-color: var(--color-link-disabled);
}

.checkbox-component.disabled label {
    color: var(--color-link-disabled);
}

.checkbox-component.disabled .blurb {
    color: var(--color-link-disabled);
}

/* endregion */

/* region Agree Checkbox */

.checkbox-component.m-agree-checkbox input {
    margin: 0;
    border-width: 1px;
}

.checkbox-component.m-agree-checkbox label {
    color: var(--color-copy-secondary);
    font: var(--font-copy-sm);
}

.checkbox-component.m-agree-checkbox label a {
    color: var(--color-link-enabled);
}

/* endregion */

/* region Tab structure */

.tab-structure .tab-buttons {
    display: flex;
    flex-direction: row;
}
.tab-structure.type-a .tab-buttons {
    grid-column: 1 / 7;
}
.tab-structure.type-b .tab-buttons {
    width: fit-content;
    border-bottom: 1px solid var(--color-grey-200);
}

.tab-structure .tab-button {
    all: unset;
    text-align: center;
    cursor: pointer;
}
.tab-structure.type-a .tab-button {
    padding: var(--spacing-7) 0;
    flex-basis: 0;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-3);
    background-color: var(--color-bg-surface-2);
    border-top: var(--spacing-2) solid transparent;
}
.tab-structure.type-a .tab-button:not(:last-child) {
    border-inline-end: 1px solid var(--color-grey-100);
}
.tab-structure.type-a .tab-button.active {
    background-color: unset;
    border-top: var(--spacing-2) solid var(--color-primary-red-500);
}
.tab-structure.type-a .tab-button:focus-visible {
    border-top: var(--spacing-2) solid var(--color-grey-200);
}

.tab-structure.type-a .tab-button .tab-subtitle {
    font: var(--font-copy-sm);
}
.tab-structure.type-a .tab-button .tab-subtitle:empty {
    display: none;
}

.tab-structure.type-b .tab-button {
    padding: var(--spacing-5) var(--spacing-7);
    border-bottom: 3px solid transparent;
}
.tab-structure.type-b .tab-button.active {
    border-color: var(--color-primary-red-500);
}
.tab-structure.type-b .tab-button:focus-visible {
    border-color: var(--color-grey-200);
}

.tab-structure.type-b .tab-button .tab-title {
    font: var(--font-copy-lg);
}
.tab-structure.type-b .tab-button.active .tab-title {
    font: var(--font-copy-lg-bold);
}
/* Prevent layout shift when emboldening the labels by reserving space for the bold lettering */
.tab-structure.type-b .tab-button .tab-title::before {
    content: attr(data-title);
    display: block;
    font: var(--font-copy-lg-bold);
    visibility: hidden;
}

.tab-structure.type-b .tab-button .tab-subtitle {
    display: none;
}

/* Breakpoint L */
@media screen and (min-width: 1080px) and (max-width: 1320px) {
    .tab-structure .tab-buttons {
        grid-column: 1 / 8;
    }
}

/* Breakpoints M and S */
@media screen and (min-width: 0) and (max-width: 1080px) {
    .tab-structure.type-a .tab-buttons {
        grid-column: 1 / -1;
    }
}

/* Breakpoints S */
@media screen and (min-width: 0) and (max-width: 768px) {
    /* Allow mobile scrolling to overflow into page margin */
    .tab-structure.type-b .tab-buttons {
        width: 100%;
        margin-left: calc(var(--default-padding) * -1);
        margin-right: calc(var(--default-padding) * -1);
        padding-left: var(--default-padding);
        padding-right: var(--default-padding);
        overflow-x: scroll;
        white-space: nowrap;
    }

    .tab-structure .tab-button .tab-title {
        font: var(--font-copy-sm-bold);
    }
}

/* endregion */

/* region Toast */

.toast-notifications-container {
    position: sticky;
    bottom: var(--spacing-7);
    width: 100%;
    max-width: var(--max-width);
    margin: 0 auto;
    padding: 0 var(--default-padding);
    row-gap: var(--spacing-3);
    box-sizing: border-box;
}

.toast {
    grid-column: 4 / -4;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-3) var(--spacing-5);
    color: var(--color-grey-50);
    background-color: var(--color-grey-850);
    border-radius: var(--spacing-3);
    box-shadow: 0 var(--spacing-2) var(--spacing-5) var(--color-opacities-10);
}

.toast .content {
    display: flex;
    flex-flow: row nowrap;
    align-items: center;
    gap: var(--spacing-3);
}

.toast button.close {
    color: var(--color-grey-50);
}

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    .toast {
        grid-column: 5 / -5;
    }
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .toast {
        grid-column: 1 / -1;
    }
}

/* endregion */

/* region Split-flap timer */

.split-flap-timer {
    width: fit-content;
    display: flex;
    flex-flow: row nowrap;
    gap: var(--spacing-2);
    font: var(--font-btn-lg);
    letter-spacing: var(--font-btn-lg-spacing);
}

.split-flap-timer .separator {
    padding: var(--spacing-3) 0;
}

.split-flap-timer .unit-group {
    display: flex;
    flex-flow: column nowrap;
    align-items: center;
    gap: var(--spacing-2);
}

.split-flap-timer .unit-group .value {
    display: flex;
    flex-flow: row nowrap;
    gap: var(--spacing-2);
}

.split-flap-timer .unit-group .value .cell {
    padding: var(--spacing-3);
    border: 1px solid var(--color-grey-200);
    border-radius: 8px;
}

.split-flap-timer .unit-group .unit {
    font: var(--font-copy-sm);
    color: var(--color-copy-secondary);
}

/* endregion */

/* region Loading skeleton */

@keyframes skeleton-shimmer {
    0% {
        background-position: -100vw 0;
    }
    100% {
        background-position: 100vw 0;
    }
}

:root {
    --skeleton-play-state: paused;
}

.loading .skeleton {
    --shine-colour: rgba(255, 255, 255, 0.35);
    position: relative;
    overflow: hidden;
    background: var(--color-grey-300) !important;
    color: rgba(0, 0, 0, 0) !important;
    border-color: rgba(0, 0, 0, 0) !important;
    border-radius: 4px;
    cursor: wait;
    user-select: none;
    pointer-events: none;
}
.theme-dark .loading .skeleton {
    --shine-colour: rgba(0, 0, 0, 0.35);
}
.loading .skeleton::after {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    content: '';
    background-image: linear-gradient(90deg, transparent 0%, var(--shine-colour) 50%, transparent 100%);
    background-size: 100vw 100%;
    background-repeat: no-repeat;
    animation: skeleton-shimmer 1.5s infinite;
    animation-play-state: var(--skeleton-play-state); /* Start with JS to sync animations */
}
.direction-rtl .loading .skeleton::after {
    animation-direction: reverse;
}

.loading .skeleton *:not(.skext) {
    visibility: hidden !important;
}

/* region skext - Loading skeleton for text lines */

.loading :has(>.skeleton.skext) { /* :has() support still gaining but unsupported isn't damaging */
    width: 100%; /* experimental */
}

.loading .skeleton.skext {
    display: inline-block;
    height: 1em;
    border-radius: 4px;
}

.loading .skeleton.skext:nth-child(3n) { width: 90%; }
.loading .skeleton.skext:nth-child(3n+1) { width: 85%; }
.loading .skeleton.skext:nth-child(3n+2) { width: 95%; }
.loading .skeleton.skext:last-child { width: 60%; }
.loading .skeleton.skext:first-child { width: 80%; }

/* endregion */

/* endregion */

/**
 * Styling for the animated hero block.
 */

.animated-hero {
    position: relative;
    height: 150vh;
    max-width: min(100%, 3840px);
    margin-bottom: calc(var(--spacing-12) * -1);
    padding: 0;
    display: flex;
    flex-flow: column nowrap;
}

.animated-hero .scroll-region {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}

.animated-hero .media {
    position: sticky;
    top: var(--top-height);
    height: calc(100vh - var(--top-height));
}

.animated-hero .media canvas {
    position: absolute;
}

.animated-hero .media video {
    position: absolute;
    height: 100%;
    width: 100%;
    /* object-fit is supported by all latest browser versions (Dec. 2022...)
     * if not supported, video won't line up with image - probably not too much of an issue  */
    object-fit: cover;
    opacity: 0;
}

.animated-hero .media.show-video canvas {
    opacity: 0;
}
.animated-hero .media.show-video video {
    opacity: unset;
}

.animated-hero .text-pane {
    width: 100%;
    max-width: 1320px;
    /* Centre the text-pane to the middle of the visible portion of the animated-hero. */
    transform: translateY(-50%);
    margin: calc((100vh - var(--top-height)) / 2) auto 0;
    padding: 0 var(--default-padding);
    box-sizing: border-box;
    font: var(--font-copy-lg);
    color: var(--color-copy-primary);
}

.animated-hero .heading {
    grid-column: 2 / -2;
    margin-bottom: var(--spacing-7);
    text-align: center;
}

.animated-hero .blurb {
    grid-column: 3 / -3;
    text-align: center;
}

.animated-hero .buttons {
    display: flex;
    margin-top: var(--spacing-10);
    justify-content: center;
    gap: var(--spacing-5);
}

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    .animated-hero .heading {
        grid-column: 3 / -3;
    }
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .animated-hero .heading {
        grid-column: 1 / -1;
    }

    .animated-hero .blurb {
        grid-column: 1 / -1;
    }

    .animated-hero .buttons {
        width: 250px;
        margin-left: auto;
        margin-right: auto;
        flex-direction: column;
        align-items: center;
    }
}

/**
 * CSS common to all megapages pages.
 */

/* region Tables */

/* Hide scrollbar for Chrome, Safari and Opera */
figure.wp-block-table::-webkit-scrollbar {
    display: none;
}

/* Hide scrollbar for IE, Edge and Firefox */
figure.wp-block-table {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

figure.wp-block-table table td,
figure.wp-block-table table th {
    padding: var(--spacing-5);
}

figure.wp-block-table table td.has-text-align-center .icon-box {
    margin: 0 auto;
}

figure.wp-block-table table td.has-text-align-center .icon-box .icon.x {
    color: var(--color-link-disabled);
}

figure.wp-block-table figcaption {
    margin-top: var(--spacing-7);
    font: var(--font-copy-sm);
    color: var(--color-copy-secondary);
}

figure.wp-block-image figcaption {
    margin: var(--spacing-7) 0 0;
    font: var(--font-copy-sm);
    color: var(--color-copy-secondary);
}

/* endregion */

/* region Inputs */

input.hidden-input {
    height: 0;
    margin: 0;
    padding: 0;
    position: absolute;
    width: 0;
    border: none;
    outline: none;
}

/* endregion */

.page-container a:link:not(.button, .text-button, .link) {
    color: var(--color-secondary-cobalt-500);
}

.theme-dark .page-container a:link:not(.button,.text-button, .link),
.page-container a:visited:not(.text-button,.button, .link) {
    color: var(--color-secondary-cobalt-700);
}

.theme-dark .page-container a:visited:not(.button, .text-button, .link) {
    color: var(--color-secondary-cobalt-800);
}

.icon.color-primary-red-500 {
    color: var(--color-primary-red-500)
}

.backup-page-table table thead th:nth-child(2) {
    color: var(--color-primary-red-500);
}

/* Breakpoint S */
@media screen and (min-width: 0) and (max-width: 768px) {
    .heading {
        hyphens: auto;
        hyphenate-limit-chars: 10 4 4;
    }

    /* Override default WP table width for megapages pages */
    figure.wp-block-table table {
        width: 720px;
    }
}

/* endregion */

/**
 * Styling for the "simple card" module.
 */

.simple-card {
    display: flex;
    flex-direction: column;
    padding: var(--spacing-8);
    gap: var(--spacing-9);
    border: 1px solid var(--color-grey-150);
    border-radius: 8px;
}

.simple-card .container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-5);
    flex-grow: 2;
}

.simple-card .container .icon-box {
    --icon-size: 48px;
}
.simple-card .container .img-box {
    width: 160px;
    height: 80px;
}

.simple-card .container .img-box .img {
    background-position: unset;
}

.direction-rtl .simple-card .container .img-box .img {
    background-position: right;
}

.theme-light .simple-card .container .img-box .img.dark {
    display: none;
}
.theme-dark .simple-card .container .img-box .img.light {
    display: none;
}

.simple-card .container .blurb {
    color: var(--color-copy-secondary);
}

.theme-light .simple-card .container .blurb a {
    color: var(--color-secondary-cobalt-600);
}
.theme-dark .simple-card .container .blurb a {
    color: var(--color-secondary-cobalt-700);
}

/* Breakpoints S and M */
@media screen and (min-width: 0) and (max-width: 1080px) {
    .simple-card {
        padding: var(--spacing-7);
    }
}

/**
 * Styling for the features simple card column module.
 */

.ft-simple-card-column {
    margin: var(--spacing-12) auto;
}

.ft-simple-card-column .texts {
    grid-column: 2 / -2;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-7);
    text-align: center;
    margin-bottom: var(--spacing-11);
}

.ft-simple-card-column .texts .blurb {
    color: var(--color-copy-secondary);
}

.ft-simple-card-column .cards {
    grid-column: 1 / -1;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-8);
}

.ft-simple-card-column.two .cards {
    grid-column: 2 / -2;
    grid-template-columns: repeat(2, 1fr);
}

.ft-simple-card-column .supporting-text {
    grid-column: 1 / -1;
    font: var(--font-copy-sm);
    color: var(--color-copy-secondary);
    padding-top: var(--spacing-7);
}

.ft-simple-card-column.two .supporting-text {
    grid-column: 2 / -2;
}

/* Breakpoints S to L */
@media screen and (min-width: 0) and (max-width: 1320px) {
    .ft-simple-card-column.two .cards {
        grid-column: 1 / -1;
    }

    .ft-simple-card-column.two .supporting-text {
        grid-column: 1 / -1;
    }
}

/* Breakpoints S and M */
@media screen and (min-width: 0) and (max-width: 1080px) {
    .ft-simple-card-column .heading {
        hyphens: auto;
        hyphenate-limit-chars: 10 4 4;
    }

    .ft-simple-card-column .cards {
        gap: var(--spacing-7);
    }
}

/* Breakpoint S */
@media screen and (min-width: 0) and (max-width: 768px) {
    .ft-simple-card-column .cards .simple-card {
        grid-column: 1 / -1;
    }

    .ft-simple-card-column .texts {
        grid-column: 1 / -1;
    }
}

/**
 * Styling for the single slice module.
 */

.single-slice {
    display: flex;
    flex-direction: row;
    align-items: center;
    padding: var(--spacing-12) var(--spacing-9);
    gap: var(--spacing-8);
    background-color: var(--color-bg-page);
}
.single-slice.reversed {
    flex-direction: row-reverse;
}
.single-slice.surface {
    background-color: var(--color-bg-surface-1);
}

.single-slice .text-pane {
    flex-basis: calc(5 / 12 * 100%);
    word-break: break-word;
}

.single-slice .text-pane .heading {
    margin-bottom: var(--spacing-7);
}

.single-slice .text-pane .blurb {
    margin-bottom: var(--spacing-8);
}

.single-slice .img-box,
.single-slice .video-box {
    flex-basis: calc(7 / 12 * 100%);
}

.single-slice .img-box .img {
    width: 100%;
    height: 0;
    background-size: cover;
    padding-top: 100%; /* 1:1 aspect ratio */
}

.single-slice .video-box video {
    width: 100%;
    display: block;
}

.theme-light .single-slice .video-box video.dark {
    display: none;
}
.theme-dark .single-slice .video-box video.light {
    display: none;
}

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    .single-slice {
        gap: var(--spacing-7);
    }

    .single-slice .text-pane .heading {
        hyphens: auto;
        hyphenate-limit-chars: 16 4 4;
    }
}

/* Breakpoints M and S */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    .single-slice {
        padding: var(--spacing-12) var(--spacing-7);
    }
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .single-slice,
    .single-slice.reversed {
        gap: var(--spacing-9);
        flex-direction: column-reverse;
        align-items: stretch;
    }
}

/**
 * Styling for the alternating feature layout module.
 */

.centre-align.feature-alternating {
    padding: var(--spacing-13) 0;
    max-width: unset;
}

.centre-align.feature-alternating .texts.main-grid {
    padding: 0 var(--default-padding);
    max-width: 1320px;
    margin: 0 auto;
    box-sizing: border-box;
}

.feature-alternating .text {
    grid-column: 3 / -3;
    max-width: 100%;
    margin-bottom: var(--spacing-11);
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-7);
}

.feature-alternating .features {
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-12);
}

.right-align.feature-alternating {
    padding: var(--spacing-13) var(--spacing-9) var(--spacing-13) 0;
    grid-column: 3 / -1;
}

.right-align.feature-alternating .text {
    grid-column: 1 / -3;
    text-align: start;
}

.centre-align.feature-alternating .text > * {
    text-align: center;
}

/* Breakpoint M  */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    .feature-alternating .features:has(.type-b) {
        margin-top: var(--spacing-12);
    }

    .right-align.feature-alternating {
        padding: var(--spacing-9) var(--spacing-7) var(--spacing-13);
        grid-column: 1 / -1;
    }

    .right-align.feature-alternating .text > * {
        grid-column: 1 / -2;
    }
}

/* Breakpoints M and S */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    .right-align.feature-alternating {
        padding: var(--spacing-9) 0 var(--spacing-13);
        grid-column: 1 / -1;
    }

    .feature-alternating .text {
        grid-column: 1 / -1;
    }

    .centre-align.feature-alternating .text > * {
        grid-column: 2 /-2;
    }
}

/* Breakpoints S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .feature-alternating .text {
        grid-column: 1 / -1;
    }
}

/* region Alternating Feature Inner Block */
.feature-alternating .feature-block .container {
    display: flex;
    align-items: center;
    gap: var(--spacing-8);
    padding: 0 var(--default-padding);
    max-width: 1320px;
    margin: 0 auto;
    box-sizing: border-box;
}
.right-align.feature-alternating .feature-block .container {
    padding: 0;
}
.feature-alternating .feature-block:nth-child(odd) .container,
.feature-alternating.reversed .feature-block:nth-child(even) .container {
    flex-direction: row;
}
.feature-alternating .feature-block:nth-child(even) .container,
.feature-alternating.reversed .feature-block:nth-child(odd) .container {
    flex-direction: row-reverse;
}

.feature-alternating .feature-block .text-pane {
    flex-basis: calc(5 / 12 * 100%);
    word-break: break-word;
}
.feature-alternating .feature-block:nth-child(odd) .text-pane,
.feature-alternating.reversed .feature-block:nth-child(even) .text-pane {
    padding-left: 0;
    padding-right: var(--spacing-8);
}
.feature-alternating .feature-block:nth-child(even) .text-pane,
.feature-alternating.reversed .feature-block:nth-child(odd) .text-pane {
    padding-left: var(--spacing-8);
    padding-right: 0;
}

.feature-alternating .feature-block .text-pane .heading {
    margin-bottom: var(--spacing-7);
    hyphens: auto;
    hyphenate-limit-chars: 10 4 4;
}

.feature-alternating .feature-block.type-a .text-pane .blurb {
    margin-bottom: var(--spacing-8);
}

.feature-alternating .feature-block.type-b .icon-blurbs {
    margin: var(--spacing-8) 0;
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-9);
}

.feature-alternating .feature-block .text-pane .text-button {
    width: fit-content;
}

.feature-alternating .feature-block .img-box,
.feature-alternating .feature-block .video-box {
    flex: 0 0 calc(7 / 12 * 100%);
    align-self: normal;
}

.feature-alternating .feature-block .img-box .img {
    width: 100%;
    height: 0;
    background-size: cover;
    /* Keep image in view (if text overhangs it) while scrolling */
    position: sticky;
    position: -webkit-sticky; /* Safari */
    top: var(--top-height);
}

.feature-alternating .feature-block .video-box video {
    width: 100%;
    display: block;
}

.theme-light .feature-alternating .feature-block .video-box video.dark {
    display: none;
}
.theme-dark .feature-alternating .feature-block .video-box video.light {
    display: none;
}

.feature-alternating .feature-block.type-a .img-box .img {
    padding-top: calc(3 / 4 * 100%); /* 4:3 aspect ratio */
}

.feature-alternating .feature-block.type-b .img-box .img {
    padding-top: 100%; /* 1:1 aspect ratio */
}

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    .feature-alternating .feature-block.type-a .container {
        gap: var(--spacing-7);
    }

    .feature-alternating .feature-block.type-b .text-pane > * {
        grid-column: 2 / -2;
    }

    .feature-alternating .feature-block.type-b .img-box .img {
        padding-top: calc(3 / 4 * 100%); /* 4:3 aspect ratio */
    }
}

/* Breakpoints M and S */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    .feature-alternating .feature-block.type-b .container {
        gap: var(--spacing-10);
    }

    .feature-alternating .feature-block.type-b .container ,
    .feature-alternating.reversed .feature-block.type-b .container {
        flex-direction: column-reverse;
        align-items: stretch;
    }

    .feature-alternating .feature-block.type-b > * {
        flex-basis: unset;
    }

    .feature-alternating .feature-block.type-b .text-pane,
    .feature-alternating.reversed .feature-block.type-b .text-pane {
        padding: unset;
    }

    .feature-alternating .feature-block.type-a .img-box .img {
        padding-top: 100%; /* 1:1 aspect ratio */
        background-size: contain;
    }
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .feature-alternating .feature-block.type-a .container {
        gap: var(--spacing-9);
    }

    .right-align.feature-alternating .feature-block .container {
        padding: 0;
    }

    .feature-alternating .feature-block.type-a .container,
    .feature-alternating.reversed .feature-block.type-a .container {
        flex-direction: column-reverse;
        align-items: stretch;
    }

    .feature-alternating .feature-block.type-a > * {
        flex-basis: unset;
    }

    .feature-alternating .feature-block.type-a .text-pane,
    .feature-alternating.reversed .feature-block.type-a .text-pane {
        padding: unset;
    }

    .feature-alternating .feature-block.type-b .text-pane > * {
        grid-column: 1 / -1;
    }

    .feature-alternating .feature-block.type-b .img-box .img {
        padding-top: 100%; /* 1:1 aspect ratio */
    }
}

/* region Icon Blurb (as used in Alternating Feature Type B feature module */

.feature-alternating .feature-block .icon-blurb .icon-box {
    margin-bottom: var(--spacing-7);
}

.feature-alternating .feature-block .icon-blurb .heading {
    margin: var(--spacing-7) 0 var(--spacing-4);
}

/* Breakpoints M and S */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    .feature-alternating .feature-block .icon-blurb .heading {
        margin: var(--spacing-5) 0 var(--spacing-3) 0;
    }
}

/* endregion */

/* endregion */

/**
 * Styling for the alternating feature layout module.
 */

.centre-align.feature-alternating {
    padding: var(--spacing-13) 0;
    max-width: unset;
}

.centre-align.feature-alternating .texts.main-grid {
    padding: 0 var(--default-padding);
    max-width: 1320px;
    margin: 0 auto;
    box-sizing: border-box;
}

.feature-alternating .text {
    grid-column: 3 / -3;
    max-width: 100%;
    margin-bottom: var(--spacing-11);
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-7);
}

.feature-alternating .features {
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-12);
}

.right-align.feature-alternating {
    padding: var(--spacing-13) var(--spacing-9) var(--spacing-13) 0;
    grid-column: 3 / -1;
}

.right-align.feature-alternating .text {
    grid-column: 1 / -3;
    text-align: start;
}

.centre-align.feature-alternating .text > * {
    text-align: center;
}

/* Breakpoint M  */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    .feature-alternating .features:has(.type-b) {
        margin-top: var(--spacing-12);
    }

    .right-align.feature-alternating {
        padding: var(--spacing-9) var(--spacing-7) var(--spacing-13);
        grid-column: 1 / -1;
    }

    .right-align.feature-alternating .text > * {
        grid-column: 1 / -2;
    }
}

/* Breakpoints M and S */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    .right-align.feature-alternating {
        padding: var(--spacing-9) 0 var(--spacing-13);
        grid-column: 1 / -1;
    }

    .feature-alternating .text {
        grid-column: 1 / -1;
    }

    .centre-align.feature-alternating .text > * {
        grid-column: 2 /-2;
    }
}

/* Breakpoints S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .feature-alternating .text {
        grid-column: 1 / -1;
    }
}

/* region Alternating Feature Inner Block */
.feature-alternating .feature-block .container {
    display: flex;
    align-items: center;
    gap: var(--spacing-8);
    padding: 0 var(--default-padding);
    max-width: 1320px;
    margin: 0 auto;
    box-sizing: border-box;
}
.right-align.feature-alternating .feature-block .container {
    padding: 0;
}
.feature-alternating .feature-block:nth-child(odd) .container,
.feature-alternating.reversed .feature-block:nth-child(even) .container {
    flex-direction: row;
}
.feature-alternating .feature-block:nth-child(even) .container,
.feature-alternating.reversed .feature-block:nth-child(odd) .container {
    flex-direction: row-reverse;
}

.feature-alternating .feature-block .text-pane {
    flex-basis: calc(5 / 12 * 100%);
    word-break: break-word;
}
.feature-alternating .feature-block:nth-child(odd) .text-pane,
.feature-alternating.reversed .feature-block:nth-child(even) .text-pane {
    padding-left: 0;
    padding-right: var(--spacing-8);
}
.feature-alternating .feature-block:nth-child(even) .text-pane,
.feature-alternating.reversed .feature-block:nth-child(odd) .text-pane {
    padding-left: var(--spacing-8);
    padding-right: 0;
}

.feature-alternating .feature-block .text-pane .heading {
    margin-bottom: var(--spacing-7);
    hyphens: auto;
    hyphenate-limit-chars: 10 4 4;
}

.feature-alternating .feature-block.type-a .text-pane .blurb {
    margin-bottom: var(--spacing-8);
}

.feature-alternating .feature-block.type-b .icon-blurbs {
    margin: var(--spacing-8) 0;
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-9);
}

.feature-alternating .feature-block .text-pane .text-button {
    width: fit-content;
}

.feature-alternating .feature-block .img-box,
.feature-alternating .feature-block .video-box {
    flex: 0 0 calc(7 / 12 * 100%);
    align-self: normal;
}

.feature-alternating .feature-block .img-box .img {
    width: 100%;
    height: 0;
    background-size: cover;
    /* Keep image in view (if text overhangs it) while scrolling */
    position: sticky;
    position: -webkit-sticky; /* Safari */
    top: var(--top-height);
}

.feature-alternating .feature-block .video-box video {
    width: 100%;
    display: block;
}

.theme-light .feature-alternating .feature-block .video-box video.dark {
    display: none;
}
.theme-dark .feature-alternating .feature-block .video-box video.light {
    display: none;
}

.feature-alternating .feature-block.type-a .img-box .img {
    padding-top: calc(3 / 4 * 100%); /* 4:3 aspect ratio */
}

.feature-alternating .feature-block.type-b .img-box .img {
    padding-top: 100%; /* 1:1 aspect ratio */
}

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    .feature-alternating .feature-block.type-a .container {
        gap: var(--spacing-7);
    }

    .feature-alternating .feature-block.type-b .text-pane > * {
        grid-column: 2 / -2;
    }

    .feature-alternating .feature-block.type-b .img-box .img {
        padding-top: calc(3 / 4 * 100%); /* 4:3 aspect ratio */
    }
}

/* Breakpoints M and S */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    .feature-alternating .feature-block.type-b .container {
        gap: var(--spacing-10);
    }

    .feature-alternating .feature-block.type-b .container ,
    .feature-alternating.reversed .feature-block.type-b .container {
        flex-direction: column-reverse;
        align-items: stretch;
    }

    .feature-alternating .feature-block.type-b > * {
        flex-basis: unset;
    }

    .feature-alternating .feature-block.type-b .text-pane,
    .feature-alternating.reversed .feature-block.type-b .text-pane {
        padding: unset;
    }

    .feature-alternating .feature-block.type-a .img-box .img {
        padding-top: 100%; /* 1:1 aspect ratio */
        background-size: contain;
    }
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .feature-alternating .feature-block.type-a .container {
        gap: var(--spacing-9);
    }

    .right-align.feature-alternating .feature-block .container {
        padding: 0;
    }

    .feature-alternating .feature-block.type-a .container,
    .feature-alternating.reversed .feature-block.type-a .container {
        flex-direction: column-reverse;
        align-items: stretch;
    }

    .feature-alternating .feature-block.type-a > * {
        flex-basis: unset;
    }

    .feature-alternating .feature-block.type-a .text-pane,
    .feature-alternating.reversed .feature-block.type-a .text-pane {
        padding: unset;
    }

    .feature-alternating .feature-block.type-b .text-pane > * {
        grid-column: 1 / -1;
    }

    .feature-alternating .feature-block.type-b .img-box .img {
        padding-top: 100%; /* 1:1 aspect ratio */
    }
}

/* region Icon Blurb (as used in Alternating Feature Type B feature module */

.feature-alternating .feature-block .icon-blurb .icon-box {
    margin-bottom: var(--spacing-7);
}

.feature-alternating .feature-block .icon-blurb .heading {
    margin: var(--spacing-7) 0 var(--spacing-4);
}

/* Breakpoints M and S */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    .feature-alternating .feature-block .icon-blurb .heading {
        margin: var(--spacing-5) 0 var(--spacing-3) 0;
    }
}

/* endregion */

/* endregion */

/**
 * Styling for the competitor matrix module.
 */

.matrix-card {
    background-color: var(--color-bg-page);
    border: 1px solid var(--color-grey-150);
    flex: 1;
}

.matrix-card .box {
    padding: var(--spacing-8) var(--spacing-8) var(--spacing-7);
}

.matrix-card .img-box {
    margin-bottom: var(--spacing-7);
    width: var(--spacing-11);
    height: var(--spacing-11);
}

.matrix-card .competitor-name {
    margin-bottom: var(--spacing-8);
}

.matrix-card .competitor-price {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-3);
}

.matrix-card .competitor-price .price {
    font: var(--font-data-one);
    display: flex;
    flex-flow: row nowrap;
}

.matrix-card .competitor-price .price .asterisk {
    font-size: 28px;
    line-height: 36px;
}

.matrix-card .competitor-price .per-tb-per-month {
    font: var(--font-caption-lg);
    color: var(--color-copy-secondary);
}

.matrix-card .price-disclaimer {
    font: var(--font-copy-sm);
    color: var(--color-copy-secondary);
    padding: var(--spacing-7) var(--spacing-8) var(--spacing-8);
}

.matrix-card .encryption-banner {
    background-color: var(--color-grey-50);
    display: flex;
    flex-direction: row;
    gap: var(--spacing-3);
    font: var(--font-copy-md-bold);
    padding: var(--spacing-5) var(--spacing-8);
}

.matrix-card .encryption-banner .icon-box {
    flex: none;
}

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    .matrix-card .competitor-price .price .asterisk {
        font-size: 24px;
        line-height: 32px;
    }
}

/* Breakpoints S and M */
@media screen and (min-width: 0) and (max-width: 1080px) {
    .matrix-card .box,
    .matrix-card .price-disclaimer {
        padding: var(--spacing-7);
    }

    .matrix-card .encryption-banner {
        padding: var(--spacing-5) var(--spacing-7);
    }
}

/* Breakpoint S */
@media screen and (min-width: 0) and (max-width: 768px) {
    .matrix-card .competitor-price .price .asterisk {
        font-size: 18px;
        line-height: 26px;
    }
}

/**
 * Styling for the competitor matrix module core block.
 */

.competitor-matrix {
    max-width: unset;
    padding: 0 0 var(--spacing-12);
}
.competitor-matrix.surface-bg {
    background-color: var(--color-bg-surface-1);
}

.competitor-matrix .contents {
    display: flex;
    flex-direction: column;
    max-width: 1320px;
    margin: 0 auto;
}

.competitor-matrix .matrix-heading {
    text-align: center;
    padding: var(--spacing-11) 0;
}

.competitor-matrix .matrix-cards {
    display: flex;
    flex-direction: row;
    gap: var(--spacing-8);
    padding: 0 var(--spacing-9);
}

/* Breakpoints S and M */
@media screen and (min-width: 0) and (max-width: 1080px) {
    .competitor-matrix .matrix-cards {
        gap: var(--spacing-7);
        padding: 0 var(--spacing-7);
    }
}

/* Breakpoint S */
@media screen and (min-width: 0) and (max-width: 768px) {
    .competitor-matrix .matrix-cards {
        flex-direction: column;
    }
}

/**
 * Styling for the coming soon block, as found in the alternating feature layout module.
 */

.coming-soon .container {
    display: flex;
    align-items: center;
    padding: var(--spacing-12) var(--default-padding);
    gap: var(--spacing-8);
    max-width: 1320px;
    margin: 0 auto;
    box-sizing: border-box;
}

.coming-soon .scrollpoint {
    scroll-margin-top: var(--top-height);
}

.coming-soon.surface-one-bg {
    background-color: var(--color-bg-surface-1);
}

.theme-light .coming-soon.blue-bgs {
    background-color: var(--color-bg-tinted-blue);
}
.theme-dark .coming-soon.blue-bgs {
    background-color: var(--color-secondary-cobalt-100);
}

.feature-alternating .coming-soon:nth-child(odd) .container,
.feature-alternating.reversed .coming-soon:nth-child(even) .container {
    flex-direction: row;
}
.feature-alternating .coming-soon:nth-child(even) .container,
.feature-alternating.reversed .coming-soon:nth-child(odd) .container {
    flex-direction: row-reverse;
}

.coming-soon .call-to-action-section {
    display: block;
    padding-inline-end: var(--spacing-8);
}
.coming-soon .call-to-action-section.submitted {
    padding-right: 0;
}

.coming-soon .text-pane {
    flex-basis: calc(5 / 12 * 100%);
    word-break: break-word;
}

.coming-soon .tagline {
    font: var(--font-copy-allcaps-md);
    letter-spacing: var(--font-copy-allcaps-sm-spacing);
    text-transform: uppercase;
    margin: 0 0 var(--spacing-3);
}
.theme-light .coming-soon .tagline {
    color: var(--color-secondary-cobalt-600);
}
.theme-dark .coming-soon .tagline {
    color: var(--color-secondary-cobalt-700);
}

.coming-soon .heading {
    margin: 0 0 var(--spacing-5);
}

.coming-soon .text-pane .call-to-action-section {
    margin-top: var(--spacing-8);
}

.coming-soon .text-pane .call-to-action-section .email-field {
    width: 100%;
    height: 100%;
    margin: 0 0 var(--spacing-5);
    padding: 10px 12px;
    gap: 8px;
    background: var(--color-brand-white);
    border-radius: 8px;
    font: var(--font-copy-md);
}
.coming-soon .text-pane .call-to-action-section .email-field.invalid {
    margin-bottom: var(--spacing-3);
}

.coming-soon .text-pane .call-to-action-section .beta-tester {
    margin-bottom: var(--spacing-5);
}

.theme-dark .coming-soon.blue-bgs .text-pane .button.primary-muted {
    /* Want button to look the same in both light & dark mode, when module has a blue bg colour */
    background-color: var(--color-primary-black-50); /* Inverse of primary-black-900 in light mode */
    color: var(--color-grey-1000); /* Inverse of color-grey-50 in light mode */
}

.coming-soon .text-pane .message-wrapper {
    display: flex;
    flex-flow: row nowrap;
    gap: var(--spacing-3);
}
.coming-soon .text-pane .message-wrapper.invalid {
    margin-bottom: var(--spacing-5);
    color: var(--color-system-error);
}
.coming-soon .text-pane .message-wrapper.valid {
    margin-top: var(--spacing-8);
    color: var(--color-system-success);
}

.coming-soon .text-pane .message-wrapper .icon-box.error {
    --icon-size: 16px;
    margin-top: 2px;
}

.coming-soon .text-pane .message-wrapper .error-text {
    font: var(--font-copy-sm);
}

.coming-soon .text-pane .message-wrapper .thank-you-text {
    color: var(--color-copy-primary);
}

.coming-soon .img-box {
    flex-basis: calc(7 / 12 * 100%);
}
.coming-soon .img-box .img {
    width: 100%;
    height: 0;
    background-size: cover;
    padding-top: calc(3 / 4 * 100%); /* 4:3 aspect ratio */
}

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    .coming-soon {
        gap: var(--spacing-7);
    }
}

/* Breakpoints M and S */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    .coming-soon .text-pane .email-field.invalid {
        margin-bottom: var(--spacing-2);
    }

    .coming-soon .text-pane .message-wrapper.valid {
        flex-direction: column;
    }
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .coming-soon .container {
        gap: var(--spacing-9);
    }

    .coming-soon > * {
        flex-basis: unset;
    }

    .feature-alternating .coming-soon:nth-child(odd) .container,
    .feature-alternating.reversed .coming-soon:nth-child(even) .container,
    .feature-alternating .coming-soon:nth-child(even) .container,
    .feature-alternating.reversed .coming-soon:nth-child(odd) .container {
        flex-direction: column-reverse;
        align-items: stretch;
    }

    .coming-soon .img-box .img {
        padding-top: 100%; /* 1:1 aspect ratio */
    }
}

.wp-block-columns{align-items:normal!important;box-sizing:border-box;display:flex;flex-wrap:wrap!important}@media (min-width:782px){.wp-block-columns{flex-wrap:nowrap!important}}.wp-block-columns.are-vertically-aligned-top{align-items:flex-start}.wp-block-columns.are-vertically-aligned-center{align-items:center}.wp-block-columns.are-vertically-aligned-bottom{align-items:flex-end}@media (max-width:781px){.wp-block-columns:not(.is-not-stacked-on-mobile)>.wp-block-column{flex-basis:100%!important}}@media (min-width:782px){.wp-block-columns:not(.is-not-stacked-on-mobile)>.wp-block-column{flex-basis:0;flex-grow:1}.wp-block-columns:not(.is-not-stacked-on-mobile)>.wp-block-column[style*=flex-basis]{flex-grow:0}}.wp-block-columns.is-not-stacked-on-mobile{flex-wrap:nowrap!important}.wp-block-columns.is-not-stacked-on-mobile>.wp-block-column{flex-basis:0;flex-grow:1}.wp-block-columns.is-not-stacked-on-mobile>.wp-block-column[style*=flex-basis]{flex-grow:0}:where(.wp-block-columns){margin-bottom:1.75em}:where(.wp-block-columns.has-background){padding:1.25em 2.375em}.wp-block-column{flex-grow:1;min-width:0;overflow-wrap:break-word;word-break:break-word}.wp-block-column.is-vertically-aligned-top{align-self:flex-start}.wp-block-column.is-vertically-aligned-center{align-self:center}.wp-block-column.is-vertically-aligned-bottom{align-self:flex-end}.wp-block-column.is-vertically-aligned-stretch{align-self:stretch}.wp-block-column.is-vertically-aligned-bottom,.wp-block-column.is-vertically-aligned-center,.wp-block-column.is-vertically-aligned-top{width:100%}
/**
 * Styling for the banner full width module.
 */

.full-width-banner {
    padding: 0;
    max-width: unset;
}
.full-width-banner.light-grey {
    background-color: var(--color-grey-100);
}
.full-width-banner.cobalt {
    background-color: var(--color-secondary-cobalt-900);
}
.full-width-banner.red {
    background-color: var(--color-primary-red-50);
}
.theme-light .full-width-banner.black {
    background-color: var(--color-primary-black-800);
}
.theme-dark .full-width-banner.black {
    background-color: var(--color-primary-black-200);
}
.full-width-banner.dark-grey,
.full-width-banner.typo {
    background-color: var(--color-grey-850);
}

.full-width-banner .banner-contents {
    display: flex;
    flex-direction: row;
    max-width: 1320px;
    margin: 0 auto;
}

.full-width-banner .banner-contents.reversed {
    flex-direction: row-reverse;
}

.full-width-banner .img-box {
    flex: 4;
}

.full-width-banner .img-box .img {
    background-size: cover;
}

.full-width-banner .content-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-5);
    padding: var(--spacing-11) var(--default-padding);
    flex: 8;
}
.full-width-banner.no-blurb .content-container {
    gap: var(--spacing-9);
}
.full-width-banner.typo .content-container {
    display: flex;
    flex-direction: row;
    gap: var(--spacing-8);
    padding: var(--spacing-11) var(--spacing-9) var(--spacing-12);
}

.full-width-banner.dark-grey .heading,
.full-width-banner.cobalt .heading,
.full-width-banner.typo .heading,
.theme-light .full-width-banner.black .heading {
    color: var(--color-grey-50);
}
.theme-dark .full-width-banner.black .heading {
    color: var(--color-grey-1000);
}

/* region dark banner text button colours */

.full-width-banner.dark-grey .text-button:not(:hover),
.full-width-banner.cobalt .text-button:not(:hover),
.full-width-banner.typo .text-button:not(:hover),
.theme-light .full-width-banner.black .text-button:not(:hover) {
    color: var(--color-primary-black-50);
}
.theme-dark .full-width-banner.black .text-button:not(:hover) {
    color: var(--color-primary-black-900);
}

.theme-light .full-width-banner.dark-grey .text-button:visited
.theme-light .full-width-banner.dark-grey .text-button:visited > *,
.theme-light .full-width-banner.cobalt .text-button:visited,
.theme-light .full-width-banner.cobalt .text-button:visited > *,
.theme-light .full-width-banner.typo .text-button:visited,
.theme-light .full-width-banner.typo .text-button:visited > *,
.theme-light .full-width-banner.black .text-button:visited,
.theme-light .full-width-banner.black .text-button:visited > * {
    color: var(--color-primary-black-200);
}

.theme-dark .full-width-banner.dark-grey .text-button:visited
.theme-dark .full-width-banner.dark-grey .text-button:visited > *,
.theme-dark .full-width-banner.cobalt .text-button:visited,
.theme-dark .full-width-banner.cobalt .text-button:visited > *,
.theme-dark .full-width-banner.typo .text-button:visited,
.theme-dark .full-width-banner.typo .text-button:visited > * {
    color: var(--color-primary-black-400);
}
.theme-dark .full-width-banner.black .text-button:visited,
.theme-dark .full-width-banner.black .text-button:visited > * {
    color: var(--color-primary-black-700);
}

.theme-light .full-width-banner.dark-grey .text-button:hover,
.theme-light .full-width-banner.dark-grey .text-button:hover > *,
.theme-light .full-width-banner.cobalt .text-button:hover,
.theme-light .full-width-banner.cobalt .text-button:hover > *,
.theme-light .full-width-banner.typo .text-button:hover,
.theme-light .full-width-banner.typo .text-button:hover > *,
.theme-light .full-width-banner.black .text-button:hover,
.theme-light .full-width-banner.black .text-button:hover > * {
    color: var(--color-primary-black-100);
}

.theme-dark .full-width-banner.dark-grey .text-button:hover,
.theme-dark .full-width-banner.dark-grey .text-button:hover > *,
.theme-dark .full-width-banner.cobalt .text-button:hover,
.theme-dark .full-width-banner.cobalt .text-button:hover > *,
.theme-dark .full-width-banner.typo .text-button:hover,
.theme-dark .full-width-banner.typo .text-button:hover > * {
    color: var(--color-primary-black-200);
}
.theme-dark .full-width-banner.black .text-button:hover,
.theme-dark .full-width-banner.black .text-button:hover > * {
    color: var(--color-primary-black-800);
}

/* endregion */

.full-width-banner.typo .heading {
    font: var(--font-data-zero);
}

.full-width-banner.typo .heading,
.full-width-banner.typo .blurb-and-buttons {
    flex: 5;
}

.full-width-banner .blurb-and-buttons {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-9);
}

.full-width-banner.dark-grey .blurb-and-buttons .blurb,
.full-width-banner.cobalt .blurb-and-buttons .blurb,
.full-width-banner.typo .blurb-and-buttons .blurb,
.theme-light .full-width-banner.black .blurb-and-buttons .blurb {
    color: var(--color-grey-200);
}
.theme-dark .full-width-banner.black .blurb-and-buttons .blurb {
    color: var(--color-grey-800);
}

.full-width-banner.typo .blurb-and-buttons .blurb {
    padding-top: var(--spacing-5);
}

.full-width-banner.dark-grey .blurb-and-buttons .blurb a,
.full-width-banner.cobalt .blurb-and-buttons .blurb a,
.full-width-banner.typo .blurb-and-buttons .blurb a,
.theme-light .full-width-banner.black .blurb-and-buttons .blurb a {
    color: var(--color-grey-50);
}
.theme-dark .full-width-banner.black .blurb-and-buttons .blurb a {
    color: var(--color-grey-1000);
}
.full-width-banner.red .blurb-and-buttons .blurb a {
    color: var(--color-primary-black-900);
}

.full-width-banner .blurb-and-buttons .buttons {
    display: flex;
    flex-direction: row;
    gap: var(--spacing-5);
}
.full-width-banner.typo .blurb-and-buttons {
    gap: var(--spacing-10);
}

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    .full-width-banner.typo .content-container {
        padding: var(--spacing-11) var(--spacing-7) 64px;
    }
}

/* Breakpoints M and S */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    .full-width-banner .banner-contents,
    .full-width-banner.typo .content-container {
        flex-direction: column;
    }
    .full-width-banner .banner-contents.reversed {
        flex-direction: column-reverse;
    }

    .full-width-banner .img-box .img {
        height: 0;
        padding-top: calc(9 / 16 * 100%); /* 9:16 aspect ratio */
    }

    .full-width-banner.typo .blurb-and-buttons .blurb {
        padding-top: 0;
    }
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .full-width-banner.typo .content-container {
        padding: var(--spacing-11) var(--spacing-7) 56px;
    }

    .full-width-banner .blurb-and-buttons .buttons {
        flex-direction: column;
    }    
}

.wp-block-spacer{clear:both}
/**
 * Styling for the home page social proof module.
 */

.home-social-proof {
   padding-top: var(--spacing-12);
}

.home-social-proof .left-section {
    grid-column: 1 / 6;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-7);
}

.home-social-proof .left-section .heading-and-btn {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    gap: var(--spacing-7);
    align-items: flex-start;
}

.home-social-proof .left-section .heading-and-btn .btn-container {
    display: none;
}

.home-social-proof .left-section .blurb-and-btn {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-9);
}

.home-social-proof .left-section .blurb,
.home-social-proof .right-section .data-point .content .heading {
    color: var(--color-copy-secondary);
}

.home-social-proof .right-section {
    position: relative;
    display: flex;
    flex-direction: column;
    border: 1px solid var(--color-grey-200);
    border-radius: var(--spacing-5);
    padding: var(--spacing-9);
    gap: var(--spacing-9);
    margin-inline-end: 120px;
    margin-bottom: 100px;
    grid-column: 6 / -1;
}

.home-social-proof .right-section .data-point {
    display: flex;
    flex-direction: row;
    gap: var(--spacing-7);
    align-items: flex-start;
}

.home-social-proof .right-section .data-point .img-box {
    width: 80px;
    height: 80px;
}

.home-social-proof .img-box .img {
    background-size: cover;
    padding-top: 100%;
    height: 0;
}

.home-social-proof .right-section .data-point .content {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-3);
}

.theme-light .home-social-proof .right-section .data-point .content .value {
    opacity: 0.7;
}
.home-social-proof .right-section .data-point .content .value {
    font: var(--font-data-one);
    color: var(--color-secondary-cobalt-900);
}

.home-social-proof .right-section .divider {
    border-top: 1px solid var(--color-grey-200);
}

.home-social-proof .overlay-image {
    position: absolute;
    left: 80%;
    top: 65%;
}

.direction-rtl .home-social-proof .overlay-image {
    right: 80%;
    left: unset;
    transform: scaleX(-1);
}

.home-social-proof .overlay-image .img-box {
    width: 240px;
    height: 240px;
}

/* Breakpoint L */
@media screen and (min-width: 1080px) and (max-width: 1320px) {
    .home-social-proof .overlay-image {
        left: 75%;
        top: 75%;
    }

    .direction-rtl .home-social-proof .overlay-image {
        right: 75%;
        left: unset;
        transform: scaleX(-1);
    }
}

/* Breakpoints S - L */
@media screen and (min-width: 0) and (max-width: 1320px) {
    .home-social-proof .right-section .data-point {
        flex-direction: column;
    }
}

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    .home-social-proof .overlay-image {
        top: 75%;
    }

    .home-social-proof .left-section .heading-and-btn .heading {
        flex: 7;
    }

    .home-social-proof .left-section .heading-and-btn .btn-container {
        display: flex;
        justify-content: flex-end;
        flex: 4;
    }

    .home-social-proof .left-section .blurb-and-btn .btn-container {
        display: none;
    }
}

/* Breakpoints S - M */
@media screen and (min-width: 0) and (max-width: 1080px) {
    .home-social-proof .container {
        gap: var(--spacing-9);
    }
    
    .home-social-proof .left-section,
    .home-social-proof .right-section {
        grid-column: 1 / -1;
    }
}

/* Breakpoint S */
@media screen and (min-width: 0) and (max-width: 768px) {
    .home-social-proof .left-section .blurb-and-btn {
        gap: var(--spacing-7);
    }

    .home-social-proof .right-section {
        border: none;
        padding: var(--spacing-9) 0;
        margin: 0;
    }

    .home-social-proof .overlay-image {
        display: none;
    }
}

/**
 * Wordpress styling moved from inline scripts or overrides from other Wordpress versions.
 */

/* .screen-reader-text from WP style.min.css */
.screen-reader-text {
    border: 0;
    clip: rect(1px,1px,1px,1px);
    -webkit-clip-path: inset(50%);
    clip-path: inset(50%);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
    word-wrap: normal!important;
}
.screen-reader-text:focus {
    background-color: #eee;
    clip: auto !important;
    clip-path: none;
    color: #444;
    display: block;
    font-size: 1em;
    height: auto;
    left: 5px;
    line-height: normal;
    padding: 15px 23px 14px;
    text-decoration: none;
    top: 5px;
    width: auto;
    z-index: 100000; /* Above WP toolbar. */
}

/* style.min.css change from newer WP versions */
.wp-block-image {
    margin: 0 0 1em;
}

/**
 * CSS for the header.
 */

:root {
    --header-height: 68px;
}

header.site-header {
    position: fixed;
    z-index: 10;
    top: var(--wp-admin-bar-height);
    width: 100%;
    height: var(--header-height);
    box-sizing: border-box;
}

header.site-header .inner-content {
    max-width: var(--max-width);
    width: 100%;
    box-sizing: border-box;
}

/* region Main Menu */

header.site-header .upper {
    height: 100%;
    display: flex;
    flex-flow: row wrap;
    align-items: center;
    justify-content: center;
    background-color: var(--color-bg-page);
    border-bottom: 1px solid var(--color-grey-100);
}

header.site-header .main-menu {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 var(--spacing-9);
}

header.site-header .main-menu .left-group {
    display: flex;
    gap: 56px;
    align-items: center;
}

header.site-header .main-menu .left-group .menu-items {
    display: flex;
    gap: var(--spacing-8);
    align-items: center;
}

header.site-header .main-menu .logo {
    line-height: 0;
}
header.site-header .main-menu .logo-img {
    width: 32px;
}

header.site-header .main-menu .menu-item {
    all: unset;
    --border-size: var(--spacing-2);
    height: var(--header-height);
    display: flex;
    gap: var(--spacing-3);
    align-items: center;
    box-sizing: border-box;
    padding: calc(var(--spacing-6) - calc(var(--border-size) / 2)) var(--spacing-4);
    border-top: var(--border-size) solid transparent; /* Counteract the bottom border (keep item vertically centred) */
    border-bottom: var(--border-size) solid transparent;
    font: var(--font-copy-md-bold);
    text-decoration: none;
    cursor: pointer;
}
header.site-header .main-menu .menu-item:hover,
header.site-header .main-menu .menu-item.active {
    border-bottom: var(--border-size) solid var(--color-primary-red-500);
}
header.site-header .main-menu .menu-item .menu-icon {
    --icon-size: 24px;
    transition: transform 200ms ease-out;
}
header.site-header .main-menu .menu-item.active .menu-icon {
    transform: rotate(180deg);
}

header.site-header .main-menu .right-group {
    display: flex;
    gap: var(--spacing-4);
    align-items: center;
}

header.site-header .main-menu .right-group .buttons {
    display: flex;
    align-items: center;
}

header.site-header .main-menu .right-group .buttons .text-button.language-btn {
    text-transform: uppercase;
    text-decoration: none;
    font: var(--font-caption-lg-bold);
    letter-spacing: var(--font-caption-lg-spacing);
    cursor: pointer;
    gap: 10px;
    color: var(--color-primary-black-900);
}

header.site-header .main-menu .vr {
    height: 40px;
    width: 1px;
    background-color: var(--color-grey-100);
}

header.site-header .main-menu .img-box {
    width: 40px;
    height: 40px;
}
header.site-header .main-menu .img-box .img {
    border-radius: 100%;
}

header.site-header .main-menu .right-group-mobile {
    display: none;
}

header.site-header .main-menu .theme-btn.tooltip:before {
    content: attr(data-tooltiptextdark);
}
.theme-dark header.site-header .main-menu .theme-btn.tooltip:before {
    content: attr(data-tooltiptextlight);
}

header.site-header .main-menu .language-btn.tooltip:before {
    text-transform: none;
    content: attr(data-tooltiptextlanguages);
}

header.site-header .main-menu .mobile-menu-btn {
    display: none;
}

/* region Avatar */

.avatar-box {
    text-decoration: none;
}

.avatar-box .avatar {
    line-height: 40px;
    text-align: center;
    color: white;
    font-size: 18px;
}

.avatar-box .avatar.color1 {
    background: rgb(85, 210, 240);
    background: linear-gradient(45deg, rgba(85, 210, 240, 1) 0%, rgba(43, 166, 222, 1) 100%);
}
.avatar-box .avatar.color2 {
    background: rgb(188, 32, 134);
    background: linear-gradient(45deg, rgba(188, 32, 134, 1) 0%, rgba(136, 14, 79, 1) 100%);
}
.avatar-box .avatar.color3 {
    background: rgb(255, 210, 0);
    background: linear-gradient(45deg, rgba(255, 210, 0, 1) 0%, rgba(255, 165, 0, 1) 100%);
}
.avatar-box .avatar.color4 {
    background: rgb(95, 219, 0);
    background: linear-gradient(45deg, rgba(95, 219, 0, 1) 0%, rgba(49, 181, 0, 1) 100%);
}
.avatar-box .avatar.color5 {
    background: rgb(0, 189, 178);
    background: linear-gradient(45deg, rgba(0, 189, 178, 1) 0%, rgba(0, 137, 123, 1) 100%);
}
.avatar-box .avatar.color6 {
    background: rgb(255, 167, 0);
    background: linear-gradient(45deg, rgba(255, 167, 0, 1) 0%, rgba(255, 111, 0, 1) 100%);
}
.avatar-box .avatar.color7 {
    background: rgb(228, 38, 155);
    background: linear-gradient(45deg, rgba(228, 38, 155, 1) 0%, rgba(197, 17, 98, 1) 100%);
}
.avatar-box .avatar.color8 {
    background: rgb(255, 98, 108);
    background: linear-gradient(45deg, rgba(255, 98, 108, 1) 0%, rgba(255, 51, 58, 1) 100%);
}
.avatar-box .avatar.color9 {
    background: rgb(255, 137, 137);
    background: linear-gradient(45deg, rgba(255, 137, 137, 1) 0%, rgba(255, 82, 82, 1) 100%);
}
.avatar-box .avatar.color10 {
    background: rgb(154, 234, 255);
    background: linear-gradient(45deg, rgba(154, 234, 255, 1) 0%, rgba(97, 210, 255, 1) 100%);
}
.avatar-box .avatar.color11 {
    background: rgb(0, 213, 226);
    background: linear-gradient(45deg, rgba(0, 213, 226, 1) 0%, rgba(0, 172, 193, 1) 100%);
}
.avatar-box .avatar.color12 {
    background: rgb(255, 235, 0);
    background: linear-gradient(45deg, rgba(255, 235, 0, 1) 0%, rgba(255, 211, 0, 1) 100%);
}

/* endregion */

/* endregion */

/* region Subheader Menus */

header.site-header .lower {
    margin: 0 auto;
    width: 100%;
}

header.site-header .inner-content.submenus {
    margin: 0 auto;
    background-color: var(--color-bg-surface-1);
}

header.site-header .submenu {
    width: 100%;
    display: flex;
    flex-flow: row nowrap;
    gap: var(--spacing-8);
}

header.site-header .submenu .bg-alt {
    background-color: var(--color-bg-page);
}

/* region Collections */

header.site-header .submenu .collections {
    display: flex;
    flex-flow: row wrap;
    gap: var(--spacing-8);
    padding: 56px 32px 72px 40px;
}

header.site-header .submenu .menu-collection .heading {
    margin-bottom: var(--spacing-2);
}

header.site-header .submenu .menu-collection a {
    width: 180px;
}

/* endregion */

/* region Icon-descriptions */

header.site-header .submenu .icon-descs {
    padding: 56px 40px 72px 32px;
}
header.site-header .submenu .icon-descs .heading {
    margin-bottom: var(--spacing-6);
}
header.site-header .submenu .icon-descs .wrap {
    display: flex;
    flex-flow: row wrap;
    gap: var(--spacing-8);
}

header.site-header .submenu .icon-desc {
    width: 286px;
}
header.site-header .submenu .icon-desc .heading {
    margin-bottom: var(--spacing-6);
}

/* endregion */

/* region Promotional banner */

header.site-header .submenu .promo-banner {
    padding: 56px 0 72px;
}
header.site-header .submenu .promo-banner .heading {
    margin-bottom: var(--spacing-5);
}
header.site-header .submenu .promo-banner .promo-content {
    display: flex;
    flex-flow: row nowrap;
    gap: var(--spacing-8);
}
header.site-header .submenu .promo-banner .promo-img {
    width: 180px;
    height: 135px; /* Aspect ratio 4:3 */
}
header.site-header .submenu .promo-banner .right-pane {
    width: 180px;
}

/* endregion */

/* endregion */

/* Breakpoints S - M */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    header.site-header .main-menu {
        padding: 0 var(--spacing-7);
    }

    header.site-header .lower,
    header.site-header .main-menu .menu-item,
    header.site-header .main-menu .language-btn,
    header.site-header .main-menu .buttons .label,
    header.site-header .main-menu .theme-btn,
    header.site-header .main-menu .vr {
        display: none;
    }

    header.site-header .main-menu .mobile-menu-btn {
        display: block;
        color: var(--color-primary-black-900);
    }
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    header.site-header .main-menu .sign-in-btn,
    header.site-header .main-menu .sign-up-btn {
        display: none;
    }
}

/*
 * CSS for the footer template.
 */

footer.site-footer {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    column-gap: var(--grid-column-gap);
    max-width: 1240px;
    margin: var(--spacing-12) auto;
    padding: 0 var(--default-padding);
}

footer.site-footer .heavy {
    font: var(--font-copy-md-bold);
    color: var(--color-copy-primary);
}
footer.site-footer .light {
    font: var(--font-copy-sm);
    color: var(--color-copy-secondary)
}

footer.site-footer a {
    text-decoration: none;
}

footer.site-footer .mobile-links {
    display: none;
}

/* region Info Group */

footer.site-footer .info-group {
    grid-column: 1 / 5;
    display: flex;
    flex-direction: column;
}

footer.site-footer .info-group .logo {
    display: block;
    width: 144px;
    height: 48px;
    background-image: url('../../images/logo-hz-transparent-light.svg');
    background-size: cover;
}
.theme-dark footer.site-footer .info-group .logo {
    background-image: url('../../images/logo-hz-transparent-dark.svg');
}

footer.site-footer .info-group .slogan {
    margin: var(--spacing-7) 0 var(--spacing-5);
}

footer.site-footer .info-group .copyright {
    margin-top: var(--spacing-3);
}

footer.site-footer .info-group .social-heading {
    margin: var(--spacing-10) 0 var(--spacing-5);
    font: var(--font-copy-sm-bold);
}

footer.site-footer .info-group .social {
    display: flex;
    gap: var(--spacing-5);
    flex-wrap: wrap;
}

footer.site-footer .info-group .social .icon-button {
    color: var(--color-primary-black-800);
}

/* endregion */

/* region Link Farm */

footer.site-footer .link-farm {
    grid-column: -9 / -1;
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    column-gap: var(--grid-column-gap);
}

footer.site-footer .link-farm .column {
    grid-column: span 2;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-8);
}

footer.site-footer .link-farm .block {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-5);
}

footer.site-footer .link-farm .block strong {
    margin-bottom: var(--spacing-2);
}

footer.site-footer .link-farm .block .links {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-4);
}

footer.site-footer .link-farm .block a {
    margin-inline-end: var(--spacing-2);
}

/* endregion */

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    footer.site-footer .info-group .slogan {
        margin: var(--spacing-7) 0 var(--spacing-5);
    }
    footer.site-footer .info-group .social-heading {
        margin: 48px 0 var(--spacing-5);
    }
}

/* Breakpoints S and XS */
@media screen and (min-width: 0px) and (max-width: 768px) {
    footer.site-footer {
        grid-template-columns: repeat(4, 1fr);
        row-gap: var(--spacing-10);
    }

    /* region Mobile Links */

    footer.site-footer .mobile-links {
        display: block;
        grid-column: 1 / -1;
    }

    footer.site-footer .mobile-links hr {
        margin: 0;
        border: 1px solid var(--color-grey-100);
    }

    footer.site-footer .accordion .accordion-toggle {
        display: flex;
        flex-wrap: nowrap;
        align-items: center;
        justify-content: space-between;
        padding: var(--spacing-5) 0;
        cursor: pointer;
    }
    footer.site-footer .accordion .accordion-toggle .icon {
        height: 24px;
        flex: 0 0 24px;
        text-align: center;
    }
    footer.site-footer .accordion .accordion-toggle .minus {
        display: none;
    }

    footer.site-footer .accordion .accordion-content {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-5);
        padding-right: var(--spacing-2);
    }
    footer.site-footer .accordion .accordion-content a {
        font: var(--font-caption-lg);
    }

    footer.site-footer .accordion.expanded .accordion-content {
        padding-top: var(--spacing-5);
        padding-bottom: var(--spacing-5);
    }
    footer.site-footer .accordion.expanded .accordion-toggle .plus {
        display: none;
    }
    footer.site-footer .accordion.expanded .accordion-toggle .minus {
        display: block;
    }

    /* endregion */

    footer.site-footer .info-group {
        grid-column: 1 / -1;
        align-items: center;
    }

    footer.site-footer .info-group strong,
    footer.site-footer .info-group span {
        text-align: center;
    }

    footer.site-footer .info-group .social {
        justify-content: center;
    }

    footer.site-footer .link-farm {
        display: none;
    }
    footer.site-footer .info-group .slogan {
        margin: var(--spacing-6) 0 var(--spacing-4);
    }
    footer.site-footer .info-group .social-heading {
        margin: var(--spacing-9) 0 var(--spacing-4);
    }

}

/* Breakpoints XS */
@media screen and (min-width: 0px) and (max-width: 320px) {
    footer.site-footer .info-group .slogan {
        margin: var(--spacing-5) 0 var(--spacing-4);
    }
}

/**
 * Styling for dialogs common to all MEGA WP theme projects.
 */

/* region Modals */

/* region Modal system */

.modal-constrainer {
    position: fixed;
    top: var(--wp-admin-bar-height);
    bottom: 0;
    left: 0;
    right: 0;
    max-width: var(--max-width);
    width: 100%;
    margin: var(--spacing-14) auto;
    padding: 0 var(--default-padding);
    align-content: center;
    box-sizing: border-box;
    z-index: 50; /* Above standard overlay */
}

.modal {
    all: unset;
    position: relative;
    max-height: 100%;
    overflow: hidden;
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .modal-constrainer {
        display: flex;
        flex-direction: column;
        justify-content: end;
        margin: var(--spacing-9) 0 0;
        padding: 0;
    }
}

/* endregion */

/* region Baseline modal style */

.m-modal {
    padding: var(--spacing-10);
    box-sizing: border-box;
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-5);
    background-color: var(--color-bg-page);
    border-radius: 16px;
}

.m-modal .img-box {
    width: 80px;
    height: 80px;
    flex-shrink: 0;
}

.m-modal .heading {
    margin-inline-end: 40px; /* Don't overlap close icon button */
}
.m-modal .heading:empty {
    display: none;
}

.m-modal button.icon-button.close {
    position: absolute;
    top: var(--spacing-7);
    inset-inline-end: var(--spacing-7);
}

.m-modal .blurb:empty {
    display: none;
}

.m-modal .content {
    margin-top: var(--spacing-5);
    padding-inline-end: 20px; /* Workaround for scrollbar overlap */
    overflow-y: auto;
}
.m-modal .content:empty {
    display: none;
}

.m-modal .buttons {
    margin-top: var(--spacing-9);
    display: flex;
    flex-direction: row-reverse;
    gap: var(--spacing-5);
}
.m-modal .buttons:empty {
    display: none;
}

/* Breakpoints M and S */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    .m-modal button.icon-button.close {
        top: var(--spacing-5);
        inset-inline-end: var(--spacing-5);
    }
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .m-modal {
        padding: var(--spacing-7);
        border-bottom-left-radius: unset;
        border-bottom-right-radius: unset;
    }

    .m-modal .content {
        margin-top: var(--spacing-3);
    }

    .m-modal .buttons {
        margin-top: var(--spacing-7);
        flex-direction: column;
        align-items: center;
    }

    .m-modal .buttons button {
        max-width: 320px;
        width: 100%;
    }
}

/* endregion  */

/* endregion */

/* region Mobile */

.mobile-modal {
    --modal-padding: var(--spacing-7);
    all: unset;
    position: fixed;
    top: var(--top-height);
    bottom: 0;
    left: 0;
    right: 0;
    overflow-y: auto;
    z-index: 10;
    padding: var(--modal-padding);
    background: var(--color-bg-page);
}

/* Breakpoints L and larger */
@media screen and (min-width: 1080px) {
    .mobile-modals {
        display: none;
    }
}

/* Breakpoints S - M */
@media screen and (min-width: 0px) and (max-width: 1080px) {
    .mobile-modals {
        all: unset;
        display: inherit;
    }
}

/* endregion */

/* region Generic message dialog */

dialog.generic-msg {
    grid-column: 4 / -4;
}

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    dialog.generic-msg {
        grid-column: 3 / -3;
    }
}

/* endregion */

/* region Cookie Settings dialog */

.modal.cookie-dialog {
    grid-column: 3 / -3;
}

.modal.cookie-dialog .cookie-toggles {
    margin-bottom: var(--spacing-9);
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-7);
}

.modal.cookie-dialog .cookie-toggles hr {
    margin: 0;
    border: 1px solid var(--color-grey-100);
}

.modal.cookie-dialog .cookie-toggle {
    display: flex;
    flex-flow: row nowrap;
    justify-content: space-between;
    gap: var(--spacing-7);
}

.modal.cookie-dialog .cookie-toggle .text-pane {
    flex-grow: 1;
}

.modal.cookie-dialog .cookie-toggle .toggle-control {
    flex: 0 0 auto;
}

.modal.cookie-dialog .cookie-toggle .heading {
    font: var(--font-copy-md-bold);
    margin-bottom: var(--spacing-3);
}

.modal.cookie-dialog .cookie-links {
    display: flex;
    flex-direction: row;
    gap: var(--spacing-7);
}

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    .modal.cookie-dialog {
        grid-column: 2 / -2;
    }
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .modal.cookie-dialog {
        grid-column: 1 / -1;
    }
}

/* endregion */

/* region Language Switcher Modal */

.language-switcher {
    grid-column: 2 / -2;
}

.language-switcher .language-options {
    display: grid;
    grid-template-rows: repeat(5, 1fr);
    grid-template-columns: repeat(4, 1fr);
    grid-auto-flow: column;
    column-gap: var(--spacing-8);
    row-gap: var(--spacing-3);
    align-content: start;
}

.language-switcher .language-options .language-option {
    all: unset;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-3);
    padding: var(--spacing-3);
    border-radius: 4px;
    color: var(--color-copy-secondary);
    font: var(--font-copy-md);
}
.language-switcher .language-options .language-option:hover:not(:disabled) {
    background-color: var(--color-bg-surface-1);
    color: var(--color-copy-primary);
    cursor: pointer;
}
.language-switcher .language-options .language-option.active:not(:disabled) {
    background-color: var(--color-bg-surface-2);
    color: var(--color-copy-primary);
    font: var(--font-copy-md-bold);
}
.language-switcher .language-options .language-option:disabled {
    color: var(--color-link-disabled);
    cursor: default;
}

.language-switcher .language-options .language-option .icon {
    display: none;
    width: 24px;
}
.language-switcher .language-options .language-option.active .icon {
    display: block;
}

/* Breakpoint L */
@media screen and (min-width: 1080px) and (max-width: 1320px) {
    .language-switcher .language-options {
        grid-template-rows: repeat(6, 1fr);
        grid-template-columns: repeat(3, 1fr);
    }
}

/* Breakpoint M */
@media screen and (min-width: 768px) and (max-width: 1080px) {
    .language-switcher .language-options {
        grid-template-rows: repeat(9, 1fr);
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Breakpoint S */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .language-switcher .language-options {
        display: flex;
        flex-direction: column;
    }
}

/* endregion */

/**
 * Styling for WordPress blocks common to MEGA themes.
 */

/* region Horizontal rule */

hr.wp-block-separator {
    height: 1px;
    background-color: var(--color-grey-200);
    border: none;
}

/* endregion */

/* region Quotes */

blockquote.wp-block-quote {
    margin: var(--spacing-10) 0;
}
blockquote.wp-block-quote::before {
    display: block;
    width: 48px;
    height: 48px;
    content: '';
    background-image: var(--icon-union-start);
    background-position: center;
    background-repeat: no-repeat;
}

blockquote.wp-block-quote p {
    margin: 0;
    padding: var(--spacing-3) var(--spacing-7);
    font: var(--font-quote);
}

blockquote.wp-block-quote cite {
    font: var(--font-copy-sm);
}
blockquote.wp-block-quote cite::before {
    display: block;
    width: 48px;
    height: 48px;
    content: '';
    background-image: var(--icon-union-end);
    background-position: center;
    background-repeat: no-repeat;
    margin-left: auto;
}

/* endregion */

/* region Tables */

figure.wp-block-table table {
    border-collapse: collapse;
}

figure.wp-block-table table td,
figure.wp-block-table table th {
    padding: var(--spacing-3);
    /* Default no style to MEGA Dashed */
    border: 1px dashed var(--color-grey-350);
    vertical-align: top;
}

figure.wp-block-table.justify-text {
    text-align: justify;
}

figure.wp-block-table.is-style-regular table td,
figure.wp-block-table.is-style-regular table th {
    border: 1px solid var(--color-grey-200);
}

figure.wp-block-table.is-style-dashed table td,
figure.wp-block-table.is-style-dashed table th {
    border: 1px dashed var(--color-grey-350);
}

figure.wp-block-table.is-style-stripes tbody tr:nth-child(odd) {
    background-color: var(--color-bg-surface-1);
}

/* Prevent custom table colours & font sizes displaying on page */
figure.wp-block-table table tr {
    color: var(--color-copy-primary);
    font-size: var(--spacing-5);
    background-color: var(--color-bg-page);
}

figure.wp-block-table table img {
    vertical-align: middle;
}

figure.wp-block-table table tr.bg-1,
figure.wp-block-table table td.bg-1,
figure.wp-block-table table th.bg-1 {
    background-color: var(--color-bg-surface-1);
}

figure.wp-block-table table tr.bg-2,
figure.wp-block-table table td.bg-2,
figure.wp-block-table table th.bg-2 {
    background-color: var(--color-bg-surface-2);
}

figure.wp-block-table table tr.bg-3,
figure.wp-block-table table td.bg-3,
figure.wp-block-table table th.bg-3 {
    background-color: var(--color-bg-surface-3);
}

/* Breakpoint L */
@media screen and (min-width: 1080px) {
    figure.wp-block-table.medium-sized-table {
        grid-column: 3 / -3;
    }
}

/* Breakpoints S and M */
@media screen and (min-width: 0) and (max-width: 1080px) {
    figure.wp-block-table.medium-sized-table {
        grid-column: 1 / -1;
    }
}

/* endregion */

:root{--wp-admin-theme-color:#007cba;--wp-admin-theme-color--rgb:0,124,186;--wp-admin-theme-color-darker-10:#006ba1;--wp-admin-theme-color-darker-10--rgb:0,107,161;--wp-admin-theme-color-darker-20:#005a87;--wp-admin-theme-color-darker-20--rgb:0,90,135;--wp-admin-border-width-focus:2px;--wp-block-synced-color:#7a00df;--wp-block-synced-color--rgb:122,0,223;--wp-bound-block-color:var(--wp-block-synced-color)}@media (min-resolution:192dpi){:root{--wp-admin-border-width-focus:1.5px}}.wp-element-button{cursor:pointer}:root{--wp--preset--font-size--normal:16px;--wp--preset--font-size--huge:42px}:root .has-very-light-gray-background-color{background-color:#eee}:root .has-very-dark-gray-background-color{background-color:#313131}:root .has-very-light-gray-color{color:#eee}:root .has-very-dark-gray-color{color:#313131}:root .has-vivid-green-cyan-to-vivid-cyan-blue-gradient-background{background:linear-gradient(135deg,#00d084,#0693e3)}:root .has-purple-crush-gradient-background{background:linear-gradient(135deg,#34e2e4,#4721fb 50%,#ab1dfe)}:root .has-hazy-dawn-gradient-background{background:linear-gradient(135deg,#faaca8,#dad0ec)}:root .has-subdued-olive-gradient-background{background:linear-gradient(135deg,#fafae1,#67a671)}:root .has-atomic-cream-gradient-background{background:linear-gradient(135deg,#fdd79a,#004a59)}:root .has-nightshade-gradient-background{background:linear-gradient(135deg,#330968,#31cdcf)}:root .has-midnight-gradient-background{background:linear-gradient(135deg,#020381,#2874fc)}.has-regular-font-size{font-size:1em}.has-larger-font-size{font-size:2.625em}.has-normal-font-size{font-size:var(--wp--preset--font-size--normal)}.has-huge-font-size{font-size:var(--wp--preset--font-size--huge)}.has-text-align-center{text-align:center}.has-text-align-left{text-align:left}.has-text-align-right{text-align:right}#end-resizable-editor-section{display:none}.aligncenter{clear:both}.items-justified-left{justify-content:flex-start}.items-justified-center{justify-content:center}.items-justified-right{justify-content:flex-end}.items-justified-space-between{justify-content:space-between}.screen-reader-text{border:0;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;word-wrap:normal!important}.screen-reader-text:focus{background-color:#ddd;clip:auto!important;clip-path:none;color:#444;display:block;font-size:1em;height:auto;left:5px;line-height:normal;padding:15px 23px 14px;text-decoration:none;top:5px;width:auto;z-index:100000}html :where(.has-border-color){border-style:solid}html :where([style*=border-top-color]){border-top-style:solid}html :where([style*=border-right-color]){border-right-style:solid}html :where([style*=border-bottom-color]){border-bottom-style:solid}html :where([style*=border-left-color]){border-left-style:solid}html :where([style*=border-width]){border-style:solid}html :where([style*=border-top-width]){border-top-style:solid}html :where([style*=border-right-width]){border-right-style:solid}html :where([style*=border-bottom-width]){border-bottom-style:solid}html :where([style*=border-left-width]){border-left-style:solid}html :where(img[class*=wp-image-]){height:auto;max-width:100%}:where(figure){margin:0 0 1em}html :where(.is-position-sticky){--wp-admin--admin-bar--position-offset:var(--wp-admin--admin-bar--height,0px)}@media screen and (max-width:600px){html :where(.is-position-sticky){--wp-admin--admin-bar--position-offset:0px}}
/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}
/**
 * Styling for dialogs common to megapages.
 */

/* region Mobile Navigation Menu */

.mobile-modal.nav-menu {
    display: flex;
    flex-direction: column;
    padding: 0;
}

.mobile-modal.nav-menu .scroll-pane {
    display: flex;
    flex-flow: column nowrap;
    flex-basis: 100%;
    padding: var(--modal-padding);
    overflow-y: scroll;
}

.mobile-modal.nav-menu .menu-item {
    font: var(--font-copy-md-bold);
    color: var(--color-heading);
    border-bottom: 1px solid var(--color-grey-100);
    cursor: pointer;
}
.mobile-modal.nav-menu a.menu-item {
    line-height: 48px;
    text-decoration: none;
}

.mobile-modal.nav-menu .accordion .accordion-toggle {
    height: 48px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.mobile-modal.nav-menu .accordion .item-name {
    line-height: 32px;
}
.mobile-modal.nav-menu .accordion.expanded .item-name {
    border-top: 2px solid transparent; /* Counteract effects of border-bottom */
    border-bottom: 2px solid var(--color-primary-red-500);
}
.mobile-modal.nav-menu .accordion .accordion-toggle .icon-box {
    --icon-size: 20px;
    transition: var(--transition-transform);
}
.mobile-modal.nav-menu .accordion.expanded .accordion-toggle .icon-box {
    transform: rotate(180deg);
}

.mobile-modal.nav-menu .menu-collection,
.mobile-modal.nav-menu .icon-descs {
    padding: var(--spacing-5) 0;
}
.mobile-modal.nav-menu .icon-descs .heading {
    margin-bottom: var(--spacing-2);
}

.mobile-modal.nav-menu .icon-desc {
    padding: var(--spacing-5) 0;
}

.mobile-modal.nav-menu .promo-banner {
    margin: 0 calc(var(--modal-padding) * -1);
    padding: var(--modal-padding);
    background-color: var(--color-bg-surface-1);
}

.mobile-modal.nav-menu .promo-banner .promo-img {
    flex: 0 0 286px;
    height: calc(286px / 16 * 9); /* aspect ratio 16:9 */
}

.mobile-modal.nav-menu .buttons {
    display: flex;
    flex-flow: column nowrap;
    gap: var(--spacing-5);
    margin-top: 32px; /* For all breakpoints */
}

.mobile-modal.nav-menu .buttons button {
    all: unset;
    display: flex;
    gap: var(--spacing-4);
    align-items: center;
    font: var(--font-caption-lg-bold);
    letter-spacing: var(--font-caption-lg-spacing);
    cursor: pointer;
}

.mobile-modal.nav-menu .bottom-bar {
    display: none;
    padding: var(--spacing-4) var(--spacing-7);
    flex-flow: row wrap;
    gap: var(--spacing-5);
    background-color: var(--color-bg-page);
    box-sizing: border-box;
    border-top: 1px solid var(--color-grey-100);
}

/* Breakpoints S and smaller */
@media screen and (min-width: 0px) and (max-width: 768px) {
    .mobile-modal.nav-menu .promo-banner .promo-content {
        flex-direction: column;
    }
    .mobile-modal.nav-menu .promo-banner .promo-img {
        width: 100%;
        height: unset;
        flex: unset;
    }
    .mobile-modal.nav-menu .promo-banner .promo-img .img {
        position: relative;
        height: 0;
        margin: 0 auto;
        padding-bottom: 56.25%; /* aspect ratio 16 / 9 */
    }

    .mobile-modal.nav-menu .bottom-bar {
        display: flex;
    }

    .mobile-modal.nav-menu .bottom-bar > .button {
        flex: 1;
    }
}

/* endregion */
  </style>
 </head>
 <body>
  <header class="site-header">
   <div class="upper">
    <div class="inner-content main-menu">
     <div class="left-group">
      <a class="logo" href="https://mega.io">
       <img alt="MEGA Logo" class="logo-img" height="32" src="https://mega.io/wp-content/themes/megapages/megalib/images/megaicon.svg" width="32"/>
      </a>
      <nav class="menu-items">
       <button class="menu-item" data-target="products">
        <div class="label">
         Products
        </div>
        <div class="icon-box menu-icon">
         <span class="icon chevron-down">
         </span>
        </div>
       </button>
       <button class="menu-item" data-target="solutions">
        <div class="label">
         Solutions
        </div>
        <div class="icon-box menu-icon">
         <span class="icon chevron-down">
         </span>
        </div>
       </button>
       <a class="menu-item" href="https://mega.io/business">
        Business
       </a>
       <a class="menu-item" href="https://mega.io/pricing">
        Pricing
       </a>
       <button class="menu-item" data-target="resources">
        <div class="label">
         Resources
        </div>
        <div class="icon-box menu-icon">
         <span class="icon chevron-down">
         </span>
        </div>
       </button>
      </nav>
     </div>
     <div class="right-group">
      <div class="buttons">
       <button aria-label="Switch language" class="text-button md language-btn tooltip bottom" data-tooltiptextlanguages="Switch language">
        <span class="icon before globe">
        </span>
        en
       </button>
      </div>
      <button aria-label="Switch theme" class="icon-button md theme-btn tooltip bottom" data-tooltiptextdark="Switch to dark mode" data-tooltiptextlight="Switch to light mode">
       <span class="icon moon">
       </span>
      </button>
      <div class="vr hidden">
      </div>
      <a aria-label="Profile picture link to MEGA's webclient" class="img-box avatar-box hidden" href="https://mega.nz/login">
       <div class="img avatar">
       </div>
      </a>
      <a aria-label="Profile picture link to MEGA's webclient" class="img-box custom-avatar-box hidden" href="https://mega.nz/login">
       <img alt="Your avatar" class="img" height="40" width="40"/>
      </a>
      <a class="button outline-muted md sign-in-btn" href="https://mega.nz/login">
       Log in
      </a>
      <a class="button primary-muted md sign-up-btn" href="https://mega.nz/register">
       Sign up
      </a>
      <button aria-label="Menu" class="icon-button md mobile-menu-btn">
       <span class="icon menu">
       </span>
      </button>
     </div>
    </div>
   </div>
   <div class="lower">
    <div class="inner-content submenus">
     <div class="submenu products hidden" data-bgs='{"left":false,"right":false}'>
      <div class="icon-descs">
       <div class="heading">
        PRODUCTS
       </div>
       <div class="wrap">
        <a class="icon-desc" href="/storage">
         <div class="icon-box">
          <div class="icon cloud-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Cloud storage
          </div>
          <div class="description">
           Keep your files in a secure place
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/vpn">
         <div class="icon-box">
          <div class="icon shield-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           VPN
          </div>
          <div class="description">
           Protect your privacy online
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/pass">
         <div class="icon-box">
          <div class="icon lock-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Password manager
          </div>
          <div class="description">
           Protect and access passwords across any device
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/chatandmeetings">
         <div class="icon-box">
          <div class="icon message-circle-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Chat and Meetings
          </div>
          <div class="description">
           Secure and private conversations
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/objectstorage">
         <div class="icon-box">
          <div class="icon database-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Object storage
          </div>
          <div class="description">
           Fully scalable S3 compatible storage
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/megabackup">
         <div class="icon-box">
          <div class="icon server-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Backup
          </div>
          <div class="description">
           Securely back up your files
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/syncing">
         <div class="icon-box">
          <div class="icon sync-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Sync
          </div>
          <div class="description">
           Sync your files with MEGA
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/media-files">
         <div class="icon-box">
          <div class="icon image-01-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Media files
          </div>
          <div class="description">
           Store and organise your media files
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/share">
         <div class="icon-box">
          <div class="icon share-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Share
          </div>
          <div class="description">
           Share your files with friends
          </div>
         </div>
        </a>
       </div>
      </div>
     </div>
     <div class="submenu solutions hidden" data-bgs='{"left":false,"right":false}'>
      <div class="icon-descs">
       <div class="heading">
        SOLUTIONS
       </div>
       <div class="wrap">
        <a class="icon-desc" href="/individuals">
         <div class="icon-box">
          <div class="icon emoji-smile-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Individuals
          </div>
          <div class="description">
           Personal accounts for everyday use
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/freelancers">
         <div class="icon-box">
          <div class="icon video-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Freelancers
          </div>
          <div class="description">
           Creatives, contractors, consultants and side hustlers
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/small-business">
         <div class="icon-box">
          <div class="icon users-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Small business
          </div>
          <div class="description">
           Startups, sole traders, family businesses and online retailers
          </div>
         </div>
        </a>
       </div>
      </div>
     </div>
     <div class="submenu resources hidden" data-bgs='{"left":false,"right":false}'>
      <div class="icon-descs">
       <div class="heading">
        Resources
       </div>
       <div class="wrap">
        <a class="icon-desc" href="https://help.mega.io" rel="noopener noreferrer" target="_blank">
         <div class="icon-box">
          <div class="icon info">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Help Centre
          </div>
          <div class="description">
           Guides and support for MEGA products
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://mega.io/contact">
         <div class="icon-box">
          <div class="icon message-square">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Contact us
          </div>
          <div class="description">
           Have a question? Get in touch
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://blog.mega.io" rel="noopener noreferrer" target="_blank">
         <div class="icon-box">
          <div class="icon edit-3-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Blog
          </div>
          <div class="description">
           The latest MEGA news, tips, and insights
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://mega.io/bug-bounty">
         <div class="icon-box">
          <div class="icon shield">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Vulnerability Reward Programme
          </div>
          <div class="description">
           Report a bug or an issue
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://mega.io/reliability">
         <div class="icon-box">
          <div class="icon globe">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Reliability
          </div>
          <div class="description">
           Learn how we keep your data accessible anytime, anywhere
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://mega.io/developers">
         <div class="icon-box">
          <div class="icon code">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Developers
          </div>
          <div class="description">
           See our source code and software development kit
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://mega.io/resellers">
         <div class="icon-box">
          <div class="icon check-circle">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Resellers
          </div>
          <div class="description">
           Purchase vouchers from MEGA-authorised resellers
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://mega.io/affiliate">
         <div class="icon-box">
          <div class="icon currency-dollar-circle-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Affiliate Programme
          </div>
          <div class="description">
           Earn commission with the MEGA Affiliate Programme
          </div>
         </div>
        </a>
       </div>
      </div>
     </div>
    </div>
   </div>
  </header>
  <main class="page-container" lang="en-NZ">
   <section class="animated-hero">
    <div class="scroll-region">
     <div class="media" data-media-path="https://mega.io/wp-content/themes/megapages/assets/animated-hero">
      <canvas>
      </canvas>
      <video autoplay="" muted="" playsinline="">
      </video>
     </div>
    </div>
    <div class="text-pane main-grid">
     <h1 class="heading">
      Online privacy for everyone
     </h1>
     <p class="blurb">
      Privacy is not an option with MEGA, its standard. Thats because we believe that everyone should be able to store data and communicate securely and privately online.
     </p>
     <div class="buttons">
      <a class="button primary xl hidden" href="https://mega.nz/register">
       Try MEGA for free
      </a>
     </div>
    </div>
   </section>
   <section class="ft-simple-card-column main-grid two">
    <div class="texts">
     <h2 class="heading">
      Store files, chat, and meet  all in one place
     </h2>
     <p class="blurb">
      MEGA brings cloud storage, file and folder sharing, chat, meetings, and more  together into one place.
     </p>
    </div>
    <div class="cards">
     <div class="simple-card">
      <div class="container">
       <div class="img-box">
        <div class="img light" style="background-image: url('https://mega.io/wp-content/uploads/MEGA-icon-cloud.png');">
        </div>
        <div class="img dark" style="background-image: url('https://mega.io/wp-content/uploads/MEGA-icon-cloud.png');">
        </div>
       </div>
       <h5 class="heading">
        Cloud storage
       </h5>
       <p class="blurb">
        Securely store files of any size. Backup important folders, sync items across multiple devices, and share files with total control and privacy.
       </p>
      </div>
      <a class="text-button md" href="https://mega.io/storage">
       Discover MEGACloud
      </a>
     </div>
     <div class="simple-card">
      <div class="container">
       <div class="img-box">
        <div class="img light" style="background-image: url('https://mega.io/wp-content/uploads/MEGA-icon-lock.png');">
        </div>
        <div class="img dark" style="background-image: url('https://mega.io/wp-content/uploads/MEGA-icon-lock.png');">
        </div>
       </div>
       <h5 class="heading">
        Password manager
       </h5>
       <p class="blurb">
        Simply and securely manage login credentials across all devices with MEGA Pass. Generate complex passwords and save time with autofill. Start your 14-day free trial today.
       </p>
      </div>
      <a class="text-button md" href="https://mega.io/pass">
       Discover MEGAPass
      </a>
     </div>
     <div class="simple-card">
      <div class="container">
       <div class="img-box">
        <div class="img light" style="background-image: url('https://mega.io/wp-content/uploads/MEGA-icon-zap.png');">
        </div>
        <div class="img dark" style="background-image: url('https://mega.io/wp-content/uploads/MEGA-icon-zap.png');">
        </div>
       </div>
       <h5 class="heading">
        VPN
       </h5>
       <p class="blurb">
        Safeguard your online privacy with the lightning-fast MEGA VPN. Protect up to five devices at once for just !{vpnPriceLocalMonthly} per month. Start your 7-day free trial today.
       </p>
      </div>
      <a class="text-button md" href="https://mega.io/vpn">
       Discover MEGAVPN
      </a>
     </div>
     <div class="simple-card">
      <div class="container">
       <div class="img-box">
        <div class="img light" style="background-image: url('https://mega.io/wp-content/uploads/MEGA-icon-message-call.png');">
        </div>
        <div class="img dark" style="background-image: url('https://mega.io/wp-content/uploads/MEGA-icon-message-call.png');">
        </div>
       </div>
       <h5 class="heading">
        Chat and meetings
       </h5>
       <p class="blurb">
        Message friends and family, make one-on-one calls, or connect over video  all in complete privacy. Also available to non-MEGA users.
       </p>
      </div>
      <a class="text-button md" href="https://mega.io/chatandmeetings">
       Discover MEGAChat
      </a>
     </div>
    </div>
   </section>
   <section class="single-slice">
    <div class="text-pane">
     <h2 class="heading">
      Security thats always on
     </h2>
     <p class="blurb">
      We protect your data with zero-knowledge encryption, the highest level of online security and privacy. This means that only the sender and the recipient have the keys needed to see, read, or listen to the data stored or shared on MEGA.
      <br/>
      <br/>
      For anyone else, including MEGA, the data would appear as gibberish, and they would find it impossible to read or understand.
     </p>
     <div class="container-button">
      <a class="text-button lg" href="https://mega.io/security">
       More about security
       <span class="icon after arrow-right">
       </span>
      </a>
     </div>
    </div>
    <div class="video-box">
     <video class="video light" loop="" muted="" playsinline="">
      <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_1-encryption-padlock-1-1.mov" type='video/mp4; codecs="hvc1"'/>
      <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_1-encryption-padlock-1.webm" type="video/webm"/>
     </video>
     <video class="video dark" loop="" muted="" playsinline="">
      <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_1-encryption-padlock-1-1.mov" type='video/mp4; codecs="hvc1"'/>
      <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_1-encryption-padlock-1.webm" type="video/webm"/>
     </video>
    </div>
   </section>
   <section class="feature-alternating centre-align reversed">
    <div class="texts main-grid">
     <div class="text">
      <h2 class="heading">
       Why choose MEGA?
      </h2>
     </div>
    </div>
    <div class="features">
     <div class="feature-block type-a">
      <div class="container">
       <div class="text-pane">
        <h3 class="heading">
         Never run out of storage space
        </h3>
        <p class="blurb">
         Need lots of storage space? No problem. We have a range of competitive plans that go up to 16TB. If you need even more space, get a ProFlexi or Business plan, where you only pay for the extra storage space you use.
        </p>
        <a class="text-button lg" href="pricing">
         See our plans
         <span class="icon after arrow-right">
         </span>
        </a>
       </div>
       <div class="video-box">
        <video class="video light" loop="" muted="" playsinline="">
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_2-big-files-1-1.mov" type='video/mp4; codecs="hvc1"'/>
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_2-big-files-1.webm" type="video/webm"/>
        </video>
        <video class="video dark" loop="" muted="" playsinline="">
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_2-big-files-1-1.mov" type='video/mp4; codecs="hvc1"'/>
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_2-big-files-1.webm" type="video/webm"/>
        </video>
       </div>
      </div>
     </div>
     <div class="feature-block type-a">
      <div class="container">
       <div class="text-pane">
        <h3 class="heading">
         Share files and folders with anyone
        </h3>
        <p class="blurb">
         Easily share your MEGA files and folders with friends and colleagues, even people without MEGA accounts. And when sharing, youre still in control. You can give people read-only or full access to your folders, and can set a password or create expiring links.
        </p>
        <a class="text-button lg" href="share">
         More about sharing
         <span class="icon after arrow-right">
         </span>
        </a>
       </div>
       <div class="video-box">
        <video class="video light" loop="" muted="" playsinline="">
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_3-files-sharing-1-1.mov" type='video/mp4; codecs="hvc1"'/>
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_3-files-sharing-1.webm" type="video/webm"/>
        </video>
        <video class="video dark" loop="" muted="" playsinline="">
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_3-files-sharing-1-1.mov" type='video/mp4; codecs="hvc1"'/>
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_3-files-sharing-1.webm" type="video/webm"/>
        </video>
       </div>
      </div>
     </div>
     <div class="feature-block type-a">
      <div class="container">
       <div class="text-pane">
        <h3 class="heading">
         Be in control of your data
        </h3>
        <p class="blurb">
         Whether its giving people limited or full access to files you share with them or preventing new group chat members from reading old messages, your data is in your hands. Thats our number one promise to you.
        </p>
        <a class="text-button lg" href="about">
         Learn more
         <span class="icon after arrow-right">
         </span>
        </a>
       </div>
       <div class="video-box">
        <video class="video light" loop="" muted="" playsinline="">
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_4-safebox-1-1.mov" type='video/mp4; codecs="hvc1"'/>
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_4-safebox-1.webm" type="video/webm"/>
        </video>
        <video class="video dark" loop="" muted="" playsinline="">
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_4-safebox-1-1.mov" type='video/mp4; codecs="hvc1"'/>
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_4-safebox-1.webm" type="video/webm"/>
        </video>
       </div>
      </div>
     </div>
     <div class="feature-block type-a">
      <div class="container">
       <div class="text-pane">
        <h3 class="heading">
         Work seamlessly across all devices
        </h3>
        <p class="blurb">
         Easily access your cloud files through our desktop app, mobile apps or the web. And, if you sync or back up data from your computer to MEGA, all changes will automatically be replicated in real time, so youll be able to see the latest files, no matter where you are.
        </p>
       </div>
       <div class="video-box">
        <video class="video light" loop="" muted="" playsinline="">
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_5-devices-1-1.mov" type='video/mp4; codecs="hvc1"'/>
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_5-devices-1.webm" type="video/webm"/>
        </video>
        <video class="video dark" loop="" muted="" playsinline="">
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_5-devices-1-1.mov" type='video/mp4; codecs="hvc1"'/>
         <source src="https://mega.io/wp-content/uploads/20221223_Mega_Main_5-devices-1.webm" type="video/webm"/>
        </video>
       </div>
      </div>
     </div>
    </div>
   </section>
   <section class="competitor-matrix">
    <div class="contents">
     <h3 class="matrix-heading">
      How does MEGA compare?
     </h3>
     <div class="matrix-cards">
      <div class="matrix-card">
       <div class="box">
        <div class="img-box">
         <div class="img" style="background-image: url('https://mega.io/wp-content/themes/megapages/megalib/images/megaicon.svg');">
         </div>
        </div>
        <h5 class="competitor-name">
         MEGA
        </h5>
        <div class="competitor-price">
         <div class="price">
          <span class="value">
           1.56
          </span>
          <span class="asterisk">
           *
          </span>
         </div>
         <div class="per-tb-per-month">
          per TB per month
         </div>
        </div>
       </div>
       <div class="encryption-banner">
        <div class="icon-box">
         <div class="icon check">
         </div>
        </div>
        <div class="banner-text">
         End-to-end encryption
        </div>
       </div>
       <div class="price-disclaimer">
        * Price based on ProIII annual payment
       </div>
      </div>
      <div class="matrix-card">
       <div class="box">
        <div class="img-box">
         <div class="img" style="background-image: url('https://mega.io/wp-content/themes/megapages/megalib/images/dropbox-icon.svg');">
         </div>
        </div>
        <h5 class="competitor-name">
         Dropbox
        </h5>
        <div class="competitor-price">
         <div class="price">
          <span class="value">
           5.5
          </span>
          <span class="asterisk">
           *
          </span>
         </div>
         <div class="per-tb-per-month">
          per TB per month
         </div>
        </div>
       </div>
       <div class="encryption-banner">
        <div class="icon-box">
         <div class="icon x">
         </div>
        </div>
        <div class="banner-text">
         End-to-end encryption
        </div>
       </div>
       <div class="price-disclaimer">
        * Price based on the Professional annual plan
       </div>
      </div>
      <div class="matrix-card">
       <div class="box">
        <div class="img-box">
         <div class="img" style="background-image: url('https://mega.io/wp-content/themes/megapages/megalib/images/googledrive-icon.svg');">
         </div>
        </div>
        <h5 class="competitor-name">
         Google Drive
        </h5>
        <div class="competitor-price">
         <div class="price">
          <span class="value">
           3.7
          </span>
          <span class="asterisk">
           *
          </span>
         </div>
         <div class="per-tb-per-month">
          per TB per month
         </div>
        </div>
       </div>
       <div class="encryption-banner">
        <div class="icon-box">
         <div class="icon x">
         </div>
        </div>
        <div class="banner-text">
         End-to-end encryption
        </div>
       </div>
       <div class="price-disclaimer">
        * Price based on 30TB annual payment
       </div>
      </div>
     </div>
    </div>
   </section>
   <div class="wp-block-columns is-layout-flex wp-container-core-columns-is-layout-2 wp-block-columns-is-layout-flex">
    <div class="wp-block-column is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:100%">
     <div class="wp-block-columns is-layout-flex wp-container-core-columns-is-layout-1 wp-block-columns-is-layout-flex">
      <div class="wp-block-column is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:100%">
       <section class="feature-alternating centre-align">
        <div class="texts main-grid">
        </div>
        <div class="features">
         <div class="coming-soon surface-one-bg">
          <div class="container">
           <div class="text-pane">
            <p class="tagline">
             MEGA PASS
            </p>
            <h3 class="heading">
             Try our new password manager
            </h3>
            <p class="blurb">
             Protect your login credentials and access them from any device with MEGA Pass.
             <br/>
             <br/>
             Start your 14-day free trial and then get MEGA Pass from just !{pwmPriceLocalMonthly} per month. Also included as part of any MEGA paid personal or business plan.
            </p>
            <div class="call-to-action-section">
             <input class="email-field hidden" placeholder="Enter your email" type="email"/>
             <div class="message-wrapper hidden">
              <div class="icon-box">
               <div class="icon alert-triangle">
               </div>
              </div>
              <p class="error-text hidden">
               Invalid email address, please enter a correct email address.
              </p>
              <p class="thank-you-text hidden">
               Thanks for that, we'll send you an email update soon. Keep an eye on your email inbox.
              </p>
             </div>
             <a class="button primary-muted lg" href="/pass">
              Learn more about MEGA Pass
             </a>
            </div>
           </div>
           <div class="img-box">
            <div class="img" style="background-image: url('https://mega.io/wp-content/uploads/MEGA-Pass_Hero.png');">
            </div>
           </div>
          </div>
         </div>
        </div>
       </section>
      </div>
     </div>
    </div>
   </div>
   <section class="full-width-banner typo">
    <div class="banner-contents">
     <div class="img-box hidden">
      <div class="img" style="background-image: url('');">
      </div>
     </div>
     <div class="content-container">
      <h3 class="heading">
       Grow your business with MEGA
      </h3>
      <div class="blurb-and-buttons">
       <p class="blurb">
        Bring your team together online with MEGA for Business. From freelancers to startups and all the way to enterprises, MEGA is the perfect online tool to help you grow your business and your team. Store and protect important documents and transform how your teams collaborate with MEGA.
       </p>
       <div class="buttons">
        <a class="button primary md primary-button" href="business">
         Learn more
         <span class="icon after arrow-right">
         </span>
        </a>
       </div>
      </div>
     </div>
    </div>
   </section>
   <div aria-hidden="true" class="wp-block-spacer" style="height:64px">
   </div>
   <section class="home-social-proof">
    <div class="container main-grid">
     <div class="left-section">
      <div class="heading-and-btn">
       <h2 class="heading">
        Millions of people trust us
       </h2>
       <div class="btn-container">
        <a class="button primary-muted lg non-user hidden" href="https://mega.nz/register">
         Sign up for free
         <span class="icon after arrow-right">
         </span>
        </a>
       </div>
      </div>
      <div class="blurb-and-btn">
       <p class="blurb">
        Join the millions of individuals and businesses who trust MEGA to store and protect their data in the cloud.
       </p>
       <div class="btn-container">
        <a class="button primary-muted lg non-user hidden" href="https://mega.nz/register">
         Sign up for free
         <span class="icon after arrow-right">
         </span>
        </a>
       </div>
      </div>
     </div>
     <div class="right-section">
      <div class="data-point registered-users">
       <div class="img-box">
        <div class="img" style="background-image: url('https://mega.io/wp-content/uploads/2023/03/20230215_Mega_icons_upd_00003.png');">
        </div>
       </div>
       <div class="content">
        <h5 class="heading">
         Registered users
        </h5>
        <span class="value">
        </span>
       </div>
      </div>
      <div class="divider">
      </div>
      <div class="data-point uploaded-files">
       <div class="img-box">
        <div class="img" style="background-image: url('https://mega.io/wp-content/uploads/2023/03/20230221_Mega_icons_00025-1.png');">
        </div>
       </div>
       <div class="content">
        <h5 class="heading">
         Uploaded files
        </h5>
        <span class="value">
        </span>
       </div>
      </div>
      <div class="overlay-image">
       <div class="img-box">
        <div class="img" style="background-image: url('https://mega.io/wp-content/uploads/2023/03/20230215_Mega_icons_upd_00017.png');">
        </div>
       </div>
      </div>
     </div>
    </div>
   </section>
  </main>
  <footer class="site-footer">
   <div class="mobile-links">
    <hr/>
    <div class="accordion">
     <div class="accordion-toggle">
      <span class="heavy">
       Products
      </span>
      <span class="icon plus">
      </span>
      <span class="icon minus">
      </span>
     </div>
     <div class="accordion-content">
      <a class="light" href="https://mega.io/storage">
       Cloud storage
      </a>
      <a class="light" href="https://mega.io/objectstorage">
       Object storage
      </a>
      <a class="light" href="https://mega.io/vpn">
       VPN
      </a>
      <a class="light" href="https://mega.io/pass">
       Password manager
      </a>
      <a class="light" href="https://mega.io/syncing">
       Sync
      </a>
      <a class="light" href="https://mega.io/megabackup">
       Backup
      </a>
      <a class="light" href="https://mega.io/share">
       Share
      </a>
      <a class="light" href="https://mega.io/media-files">
       Media files
      </a>
      <a class="light" href="https://mega.io/chatandmeetings">
       Chat and meetings
      </a>
      <a class="light" href="https://mega.io/business">
       Business
      </a>
     </div>
    </div>
    <hr/>
    <div class="accordion">
     <div class="accordion-toggle">
      <span class="heavy">
       Solutions
      </span>
      <span class="icon plus">
      </span>
      <span class="icon minus">
      </span>
     </div>
     <div class="accordion-content">
      <a class="light" href="https://mega.io/individuals">
       Individuals
      </a>
      <a class="light" href="https://mega.io/freelancers">
       Freelancers
      </a>
      <a class="light" href="https://mega.io/small-business">
       Small business
      </a>
     </div>
    </div>
    <hr/>
    <div class="accordion">
     <div class="accordion-toggle">
      <span class="heavy">
       Platforms
      </span>
      <span class="icon plus">
      </span>
      <span class="icon minus">
      </span>
     </div>
     <div class="accordion-content">
      <a class="light" href="https://mega.io/mobile">
       Mobile apps
      </a>
      <a class="light" href="https://mega.io/desktop">
       Desktop app
      </a>
      <a class="light" href="https://mega.io/extensions">
       Browser extensions
      </a>
      <a class="light" href="https://mega.io/cmd">
       MEGA CMD
      </a>
      <a class="light" href="https://mega.io/nas">
       CMD for NAS
      </a>
     </div>
    </div>
    <hr/>
    <div class="accordion">
     <div class="accordion-toggle">
      <span class="heavy">
       Plans
      </span>
      <span class="icon plus">
      </span>
      <span class="icon minus">
      </span>
     </div>
     <div class="accordion-content">
      <a class="light" href="https://mega.io/pricing">
       Pricing
      </a>
      <a class="light" href="https://mega.io/achievements">
       Achievements
      </a>
      <a class="light" href="https://mega.io/refer">
       Referral Programme
      </a>
     </div>
    </div>
    <hr/>
    <div class="accordion">
     <div class="accordion-toggle">
      <span class="heavy">
       Resources
      </span>
      <span class="icon plus">
      </span>
      <span class="icon minus">
      </span>
     </div>
     <div class="accordion-content">
      <a class="light" href="https://blog.mega.io" rel="noopener" target="_blank">
       Blog
      </a>
      <a class="light" href="https://mega.io/security">
       Security and privacy
      </a>
      <a class="light" href="https://mega.io/reliability">
       Reliability
      </a>
      <a class="light" href="https://mega.io/developers">
       Developers
      </a>
      <a class="light" href="https://mega.io/resellers">
       Resellers
      </a>
      <a class="light" href="https://mega.io/affiliate">
       Affiliate Programme
      </a>
     </div>
    </div>
    <hr/>
    <div class="accordion">
     <div class="accordion-toggle">
      <span class="heavy">
       Help
      </span>
      <span class="icon plus">
      </span>
      <span class="icon minus">
      </span>
     </div>
     <div class="accordion-content">
      <a class="light" href="https://help.mega.io" rel="noopener" target="_blank">
       Help Centre
      </a>
      <a class="light" href="https://mega.io/contact">
       Contact us
      </a>
      <a class="light" href="https://mega.io/bug-bounty">
       Vulnerability Reward Programme
      </a>
     </div>
    </div>
    <hr/>
    <div class="accordion">
     <div class="accordion-toggle">
      <span class="heavy">
       Company
      </span>
      <span class="icon plus">
      </span>
      <span class="icon minus">
      </span>
     </div>
     <div class="accordion-content">
      <a class="light" href="https://mega.io/about">
       About us
      </a>
      <a class="light" href="https://careers.mega.nz" rel="noopener" target="_blank">
       Careers
      </a>
      <a class="light" href="https://mega.io/media">
       Media
      </a>
     </div>
    </div>
    <hr/>
    <div class="accordion">
     <div class="accordion-toggle">
      <span class="heavy">
       Legal
      </span>
      <span class="icon plus">
      </span>
      <span class="icon minus">
      </span>
     </div>
     <div class="accordion-content">
      <a class="light" href="https://mega.io/terms">
       Terms of Service
      </a>
      <a class="light" href="https://mega.io/privacy">
       Privacy and Data Policy
      </a>
      <a class="light" href="https://mega.io/copyright">
       Copyright notice submission
      </a>
      <a class="light" href="https://mega.io/takedown">
       Takedown Guidance Policy
      </a>
      <a class="light" href="/transparency">
       Transparency Report
      </a>
      <a class="light" href="https://mega.io/mega-io-cookie">
       Cookie Policy
      </a>
      <a class="light" href="#cookie-settings-dialog">
       Cookie settings
      </a>
      <a class="light" href="https://mega.io/dispute">
       Copyright dispute
      </a>
     </div>
    </div>
    <hr/>
   </div>
   <div class="info-group">
    <a aria-label="MEGA logo link to home page of MEGA website" class="logo" href="https://mega.io">
    </a>
    <span class="heavy slogan">
     The Privacy Company
    </span>
    <span class="light">
     User-encrypted cloud services
    </span>
    <span class="light copyright">
      MEGA 2024 All rights reserved
    </span>
    <span class="heavy social-heading">
     Follow MEGA
    </span>
    <div class="social">
     <a aria-label="Button link to MEGA's Facebook page" class="icon-button primary sm" href="https://www.facebook.com/MEGAprivacy" rel="noopener noreferrer" target="_blank">
      <span class="icon social-facebook">
      </span>
     </a>
     <a aria-label="Button link to MEGA's Instagram page" class="icon-button primary sm" href="https://www.instagram.com/MEGA_privacy/" rel="noopener noreferrer" target="_blank">
      <span class="icon social-instagram">
      </span>
     </a>
     <a aria-label="Button link to MEGA's X page" class="icon-button primary sm" href="https://twitter.com/MEGAprivacy" rel="noopener noreferrer" target="_blank">
      <span class="icon social-X">
      </span>
     </a>
     <a aria-label="Button link to MEGA's LinkedIn page" class="icon-button primary sm" href="https://www.linkedin.com/company/mega-the-privacy-company" rel="noopener noreferrer" target="_blank">
      <span class="icon social-linkedin">
      </span>
     </a>
     <a aria-label="Button link to MEGA's YouTube channel" class="icon-button primary sm" href="https://www.youtube.com/channel/UCL0n8SACU_eghsvHxbizKCA" rel="noopener noreferrer" target="_blank">
      <span class="icon social-youtube">
      </span>
     </a>
     <a aria-label="Button link to MEGA's Threads page" class="icon-button primary sm" href="https://www.threads.net/@mega_privacy" rel="noopener noreferrer" target="_blank">
      <span class="icon social-threads">
      </span>
     </a>
    </div>
   </div>
   <nav class="link-farm">
    <div class="column">
     <div class="block">
      <span class="heavy">
       Products
      </span>
      <div class="links">
       <a class="light" href="https://mega.io/storage">
        Cloud storage
       </a>
       <a class="light" href="https://mega.io/objectstorage">
        Object storage
       </a>
       <a class="light" href="https://mega.io/vpn">
        VPN
       </a>
       <a class="light" href="https://mega.io/pass">
        Password manager
       </a>
       <a class="light" href="https://mega.io/syncing">
        Sync
       </a>
       <a class="light" href="https://mega.io/megabackup">
        Backup
       </a>
       <a class="light" href="https://mega.io/share">
        Share
       </a>
       <a class="light" href="https://mega.io/media-files">
        Media files
       </a>
       <a class="light" href="https://mega.io/chatandmeetings">
        Chat and meetings
       </a>
       <a class="light" href="https://mega.io/business">
        Business
       </a>
      </div>
     </div>
     <div class="block">
      <span class="heavy">
       Solutions
      </span>
      <div class="links">
       <a class="light" href="https://mega.io/individuals">
        Individuals
       </a>
       <a class="light" href="https://mega.io/freelancers">
        Freelancers
       </a>
       <a class="light" href="https://mega.io/small-business">
        Small business
       </a>
      </div>
     </div>
    </div>
    <div class="column">
     <div class="block">
      <span class="heavy">
       Platforms
      </span>
      <div class="links">
       <a class="light" href="https://mega.io/mobile">
        Mobile apps
       </a>
       <a class="light" href="https://mega.io/desktop">
        Desktop app
       </a>
       <a class="light" href="https://mega.io/extensions">
        Browser extensions
       </a>
       <a class="light" href="https://mega.io/cmd">
        MEGA CMD
       </a>
       <a class="light" href="https://mega.io/nas">
        CMD for NAS
       </a>
      </div>
     </div>
     <div class="block">
      <span class="heavy">
       Plans
      </span>
      <div class="links">
       <a class="light" href="https://mega.io/pricing">
        Pricing
       </a>
       <a class="light" href="https://mega.io/achievements">
        Achievements
       </a>
       <a class="light" href="https://mega.io/refer">
        Referral Programme
       </a>
      </div>
     </div>
    </div>
    <div class="column">
     <div class="block">
      <span class="heavy">
       Resources
      </span>
      <div class="links">
       <a class="light" href="https://blog.mega.io" rel="noopener" target="_blank">
        Blog
       </a>
       <a class="light" href="https://mega.io/security">
        Security and privacy
       </a>
       <a class="light" href="https://mega.io/reliability">
        Reliability
       </a>
       <a class="light" href="https://mega.io/developers">
        Developers
       </a>
       <a class="light" href="https://mega.io/resellers">
        Resellers
       </a>
       <a class="light" href="https://mega.io/affiliate">
        Affiliate Programme
       </a>
      </div>
     </div>
     <div class="block">
      <span class="heavy">
       Help
      </span>
      <div class="links">
       <a class="light" href="https://help.mega.io" rel="noopener" target="_blank">
        Help Centre
       </a>
       <a class="light" href="https://mega.io/contact">
        Contact us
       </a>
       <a class="light" href="https://mega.io/bug-bounty">
        Vulnerability Reward Programme
       </a>
      </div>
     </div>
    </div>
    <div class="column">
     <div class="block">
      <span class="heavy">
       Company
      </span>
      <div class="links">
       <a class="light" href="https://mega.io/about">
        About us
       </a>
       <a class="light" href="https://careers.mega.nz" rel="noopener" target="_blank">
        Careers
       </a>
       <a class="light" href="https://mega.io/media">
        Media
       </a>
      </div>
     </div>
     <div class="block">
      <span class="heavy">
       Legal
      </span>
      <div class="links">
       <a class="light" href="https://mega.io/terms">
        Terms of Service
       </a>
       <a class="light" href="https://mega.io/privacy">
        Privacy and Data Policy
       </a>
       <a class="light" href="https://mega.io/copyright">
        Copyright notice submission
       </a>
       <a class="light" href="https://mega.io/takedown">
        Takedown Guidance Policy
       </a>
       <a class="light" href="/transparency">
        Transparency Report
       </a>
       <a class="light" href="https://mega.io/mega-io-cookie">
        Cookie Policy
       </a>
       <a class="light" href="#cookie-settings-dialog">
        Cookie settings
       </a>
       <a class="light" href="https://mega.io/dispute">
        Copyright dispute
       </a>
      </div>
     </div>
    </div>
   </nav>
  </footer>
  <dialog class="cookie-banner hidden">
   <div class="inner-content main-grid">
    <h5 class="banner-heading">
     We use cookies
    </h5>
    <p class="banner-text">
     We use cookies and similar technologies to provide an enhanced experience with our services. Read more in our
     <a href="https://mega.io/mega-io-cookie">
      Cookie Policy
     </a>
     .
    </p>
    <div class="banner-buttons">
     <button class="text-button md reject hidden">
      Reject all
     </button>
     <div class="banner-customise-accept-buttons">
      <a class="button outline-muted sm customise-cookie" href="#cookie-settings-dialog">
       Customise
      </a>
      <button class="button secondary-muted sm accept-all">
       Accept all
      </button>
     </div>
    </div>
   </div>
  </dialog>
  <div class="overlay standard">
  </div>
  <div class="overlay with-header">
  </div>
  <dialog class="mobile-modals">
   <nav class="mobile-modal nav-menu hidden">
    <div class="scroll-pane">
     <div class="menu-item accordion">
      <div class="accordion-toggle">
       <div class="item-name">
        Products
       </div>
       <div class="icon-box">
        <div class="icon chevron-down">
        </div>
       </div>
      </div>
      <div class="accordion-content">
       <div class="icon-descs">
        <span class="heading">
         PRODUCTS
        </span>
        <a class="icon-desc" href="/storage">
         <div class="icon-box">
          <div class="icon cloud-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Cloud storage
          </div>
          <div class="description">
           Keep your files in a secure place
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/vpn">
         <div class="icon-box">
          <div class="icon shield-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           VPN
          </div>
          <div class="description">
           Protect your privacy online
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/pass">
         <div class="icon-box">
          <div class="icon lock-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Password manager
          </div>
          <div class="description">
           Protect and access passwords across any device
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/chatandmeetings">
         <div class="icon-box">
          <div class="icon message-circle-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Chat and Meetings
          </div>
          <div class="description">
           Secure and private conversations
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/objectstorage">
         <div class="icon-box">
          <div class="icon database-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Object storage
          </div>
          <div class="description">
           Fully scalable S3 compatible storage
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/megabackup">
         <div class="icon-box">
          <div class="icon server-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Backup
          </div>
          <div class="description">
           Securely back up your files
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/syncing">
         <div class="icon-box">
          <div class="icon sync-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Sync
          </div>
          <div class="description">
           Sync your files with MEGA
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/media-files">
         <div class="icon-box">
          <div class="icon image-01-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Media files
          </div>
          <div class="description">
           Store and organise your media files
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/share">
         <div class="icon-box">
          <div class="icon share-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Share
          </div>
          <div class="description">
           Share your files with friends
          </div>
         </div>
        </a>
       </div>
      </div>
     </div>
     <div class="menu-item accordion">
      <div class="accordion-toggle">
       <div class="item-name">
        Solutions
       </div>
       <div class="icon-box">
        <div class="icon chevron-down">
        </div>
       </div>
      </div>
      <div class="accordion-content">
       <div class="icon-descs">
        <span class="heading">
         SOLUTIONS
        </span>
        <a class="icon-desc" href="/individuals">
         <div class="icon-box">
          <div class="icon emoji-smile-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Individuals
          </div>
          <div class="description">
           Personal accounts for everyday use
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/freelancers">
         <div class="icon-box">
          <div class="icon video-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Freelancers
          </div>
          <div class="description">
           Creatives, contractors, consultants and side hustlers
          </div>
         </div>
        </a>
        <a class="icon-desc" href="/small-business">
         <div class="icon-box">
          <div class="icon users-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Small business
          </div>
          <div class="description">
           Startups, sole traders, family businesses and online retailers
          </div>
         </div>
        </a>
       </div>
      </div>
     </div>
     <a class="menu-item" href="https://mega.io/business">
      Business
     </a>
     <a class="menu-item" href="https://mega.io/pricing">
      Pricing
     </a>
     <div class="menu-item accordion">
      <div class="accordion-toggle">
       <div class="item-name">
        Resources
       </div>
       <div class="icon-box">
        <div class="icon chevron-down">
        </div>
       </div>
      </div>
      <div class="accordion-content">
       <div class="icon-descs">
        <span class="heading">
         Resources
        </span>
        <a class="icon-desc" href="https://help.mega.io" rel="noopener noreferrer" target="_blank">
         <div class="icon-box">
          <div class="icon info">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Help Centre
          </div>
          <div class="description">
           Guides and support for MEGA products
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://mega.io/contact">
         <div class="icon-box">
          <div class="icon message-square">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Contact us
          </div>
          <div class="description">
           Have a question? Get in touch
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://blog.mega.io" rel="noopener noreferrer" target="_blank">
         <div class="icon-box">
          <div class="icon edit-3-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Blog
          </div>
          <div class="description">
           The latest MEGA news, tips, and insights
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://mega.io/bug-bounty">
         <div class="icon-box">
          <div class="icon shield">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Vulnerability Reward Programme
          </div>
          <div class="description">
           Report a bug or an issue
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://mega.io/reliability">
         <div class="icon-box">
          <div class="icon globe">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Reliability
          </div>
          <div class="description">
           Learn how we keep your data accessible anytime, anywhere
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://mega.io/developers">
         <div class="icon-box">
          <div class="icon code">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Developers
          </div>
          <div class="description">
           See our source code and software development kit
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://mega.io/resellers">
         <div class="icon-box">
          <div class="icon check-circle">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Resellers
          </div>
          <div class="description">
           Purchase vouchers from MEGA-authorised resellers
          </div>
         </div>
        </a>
        <a class="icon-desc" href="https://mega.io/affiliate">
         <div class="icon-box">
          <div class="icon currency-dollar-circle-mto">
          </div>
         </div>
         <div class="right-pane">
          <div class="label">
           Affiliate Programme
          </div>
          <div class="description">
           Earn commission with the MEGA Affiliate Programme
          </div>
         </div>
        </a>
       </div>
      </div>
     </div>
     <div class="buttons">
      <button aria-label="Switch theme" class="theme-btn" data-dark-text="Switch to dark mode" data-light-text="Switch to light mode">
       <span class="icon-box">
        <span class="icon moon">
        </span>
       </span>
       <span class="label">
        Switch to dark mode
       </span>
      </button>
      <button aria-label="&lt;? echo esc_html($languageBtnLabel) ?&gt;" class="mobile-menu-button language-btn">
       <span class="icon-box">
        <span class="icon globe">
        </span>
       </span>
       <span class="label">
        EN
       </span>
      </button>
     </div>
    </div>
    <div class="bottom-bar">
     <a class="button outline-muted md sign-in-btn" href="https://mega.nz/login">
      Log in
     </a>
     <a class="button primary-muted md sign-up-btn" href="https://mega.nz/register">
      Sign up
     </a>
    </div>
   </nav>
  </dialog>
  <div class="modals">
   <div class="modal-constrainer main-grid hidden">
    <dialog class="modal m-modal cookie-dialog hidden">
     <button aria-label="Close" class="icon-button md close">
      <span class="icon x">
      </span>
     </button>
     <!-- close icon button -->
     <div class="img-box hidden">
      <div class="img" style="background-image: url('');">
      </div>
     </div>
     <!-- image -->
     <h5 class="heading">
      Cookie settings
     </h5>
     <p class="blurb">
     </p>
     <div class="content">
      <div class="cookie-toggles">
       <div class="cookie-toggle">
        <div class="text-pane">
         <span class="heading">
          Essential cookies
         </span>
         <p class="blurb">
          Essential for providing you important functionality and secure access to our services. For this reason, they do not require consent.
         </p>
        </div>
        <div class="toggle-control essential on disabled" tabindex="-1">
         <svg class="handle" fill="none" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
          <circle cx="8" cy="8" r="8">
          </circle>
          <rect class="strike" fill="var(--color-bg-page" height="2" rx="1" ry="1" width="10" x="3" y="7">
          </rect>
          <path class="tick" clip-rule="evenodd" d="M5.74682 8.25675L3.88013 6.34247C3.52636 5.97969 2.95288 5.97969 2.59911 6.34247C2.24463 6.70563 2.24463 7.2941 2.59911 7.65652L5.10631 10.2276C5.28301 10.4092 5.51491 10.5 5.74682 10.5C5.97836 10.5 6.21062 10.4092 6.38732 10.2276L11.401 5.08613C11.7551 4.72298 11.7551 4.13451 11.401 3.77209C11.0476 3.4093 10.4734 3.4093 10.12 3.77209L5.74682 8.25675Z" fill="var(--accent-color)" fill-rule="evenodd" transform="translate(1, 1)">
          </path>
         </svg>
        </div>
       </div>
       <hr/>
       <div class="cookie-toggle">
        <div class="text-pane">
         <span class="heading">
          Preferences cookies
         </span>
         <p class="blurb">
          Persistently remember your preferences such as language and theme.
         </p>
        </div>
        <div class="toggle-control preferences off" tabindex="0">
         <svg class="handle" fill="none" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
          <circle cx="8" cy="8" r="8">
          </circle>
          <rect class="strike" fill="var(--color-bg-page" height="2" rx="1" ry="1" width="10" x="3" y="7">
          </rect>
          <path class="tick" clip-rule="evenodd" d="M5.74682 8.25675L3.88013 6.34247C3.52636 5.97969 2.95288 5.97969 2.59911 6.34247C2.24463 6.70563 2.24463 7.2941 2.59911 7.65652L5.10631 10.2276C5.28301 10.4092 5.51491 10.5 5.74682 10.5C5.97836 10.5 6.21062 10.4092 6.38732 10.2276L11.401 5.08613C11.7551 4.72298 11.7551 4.13451 11.401 3.77209C11.0476 3.4093 10.4734 3.4093 10.12 3.77209L5.74682 8.25675Z" fill="var(--accent-color)" fill-rule="evenodd" transform="translate(1, 1)">
          </path>
         </svg>
        </div>
       </div>
       <hr/>
       <div class="cookie-toggle">
        <div class="text-pane">
         <span class="heading">
          Analytics cookies
         </span>
         <p class="blurb">
          Help us to understand how you use our services, and provide us data that we can use to make improvements and provide a personalised experience. Not accepting these cookies means we will have less data available to us to help design improvements.
         </p>
        </div>
        <div class="toggle-control analytics off" tabindex="0">
         <svg class="handle" fill="none" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
          <circle cx="8" cy="8" r="8">
          </circle>
          <rect class="strike" fill="var(--color-bg-page" height="2" rx="1" ry="1" width="10" x="3" y="7">
          </rect>
          <path class="tick" clip-rule="evenodd" d="M5.74682 8.25675L3.88013 6.34247C3.52636 5.97969 2.95288 5.97969 2.59911 6.34247C2.24463 6.70563 2.24463 7.2941 2.59911 7.65652L5.10631 10.2276C5.28301 10.4092 5.51491 10.5 5.74682 10.5C5.97836 10.5 6.21062 10.4092 6.38732 10.2276L11.401 5.08613C11.7551 4.72298 11.7551 4.13451 11.401 3.77209C11.0476 3.4093 10.4734 3.4093 10.12 3.77209L5.74682 8.25675Z" fill="var(--accent-color)" fill-rule="evenodd" transform="translate(1, 1)">
          </path>
         </svg>
        </div>
       </div>
       <hr/>
       <div class="cookie-toggle">
        <div class="text-pane">
         <span class="heading">
          Marketing cookies
         </span>
         <p class="blurb">
          Help us measure the effectiveness of marketing campaigns and deliver targeted advertisements of our products and services by collecting data about your device and behaviour on our website and tracking you across devices and marketing channels. Not accepting these cookies means your information wont be tracked when you visit our website and you are much less likely to view relevant offers about our products and services.
         </p>
        </div>
        <div class="toggle-control marketing off" tabindex="0">
         <svg class="handle" fill="none" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
          <circle cx="8" cy="8" r="8">
          </circle>
          <rect class="strike" fill="var(--color-bg-page" height="2" rx="1" ry="1" width="10" x="3" y="7">
          </rect>
          <path class="tick" clip-rule="evenodd" d="M5.74682 8.25675L3.88013 6.34247C3.52636 5.97969 2.95288 5.97969 2.59911 6.34247C2.24463 6.70563 2.24463 7.2941 2.59911 7.65652L5.10631 10.2276C5.28301 10.4092 5.51491 10.5 5.74682 10.5C5.97836 10.5 6.21062 10.4092 6.38732 10.2276L11.401 5.08613C11.7551 4.72298 11.7551 4.13451 11.401 3.77209C11.0476 3.4093 10.4734 3.4093 10.12 3.77209L5.74682 8.25675Z" fill="var(--accent-color)" fill-rule="evenodd" transform="translate(1, 1)">
          </path>
         </svg>
        </div>
       </div>
      </div>
      <div class="cookie-links">
       <a class="text-button md" href="https://mega.io/mega-io-cookie">
        Cookie Policy
       </a>
       <!-- cookie policy -->
       <a class="text-button md" href="https://mega.io/privacy">
        Privacy Policy
       </a>
       <!-- privacy policy -->
      </div>
     </div>
     <div class="buttons">
      <button class="button primary-muted md save">
       Save settings
      </button>
     </div>
    </dialog>
   </div>
   <div class="modal-constrainer main-grid hidden">
    <dialog class="modal m-modal language-switcher hidden">
     <button aria-label="Close" class="icon-button md close">
      <span class="icon x">
      </span>
     </button>
     <!-- close icon button -->
     <div class="img-box hidden">
      <div class="img" style="background-image: url('');">
      </div>
     </div>
     <!-- image -->
     <h5 class="heading">
      Choose language
     </h5>
     <p class="blurb">
     </p>
     <div class="content">
      <div class="language-options">
       <button class="language-option active" data-code="en-NZ" data-link="/" title="English">
        English
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="ar" data-link="/ar" title="Arabic">
        
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="de-DE" data-link="/de" title="German">
        Deutsch
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="es-ES" data-link="/es" title="Spanish">
        Espaol
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="fr-FR" data-link="/fr" title="French">
        Franais
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="id-ID" data-link="/id" title="Indonesian">
        Indonesia
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="it-IT" data-link="/it" title="Italian">
        Italiano
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="ja" data-link="/ja" title="Japanese">
        
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="ko-KR" data-link="/ko" title="Korean">
        
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="nl-NL" data-link="/nl" title="Dutch">
        Nederlands
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="pl-PL" data-link="/pl" title="Polish">
        Polski
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="pt-PT" data-link="/pt-br" title="Portuguese">
        Portugus
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="ro-RO" data-link="/ro" title="Romanian">
        Romn
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="ru-RU" data-link="/ru" title="Russian">
        
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="th" data-link="/th" title="Thai">
        
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="vi" data-link="/vi" title="Vietnamese">
        Ting Vit
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="zh-CN" data-link="/zh-hans" title="Chinese">
        
        <span class="icon check">
        </span>
       </button>
       <button class="language-option" data-code="zh-TW" data-link="/zh-hant" title="Chinese">
        
        <span class="icon check">
        </span>
       </button>
      </div>
     </div>
     <div class="buttons">
      <button aria-label="Save" class="button primary-muted md save-language">
       Save
      </button>
     </div>
    </dialog>
   </div>
   <template class="generic-msg-modal" data-default-primary-btn-label="OK">
    <div class="modal-constrainer main-grid hidden">
     <dialog class="modal m-modal generic-msg hidden">
      <button aria-label="Close" class="icon-button md close">
       <span class="icon x">
       </span>
      </button>
      <!-- close icon button -->
      <div class="img-box hidden">
       <div class="img" style="background-image: url('');">
       </div>
      </div>
      <!-- image -->
      <h5 class="heading">
       Message
      </h5>
      <p class="blurb">
       This is a generic blurb.
      </p>
      <div class="content">
      </div>
      <div class="buttons">
       <a class="button primary-muted md primaryButton hidden">
        Primary link
       </a>
       <a class="button outline-muted md secondaryButton hidden">
        Secondary link
       </a>
       <button class="button primary-muted md primaryButton hidden">
        Primary button
       </button>
       <button class="button outline-muted md secondaryButton hidden">
        Secondary button
       </button>
      </div>
     </dialog>
    </div>
   </template>
  </div>
  <div class="toast-notifications-container main-grid">
  </div>
  <div class="wp-footer">
   <style id="global-styles-inline-css" type="text/css">
    :root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
   </style>
   <style id="core-block-supports-inline-css" type="text/css">
    .wp-container-core-columns-is-layout-1{flex-wrap:nowrap;}.wp-container-core-columns-is-layout-2{flex-wrap:nowrap;}
   </style>
  </div>
  <script>
   /*! For license information please see react.min.js.LICENSE.txt */
(()=>{"use strict";var e={287:(e,t)=>{var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),i=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),s=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator,d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,h={};function v(e,t,r){this.props=e,this.context=t,this.refs=h,this.updater=r||d}function m(){}function b(e,t,r){this.props=e,this.context=t,this.refs=h,this.updater=r||d}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=v.prototype;var S=b.prototype=new m;S.constructor=b,_(S,v.prototype),S.isPureReactComponent=!0;var w=Array.isArray,E=Object.prototype.hasOwnProperty,R={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var o,u={},a=null,c=null;if(null!=t)for(o in void 0!==t.ref&&(c=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,o)&&!$.hasOwnProperty(o)&&(u[o]=t[o]);var i=arguments.length-2;if(1===i)u.children=n;else if(1<i){for(var f=Array(i),s=0;s<i;s++)f[s]=arguments[s+2];u.children=f}if(e&&e.defaultProps)for(o in i=e.defaultProps)void 0===u[o]&&(u[o]=i[o]);return{$$typeof:r,type:e,key:a,ref:c,props:u,_owner:R.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var g=/\/+/g;function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,o,u,a){var c=typeof e;"undefined"!==c&&"boolean"!==c||(e=null);var i=!1;if(null===e)i=!0;else switch(c){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case r:case n:i=!0}}if(i)return a=a(i=e),e=""===u?"."+j(i,0):u,w(a)?(o="",null!=e&&(o=e.replace(g,"$&/")+"/"),x(a,t,o,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(g,"$&/")+"/")+e)),t.push(a)),1;if(i=0,u=""===u?".":u+":",w(e))for(var f=0;f<e.length;f++){var s=u+j(c=e[f],f);i+=x(c,t,o,s,a)}else if(s=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=y&&e[y]||e["@@iterator"])?e:null}(e),"function"==typeof s)for(e=s.call(e),f=0;!(c=e.next()).done;)i+=x(c=c.value,t,o,s=u+j(c,f++),a);else if("object"===c)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function O(e,t,r){if(null==e)return e;var n=[],o=0;return x(e,n,"","",(function(e){return t.call(r,e,o++)})),n}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},T={transition:null},V={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:T,ReactCurrentOwner:R};function A(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,r){O(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=u,t.Suspense=s,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,t.act=A,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=_({},e.props),u=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=R.current),void 0!==t.key&&(u=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(f in t)E.call(t,f)&&!$.hasOwnProperty(f)&&(o[f]=void 0===t[f]&&void 0!==i?i[f]:t[f])}var f=arguments.length-2;if(1===f)o.children=n;else if(1<f){i=Array(f);for(var s=0;s<f;s++)i[s]=arguments[s+2];o.children=i}return{$$typeof:r,type:e.type,key:u,ref:a,props:o,_owner:c}},t.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:f,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=A,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,r){return I.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,r){return I.current.useReducer(e,t,r)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return I.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},540:(e,t,r)=>{e.exports=r(287)}},t={},r=function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n](u,u.exports,r),u.exports}(540);window.React=r})();
/*! For license information please see react-dom.min.js.LICENSE.txt */
(()=>{"use strict";var e={551:(e,n,t)=>{var r=t(594),l=t(982);function a(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,o={};function i(e,n){s(e,n),s(e+"Capture",n)}function s(e,n){for(o[e]=n,e=0;e<n.length;e++)u.add(n[e])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function h(e,n,t,r,l,a,u){this.acceptsBooleans=2===n||3===n||4===n,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=a,this.removeEmptyString=u}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new h(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var n=e[0];g[n]=new h(n,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new h(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new h(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new h(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new h(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,n,t,r){var l=g.hasOwnProperty(n)?g[n]:null;(null!==l?0!==l.type:r||!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&(function(e,n,t,r){if(null==n||function(e,n,t,r){if(null!==t&&0===t.type)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,n,t,r))return!0;if(r)return!1;if(null!==t)switch(t.type){case 3:return!n;case 4:return!1===n;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}(n,t,l,r)&&(t=null),r||null===l?function(e){return!!f.call(m,e)||!f.call(p,e)&&(d.test(e)?m[e]=!0:(p[e]=!0,!1))}(n)&&(null===t?e.removeAttribute(n):e.setAttribute(n,""+t)):l.mustUseProperty?e[l.propertyName]=null===t?3!==l.type&&"":t:(n=l.attributeName,r=l.attributeNamespace,null===t?e.removeAttribute(n):(t=3===(l=l.type)||4===l&&!0===t?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var n=e.replace(v,y);g[n]=new h(n,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var n=e.replace(v,y);g[n]=new h(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var n=e.replace(v,y);g[n]=new h(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),z=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var F=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function D(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,I=Object.assign;function U(e){if(void 0===O)try{throw Error()}catch(e){var n=e.stack.trim().match(/\n( *(at )?)/);O=n&&n[1]||""}return"\n"+O+e}var V=!1;function A(e,n){if(!e||V)return"";V=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(n){if(n&&r&&"string"==typeof n.stack){for(var l=n.stack.split("\n"),a=r.stack.split("\n"),u=l.length-1,o=a.length-1;1<=u&&0<=o&&l[u]!==a[o];)o--;for(;1<=u&&0<=o;u--,o--)if(l[u]!==a[o]){if(1!==u||1!==o)do{if(u--,0>--o||l[u]!==a[o]){var i="\n"+l[u].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}}while(1<=u&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return A(e.type,!1);case 11:return A(e.type.render,!1);case 1:return A(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case x:return"Fragment";case S:return"Portal";case C:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case z:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case N:var n=e.render;return(e=e.displayName)||(e=""!==(e=n.displayName||n.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(n=e.displayName||null)?n:H(e.type)||"Memo";case M:n=e._payload,e=e._init;try{return H(e(n))}catch(e){}}return null}function W(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=n.render).displayName||e.name||"",n.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(n);case 8:return n===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof n)return n.displayName||n.name||null;if("string"==typeof n)return n}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function j(e){var n=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===n||"radio"===n)}function $(e){e._valueTracker||(e._valueTracker=function(e){var n=j(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&void 0!==t&&"function"==typeof t.get&&"function"==typeof t.set){var l=t.get,a=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return l.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}(e))}function K(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=j(e)?e.checked?"true":"false":e.value),(e=r)!==t&&(n.setValue(e),!0)}function q(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(n){return e.body}}function Y(e,n){var t=n.checked;return I({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function X(e,n){var t=null==n.defaultValue?"":n.defaultValue,r=null!=n.checked?n.checked:n.defaultChecked;t=Q(null!=n.value?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:"checkbox"===n.type||"radio"===n.type?null!=n.checked:null!=n.value}}function G(e,n){null!=(n=n.checked)&&b(e,"checked",n,!1)}function Z(e,n){G(e,n);var t=Q(n.value),r=n.type;if(null!=t)"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");n.hasOwnProperty("value")?ee(e,n.type,t):n.hasOwnProperty("defaultValue")&&ee(e,n.type,Q(n.defaultValue)),null==n.checked&&null!=n.defaultChecked&&(e.defaultChecked=!!n.defaultChecked)}function J(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!("submit"!==r&&"reset"!==r||void 0!==n.value&&null!==n.value))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ee(e,n,t){"number"===n&&q(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var ne=Array.isArray;function te(e,n,t,r){if(e=e.options,n){n={};for(var l=0;l<t.length;l++)n["$"+t[l]]=!0;for(t=0;t<e.length;t++)l=n.hasOwnProperty("$"+e[t].value),e[t].selected!==l&&(e[t].selected=l),l&&r&&(e[t].defaultSelected=!0)}else{for(t=""+Q(t),n=null,l=0;l<e.length;l++){if(e[l].value===t)return e[l].selected=!0,void(r&&(e[l].defaultSelected=!0));null!==n||e[l].disabled||(n=e[l])}null!==n&&(n.selected=!0)}}function re(e,n){if(null!=n.dangerouslySetInnerHTML)throw Error(a(91));return I({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,n){var t=n.value;if(null==t){if(t=n.children,n=n.defaultValue,null!=t){if(null!=n)throw Error(a(92));if(ne(t)){if(1<t.length)throw Error(a(93));t=t[0]}n=t}null==n&&(n=""),t=n}e._wrapperState={initialValue:Q(t)}}function ae(e,n){var t=Q(n.value),r=Q(n.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==n.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=r&&(e.defaultValue=""+r)}function ue(e){var n=e.textContent;n===e._wrapperState.initialValue&&""!==n&&null!==n&&(e.value=n)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ie(e,n){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(n):"http://www.w3.org/2000/svg"===e&&"foreignObject"===n?"http://www.w3.org/1999/xhtml":e}var se,ce,fe=(ce=function(e,n){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=n;else{for((se=se||document.createElement("div")).innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=se.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,t,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,n)}))}:ce);function de(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=n)}e.textContent=n}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function he(e,n,t){return null==n||"boolean"==typeof n||""===n?"":t||"number"!=typeof n||0===n||pe.hasOwnProperty(e)&&pe[e]?(""+n).trim():n+"px"}function ge(e,n){for(var t in e=e.style,n)if(n.hasOwnProperty(t)){var r=0===t.indexOf("--"),l=he(t,n[t],r);"float"===t&&(t="cssFloat"),r?e.setProperty(t,l):e[t]=l}}Object.keys(pe).forEach((function(e){me.forEach((function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),pe[n]=pe[e]}))}));var ve=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,n){if(n){if(ve[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=n.dangerouslySetInnerHTML){if(null!=n.children)throw Error(a(60));if("object"!=typeof n.dangerouslySetInnerHTML||!("__html"in n.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=n.style&&"object"!=typeof n.style)throw Error(a(62))}}function be(e,n){if(-1===e.indexOf("-"))return"string"==typeof n.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,xe=null,Ee=null;function Ce(e){if(e=bl(e)){if("function"!=typeof Se)throw Error(a(280));var n=e.stateNode;n&&(n=wl(n),Se(e.stateNode,e.type,n))}}function _e(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function ze(){if(xe){var e=xe,n=Ee;if(Ee=xe=null,Ce(e),n)for(e=0;e<n.length;e++)Ce(n[e])}}function Ne(e,n){return e(n)}function Pe(){}var Te=!1;function Le(e,n,t){if(Te)return e(n,t);Te=!0;try{return Ne(e,n,t)}finally{Te=!1,(null!==xe||null!==Ee)&&(Pe(),ze())}}function Me(e,n){var t=e.stateNode;if(null===t)return null;var r=wl(t);if(null===r)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(t&&"function"!=typeof t)throw Error(a(231,n,typeof t));return t}var Fe=!1;if(c)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ce){Fe=!1}function De(e,n,t,r,l,a,u,o,i){var s=Array.prototype.slice.call(arguments,3);try{n.apply(t,s)}catch(e){this.onError(e)}}var Oe=!1,Ie=null,Ue=!1,Ve=null,Ae={onError:function(e){Oe=!0,Ie=e}};function Be(e,n,t,r,l,a,u,o,i){Oe=!1,Ie=null,De.apply(Ae,arguments)}function He(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do{0!=(4098&(n=e).flags)&&(t=n.return),e=n.return}while(e)}return 3===n.tag?t:null}function We(e){if(13===e.tag){var n=e.memoizedState;if(null===n&&null!==(e=e.alternate)&&(n=e.memoizedState),null!==n)return n.dehydrated}return null}function Qe(e){if(He(e)!==e)throw Error(a(188))}function je(e){return null!==(e=function(e){var n=e.alternate;if(!n){if(null===(n=He(e)))throw Error(a(188));return n!==e?null:e}for(var t=e,r=n;;){var l=t.return;if(null===l)break;var u=l.alternate;if(null===u){if(null!==(r=l.return)){t=r;continue}break}if(l.child===u.child){for(u=l.child;u;){if(u===t)return Qe(l),e;if(u===r)return Qe(l),n;u=u.sibling}throw Error(a(188))}if(t.return!==r.return)t=l,r=u;else{for(var o=!1,i=l.child;i;){if(i===t){o=!0,t=l,r=u;break}if(i===r){o=!0,r=l,t=u;break}i=i.sibling}if(!o){for(i=u.child;i;){if(i===t){o=!0,t=u,r=l;break}if(i===r){o=!0,r=u,t=l;break}i=i.sibling}if(!o)throw Error(a(189))}}if(t.alternate!==r)throw Error(a(190))}if(3!==t.tag)throw Error(a(188));return t.stateNode.current===t?e:n}(e))?$e(e):null}function $e(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var n=$e(e);if(null!==n)return n;e=e.sibling}return null}var Ke=l.unstable_scheduleCallback,qe=l.unstable_cancelCallback,Ye=l.unstable_shouldYield,Xe=l.unstable_requestPaint,Ge=l.unstable_now,Ze=l.unstable_getCurrentPriorityLevel,Je=l.unstable_ImmediatePriority,en=l.unstable_UserBlockingPriority,nn=l.unstable_NormalPriority,tn=l.unstable_LowPriority,rn=l.unstable_IdlePriority,ln=null,an=null,un=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(on(e)/sn|0)|0},on=Math.log,sn=Math.LN2,cn=64,fn=4194304;function dn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pn(e,n){var t=e.pendingLanes;if(0===t)return 0;var r=0,l=e.suspendedLanes,a=e.pingedLanes,u=268435455&t;if(0!==u){var o=u&~l;0!==o?r=dn(o):0!=(a&=u)&&(r=dn(a))}else 0!=(u=t&~l)?r=dn(u):0!==a&&(r=dn(a));if(0===r)return 0;if(0!==n&&n!==r&&0==(n&l)&&((l=r&-r)>=(a=n&-n)||16===l&&0!=(4194240&a)))return n;if(0!=(4&r)&&(r|=16&t),0!==(n=e.entangledLanes))for(e=e.entanglements,n&=r;0<n;)l=1<<(t=31-un(n)),r|=e[t],n&=~l;return r}function mn(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;default:return-1}}function hn(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gn(){var e=cn;return 0==(4194240&(cn<<=1))&&(cn=64),e}function vn(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function yn(e,n,t){e.pendingLanes|=n,536870912!==n&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[n=31-un(n)]=t}function bn(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var r=31-un(t),l=1<<r;l&n|e[r]&n&&(e[r]|=n),t&=~l}}var kn=0;function wn(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Sn,xn,En,Cn,_n,zn=!1,Nn=[],Pn=null,Tn=null,Ln=null,Mn=new Map,Fn=new Map,Rn=[],Dn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function On(e,n){switch(e){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":Mn.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fn.delete(n.pointerId)}}function In(e,n,t,r,l,a){return null===e||e.nativeEvent!==a?(e={blockedOn:n,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[l]},null!==n&&null!==(n=bl(n))&&xn(n),e):(e.eventSystemFlags|=r,n=e.targetContainers,null!==l&&-1===n.indexOf(l)&&n.push(l),e)}function Un(e){var n=yl(e.target);if(null!==n){var t=He(n);if(null!==t)if(13===(n=t.tag)){if(null!==(n=We(t)))return e.blockedOn=n,void _n(e.priority,(function(){En(t)}))}else if(3===n&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function Vn(e){if(null!==e.blockedOn)return!1;for(var n=e.targetContainers;0<n.length;){var t=Xn(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(null!==t)return null!==(n=bl(t))&&xn(n),e.blockedOn=t,!1;var r=new(t=e.nativeEvent).constructor(t.type,t);ke=r,t.target.dispatchEvent(r),ke=null,n.shift()}return!0}function An(e,n,t){Vn(e)&&t.delete(n)}function Bn(){zn=!1,null!==Pn&&Vn(Pn)&&(Pn=null),null!==Tn&&Vn(Tn)&&(Tn=null),null!==Ln&&Vn(Ln)&&(Ln=null),Mn.forEach(An),Fn.forEach(An)}function Hn(e,n){e.blockedOn===n&&(e.blockedOn=null,zn||(zn=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Bn)))}function Wn(e){function n(n){return Hn(n,e)}if(0<Nn.length){Hn(Nn[0],e);for(var t=1;t<Nn.length;t++){var r=Nn[t];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Pn&&Hn(Pn,e),null!==Tn&&Hn(Tn,e),null!==Ln&&Hn(Ln,e),Mn.forEach(n),Fn.forEach(n),t=0;t<Rn.length;t++)(r=Rn[t]).blockedOn===e&&(r.blockedOn=null);for(;0<Rn.length&&null===(t=Rn[0]).blockedOn;)Un(t),null===t.blockedOn&&Rn.shift()}var Qn=k.ReactCurrentBatchConfig,jn=!0;function $n(e,n,t,r){var l=kn,a=Qn.transition;Qn.transition=null;try{kn=1,qn(e,n,t,r)}finally{kn=l,Qn.transition=a}}function Kn(e,n,t,r){var l=kn,a=Qn.transition;Qn.transition=null;try{kn=4,qn(e,n,t,r)}finally{kn=l,Qn.transition=a}}function qn(e,n,t,r){if(jn){var l=Xn(e,n,t,r);if(null===l)Qr(e,n,r,Yn,t),On(e,r);else if(function(e,n,t,r,l){switch(n){case"focusin":return Pn=In(Pn,e,n,t,r,l),!0;case"dragenter":return Tn=In(Tn,e,n,t,r,l),!0;case"mouseover":return Ln=In(Ln,e,n,t,r,l),!0;case"pointerover":var a=l.pointerId;return Mn.set(a,In(Mn.get(a)||null,e,n,t,r,l)),!0;case"gotpointercapture":return a=l.pointerId,Fn.set(a,In(Fn.get(a)||null,e,n,t,r,l)),!0}return!1}(l,e,n,t,r))r.stopPropagation();else if(On(e,r),4&n&&-1<Dn.indexOf(e)){for(;null!==l;){var a=bl(l);if(null!==a&&Sn(a),null===(a=Xn(e,n,t,r))&&Qr(e,n,r,Yn,t),a===l)break;l=a}null!==l&&r.stopPropagation()}else Qr(e,n,r,null,t)}}var Yn=null;function Xn(e,n,t,r){if(Yn=null,null!==(e=yl(e=we(r))))if(null===(n=He(e)))e=null;else if(13===(t=n.tag)){if(null!==(e=We(n)))return e;e=null}else if(3===t){if(n.stateNode.current.memoizedState.isDehydrated)return 3===n.tag?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Yn=e,null}function Gn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case en:return 4;case nn:case tn:return 16;case rn:return 536870912;default:return 16}default:return 16}}var Zn=null,Jn=null,et=null;function nt(){if(et)return et;var e,n,t=Jn,r=t.length,l="value"in Zn?Zn.value:Zn.textContent,a=l.length;for(e=0;e<r&&t[e]===l[e];e++);var u=r-e;for(n=1;n<=u&&t[r-n]===l[a-n];n++);return et=l.slice(e,1<n?1-n:void 0)}function tt(e){var n=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===n&&(e=13):e=n,10===e&&(e=13),32<=e||13===e?e:0}function rt(){return!0}function lt(){return!1}function at(e){function n(n,t,r,l,a){for(var u in this._reactName=n,this._targetInst=r,this.type=t,this.nativeEvent=l,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(l):l[u]);return this.isDefaultPrevented=(null!=l.defaultPrevented?l.defaultPrevented:!1===l.returnValue)?rt:lt,this.isPropagationStopped=lt,this}return I(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rt)},persist:function(){},isPersistent:rt}),n}var ut,ot,it,st={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ct=at(st),ft=I({},st,{view:0,detail:0}),dt=at(ft),pt=I({},ft,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ct,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==it&&(it&&"mousemove"===e.type?(ut=e.screenX-it.screenX,ot=e.screenY-it.screenY):ot=ut=0,it=e),ut)},movementY:function(e){return"movementY"in e?e.movementY:ot}}),mt=at(pt),ht=at(I({},pt,{dataTransfer:0})),gt=at(I({},ft,{relatedTarget:0})),vt=at(I({},st,{animationName:0,elapsedTime:0,pseudoElement:0})),yt=I({},st,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bt=at(yt),kt=at(I({},st,{data:0})),wt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},St={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Et(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):!!(e=xt[e])&&!!n[e]}function Ct(){return Et}var _t=I({},ft,{key:function(e){if(e.key){var n=wt[e.key]||e.key;if("Unidentified"!==n)return n}return"keypress"===e.type?13===(e=tt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?St[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ct,charCode:function(e){return"keypress"===e.type?tt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),zt=at(_t),Nt=at(I({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pt=at(I({},ft,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ct})),Tt=at(I({},st,{propertyName:0,elapsedTime:0,pseudoElement:0})),Lt=I({},pt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mt=at(Lt),Ft=[9,13,27,32],Rt=c&&"CompositionEvent"in window,Dt=null;c&&"documentMode"in document&&(Dt=document.documentMode);var Ot=c&&"TextEvent"in window&&!Dt,It=c&&(!Rt||Dt&&8<Dt&&11>=Dt),Ut=String.fromCharCode(32),Vt=!1;function At(e,n){switch(e){case"keyup":return-1!==Ft.indexOf(n.keyCode);case"keydown":return 229!==n.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bt(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ht=!1,Wt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qt(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===n?!!Wt[e.type]:"textarea"===n}function jt(e,n,t,r){_e(r),0<(n=$r(n,"onChange")).length&&(t=new ct("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var $t=null,Kt=null;function qt(e){Ur(e,0)}function Yt(e){if(K(kl(e)))return e}function Xt(e,n){if("change"===e)return n}var Gt=!1;if(c){var Zt;if(c){var Jt="oninput"in document;if(!Jt){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jt="function"==typeof er.oninput}Zt=Jt}else Zt=!1;Gt=Zt&&(!document.documentMode||9<document.documentMode)}function nr(){$t&&($t.detachEvent("onpropertychange",tr),Kt=$t=null)}function tr(e){if("value"===e.propertyName&&Yt(Kt)){var n=[];jt(n,Kt,e,we(e)),Le(qt,n)}}function rr(e,n,t){"focusin"===e?(nr(),Kt=t,($t=n).attachEvent("onpropertychange",tr)):"focusout"===e&&nr()}function lr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yt(Kt)}function ar(e,n){if("click"===e)return Yt(n)}function ur(e,n){if("input"===e||"change"===e)return Yt(n)}var or="function"==typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e==1/n)||e!=e&&n!=n};function ir(e,n){if(or(e,n))return!0;if("object"!=typeof e||null===e||"object"!=typeof n||null===n)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var l=t[r];if(!f.call(n,l)||!or(e[l],n[l]))return!1}return!0}function sr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,n){var t,r=sr(e);for(e=0;r;){if(3===r.nodeType){if(t=e+r.textContent.length,e<=n&&t>=n)return{node:r,offset:n-e};e=t}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sr(r)}}function fr(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?fr(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}function dr(){for(var e=window,n=q();n instanceof e.HTMLIFrameElement;){try{var t="string"==typeof n.contentWindow.location.href}catch(e){t=!1}if(!t)break;n=q((e=n.contentWindow).document)}return n}function pr(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&("input"===n&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===n||"true"===e.contentEditable)}function mr(e){var n=dr(),t=e.focusedElem,r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&fr(t.ownerDocument.documentElement,t)){if(null!==r&&pr(t))if(n=r.start,void 0===(e=r.end)&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if((e=(n=t.ownerDocument||document)&&n.defaultView||window).getSelection){e=e.getSelection();var l=t.textContent.length,a=Math.min(r.start,l);r=void 0===r.end?a:Math.min(r.end,l),!e.extend&&a>r&&(l=r,r=a,a=l),l=cr(t,a);var u=cr(t,r);l&&u&&(1!==e.rangeCount||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&((n=n.createRange()).setStart(l.node,l.offset),e.removeAllRanges(),a>r?(e.addRange(n),e.extend(u.node,u.offset)):(n.setEnd(u.node,u.offset),e.addRange(n)))}for(n=[],e=t;e=e.parentNode;)1===e.nodeType&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof t.focus&&t.focus(),t=0;t<n.length;t++)(e=n[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function kr(e,n,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;br||null==gr||gr!==q(r)||(r="selectionStart"in(r=gr)&&pr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ir(yr,r)||(yr=r,0<(r=$r(vr,"onSelect")).length&&(n=new ct("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=gr)))}function wr(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Er={};function Cr(e){if(xr[e])return xr[e];if(!Sr[e])return e;var n,t=Sr[e];for(n in t)if(t.hasOwnProperty(n)&&n in Er)return xr[e]=t[n];return e}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var _r=Cr("animationend"),zr=Cr("animationiteration"),Nr=Cr("animationstart"),Pr=Cr("transitionend"),Tr=new Map,Lr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,n){Tr.set(e,n),i(n,[e])}for(var Fr=0;Fr<Lr.length;Fr++){var Rr=Lr[Fr];Mr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Mr(_r,"onAnimationEnd"),Mr(zr,"onAnimationIteration"),Mr(Nr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Pr,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Ir(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,function(e,n,t,r,l,u,o,i,s){if(Be.apply(this,arguments),Oe){if(!Oe)throw Error(a(198));var c=Ie;Oe=!1,Ie=null,Ue||(Ue=!0,Ve=c)}}(r,n,void 0,e),e.currentTarget=null}function Ur(e,n){n=0!=(4&n);for(var t=0;t<e.length;t++){var r=e[t],l=r.event;r=r.listeners;e:{var a=void 0;if(n)for(var u=r.length-1;0<=u;u--){var o=r[u],i=o.instance,s=o.currentTarget;if(o=o.listener,i!==a&&l.isPropagationStopped())break e;Ir(l,o,s),a=i}else for(u=0;u<r.length;u++){if(i=(o=r[u]).instance,s=o.currentTarget,o=o.listener,i!==a&&l.isPropagationStopped())break e;Ir(l,o,s),a=i}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,n){var t=n[hl];void 0===t&&(t=n[hl]=new Set);var r=e+"__bubble";t.has(r)||(Wr(n,e,2,!1),t.add(r))}function Ar(e,n,t){var r=0;n&&(r|=4),Wr(t,e,r,n)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Br]){e[Br]=!0,u.forEach((function(n){"selectionchange"!==n&&(Or.has(n)||Ar(n,!1,e),Ar(n,!0,e))}));var n=9===e.nodeType?e:e.ownerDocument;null===n||n[Br]||(n[Br]=!0,Ar("selectionchange",!1,n))}}function Wr(e,n,t,r){switch(Gn(n)){case 1:var l=$n;break;case 4:l=Kn;break;default:l=qn}t=l.bind(null,n,t,e),l=void 0,!Fe||"touchstart"!==n&&"touchmove"!==n&&"wheel"!==n||(l=!0),r?void 0!==l?e.addEventListener(n,t,{capture:!0,passive:l}):e.addEventListener(n,t,!0):void 0!==l?e.addEventListener(n,t,{passive:l}):e.addEventListener(n,t,!1)}function Qr(e,n,t,r,l){var a=r;if(0==(1&n)&&0==(2&n)&&null!==r)e:for(;;){if(null===r)return;var u=r.tag;if(3===u||4===u){var o=r.stateNode.containerInfo;if(o===l||8===o.nodeType&&o.parentNode===l)break;if(4===u)for(u=r.return;null!==u;){var i=u.tag;if((3===i||4===i)&&((i=u.stateNode.containerInfo)===l||8===i.nodeType&&i.parentNode===l))return;u=u.return}for(;null!==o;){if(null===(u=yl(o)))return;if(5===(i=u.tag)||6===i){r=a=u;continue e}o=o.parentNode}}r=r.return}Le((function(){var r=a,l=we(t),u=[];e:{var o=Tr.get(e);if(void 0!==o){var i=ct,s=e;switch(e){case"keypress":if(0===tt(t))break e;case"keydown":case"keyup":i=zt;break;case"focusin":s="focus",i=gt;break;case"focusout":s="blur",i=gt;break;case"beforeblur":case"afterblur":i=gt;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":i=mt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":i=ht;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":i=Pt;break;case _r:case zr:case Nr:i=vt;break;case Pr:i=Tt;break;case"scroll":i=dt;break;case"wheel":i=Mt;break;case"copy":case"cut":case"paste":i=bt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":i=Nt}var c=0!=(4&n),f=!c&&"scroll"===e,d=c?null!==o?o+"Capture":null:o;c=[];for(var p,m=r;null!==m;){var h=(p=m).stateNode;if(5===p.tag&&null!==h&&(p=h,null!==d&&null!=(h=Me(m,d))&&c.push(jr(m,h,p))),f)break;m=m.return}0<c.length&&(o=new i(o,s,null,t,l),u.push({event:o,listeners:c}))}}if(0==(7&n)){if(i="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||t===ke||!(s=t.relatedTarget||t.fromElement)||!yl(s)&&!s[ml])&&(i||o)&&(o=l.window===l?l:(o=l.ownerDocument)?o.defaultView||o.parentWindow:window,i?(i=r,null!==(s=(s=t.relatedTarget||t.toElement)?yl(s):null)&&(s!==(f=He(s))||5!==s.tag&&6!==s.tag)&&(s=null)):(i=null,s=r),i!==s)){if(c=mt,h="onMouseLeave",d="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(c=Nt,h="onPointerLeave",d="onPointerEnter",m="pointer"),f=null==i?o:kl(i),p=null==s?o:kl(s),(o=new c(h,m+"leave",i,t,l)).target=f,o.relatedTarget=p,h=null,yl(l)===r&&((c=new c(d,m+"enter",s,t,l)).target=p,c.relatedTarget=f,h=c),f=h,i&&s)e:{for(d=s,m=0,p=c=i;p;p=Kr(p))m++;for(p=0,h=d;h;h=Kr(h))p++;for(;0<m-p;)c=Kr(c),m--;for(;0<p-m;)d=Kr(d),p--;for(;m--;){if(c===d||null!==d&&c===d.alternate)break e;c=Kr(c),d=Kr(d)}c=null}else c=null;null!==i&&qr(u,o,i,c,!1),null!==s&&null!==f&&qr(u,f,s,c,!0)}if("select"===(i=(o=r?kl(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===i&&"file"===o.type)var g=Xt;else if(Qt(o))if(Gt)g=ur;else{g=lr;var v=rr}else(i=o.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?jt(u,g,t,l):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?kl(r):window,e){case"focusin":(Qt(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,kr(u,t,l);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":kr(u,t,l)}var y;if(Rt)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ht?At(e,t)&&(b="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(b="onCompositionStart");b&&(It&&"ko"!==t.locale&&(Ht||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ht&&(y=nt()):(Jn="value"in(Zn=l)?Zn.value:Zn.textContent,Ht=!0)),0<(v=$r(r,b)).length&&(b=new kt(b,e,null,t,l),u.push({event:b,listeners:v}),(y||null!==(y=Bt(t)))&&(b.data=y))),(y=Ot?function(e,n){switch(e){case"compositionend":return Bt(n);case"keypress":return 32!==n.which?null:(Vt=!0,Ut);case"textInput":return(e=n.data)===Ut&&Vt?null:e;default:return null}}(e,t):function(e,n){if(Ht)return"compositionend"===e||!Rt&&At(e,n)?(e=nt(),et=Jn=Zn=null,Ht=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return It&&"ko"!==n.locale?null:n.data}}(e,t))&&0<(r=$r(r,"onBeforeInput")).length&&(l=new kt("onBeforeInput","beforeinput",null,t,l),u.push({event:l,listeners:r}),l.data=y)}Ur(u,n)}))}function jr(e,n,t){return{instance:e,listener:n,currentTarget:t}}function $r(e,n){for(var t=n+"Capture",r=[];null!==e;){var l=e,a=l.stateNode;5===l.tag&&null!==a&&(l=a,null!=(a=Me(e,t))&&r.unshift(jr(e,a,l)),null!=(a=Me(e,n))&&r.push(jr(e,a,l))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,n,t,r,l){for(var a=n._reactName,u=[];null!==t&&t!==r;){var o=t,i=o.alternate,s=o.stateNode;if(null!==i&&i===r)break;5===o.tag&&null!==s&&(o=s,l?null!=(i=Me(t,a))&&u.unshift(jr(t,i,o)):l||null!=(i=Me(t,a))&&u.push(jr(t,i,o))),t=t.return}0!==u.length&&e.push({event:n,listeners:u})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Gr(e){return("string"==typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,n,t){if(n=Gr(n),Gr(e)!==n&&t)throw Error(a(425))}function Jr(){}var el=null,nl=null;function tl(e,n){return"textarea"===e||"noscript"===e||"string"==typeof n.children||"number"==typeof n.children||"object"==typeof n.dangerouslySetInnerHTML&&null!==n.dangerouslySetInnerHTML&&null!=n.dangerouslySetInnerHTML.__html}var rl="function"==typeof setTimeout?setTimeout:void 0,ll="function"==typeof clearTimeout?clearTimeout:void 0,al="function"==typeof Promise?Promise:void 0,ul="function"==typeof queueMicrotask?queueMicrotask:void 0!==al?function(e){return al.resolve(null).then(e).catch(ol)}:rl;function ol(e){setTimeout((function(){throw e}))}function il(e,n){var t=n,r=0;do{var l=t.nextSibling;if(e.removeChild(t),l&&8===l.nodeType)if("/$"===(t=l.data)){if(0===r)return e.removeChild(l),void Wn(n);r--}else"$"!==t&&"$?"!==t&&"$!"!==t||r++;t=l}while(t);Wn(n)}function sl(e){for(;null!=e;e=e.nextSibling){var n=e.nodeType;if(1===n||3===n)break;if(8===n){if("$"===(n=e.data)||"$!"===n||"$?"===n)break;if("/$"===n)return null}}return e}function cl(e){e=e.previousSibling;for(var n=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===n)return e;n--}else"/$"===t&&n++}e=e.previousSibling}return null}var fl=Math.random().toString(36).slice(2),dl="__reactFiber$"+fl,pl="__reactProps$"+fl,ml="__reactContainer$"+fl,hl="__reactEvents$"+fl,gl="__reactListeners$"+fl,vl="__reactHandles$"+fl;function yl(e){var n=e[dl];if(n)return n;for(var t=e.parentNode;t;){if(n=t[ml]||t[dl]){if(t=n.alternate,null!==n.child||null!==t&&null!==t.child)for(e=cl(e);null!==e;){if(t=e[dl])return t;e=cl(e)}return n}t=(e=t).parentNode}return null}function bl(e){return!(e=e[dl]||e[ml])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function kl(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wl(e){return e[pl]||null}var Sl=[],xl=-1;function El(e){return{current:e}}function Cl(e){0>xl||(e.current=Sl[xl],Sl[xl]=null,xl--)}function _l(e,n){xl++,Sl[xl]=e.current,e.current=n}var zl={},Nl=El(zl),Pl=El(!1),Tl=zl;function Ll(e,n){var t=e.type.contextTypes;if(!t)return zl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var l,a={};for(l in t)a[l]=n[l];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ml(e){return null!=e.childContextTypes}function Fl(){Cl(Pl),Cl(Nl)}function Rl(e,n,t){if(Nl.current!==zl)throw Error(a(168));_l(Nl,n),_l(Pl,t)}function Dl(e,n,t){var r=e.stateNode;if(n=n.childContextTypes,"function"!=typeof r.getChildContext)return t;for(var l in r=r.getChildContext())if(!(l in n))throw Error(a(108,W(e)||"Unknown",l));return I({},t,r)}function Ol(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||zl,Tl=Nl.current,_l(Nl,e),_l(Pl,Pl.current),!0}function Il(e,n,t){var r=e.stateNode;if(!r)throw Error(a(169));t?(e=Dl(e,n,Tl),r.__reactInternalMemoizedMergedChildContext=e,Cl(Pl),Cl(Nl),_l(Nl,e)):Cl(Pl),_l(Pl,t)}var Ul=null,Vl=!1,Al=!1;function Bl(e){null===Ul?Ul=[e]:Ul.push(e)}function Hl(){if(!Al&&null!==Ul){Al=!0;var e=0,n=kn;try{var t=Ul;for(kn=1;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}Ul=null,Vl=!1}catch(n){throw null!==Ul&&(Ul=Ul.slice(e+1)),Ke(Je,Hl),n}finally{kn=n,Al=!1}}return null}var Wl=[],Ql=0,jl=null,$l=0,Kl=[],ql=0,Yl=null,Xl=1,Gl="";function Zl(e,n){Wl[Ql++]=$l,Wl[Ql++]=jl,jl=e,$l=n}function Jl(e,n,t){Kl[ql++]=Xl,Kl[ql++]=Gl,Kl[ql++]=Yl,Yl=e;var r=Xl;e=Gl;var l=32-un(r)-1;r&=~(1<<l),t+=1;var a=32-un(n)+l;if(30<a){var u=l-l%5;a=(r&(1<<u)-1).toString(32),r>>=u,l-=u,Xl=1<<32-un(n)+l|t<<l|r,Gl=a+e}else Xl=1<<a|t<<l|r,Gl=e}function ea(e){null!==e.return&&(Zl(e,1),Jl(e,1,0))}function na(e){for(;e===jl;)jl=Wl[--Ql],Wl[Ql]=null,$l=Wl[--Ql],Wl[Ql]=null;for(;e===Yl;)Yl=Kl[--ql],Kl[ql]=null,Gl=Kl[--ql],Kl[ql]=null,Xl=Kl[--ql],Kl[ql]=null}var ta=null,ra=null,la=!1,aa=null;function ua(e,n){var t=Ls(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)}function oa(e,n){switch(e.tag){case 5:var t=e.type;return null!==(n=1!==n.nodeType||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n)&&(e.stateNode=n,ta=e,ra=sl(n.firstChild),!0);case 6:return null!==(n=""===e.pendingProps||3!==n.nodeType?null:n)&&(e.stateNode=n,ta=e,ra=null,!0);case 13:return null!==(n=8!==n.nodeType?null:n)&&(t=null!==Yl?{id:Xl,overflow:Gl}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},(t=Ls(18,null,null,0)).stateNode=n,t.return=e,e.child=t,ta=e,ra=null,!0);default:return!1}}function ia(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function sa(e){if(la){var n=ra;if(n){var t=n;if(!oa(e,n)){if(ia(e))throw Error(a(418));n=sl(t.nextSibling);var r=ta;n&&oa(e,n)?ua(r,t):(e.flags=-4097&e.flags|2,la=!1,ta=e)}}else{if(ia(e))throw Error(a(418));e.flags=-4097&e.flags|2,la=!1,ta=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ta=e}function fa(e){if(e!==ta)return!1;if(!la)return ca(e),la=!0,!1;var n;if((n=3!==e.tag)&&!(n=5!==e.tag)&&(n="head"!==(n=e.type)&&"body"!==n&&!tl(e.type,e.memoizedProps)),n&&(n=ra)){if(ia(e))throw da(),Error(a(418));for(;n;)ua(e,n),n=sl(n.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===n){ra=sl(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++}e=e.nextSibling}ra=null}}else ra=ta?sl(e.stateNode.nextSibling):null;return!0}function da(){for(var e=ra;e;)e=sl(e.nextSibling)}function pa(){ra=ta=null,la=!1}function ma(e){null===aa?aa=[e]:aa.push(e)}var ha=k.ReactCurrentBatchConfig;function ga(e,n,t){if(null!==(e=t.ref)&&"function"!=typeof e&&"object"!=typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(a(309));var r=t.stateNode}if(!r)throw Error(a(147,e));var l=r,u=""+e;return null!==n&&null!==n.ref&&"function"==typeof n.ref&&n.ref._stringRef===u?n.ref:(n=function(e){var n=l.refs;null===e?delete n[u]:n[u]=e},n._stringRef=u,n)}if("string"!=typeof e)throw Error(a(284));if(!t._owner)throw Error(a(290,e))}return e}function va(e,n){throw e=Object.prototype.toString.call(n),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function ba(e){function n(n,t){if(e){var r=n.deletions;null===r?(n.deletions=[t],n.flags|=16):r.push(t)}}function t(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function r(e,n){for(e=new Map;null!==n;)null!==n.key?e.set(n.key,n):e.set(n.index,n),n=n.sibling;return e}function l(e,n){return(e=Fs(e,n)).index=0,e.sibling=null,e}function u(n,t,r){return n.index=r,e?null!==(r=n.alternate)?(r=r.index)<t?(n.flags|=2,t):r:(n.flags|=2,t):(n.flags|=1048576,t)}function o(n){return e&&null===n.alternate&&(n.flags|=2),n}function i(e,n,t,r){return null===n||6!==n.tag?((n=Is(t,e.mode,r)).return=e,n):((n=l(n,t)).return=e,n)}function s(e,n,t,r){var a=t.type;return a===x?f(e,n,t.props.children,r,t.key):null!==n&&(n.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===M&&ya(a)===n.type)?((r=l(n,t.props)).ref=ga(e,n,t),r.return=e,r):((r=Rs(t.type,t.key,t.props,null,e.mode,r)).ref=ga(e,n,t),r.return=e,r)}function c(e,n,t,r){return null===n||4!==n.tag||n.stateNode.containerInfo!==t.containerInfo||n.stateNode.implementation!==t.implementation?((n=Us(t,e.mode,r)).return=e,n):((n=l(n,t.children||[])).return=e,n)}function f(e,n,t,r,a){return null===n||7!==n.tag?((n=Ds(t,e.mode,r,a)).return=e,n):((n=l(n,t)).return=e,n)}function d(e,n,t){if("string"==typeof n&&""!==n||"number"==typeof n)return(n=Is(""+n,e.mode,t)).return=e,n;if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return(t=Rs(n.type,n.key,n.props,null,e.mode,t)).ref=ga(e,null,n),t.return=e,t;case S:return(n=Us(n,e.mode,t)).return=e,n;case M:return d(e,(0,n._init)(n._payload),t)}if(ne(n)||D(n))return(n=Ds(n,e.mode,t,null)).return=e,n;va(e,n)}return null}function p(e,n,t,r){var l=null!==n?n.key:null;if("string"==typeof t&&""!==t||"number"==typeof t)return null!==l?null:i(e,n,""+t,r);if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return t.key===l?s(e,n,t,r):null;case S:return t.key===l?c(e,n,t,r):null;case M:return p(e,n,(l=t._init)(t._payload),r)}if(ne(t)||D(t))return null!==l?null:f(e,n,t,r,null);va(e,t)}return null}function m(e,n,t,r,l){if("string"==typeof r&&""!==r||"number"==typeof r)return i(n,e=e.get(t)||null,""+r,l);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return s(n,e=e.get(null===r.key?t:r.key)||null,r,l);case S:return c(n,e=e.get(null===r.key?t:r.key)||null,r,l);case M:return m(e,n,t,(0,r._init)(r._payload),l)}if(ne(r)||D(r))return f(n,e=e.get(t)||null,r,l,null);va(n,r)}return null}function h(l,a,o,i){for(var s=null,c=null,f=a,h=a=0,g=null;null!==f&&h<o.length;h++){f.index>h?(g=f,f=null):g=f.sibling;var v=p(l,f,o[h],i);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&n(l,f),a=u(v,a,h),null===c?s=v:c.sibling=v,c=v,f=g}if(h===o.length)return t(l,f),la&&Zl(l,h),s;if(null===f){for(;h<o.length;h++)null!==(f=d(l,o[h],i))&&(a=u(f,a,h),null===c?s=f:c.sibling=f,c=f);return la&&Zl(l,h),s}for(f=r(l,f);h<o.length;h++)null!==(g=m(f,l,h,o[h],i))&&(e&&null!==g.alternate&&f.delete(null===g.key?h:g.key),a=u(g,a,h),null===c?s=g:c.sibling=g,c=g);return e&&f.forEach((function(e){return n(l,e)})),la&&Zl(l,h),s}function g(l,o,i,s){var c=D(i);if("function"!=typeof c)throw Error(a(150));if(null==(i=c.call(i)))throw Error(a(151));for(var f=c=null,h=o,g=o=0,v=null,y=i.next();null!==h&&!y.done;g++,y=i.next()){h.index>g?(v=h,h=null):v=h.sibling;var b=p(l,h,y.value,s);if(null===b){null===h&&(h=v);break}e&&h&&null===b.alternate&&n(l,h),o=u(b,o,g),null===f?c=b:f.sibling=b,f=b,h=v}if(y.done)return t(l,h),la&&Zl(l,g),c;if(null===h){for(;!y.done;g++,y=i.next())null!==(y=d(l,y.value,s))&&(o=u(y,o,g),null===f?c=y:f.sibling=y,f=y);return la&&Zl(l,g),c}for(h=r(l,h);!y.done;g++,y=i.next())null!==(y=m(h,l,g,y.value,s))&&(e&&null!==y.alternate&&h.delete(null===y.key?g:y.key),o=u(y,o,g),null===f?c=y:f.sibling=y,f=y);return e&&h.forEach((function(e){return n(l,e)})),la&&Zl(l,g),c}return function e(r,a,u,i){if("object"==typeof u&&null!==u&&u.type===x&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case w:e:{for(var s=u.key,c=a;null!==c;){if(c.key===s){if((s=u.type)===x){if(7===c.tag){t(r,c.sibling),(a=l(c,u.props.children)).return=r,r=a;break e}}else if(c.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===M&&ya(s)===c.type){t(r,c.sibling),(a=l(c,u.props)).ref=ga(r,c,u),a.return=r,r=a;break e}t(r,c);break}n(r,c),c=c.sibling}u.type===x?((a=Ds(u.props.children,r.mode,i,u.key)).return=r,r=a):((i=Rs(u.type,u.key,u.props,null,r.mode,i)).ref=ga(r,a,u),i.return=r,r=i)}return o(r);case S:e:{for(c=u.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===u.containerInfo&&a.stateNode.implementation===u.implementation){t(r,a.sibling),(a=l(a,u.children||[])).return=r,r=a;break e}t(r,a);break}n(r,a),a=a.sibling}(a=Us(u,r.mode,i)).return=r,r=a}return o(r);case M:return e(r,a,(c=u._init)(u._payload),i)}if(ne(u))return h(r,a,u,i);if(D(u))return g(r,a,u,i);va(r,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==a&&6===a.tag?(t(r,a.sibling),(a=l(a,u)).return=r,r=a):(t(r,a),(a=Is(u,r.mode,i)).return=r,r=a),o(r)):t(r,a)}}var ka=ba(!0),wa=ba(!1),Sa=El(null),xa=null,Ea=null,Ca=null;function _a(){Ca=Ea=xa=null}function za(e){var n=Sa.current;Cl(Sa),e._currentValue=n}function Na(e,n,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,null!==r&&(r.childLanes|=n)):null!==r&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===t)break;e=e.return}}function Pa(e,n){xa=e,Ca=Ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&n)&&(bo=!0),e.firstContext=null)}function Ta(e){var n=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:n,next:null},null===Ea){if(null===xa)throw Error(a(308));Ea=e,xa.dependencies={lanes:0,firstContext:e}}else Ea=Ea.next=e;return n}var La=null;function Ma(e){null===La?La=[e]:La.push(e)}function Fa(e,n,t,r){var l=n.interleaved;return null===l?(t.next=t,Ma(n)):(t.next=l.next,l.next=t),n.interleaved=t,Ra(e,r)}function Ra(e,n){e.lanes|=n;var t=e.alternate;for(null!==t&&(t.lanes|=n),t=e,e=e.return;null!==e;)e.childLanes|=n,null!==(t=e.alternate)&&(t.childLanes|=n),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var Da=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ia(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ua(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Va(e,n,t){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&Ni)){var l=r.pending;return null===l?n.next=n:(n.next=l.next,l.next=n),r.pending=n,Ra(e,t)}return null===(l=r.interleaved)?(n.next=n,Ma(r)):(n.next=l.next,l.next=n),r.interleaved=n,Ra(e,t)}function Aa(e,n,t){if(null!==(n=n.updateQueue)&&(n=n.shared,0!=(4194240&t))){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,bn(e,t)}}function Ba(e,n){var t=e.updateQueue,r=e.alternate;if(null!==r&&t===(r=r.updateQueue)){var l=null,a=null;if(null!==(t=t.firstBaseUpdate)){do{var u={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===a?l=a=u:a=a.next=u,t=t.next}while(null!==t);null===a?l=a=n:a=a.next=n}else l=a=n;return t={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function Ha(e,n,t,r){var l=e.updateQueue;Da=!1;var a=l.firstBaseUpdate,u=l.lastBaseUpdate,o=l.shared.pending;if(null!==o){l.shared.pending=null;var i=o,s=i.next;i.next=null,null===u?a=s:u.next=s,u=i;var c=e.alternate;null!==c&&(o=(c=c.updateQueue).lastBaseUpdate)!==u&&(null===o?c.firstBaseUpdate=s:o.next=s,c.lastBaseUpdate=i)}if(null!==a){var f=l.baseState;for(u=0,c=s=i=null,o=a;;){var d=o.lane,p=o.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,h=o;switch(d=n,p=t,h.tag){case 1:if("function"==typeof(m=h.payload)){f=m.call(p,f,d);break e}f=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(d="function"==typeof(m=h.payload)?m.call(p,f,d):m))break e;f=I({},f,d);break e;case 2:Da=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=l.effects)?l.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(s=c=p,i=f):c=c.next=p,u|=d;if(null===(o=o.next)){if(null===(o=l.shared.pending))break;o=(d=o).next,d.next=null,l.lastBaseUpdate=d,l.shared.pending=null}}if(null===c&&(i=f),l.baseState=i,l.firstBaseUpdate=s,l.lastBaseUpdate=c,null!==(n=l.shared.interleaved)){l=n;do{u|=l.lane,l=l.next}while(l!==n)}else null===a&&(l.shared.lanes=0);Oi|=u,e.lanes=u,e.memoizedState=f}}function Wa(e,n,t){if(e=n.effects,n.effects=null,null!==e)for(n=0;n<e.length;n++){var r=e[n],l=r.callback;if(null!==l){if(r.callback=null,r=t,"function"!=typeof l)throw Error(a(191,l));l.call(r)}}}var Qa={},ja=El(Qa),$a=El(Qa),Ka=El(Qa);function qa(e){if(e===Qa)throw Error(a(174));return e}function Ya(e,n){switch(_l(Ka,n),_l($a,e),_l(ja,Qa),e=n.nodeType){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:ie(null,"");break;default:n=ie(n=(e=8===e?n.parentNode:n).namespaceURI||null,e=e.tagName)}Cl(ja),_l(ja,n)}function Xa(){Cl(ja),Cl($a),Cl(Ka)}function Ga(e){qa(Ka.current);var n=qa(ja.current),t=ie(n,e.type);n!==t&&(_l($a,e),_l(ja,t))}function Za(e){$a.current===e&&(Cl(ja),Cl($a))}var Ja=El(0);function eu(e){for(var n=e;null!==n;){if(13===n.tag){var t=n.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return n}else if(19===n.tag&&void 0!==n.memoizedProps.revealOrder){if(0!=(128&n.flags))return n}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var nu=[];function tu(){for(var e=0;e<nu.length;e++)nu[e]._workInProgressVersionPrimary=null;nu.length=0}var ru=k.ReactCurrentDispatcher,lu=k.ReactCurrentBatchConfig,au=0,uu=null,ou=null,iu=null,su=!1,cu=!1,fu=0,du=0;function pu(){throw Error(a(321))}function mu(e,n){if(null===n)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!or(e[t],n[t]))return!1;return!0}function hu(e,n,t,r,l,u){if(au=u,uu=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ru.current=null===e||null===e.memoizedState?Zu:Ju,e=t(r,l),cu){u=0;do{if(cu=!1,fu=0,25<=u)throw Error(a(301));u+=1,iu=ou=null,n.updateQueue=null,ru.current=eo,e=t(r,l)}while(cu)}if(ru.current=Gu,n=null!==ou&&null!==ou.next,au=0,iu=ou=uu=null,su=!1,n)throw Error(a(300));return e}function gu(){var e=0!==fu;return fu=0,e}function vu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===iu?uu.memoizedState=iu=e:iu=iu.next=e,iu}function yu(){if(null===ou){var e=uu.alternate;e=null!==e?e.memoizedState:null}else e=ou.next;var n=null===iu?uu.memoizedState:iu.next;if(null!==n)iu=n,ou=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ou=e).memoizedState,baseState:ou.baseState,baseQueue:ou.baseQueue,queue:ou.queue,next:null},null===iu?uu.memoizedState=iu=e:iu=iu.next=e}return iu}function bu(e,n){return"function"==typeof n?n(e):n}function ku(e){var n=yu(),t=n.queue;if(null===t)throw Error(a(311));t.lastRenderedReducer=e;var r=ou,l=r.baseQueue,u=t.pending;if(null!==u){if(null!==l){var o=l.next;l.next=u.next,u.next=o}r.baseQueue=l=u,t.pending=null}if(null!==l){u=l.next,r=r.baseState;var i=o=null,s=null,c=u;do{var f=c.lane;if((au&f)===f)null!==s&&(s=s.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===s?(i=s=d,o=r):s=s.next=d,uu.lanes|=f,Oi|=f}c=c.next}while(null!==c&&c!==u);null===s?o=r:s.next=i,or(r,n.memoizedState)||(bo=!0),n.memoizedState=r,n.baseState=o,n.baseQueue=s,t.lastRenderedState=r}if(null!==(e=t.interleaved)){l=e;do{u=l.lane,uu.lanes|=u,Oi|=u,l=l.next}while(l!==e)}else null===l&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function wu(e){var n=yu(),t=n.queue;if(null===t)throw Error(a(311));t.lastRenderedReducer=e;var r=t.dispatch,l=t.pending,u=n.memoizedState;if(null!==l){t.pending=null;var o=l=l.next;do{u=e(u,o.action),o=o.next}while(o!==l);or(u,n.memoizedState)||(bo=!0),n.memoizedState=u,null===n.baseQueue&&(n.baseState=u),t.lastRenderedState=u}return[u,r]}function Su(){}function xu(e,n){var t=uu,r=yu(),l=n(),u=!or(r.memoizedState,l);if(u&&(r.memoizedState=l,bo=!0),r=r.queue,Du(_u.bind(null,t,r,e),[e]),r.getSnapshot!==n||u||null!==iu&&1&iu.memoizedState.tag){if(t.flags|=2048,Tu(9,Cu.bind(null,t,r,l,n),void 0,null),null===Pi)throw Error(a(349));0!=(30&au)||Eu(t,n,l)}return l}function Eu(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},null===(n=uu.updateQueue)?(n={lastEffect:null,stores:null},uu.updateQueue=n,n.stores=[e]):null===(t=n.stores)?n.stores=[e]:t.push(e)}function Cu(e,n,t,r){n.value=t,n.getSnapshot=r,zu(n)&&Nu(e)}function _u(e,n,t){return t((function(){zu(n)&&Nu(e)}))}function zu(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!or(e,t)}catch(e){return!0}}function Nu(e){var n=Ra(e,1);null!==n&&ts(n,e,1,-1)}function Pu(e){var n=vu();return"function"==typeof e&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bu,lastRenderedState:e},n.queue=e,e=e.dispatch=Ku.bind(null,uu,e),[n.memoizedState,e]}function Tu(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},null===(n=uu.updateQueue)?(n={lastEffect:null,stores:null},uu.updateQueue=n,n.lastEffect=e.next=e):null===(t=n.lastEffect)?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e),e}function Lu(){return yu().memoizedState}function Mu(e,n,t,r){var l=vu();uu.flags|=e,l.memoizedState=Tu(1|n,t,void 0,void 0===r?null:r)}function Fu(e,n,t,r){var l=yu();r=void 0===r?null:r;var a=void 0;if(null!==ou){var u=ou.memoizedState;if(a=u.destroy,null!==r&&mu(r,u.deps))return void(l.memoizedState=Tu(n,t,a,r))}uu.flags|=e,l.memoizedState=Tu(1|n,t,a,r)}function Ru(e,n){return Mu(8390656,8,e,n)}function Du(e,n){return Fu(2048,8,e,n)}function Ou(e,n){return Fu(4,2,e,n)}function Iu(e,n){return Fu(4,4,e,n)}function Uu(e,n){return"function"==typeof n?(e=e(),n(e),function(){n(null)}):null!=n?(e=e(),n.current=e,function(){n.current=null}):void 0}function Vu(e,n,t){return t=null!=t?t.concat([e]):null,Fu(4,4,Uu.bind(null,n,e),t)}function Au(){}function Bu(e,n){var t=yu();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&mu(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function Hu(e,n){var t=yu();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&mu(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function Wu(e,n,t){return 0==(21&au)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=t):(or(t,n)||(t=gn(),uu.lanes|=t,Oi|=t,e.baseState=!0),n)}function Qu(e,n){var t=kn;kn=0!==t&&4>t?t:4,e(!0);var r=lu.transition;lu.transition={};try{e(!1),n()}finally{kn=t,lu.transition=r}}function ju(){return yu().memoizedState}function $u(e,n,t){var r=ns(e);t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},qu(e)?Yu(n,t):null!==(t=Fa(e,n,t,r))&&(ts(t,e,r,es()),Xu(t,n,r))}function Ku(e,n,t){var r=ns(e),l={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(qu(e))Yu(n,l);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=n.lastRenderedReducer))try{var u=n.lastRenderedState,o=a(u,t);if(l.hasEagerState=!0,l.eagerState=o,or(o,u)){var i=n.interleaved;return null===i?(l.next=l,Ma(n)):(l.next=i.next,i.next=l),void(n.interleaved=l)}}catch(e){}null!==(t=Fa(e,n,l,r))&&(ts(t,e,r,l=es()),Xu(t,n,r))}}function qu(e){var n=e.alternate;return e===uu||null!==n&&n===uu}function Yu(e,n){cu=su=!0;var t=e.pending;null===t?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function Xu(e,n,t){if(0!=(4194240&t)){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,bn(e,t)}}var Gu={readContext:Ta,useCallback:pu,useContext:pu,useEffect:pu,useImperativeHandle:pu,useInsertionEffect:pu,useLayoutEffect:pu,useMemo:pu,useReducer:pu,useRef:pu,useState:pu,useDebugValue:pu,useDeferredValue:pu,useTransition:pu,useMutableSource:pu,useSyncExternalStore:pu,useId:pu,unstable_isNewReconciler:!1},Zu={readContext:Ta,useCallback:function(e,n){return vu().memoizedState=[e,void 0===n?null:n],e},useContext:Ta,useEffect:Ru,useImperativeHandle:function(e,n,t){return t=null!=t?t.concat([e]):null,Mu(4194308,4,Uu.bind(null,n,e),t)},useLayoutEffect:function(e,n){return Mu(4194308,4,e,n)},useInsertionEffect:function(e,n){return Mu(4,2,e,n)},useMemo:function(e,n){var t=vu();return n=void 0===n?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=vu();return n=void 0!==t?t(n):n,r.memoizedState=r.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=$u.bind(null,uu,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vu().memoizedState=e},useState:Pu,useDebugValue:Au,useDeferredValue:function(e){return vu().memoizedState=e},useTransition:function(){var e=Pu(!1),n=e[0];return e=Qu.bind(null,e[1]),vu().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var r=uu,l=vu();if(la){if(void 0===t)throw Error(a(407));t=t()}else{if(t=n(),null===Pi)throw Error(a(349));0!=(30&au)||Eu(r,n,t)}l.memoizedState=t;var u={value:t,getSnapshot:n};return l.queue=u,Ru(_u.bind(null,r,u,e),[e]),r.flags|=2048,Tu(9,Cu.bind(null,r,u,t,n),void 0,null),t},useId:function(){var e=vu(),n=Pi.identifierPrefix;if(la){var t=Gl;n=":"+n+"R"+(t=(Xl&~(1<<32-un(Xl)-1)).toString(32)+t),0<(t=fu++)&&(n+="H"+t.toString(32)),n+=":"}else n=":"+n+"r"+(t=du++).toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Ju={readContext:Ta,useCallback:Bu,useContext:Ta,useEffect:Du,useImperativeHandle:Vu,useInsertionEffect:Ou,useLayoutEffect:Iu,useMemo:Hu,useReducer:ku,useRef:Lu,useState:function(){return ku(bu)},useDebugValue:Au,useDeferredValue:function(e){return Wu(yu(),ou.memoizedState,e)},useTransition:function(){return[ku(bu)[0],yu().memoizedState]},useMutableSource:Su,useSyncExternalStore:xu,useId:ju,unstable_isNewReconciler:!1},eo={readContext:Ta,useCallback:Bu,useContext:Ta,useEffect:Du,useImperativeHandle:Vu,useInsertionEffect:Ou,useLayoutEffect:Iu,useMemo:Hu,useReducer:wu,useRef:Lu,useState:function(){return wu(bu)},useDebugValue:Au,useDeferredValue:function(e){var n=yu();return null===ou?n.memoizedState=e:Wu(n,ou.memoizedState,e)},useTransition:function(){return[wu(bu)[0],yu().memoizedState]},useMutableSource:Su,useSyncExternalStore:xu,useId:ju,unstable_isNewReconciler:!1};function no(e,n){if(e&&e.defaultProps){for(var t in n=I({},n),e=e.defaultProps)void 0===n[t]&&(n[t]=e[t]);return n}return n}function to(e,n,t,r){t=null==(t=t(r,n=e.memoizedState))?n:I({},n,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=es(),l=ns(e),a=Ua(r,l);a.payload=n,null!=t&&(a.callback=t),null!==(n=Va(e,a,l))&&(ts(n,e,l,r),Aa(n,e,l))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=es(),l=ns(e),a=Ua(r,l);a.tag=1,a.payload=n,null!=t&&(a.callback=t),null!==(n=Va(e,a,l))&&(ts(n,e,l,r),Aa(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=es(),r=ns(e),l=Ua(t,r);l.tag=2,null!=n&&(l.callback=n),null!==(n=Va(e,l,r))&&(ts(n,e,r,t),Aa(n,e,r))}};function lo(e,n,t,r,l,a,u){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,u):!(n.prototype&&n.prototype.isPureReactComponent&&ir(t,r)&&ir(l,a))}function ao(e,n,t){var r=!1,l=zl,a=n.contextType;return"object"==typeof a&&null!==a?a=Ta(a):(l=Ml(n)?Tl:Nl.current,a=(r=null!=(r=n.contextTypes))?Ll(e,l):zl),n=new n(t,a),e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=ro,e.stateNode=n,n._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),n}function uo(e,n,t,r){e=n.state,"function"==typeof n.componentWillReceiveProps&&n.componentWillReceiveProps(t,r),"function"==typeof n.UNSAFE_componentWillReceiveProps&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&ro.enqueueReplaceState(n,n.state,null)}function oo(e,n,t,r){var l=e.stateNode;l.props=t,l.state=e.memoizedState,l.refs={},Oa(e);var a=n.contextType;"object"==typeof a&&null!==a?l.context=Ta(a):(a=Ml(n)?Tl:Nl.current,l.context=Ll(e,a)),l.state=e.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(to(e,n,a,t),l.state=e.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof l.getSnapshotBeforeUpdate||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||(n=l.state,"function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),n!==l.state&&ro.enqueueReplaceState(l,l.state,null),Ha(e,t,l,r),l.state=e.memoizedState),"function"==typeof l.componentDidMount&&(e.flags|=4194308)}function io(e,n){try{var t="",r=n;do{t+=B(r),r=r.return}while(r);var l=t}catch(e){l="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:n,stack:l,digest:null}}function so(e,n,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=n?n:null}}function co(e,n){try{console.error(n.value)}catch(e){setTimeout((function(){throw e}))}}var fo="function"==typeof WeakMap?WeakMap:Map;function po(e,n,t){(t=Ua(-1,t)).tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){Qi||(Qi=!0,ji=r),co(0,n)},t}function mo(e,n,t){(t=Ua(-1,t)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var l=n.value;t.payload=function(){return r(l)},t.callback=function(){co(0,n)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(t.callback=function(){co(0,n),"function"!=typeof r&&(null===$i?$i=new Set([this]):$i.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})}),t}function ho(e,n,t){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var l=new Set;r.set(n,l)}else void 0===(l=r.get(n))&&(l=new Set,r.set(n,l));l.has(t)||(l.add(t),e=Cs.bind(null,e,n,t),n.then(e,e))}function go(e){do{var n;if((n=13===e.tag)&&(n=null===(n=e.memoizedState)||null!==n.dehydrated),n)return e;e=e.return}while(null!==e);return null}function vo(e,n,t,r,l){return 0==(1&e.mode)?(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((n=Ua(-1,1)).tag=2,Va(t,n,1))),t.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var yo=k.ReactCurrentOwner,bo=!1;function ko(e,n,t,r){n.child=null===e?wa(n,null,t,r):ka(n,e.child,t,r)}function wo(e,n,t,r,l){t=t.render;var a=n.ref;return Pa(n,l),r=hu(e,n,t,r,a,l),t=gu(),null===e||bo?(la&&t&&ea(n),n.flags|=1,ko(e,n,r,l),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~l,Qo(e,n,l))}function So(e,n,t,r,l){if(null===e){var a=t.type;return"function"!=typeof a||Ms(a)||void 0!==a.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=Rs(t.type,null,r,n,n.mode,l)).ref=n.ref,e.return=n,n.child=e):(n.tag=15,n.type=a,xo(e,n,a,r,l))}if(a=e.child,0==(e.lanes&l)){var u=a.memoizedProps;if((t=null!==(t=t.compare)?t:ir)(u,r)&&e.ref===n.ref)return Qo(e,n,l)}return n.flags|=1,(e=Fs(a,r)).ref=n.ref,e.return=n,n.child=e}function xo(e,n,t,r,l){if(null!==e){var a=e.memoizedProps;if(ir(a,r)&&e.ref===n.ref){if(bo=!1,n.pendingProps=r=a,0==(e.lanes&l))return n.lanes=e.lanes,Qo(e,n,l);0!=(131072&e.flags)&&(bo=!0)}}return _o(e,n,t,r,l)}function Eo(e,n,t){var r=n.pendingProps,l=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&n.mode))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},_l(Fi,Mi),Mi|=t;else{if(0==(1073741824&t))return e=null!==a?a.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,_l(Fi,Mi),Mi|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:t,_l(Fi,Mi),Mi|=r}else null!==a?(r=a.baseLanes|t,n.memoizedState=null):r=t,_l(Fi,Mi),Mi|=r;return ko(e,n,l,t),n.child}function Co(e,n){var t=n.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function _o(e,n,t,r,l){var a=Ml(t)?Tl:Nl.current;return a=Ll(n,a),Pa(n,l),t=hu(e,n,t,r,a,l),r=gu(),null===e||bo?(la&&r&&ea(n),n.flags|=1,ko(e,n,t,l),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~l,Qo(e,n,l))}function zo(e,n,t,r,l){if(Ml(t)){var a=!0;Ol(n)}else a=!1;if(Pa(n,l),null===n.stateNode)Wo(e,n),ao(n,t,r),oo(n,t,r,l),r=!0;else if(null===e){var u=n.stateNode,o=n.memoizedProps;u.props=o;var i=u.context,s=t.contextType;s="object"==typeof s&&null!==s?Ta(s):Ll(n,s=Ml(t)?Tl:Nl.current);var c=t.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof u.getSnapshotBeforeUpdate;f||"function"!=typeof u.UNSAFE_componentWillReceiveProps&&"function"!=typeof u.componentWillReceiveProps||(o!==r||i!==s)&&uo(n,u,r,s),Da=!1;var d=n.memoizedState;u.state=d,Ha(n,r,u,l),i=n.memoizedState,o!==r||d!==i||Pl.current||Da?("function"==typeof c&&(to(n,t,c,r),i=n.memoizedState),(o=Da||lo(n,t,o,r,d,i,s))?(f||"function"!=typeof u.UNSAFE_componentWillMount&&"function"!=typeof u.componentWillMount||("function"==typeof u.componentWillMount&&u.componentWillMount(),"function"==typeof u.UNSAFE_componentWillMount&&u.UNSAFE_componentWillMount()),"function"==typeof u.componentDidMount&&(n.flags|=4194308)):("function"==typeof u.componentDidMount&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=i),u.props=r,u.state=i,u.context=s,r=o):("function"==typeof u.componentDidMount&&(n.flags|=4194308),r=!1)}else{u=n.stateNode,Ia(e,n),o=n.memoizedProps,s=n.type===n.elementType?o:no(n.type,o),u.props=s,f=n.pendingProps,d=u.context,i="object"==typeof(i=t.contextType)&&null!==i?Ta(i):Ll(n,i=Ml(t)?Tl:Nl.current);var p=t.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof u.getSnapshotBeforeUpdate)||"function"!=typeof u.UNSAFE_componentWillReceiveProps&&"function"!=typeof u.componentWillReceiveProps||(o!==f||d!==i)&&uo(n,u,r,i),Da=!1,d=n.memoizedState,u.state=d,Ha(n,r,u,l);var m=n.memoizedState;o!==f||d!==m||Pl.current||Da?("function"==typeof p&&(to(n,t,p,r),m=n.memoizedState),(s=Da||lo(n,t,s,r,d,m,i)||!1)?(c||"function"!=typeof u.UNSAFE_componentWillUpdate&&"function"!=typeof u.componentWillUpdate||("function"==typeof u.componentWillUpdate&&u.componentWillUpdate(r,m,i),"function"==typeof u.UNSAFE_componentWillUpdate&&u.UNSAFE_componentWillUpdate(r,m,i)),"function"==typeof u.componentDidUpdate&&(n.flags|=4),"function"==typeof u.getSnapshotBeforeUpdate&&(n.flags|=1024)):("function"!=typeof u.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(n.flags|=4),"function"!=typeof u.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=m),u.props=r,u.state=m,u.context=i,r=s):("function"!=typeof u.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(n.flags|=4),"function"!=typeof u.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(n.flags|=1024),r=!1)}return No(e,n,t,r,a,l)}function No(e,n,t,r,l,a){Co(e,n);var u=0!=(128&n.flags);if(!r&&!u)return l&&Il(n,t,!1),Qo(e,n,a);r=n.stateNode,yo.current=n;var o=u&&"function"!=typeof t.getDerivedStateFromError?null:r.render();return n.flags|=1,null!==e&&u?(n.child=ka(n,e.child,null,a),n.child=ka(n,null,o,a)):ko(e,n,o,a),n.memoizedState=r.state,l&&Il(n,t,!0),n.child}function Po(e){var n=e.stateNode;n.pendingContext?Rl(0,n.pendingContext,n.pendingContext!==n.context):n.context&&Rl(0,n.context,!1),Ya(e,n.containerInfo)}function To(e,n,t,r,l){return pa(),ma(l),n.flags|=256,ko(e,n,t,r),n.child}var Lo,Mo,Fo,Ro,Do={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Io(e,n,t){var r,l=n.pendingProps,u=Ja.current,o=!1,i=0!=(128&n.flags);if((r=i)||(r=(null===e||null!==e.memoizedState)&&0!=(2&u)),r?(o=!0,n.flags&=-129):null!==e&&null===e.memoizedState||(u|=1),_l(Ja,1&u),null===e)return sa(n),null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&n.mode)?n.lanes=1:"$!"===e.data?n.lanes=8:n.lanes=1073741824,null):(i=l.children,e=l.fallback,o?(l=n.mode,o=n.child,i={mode:"hidden",children:i},0==(1&l)&&null!==o?(o.childLanes=0,o.pendingProps=i):o=Os(i,l,0,null),e=Ds(e,l,t,null),o.return=n,e.return=n,o.sibling=e,n.child=o,n.child.memoizedState=Oo(t),n.memoizedState=Do,e):Uo(n,i));if(null!==(u=e.memoizedState)&&null!==(r=u.dehydrated))return function(e,n,t,r,l,u,o){if(t)return 256&n.flags?(n.flags&=-257,Vo(e,n,o,r=so(Error(a(422))))):null!==n.memoizedState?(n.child=e.child,n.flags|=128,null):(u=r.fallback,l=n.mode,r=Os({mode:"visible",children:r.children},l,0,null),(u=Ds(u,l,o,null)).flags|=2,r.return=n,u.return=n,r.sibling=u,n.child=r,0!=(1&n.mode)&&ka(n,e.child,null,o),n.child.memoizedState=Oo(o),n.memoizedState=Do,u);if(0==(1&n.mode))return Vo(e,n,o,null);if("$!"===l.data){if(r=l.nextSibling&&l.nextSibling.dataset)var i=r.dgst;return r=i,Vo(e,n,o,r=so(u=Error(a(419)),r,void 0))}if(i=0!=(o&e.childLanes),bo||i){if(null!==(r=Pi)){switch(o&-o){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}0!==(l=0!=(l&(r.suspendedLanes|o))?0:l)&&l!==u.retryLane&&(u.retryLane=l,Ra(e,l),ts(r,e,l,-1))}return hs(),Vo(e,n,o,r=so(Error(a(421))))}return"$?"===l.data?(n.flags|=128,n.child=e.child,n=zs.bind(null,e),l._reactRetry=n,null):(e=u.treeContext,ra=sl(l.nextSibling),ta=n,la=!0,aa=null,null!==e&&(Kl[ql++]=Xl,Kl[ql++]=Gl,Kl[ql++]=Yl,Xl=e.id,Gl=e.overflow,Yl=n),(n=Uo(n,r.children)).flags|=4096,n)}(e,n,i,l,r,u,t);if(o){o=l.fallback,i=n.mode,r=(u=e.child).sibling;var s={mode:"hidden",children:l.children};return 0==(1&i)&&n.child!==u?((l=n.child).childLanes=0,l.pendingProps=s,n.deletions=null):(l=Fs(u,s)).subtreeFlags=14680064&u.subtreeFlags,null!==r?o=Fs(r,o):(o=Ds(o,i,t,null)).flags|=2,o.return=n,l.return=n,l.sibling=o,n.child=l,l=o,o=n.child,i=null===(i=e.child.memoizedState)?Oo(t):{baseLanes:i.baseLanes|t,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~t,n.memoizedState=Do,l}return e=(o=e.child).sibling,l=Fs(o,{mode:"visible",children:l.children}),0==(1&n.mode)&&(l.lanes=t),l.return=n,l.sibling=null,null!==e&&(null===(t=n.deletions)?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=l,n.memoizedState=null,l}function Uo(e,n){return(n=Os({mode:"visible",children:n},e.mode,0,null)).return=e,e.child=n}function Vo(e,n,t,r){return null!==r&&ma(r),ka(n,e.child,null,t),(e=Uo(n,n.pendingProps.children)).flags|=2,n.memoizedState=null,e}function Ao(e,n,t){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n),Na(e.return,n,t)}function Bo(e,n,t,r,l){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:l}:(a.isBackwards=n,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=l)}function Ho(e,n,t){var r=n.pendingProps,l=r.revealOrder,a=r.tail;if(ko(e,n,r.children,t),0!=(2&(r=Ja.current)))r=1&r|2,n.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=n.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ao(e,t,n);else if(19===e.tag)Ao(e,t,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_l(Ja,r),0==(1&n.mode))n.memoizedState=null;else switch(l){case"forwards":for(t=n.child,l=null;null!==t;)null!==(e=t.alternate)&&null===eu(e)&&(l=t),t=t.sibling;null===(t=l)?(l=n.child,n.child=null):(l=t.sibling,t.sibling=null),Bo(n,!1,l,t,a);break;case"backwards":for(t=null,l=n.child,n.child=null;null!==l;){if(null!==(e=l.alternate)&&null===eu(e)){n.child=l;break}e=l.sibling,l.sibling=t,t=l,l=e}Bo(n,!0,t,null,a);break;case"together":Bo(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Wo(e,n){0==(1&n.mode)&&null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Qo(e,n,t){if(null!==e&&(n.dependencies=e.dependencies),Oi|=n.lanes,0==(t&n.childLanes))return null;if(null!==e&&n.child!==e.child)throw Error(a(153));if(null!==n.child){for(t=Fs(e=n.child,e.pendingProps),n.child=t,t.return=n;null!==e.sibling;)e=e.sibling,(t=t.sibling=Fs(e,e.pendingProps)).return=n;t.sibling=null}return n.child}function jo(e,n){if(!la)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;null!==n;)null!==n.alternate&&(t=n),n=n.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?n||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $o(e){var n=null!==e.alternate&&e.alternate.child===e.child,t=0,r=0;if(n)for(var l=e.child;null!==l;)t|=l.lanes|l.childLanes,r|=14680064&l.subtreeFlags,r|=14680064&l.flags,l.return=e,l=l.sibling;else for(l=e.child;null!==l;)t|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=t,n}function Ko(e,n,t){var r=n.pendingProps;switch(na(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $o(n),null;case 1:case 17:return Ml(n.type)&&Fl(),$o(n),null;case 3:return r=n.stateNode,Xa(),Cl(Pl),Cl(Nl),tu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(n)?n.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&n.flags)||(n.flags|=1024,null!==aa&&(us(aa),aa=null))),Mo(e,n),$o(n),null;case 5:Za(n);var l=qa(Ka.current);if(t=n.type,null!==e&&null!=n.stateNode)Fo(e,n,t,r,l),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(null===n.stateNode)throw Error(a(166));return $o(n),null}if(e=qa(ja.current),fa(n)){r=n.stateNode,t=n.type;var u=n.memoizedProps;switch(r[dl]=n,r[pl]=u,e=0!=(1&n.mode),t){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(l=0;l<Dr.length;l++)Vr(Dr[l],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,u),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Vr("invalid",r);break;case"textarea":le(r,u),Vr("invalid",r)}for(var i in ye(t,u),l=null,u)if(u.hasOwnProperty(i)){var s=u[i];"children"===i?"string"==typeof s?r.textContent!==s&&(!0!==u.suppressHydrationWarning&&Zr(r.textContent,s,e),l=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(!0!==u.suppressHydrationWarning&&Zr(r.textContent,s,e),l=["children",""+s]):o.hasOwnProperty(i)&&null!=s&&"onScroll"===i&&Vr("scroll",r)}switch(t){case"input":$(r),J(r,u,!0);break;case"textarea":$(r),ue(r);break;case"select":case"option":break;default:"function"==typeof u.onClick&&(r.onclick=Jr)}r=l,n.updateQueue=r,null!==r&&(n.flags|=4)}else{i=9===l.nodeType?l:l.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(t)),"http://www.w3.org/1999/xhtml"===e?"script"===t?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=i.createElement(t,{is:r.is}):(e=i.createElement(t),"select"===t&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,t),e[dl]=n,e[pl]=r,Lo(e,n,!1,!1),n.stateNode=e;e:{switch(i=be(t,r),t){case"dialog":Vr("cancel",e),Vr("close",e),l=r;break;case"iframe":case"object":case"embed":Vr("load",e),l=r;break;case"video":case"audio":for(l=0;l<Dr.length;l++)Vr(Dr[l],e);l=r;break;case"source":Vr("error",e),l=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),l=r;break;case"details":Vr("toggle",e),l=r;break;case"input":X(e,r),l=Y(e,r),Vr("invalid",e);break;case"option":default:l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=I({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":le(e,r),l=re(e,r),Vr("invalid",e)}for(u in ye(t,l),s=l)if(s.hasOwnProperty(u)){var c=s[u];"style"===u?ge(e,c):"dangerouslySetInnerHTML"===u?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===u?"string"==typeof c?("textarea"!==t||""!==c)&&de(e,c):"number"==typeof c&&de(e,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?null!=c&&"onScroll"===u&&Vr("scroll",e):null!=c&&b(e,u,c,i))}switch(t){case"input":$(e),J(e,r,!1);break;case"textarea":$(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?te(e,!!r.multiple,u,!1):null!=r.defaultValue&&te(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof l.onClick&&(e.onclick=Jr)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}null!==n.ref&&(n.flags|=512,n.flags|=2097152)}return $o(n),null;case 6:if(e&&null!=n.stateNode)Ro(e,n,e.memoizedProps,r);else{if("string"!=typeof r&&null===n.stateNode)throw Error(a(166));if(t=qa(Ka.current),qa(ja.current),fa(n)){if(r=n.stateNode,t=n.memoizedProps,r[dl]=n,(u=r.nodeValue!==t)&&null!==(e=ta))switch(e.tag){case 3:Zr(r.nodeValue,t,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,t,0!=(1&e.mode))}u&&(n.flags|=4)}else(r=(9===t.nodeType?t:t.ownerDocument).createTextNode(r))[dl]=n,n.stateNode=r}return $o(n),null;case 13:if(Cl(Ja),r=n.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(la&&null!==ra&&0!=(1&n.mode)&&0==(128&n.flags))da(),pa(),n.flags|=98560,u=!1;else if(u=fa(n),null!==r&&null!==r.dehydrated){if(null===e){if(!u)throw Error(a(318));if(!(u=null!==(u=n.memoizedState)?u.dehydrated:null))throw Error(a(317));u[dl]=n}else pa(),0==(128&n.flags)&&(n.memoizedState=null),n.flags|=4;$o(n),u=!1}else null!==aa&&(us(aa),aa=null),u=!0;if(!u)return 65536&n.flags?n:null}return 0!=(128&n.flags)?(n.lanes=t,n):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(n.child.flags|=8192,0!=(1&n.mode)&&(null===e||0!=(1&Ja.current)?0===Ri&&(Ri=3):hs())),null!==n.updateQueue&&(n.flags|=4),$o(n),null);case 4:return Xa(),Mo(e,n),null===e&&Hr(n.stateNode.containerInfo),$o(n),null;case 10:return za(n.type._context),$o(n),null;case 19:if(Cl(Ja),null===(u=n.memoizedState))return $o(n),null;if(r=0!=(128&n.flags),null===(i=u.rendering))if(r)jo(u,!1);else{if(0!==Ri||null!==e&&0!=(128&e.flags))for(e=n.child;null!==e;){if(null!==(i=eu(e))){for(n.flags|=128,jo(u,!1),null!==(r=i.updateQueue)&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=t,t=n.child;null!==t;)e=r,(u=t).flags&=14680066,null===(i=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,u.type=i.type,e=i.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return _l(Ja,1&Ja.current|2),n.child}e=e.sibling}null!==u.tail&&Ge()>Hi&&(n.flags|=128,r=!0,jo(u,!1),n.lanes=4194304)}else{if(!r)if(null!==(e=eu(i))){if(n.flags|=128,r=!0,null!==(t=e.updateQueue)&&(n.updateQueue=t,n.flags|=4),jo(u,!0),null===u.tail&&"hidden"===u.tailMode&&!i.alternate&&!la)return $o(n),null}else 2*Ge()-u.renderingStartTime>Hi&&1073741824!==t&&(n.flags|=128,r=!0,jo(u,!1),n.lanes=4194304);u.isBackwards?(i.sibling=n.child,n.child=i):(null!==(t=u.last)?t.sibling=i:n.child=i,u.last=i)}return null!==u.tail?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Ge(),n.sibling=null,t=Ja.current,_l(Ja,r?1&t|2:1&t),n):($o(n),null);case 22:case 23:return fs(),r=null!==n.memoizedState,null!==e&&null!==e.memoizedState!==r&&(n.flags|=8192),r&&0!=(1&n.mode)?0!=(1073741824&Mi)&&($o(n),6&n.subtreeFlags&&(n.flags|=8192)):$o(n),null;case 24:case 25:return null}throw Error(a(156,n.tag))}function qo(e,n){switch(na(n),n.tag){case 1:return Ml(n.type)&&Fl(),65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 3:return Xa(),Cl(Pl),Cl(Nl),tu(),0!=(65536&(e=n.flags))&&0==(128&e)?(n.flags=-65537&e|128,n):null;case 5:return Za(n),null;case 13:if(Cl(Ja),null!==(e=n.memoizedState)&&null!==e.dehydrated){if(null===n.alternate)throw Error(a(340));pa()}return 65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 19:return Cl(Ja),null;case 4:return Xa(),null;case 10:return za(n.type._context),null;case 22:case 23:return fs(),null;default:return null}}Lo=function(e,n){for(var t=n.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},Mo=function(){},Fo=function(e,n,t,r){var l=e.memoizedProps;if(l!==r){e=n.stateNode,qa(ja.current);var a,u=null;switch(t){case"input":l=Y(e,l),r=Y(e,r),u=[];break;case"select":l=I({},l,{value:void 0}),r=I({},r,{value:void 0}),u=[];break;case"textarea":l=re(e,l),r=re(e,r),u=[];break;default:"function"!=typeof l.onClick&&"function"==typeof r.onClick&&(e.onclick=Jr)}for(c in ye(t,r),t=null,l)if(!r.hasOwnProperty(c)&&l.hasOwnProperty(c)&&null!=l[c])if("style"===c){var i=l[c];for(a in i)i.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?u||(u=[]):(u=u||[]).push(c,null));for(c in r){var s=r[c];if(i=null!=l?l[c]:void 0,r.hasOwnProperty(c)&&s!==i&&(null!=s||null!=i))if("style"===c)if(i){for(a in i)!i.hasOwnProperty(a)||s&&s.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in s)s.hasOwnProperty(a)&&i[a]!==s[a]&&(t||(t={}),t[a]=s[a])}else t||(u||(u=[]),u.push(c,t)),t=s;else"dangerouslySetInnerHTML"===c?(s=s?s.__html:void 0,i=i?i.__html:void 0,null!=s&&i!==s&&(u=u||[]).push(c,s)):"children"===c?"string"!=typeof s&&"number"!=typeof s||(u=u||[]).push(c,""+s):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=s&&"onScroll"===c&&Vr("scroll",e),u||i===s||(u=[])):(u=u||[]).push(c,s))}t&&(u=u||[]).push("style",t);var c=u;(n.updateQueue=c)&&(n.flags|=4)}},Ro=function(e,n,t,r){t!==r&&(n.flags|=4)};var Yo=!1,Xo=!1,Go="function"==typeof WeakSet?WeakSet:Set,Zo=null;function Jo(e,n){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Es(e,n,t)}else t.current=null}function ei(e,n,t){try{t()}catch(t){Es(e,n,t)}}var ni=!1;function ti(e,n,t){var r=n.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var l=r=r.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,void 0!==a&&ei(n,t,a)}l=l.next}while(l!==r)}}function ri(e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function li(e){var n=e.ref;if(null!==n){var t=e.stateNode;e.tag,e=t,"function"==typeof n?n(e):n.current=e}}function ai(e){var n=e.alternate;null!==n&&(e.alternate=null,ai(n)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(n=e.stateNode)&&(delete n[dl],delete n[pl],delete n[hl],delete n[gl],delete n[vl]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ui(e){return 5===e.tag||3===e.tag||4===e.tag}function oi(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ui(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ii(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?8===t.nodeType?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(8===t.nodeType?(n=t.parentNode).insertBefore(e,t):(n=t).appendChild(e),null!=(t=t._reactRootContainer)||null!==n.onclick||(n.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ii(e,n,t),e=e.sibling;null!==e;)ii(e,n,t),e=e.sibling}function si(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(4!==r&&null!==(e=e.child))for(si(e,n,t),e=e.sibling;null!==e;)si(e,n,t),e=e.sibling}var ci=null,fi=!1;function di(e,n,t){for(t=t.child;null!==t;)pi(e,n,t),t=t.sibling}function pi(e,n,t){if(an&&"function"==typeof an.onCommitFiberUnmount)try{an.onCommitFiberUnmount(ln,t)}catch(e){}switch(t.tag){case 5:Xo||Jo(t,n);case 6:var r=ci,l=fi;ci=null,di(e,n,t),fi=l,null!==(ci=r)&&(fi?(e=ci,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):ci.removeChild(t.stateNode));break;case 18:null!==ci&&(fi?(e=ci,t=t.stateNode,8===e.nodeType?il(e.parentNode,t):1===e.nodeType&&il(e,t),Wn(e)):il(ci,t.stateNode));break;case 4:r=ci,l=fi,ci=t.stateNode.containerInfo,fi=!0,di(e,n,t),ci=r,fi=l;break;case 0:case 11:case 14:case 15:if(!Xo&&null!==(r=t.updateQueue)&&null!==(r=r.lastEffect)){l=r=r.next;do{var a=l,u=a.destroy;a=a.tag,void 0!==u&&(0!=(2&a)||0!=(4&a))&&ei(t,n,u),l=l.next}while(l!==r)}di(e,n,t);break;case 1:if(!Xo&&(Jo(t,n),"function"==typeof(r=t.stateNode).componentWillUnmount))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(e){Es(t,n,e)}di(e,n,t);break;case 21:di(e,n,t);break;case 22:1&t.mode?(Xo=(r=Xo)||null!==t.memoizedState,di(e,n,t),Xo=r):di(e,n,t);break;default:di(e,n,t)}}function mi(e){var n=e.updateQueue;if(null!==n){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new Go),n.forEach((function(n){var r=Ns.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))}))}}function hi(e,n){var t=n.deletions;if(null!==t)for(var r=0;r<t.length;r++){var l=t[r];try{var u=e,o=n,i=o;e:for(;null!==i;){switch(i.tag){case 5:ci=i.stateNode,fi=!1;break e;case 3:case 4:ci=i.stateNode.containerInfo,fi=!0;break e}i=i.return}if(null===ci)throw Error(a(160));pi(u,o,l),ci=null,fi=!1;var s=l.alternate;null!==s&&(s.return=null),l.return=null}catch(e){Es(l,n,e)}}if(12854&n.subtreeFlags)for(n=n.child;null!==n;)gi(n,e),n=n.sibling}function gi(e,n){var t=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hi(n,e),vi(e),4&r){try{ti(3,e,e.return),ri(3,e)}catch(n){Es(e,e.return,n)}try{ti(5,e,e.return)}catch(n){Es(e,e.return,n)}}break;case 1:hi(n,e),vi(e),512&r&&null!==t&&Jo(t,t.return);break;case 5:if(hi(n,e),vi(e),512&r&&null!==t&&Jo(t,t.return),32&e.flags){var l=e.stateNode;try{de(l,"")}catch(n){Es(e,e.return,n)}}if(4&r&&null!=(l=e.stateNode)){var u=e.memoizedProps,o=null!==t?t.memoizedProps:u,i=e.type,s=e.updateQueue;if(e.updateQueue=null,null!==s)try{"input"===i&&"radio"===u.type&&null!=u.name&&G(l,u),be(i,o);var c=be(i,u);for(o=0;o<s.length;o+=2){var f=s[o],d=s[o+1];"style"===f?ge(l,d):"dangerouslySetInnerHTML"===f?fe(l,d):"children"===f?de(l,d):b(l,f,d,c)}switch(i){case"input":Z(l,u);break;case"textarea":ae(l,u);break;case"select":var p=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!u.multiple;var m=u.value;null!=m?te(l,!!u.multiple,m,!1):p!==!!u.multiple&&(null!=u.defaultValue?te(l,!!u.multiple,u.defaultValue,!0):te(l,!!u.multiple,u.multiple?[]:"",!1))}l[pl]=u}catch(n){Es(e,e.return,n)}}break;case 6:if(hi(n,e),vi(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,u=e.memoizedProps;try{l.nodeValue=u}catch(n){Es(e,e.return,n)}}break;case 3:if(hi(n,e),vi(e),4&r&&null!==t&&t.memoizedState.isDehydrated)try{Wn(n.containerInfo)}catch(n){Es(e,e.return,n)}break;case 4:default:hi(n,e),vi(e);break;case 13:hi(n,e),vi(e),8192&(l=e.child).flags&&(u=null!==l.memoizedState,l.stateNode.isHidden=u,!u||null!==l.alternate&&null!==l.alternate.memoizedState||(Bi=Ge())),4&r&&mi(e);break;case 22:if(f=null!==t&&null!==t.memoizedState,1&e.mode?(Xo=(c=Xo)||f,hi(n,e),Xo=c):hi(n,e),vi(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!=(1&e.mode))for(Zo=e,f=e.child;null!==f;){for(d=Zo=f;null!==Zo;){switch(m=(p=Zo).child,p.tag){case 0:case 11:case 14:case 15:ti(4,p,p.return);break;case 1:Jo(p,p.return);var h=p.stateNode;if("function"==typeof h.componentWillUnmount){r=p,t=p.return;try{n=r,h.props=n.memoizedProps,h.state=n.memoizedState,h.componentWillUnmount()}catch(e){Es(r,t,e)}}break;case 5:Jo(p,p.return);break;case 22:if(null!==p.memoizedState){wi(d);continue}}null!==m?(m.return=p,Zo=m):wi(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{l=d.stateNode,c?"function"==typeof(u=l.style).setProperty?u.setProperty("display","none","important"):u.display="none":(i=d.stateNode,o=null!=(s=d.memoizedProps.style)&&s.hasOwnProperty("display")?s.display:null,i.style.display=he("display",o))}catch(n){Es(e,e.return,n)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(n){Es(e,e.return,n)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:hi(n,e),vi(e),4&r&&mi(e);case 21:}}function vi(e){var n=e.flags;if(2&n){try{e:{for(var t=e.return;null!==t;){if(ui(t)){var r=t;break e}t=t.return}throw Error(a(160))}switch(r.tag){case 5:var l=r.stateNode;32&r.flags&&(de(l,""),r.flags&=-33),si(e,oi(e),l);break;case 3:case 4:var u=r.stateNode.containerInfo;ii(e,oi(e),u);break;default:throw Error(a(161))}}catch(n){Es(e,e.return,n)}e.flags&=-3}4096&n&&(e.flags&=-4097)}function yi(e,n,t){Zo=e,bi(e,n,t)}function bi(e,n,t){for(var r=0!=(1&e.mode);null!==Zo;){var l=Zo,a=l.child;if(22===l.tag&&r){var u=null!==l.memoizedState||Yo;if(!u){var o=l.alternate,i=null!==o&&null!==o.memoizedState||Xo;o=Yo;var s=Xo;if(Yo=u,(Xo=i)&&!s)for(Zo=l;null!==Zo;)i=(u=Zo).child,22===u.tag&&null!==u.memoizedState?Si(l):null!==i?(i.return=u,Zo=i):Si(l);for(;null!==a;)Zo=a,bi(a,n,t),a=a.sibling;Zo=l,Yo=o,Xo=s}ki(e)}else 0!=(8772&l.subtreeFlags)&&null!==a?(a.return=l,Zo=a):ki(e)}}function ki(e){for(;null!==Zo;){var n=Zo;if(0!=(8772&n.flags)){var t=n.alternate;try{if(0!=(8772&n.flags))switch(n.tag){case 0:case 11:case 15:Xo||ri(5,n);break;case 1:var r=n.stateNode;if(4&n.flags&&!Xo)if(null===t)r.componentDidMount();else{var l=n.elementType===n.type?t.memoizedProps:no(n.type,t.memoizedProps);r.componentDidUpdate(l,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var u=n.updateQueue;null!==u&&Wa(n,u,r);break;case 3:var o=n.updateQueue;if(null!==o){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}Wa(n,o,t)}break;case 5:var i=n.stateNode;if(null===t&&4&n.flags){t=i;var s=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&t.focus();break;case"img":s.src&&(t.src=s.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===n.memoizedState){var c=n.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&Wn(d)}}}break;default:throw Error(a(163))}Xo||512&n.flags&&li(n)}catch(e){Es(n,n.return,e)}}if(n===e){Zo=null;break}if(null!==(t=n.sibling)){t.return=n.return,Zo=t;break}Zo=n.return}}function wi(e){for(;null!==Zo;){var n=Zo;if(n===e){Zo=null;break}var t=n.sibling;if(null!==t){t.return=n.return,Zo=t;break}Zo=n.return}}function Si(e){for(;null!==Zo;){var n=Zo;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{ri(4,n)}catch(e){Es(n,t,e)}break;case 1:var r=n.stateNode;if("function"==typeof r.componentDidMount){var l=n.return;try{r.componentDidMount()}catch(e){Es(n,l,e)}}var a=n.return;try{li(n)}catch(e){Es(n,a,e)}break;case 5:var u=n.return;try{li(n)}catch(e){Es(n,u,e)}}}catch(e){Es(n,n.return,e)}if(n===e){Zo=null;break}var o=n.sibling;if(null!==o){o.return=n.return,Zo=o;break}Zo=n.return}}var xi,Ei=Math.ceil,Ci=k.ReactCurrentDispatcher,_i=k.ReactCurrentOwner,zi=k.ReactCurrentBatchConfig,Ni=0,Pi=null,Ti=null,Li=0,Mi=0,Fi=El(0),Ri=0,Di=null,Oi=0,Ii=0,Ui=0,Vi=null,Ai=null,Bi=0,Hi=1/0,Wi=null,Qi=!1,ji=null,$i=null,Ki=!1,qi=null,Yi=0,Xi=0,Gi=null,Zi=-1,Ji=0;function es(){return 0!=(6&Ni)?Ge():-1!==Zi?Zi:Zi=Ge()}function ns(e){return 0==(1&e.mode)?1:0!=(2&Ni)&&0!==Li?Li&-Li:null!==ha.transition?(0===Ji&&(Ji=gn()),Ji):0!==(e=kn)?e:e=void 0===(e=window.event)?16:Gn(e.type)}function ts(e,n,t,r){if(50<Xi)throw Xi=0,Gi=null,Error(a(185));yn(e,t,r),0!=(2&Ni)&&e===Pi||(e===Pi&&(0==(2&Ni)&&(Ii|=t),4===Ri&&os(e,Li)),rs(e,r),1===t&&0===Ni&&0==(1&n.mode)&&(Hi=Ge()+500,Vl&&Hl()))}function rs(e,n){var t=e.callbackNode;!function(e,n){for(var t=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-un(a),o=1<<u,i=l[u];-1===i?0!=(o&t)&&0==(o&r)||(l[u]=mn(o,n)):i<=n&&(e.expiredLanes|=o),a&=~o}}(e,n);var r=pn(e,e===Pi?Li:0);if(0===r)null!==t&&qe(t),e.callbackNode=null,e.callbackPriority=0;else if(n=r&-r,e.callbackPriority!==n){if(null!=t&&qe(t),1===n)0===e.tag?function(e){Vl=!0,Bl(e)}(is.bind(null,e)):Bl(is.bind(null,e)),ul((function(){0==(6&Ni)&&Hl()})),t=null;else{switch(wn(r)){case 1:t=Je;break;case 4:t=en;break;case 16:default:t=nn;break;case 536870912:t=rn}t=Ps(t,ls.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function ls(e,n){if(Zi=-1,Ji=0,0!=(6&Ni))throw Error(a(327));var t=e.callbackNode;if(Ss()&&e.callbackNode!==t)return null;var r=pn(e,e===Pi?Li:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||n)n=gs(e,r);else{n=r;var l=Ni;Ni|=2;var u=ms();for(Pi===e&&Li===n||(Wi=null,Hi=Ge()+500,ds(e,n));;)try{ys();break}catch(n){ps(e,n)}_a(),Ci.current=u,Ni=l,null!==Ti?n=0:(Pi=null,Li=0,n=Ri)}if(0!==n){if(2===n&&0!==(l=hn(e))&&(r=l,n=as(e,l)),1===n)throw t=Di,ds(e,0),os(e,r),rs(e,Ge()),t;if(6===n)os(e,r);else{if(l=e.current.alternate,0==(30&r)&&!function(e){for(var n=e;;){if(16384&n.flags){var t=n.updateQueue;if(null!==t&&null!==(t=t.stores))for(var r=0;r<t.length;r++){var l=t[r],a=l.getSnapshot;l=l.value;try{if(!or(a(),l))return!1}catch(e){return!1}}}if(t=n.child,16384&n.subtreeFlags&&null!==t)t.return=n,n=t;else{if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}(l)&&(2===(n=gs(e,r))&&0!==(u=hn(e))&&(r=u,n=as(e,u)),1===n))throw t=Di,ds(e,0),os(e,r),rs(e,Ge()),t;switch(e.finishedWork=l,e.finishedLanes=r,n){case 0:case 1:throw Error(a(345));case 2:case 5:ws(e,Ai,Wi);break;case 3:if(os(e,r),(130023424&r)===r&&10<(n=Bi+500-Ge())){if(0!==pn(e,0))break;if(((l=e.suspendedLanes)&r)!==r){es(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=rl(ws.bind(null,e,Ai,Wi),n);break}ws(e,Ai,Wi);break;case 4:if(os(e,r),(4194240&r)===r)break;for(n=e.eventTimes,l=-1;0<r;){var o=31-un(r);u=1<<o,(o=n[o])>l&&(l=o),r&=~u}if(r=l,10<(r=(120>(r=Ge()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ei(r/1960))-r)){e.timeoutHandle=rl(ws.bind(null,e,Ai,Wi),r);break}ws(e,Ai,Wi);break;default:throw Error(a(329))}}}return rs(e,Ge()),e.callbackNode===t?ls.bind(null,e):null}function as(e,n){var t=Vi;return e.current.memoizedState.isDehydrated&&(ds(e,n).flags|=256),2!==(e=gs(e,n))&&(n=Ai,Ai=t,null!==n&&us(n)),e}function us(e){null===Ai?Ai=e:Ai.push.apply(Ai,e)}function os(e,n){for(n&=~Ui,n&=~Ii,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-un(n),r=1<<t;e[t]=-1,n&=~r}}function is(e){if(0!=(6&Ni))throw Error(a(327));Ss();var n=pn(e,0);if(0==(1&n))return rs(e,Ge()),null;var t=gs(e,n);if(0!==e.tag&&2===t){var r=hn(e);0!==r&&(n=r,t=as(e,r))}if(1===t)throw t=Di,ds(e,0),os(e,n),rs(e,Ge()),t;if(6===t)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,ws(e,Ai,Wi),rs(e,Ge()),null}function ss(e,n){var t=Ni;Ni|=1;try{return e(n)}finally{0===(Ni=t)&&(Hi=Ge()+500,Vl&&Hl())}}function cs(e){null!==qi&&0===qi.tag&&0==(6&Ni)&&Ss();var n=Ni;Ni|=1;var t=zi.transition,r=kn;try{if(zi.transition=null,kn=1,e)return e()}finally{kn=r,zi.transition=t,0==(6&(Ni=n))&&Hl()}}function fs(){Mi=Fi.current,Cl(Fi)}function ds(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,ll(t)),null!==Ti)for(t=Ti.return;null!==t;){var r=t;switch(na(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Fl();break;case 3:Xa(),Cl(Pl),Cl(Nl),tu();break;case 5:Za(r);break;case 4:Xa();break;case 13:case 19:Cl(Ja);break;case 10:za(r.type._context);break;case 22:case 23:fs()}t=t.return}if(Pi=e,Ti=e=Fs(e.current,null),Li=Mi=n,Ri=0,Di=null,Ui=Ii=Oi=0,Ai=Vi=null,null!==La){for(n=0;n<La.length;n++)if(null!==(r=(t=La[n]).interleaved)){t.interleaved=null;var l=r.next,a=t.pending;if(null!==a){var u=a.next;a.next=l,r.next=u}t.pending=r}La=null}return e}function ps(e,n){for(;;){var t=Ti;try{if(_a(),ru.current=Gu,su){for(var r=uu.memoizedState;null!==r;){var l=r.queue;null!==l&&(l.pending=null),r=r.next}su=!1}if(au=0,iu=ou=uu=null,cu=!1,fu=0,_i.current=null,null===t||null===t.return){Ri=1,Di=n,Ti=null;break}e:{var u=e,o=t.return,i=t,s=n;if(n=Li,i.flags|=32768,null!==s&&"object"==typeof s&&"function"==typeof s.then){var c=s,f=i,d=f.tag;if(0==(1&f.mode)&&(0===d||11===d||15===d)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,vo(m,o,i,0,n),1&m.mode&&ho(u,c,n),s=c;var h=(n=m).updateQueue;if(null===h){var g=new Set;g.add(s),n.updateQueue=g}else h.add(s);break e}if(0==(1&n)){ho(u,c,n),hs();break e}s=Error(a(426))}else if(la&&1&i.mode){var v=go(o);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),vo(v,o,i,0,n),ma(io(s,i));break e}}u=s=io(s,i),4!==Ri&&(Ri=2),null===Vi?Vi=[u]:Vi.push(u),u=o;do{switch(u.tag){case 3:u.flags|=65536,n&=-n,u.lanes|=n,Ba(u,po(0,s,n));break e;case 1:i=s;var y=u.type,b=u.stateNode;if(0==(128&u.flags)&&("function"==typeof y.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===$i||!$i.has(b)))){u.flags|=65536,n&=-n,u.lanes|=n,Ba(u,mo(u,i,n));break e}}u=u.return}while(null!==u)}ks(t)}catch(e){n=e,Ti===t&&null!==t&&(Ti=t=t.return);continue}break}}function ms(){var e=Ci.current;return Ci.current=Gu,null===e?Gu:e}function hs(){0!==Ri&&3!==Ri&&2!==Ri||(Ri=4),null===Pi||0==(268435455&Oi)&&0==(268435455&Ii)||os(Pi,Li)}function gs(e,n){var t=Ni;Ni|=2;var r=ms();for(Pi===e&&Li===n||(Wi=null,ds(e,n));;)try{vs();break}catch(n){ps(e,n)}if(_a(),Ni=t,Ci.current=r,null!==Ti)throw Error(a(261));return Pi=null,Li=0,Ri}function vs(){for(;null!==Ti;)bs(Ti)}function ys(){for(;null!==Ti&&!Ye();)bs(Ti)}function bs(e){var n=xi(e.alternate,e,Mi);e.memoizedProps=e.pendingProps,null===n?ks(e):Ti=n,_i.current=null}function ks(e){var n=e;do{var t=n.alternate;if(e=n.return,0==(32768&n.flags)){if(null!==(t=Ko(t,n,Mi)))return void(Ti=t)}else{if(null!==(t=qo(t,n)))return t.flags&=32767,void(Ti=t);if(null===e)return Ri=6,void(Ti=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(n=n.sibling))return void(Ti=n);Ti=n=e}while(null!==n);0===Ri&&(Ri=5)}function ws(e,n,t){var r=kn,l=zi.transition;try{zi.transition=null,kn=1,function(e,n,t,r){do{Ss()}while(null!==qi);if(0!=(6&Ni))throw Error(a(327));t=e.finishedWork;var l=e.finishedLanes;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var u=t.lanes|t.childLanes;if(function(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<t;){var l=31-un(t),a=1<<l;n[l]=0,r[l]=-1,e[l]=-1,t&=~a}}(e,u),e===Pi&&(Ti=Pi=null,Li=0),0==(2064&t.subtreeFlags)&&0==(2064&t.flags)||Ki||(Ki=!0,Ps(nn,(function(){return Ss(),null}))),u=0!=(15990&t.flags),0!=(15990&t.subtreeFlags)||u){u=zi.transition,zi.transition=null;var o=kn;kn=1;var i=Ni;Ni|=4,_i.current=null,function(e,n){if(el=jn,pr(e=dr())){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(r&&0!==r.rangeCount){t=r.anchorNode;var l=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{t.nodeType,u.nodeType}catch(e){t=null;break e}var o=0,i=-1,s=-1,c=0,f=0,d=e,p=null;n:for(;;){for(var m;d!==t||0!==l&&3!==d.nodeType||(i=o+l),d!==u||0!==r&&3!==d.nodeType||(s=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(m=d.firstChild);)p=d,d=m;for(;;){if(d===e)break n;if(p===t&&++c===l&&(i=o),p===u&&++f===r&&(s=o),null!==(m=d.nextSibling))break;p=(d=p).parentNode}d=m}t=-1===i||-1===s?null:{start:i,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;for(nl={focusedElem:e,selectionRange:t},jn=!1,Zo=n;null!==Zo;)if(e=(n=Zo).child,0!=(1028&n.subtreeFlags)&&null!==e)e.return=n,Zo=e;else for(;null!==Zo;){n=Zo;try{var h=n.alternate;if(0!=(1024&n.flags))switch(n.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var g=h.memoizedProps,v=h.memoizedState,y=n.stateNode,b=y.getSnapshotBeforeUpdate(n.elementType===n.type?g:no(n.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=n.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(a(163))}}catch(e){Es(n,n.return,e)}if(null!==(e=n.sibling)){e.return=n.return,Zo=e;break}Zo=n.return}h=ni,ni=!1}(e,t),gi(t,e),mr(nl),jn=!!el,nl=el=null,e.current=t,yi(t,e,l),Xe(),Ni=i,kn=o,zi.transition=u}else e.current=t;if(Ki&&(Ki=!1,qi=e,Yi=l),0===(u=e.pendingLanes)&&($i=null),function(e){if(an&&"function"==typeof an.onCommitFiberRoot)try{an.onCommitFiberRoot(ln,e,void 0,128==(128&e.current.flags))}catch(e){}}(t.stateNode),rs(e,Ge()),null!==n)for(r=e.onRecoverableError,t=0;t<n.length;t++)r((l=n[t]).value,{componentStack:l.stack,digest:l.digest});if(Qi)throw Qi=!1,e=ji,ji=null,e;0!=(1&Yi)&&0!==e.tag&&Ss(),0!=(1&(u=e.pendingLanes))?e===Gi?Xi++:(Xi=0,Gi=e):Xi=0,Hl()}(e,n,t,r)}finally{zi.transition=l,kn=r}return null}function Ss(){if(null!==qi){var e=wn(Yi),n=zi.transition,t=kn;try{if(zi.transition=null,kn=16>e?16:e,null===qi)var r=!1;else{if(e=qi,qi=null,Yi=0,0!=(6&Ni))throw Error(a(331));var l=Ni;for(Ni|=4,Zo=e.current;null!==Zo;){var u=Zo,o=u.child;if(0!=(16&Zo.flags)){var i=u.deletions;if(null!==i){for(var s=0;s<i.length;s++){var c=i[s];for(Zo=c;null!==Zo;){var f=Zo;switch(f.tag){case 0:case 11:case 15:ti(8,f,u)}var d=f.child;if(null!==d)d.return=f,Zo=d;else for(;null!==Zo;){var p=(f=Zo).sibling,m=f.return;if(ai(f),f===c){Zo=null;break}if(null!==p){p.return=m,Zo=p;break}Zo=m}}}var h=u.alternate;if(null!==h){var g=h.child;if(null!==g){h.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zo=u}}if(0!=(2064&u.subtreeFlags)&&null!==o)o.return=u,Zo=o;else e:for(;null!==Zo;){if(0!=(2048&(u=Zo).flags))switch(u.tag){case 0:case 11:case 15:ti(9,u,u.return)}var y=u.sibling;if(null!==y){y.return=u.return,Zo=y;break e}Zo=u.return}}var b=e.current;for(Zo=b;null!==Zo;){var k=(o=Zo).child;if(0!=(2064&o.subtreeFlags)&&null!==k)k.return=o,Zo=k;else e:for(o=b;null!==Zo;){if(0!=(2048&(i=Zo).flags))try{switch(i.tag){case 0:case 11:case 15:ri(9,i)}}catch(e){Es(i,i.return,e)}if(i===o){Zo=null;break e}var w=i.sibling;if(null!==w){w.return=i.return,Zo=w;break e}Zo=i.return}}if(Ni=l,Hl(),an&&"function"==typeof an.onPostCommitFiberRoot)try{an.onPostCommitFiberRoot(ln,e)}catch(e){}r=!0}return r}finally{kn=t,zi.transition=n}}return!1}function xs(e,n,t){e=Va(e,n=po(0,n=io(t,n),1),1),n=es(),null!==e&&(yn(e,1,n),rs(e,n))}function Es(e,n,t){if(3===e.tag)xs(e,e,t);else for(;null!==n;){if(3===n.tag){xs(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===$i||!$i.has(r))){n=Va(n,e=mo(n,e=io(t,e),1),1),e=es(),null!==n&&(yn(n,1,e),rs(n,e));break}}n=n.return}}function Cs(e,n,t){var r=e.pingCache;null!==r&&r.delete(n),n=es(),e.pingedLanes|=e.suspendedLanes&t,Pi===e&&(Li&t)===t&&(4===Ri||3===Ri&&(130023424&Li)===Li&&500>Ge()-Bi?ds(e,0):Ui|=t),rs(e,n)}function _s(e,n){0===n&&(0==(1&e.mode)?n=1:(n=fn,0==(130023424&(fn<<=1))&&(fn=4194304)));var t=es();null!==(e=Ra(e,n))&&(yn(e,n,t),rs(e,t))}function zs(e){var n=e.memoizedState,t=0;null!==n&&(t=n.retryLane),_s(e,t)}function Ns(e,n){var t=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;null!==l&&(t=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(n),_s(e,t)}function Ps(e,n){return Ke(e,n)}function Ts(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(e,n,t,r){return new Ts(e,n,t,r)}function Ms(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fs(e,n){var t=e.alternate;return null===t?((t=Ls(e.tag,n,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Rs(e,n,t,r,l,u){var o=2;if(r=e,"function"==typeof e)Ms(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case x:return Ds(t.children,l,u,n);case E:o=8,l|=8;break;case C:return(e=Ls(12,t,n,2|l)).elementType=C,e.lanes=u,e;case P:return(e=Ls(13,t,n,l)).elementType=P,e.lanes=u,e;case T:return(e=Ls(19,t,n,l)).elementType=T,e.lanes=u,e;case F:return Os(t,l,u,n);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case _:o=10;break e;case z:o=9;break e;case N:o=11;break e;case L:o=14;break e;case M:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(n=Ls(o,t,n,l)).elementType=e,n.type=r,n.lanes=u,n}function Ds(e,n,t,r){return(e=Ls(7,e,r,n)).lanes=t,e}function Os(e,n,t,r){return(e=Ls(22,e,r,n)).elementType=F,e.lanes=t,e.stateNode={isHidden:!1},e}function Is(e,n,t){return(e=Ls(6,e,null,n)).lanes=t,e}function Us(e,n,t){return(n=Ls(4,null!==e.children?e.children:[],e.key,n)).lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Vs(e,n,t,r,l){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vn(0),this.expirationTimes=vn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vn(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function As(e,n,t,r,l,a,u,o,i){return e=new Vs(e,n,t,o,i),1===n?(n=1,!0===a&&(n|=8)):n=0,a=Ls(3,null,null,n),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),e}function Bs(e){if(!e)return zl;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Ml(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(null!==n);throw Error(a(171))}if(1===e.tag){var t=e.type;if(Ml(t))return Dl(e,t,n)}return n}function Hs(e,n,t,r,l,a,u,o,i){return(e=As(t,r,!0,e,0,a,0,o,i)).context=Bs(null),t=e.current,(a=Ua(r=es(),l=ns(t))).callback=null!=n?n:null,Va(t,a,l),e.current.lanes=l,yn(e,l,r),rs(e,r),e}function Ws(e,n,t,r){var l=n.current,a=es(),u=ns(l);return t=Bs(t),null===n.context?n.context=t:n.pendingContext=t,(n=Ua(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(n.callback=r),null!==(e=Va(l,n,u))&&(ts(e,l,u,a),Aa(e,l,u)),u}function Qs(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function js(e,n){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<n?t:n}}function $s(e,n){js(e,n),(e=e.alternate)&&js(e,n)}xi=function(e,n,t){if(null!==e)if(e.memoizedProps!==n.pendingProps||Pl.current)bo=!0;else{if(0==(e.lanes&t)&&0==(128&n.flags))return bo=!1,function(e,n,t){switch(n.tag){case 3:Po(n),pa();break;case 5:Ga(n);break;case 1:Ml(n.type)&&Ol(n);break;case 4:Ya(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,l=n.memoizedProps.value;_l(Sa,r._currentValue),r._currentValue=l;break;case 13:if(null!==(r=n.memoizedState))return null!==r.dehydrated?(_l(Ja,1&Ja.current),n.flags|=128,null):0!=(t&n.child.childLanes)?Io(e,n,t):(_l(Ja,1&Ja.current),null!==(e=Qo(e,n,t))?e.sibling:null);_l(Ja,1&Ja.current);break;case 19:if(r=0!=(t&n.childLanes),0!=(128&e.flags)){if(r)return Ho(e,n,t);n.flags|=128}if(null!==(l=n.memoizedState)&&(l.rendering=null,l.tail=null,l.lastEffect=null),_l(Ja,Ja.current),r)break;return null;case 22:case 23:return n.lanes=0,Eo(e,n,t)}return Qo(e,n,t)}(e,n,t);bo=0!=(131072&e.flags)}else bo=!1,la&&0!=(1048576&n.flags)&&Jl(n,$l,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;Wo(e,n),e=n.pendingProps;var l=Ll(n,Nl.current);Pa(n,t),l=hu(null,n,r,e,l,t);var u=gu();return n.flags|=1,"object"==typeof l&&null!==l&&"function"==typeof l.render&&void 0===l.$$typeof?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Ml(r)?(u=!0,Ol(n)):u=!1,n.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,Oa(n),l.updater=ro,n.stateNode=l,l._reactInternals=n,oo(n,r,e,t),n=No(null,n,r,!0,u,t)):(n.tag=0,la&&u&&ea(n),ko(null,n,l,t),n=n.child),n;case 16:r=n.elementType;e:{switch(Wo(e,n),e=n.pendingProps,r=(l=r._init)(r._payload),n.type=r,l=n.tag=function(e){if("function"==typeof e)return Ms(e)?1:0;if(null!=e){if((e=e.$$typeof)===N)return 11;if(e===L)return 14}return 2}(r),e=no(r,e),l){case 0:n=_o(null,n,r,e,t);break e;case 1:n=zo(null,n,r,e,t);break e;case 11:n=wo(null,n,r,e,t);break e;case 14:n=So(null,n,r,no(r.type,e),t);break e}throw Error(a(306,r,""))}return n;case 0:return r=n.type,l=n.pendingProps,_o(e,n,r,l=n.elementType===r?l:no(r,l),t);case 1:return r=n.type,l=n.pendingProps,zo(e,n,r,l=n.elementType===r?l:no(r,l),t);case 3:e:{if(Po(n),null===e)throw Error(a(387));r=n.pendingProps,l=(u=n.memoizedState).element,Ia(e,n),Ha(n,r,null,t);var o=n.memoizedState;if(r=o.element,u.isDehydrated){if(u={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},n.updateQueue.baseState=u,n.memoizedState=u,256&n.flags){n=To(e,n,r,t,l=io(Error(a(423)),n));break e}if(r!==l){n=To(e,n,r,t,l=io(Error(a(424)),n));break e}for(ra=sl(n.stateNode.containerInfo.firstChild),ta=n,la=!0,aa=null,t=wa(n,null,r,t),n.child=t;t;)t.flags=-3&t.flags|4096,t=t.sibling}else{if(pa(),r===l){n=Qo(e,n,t);break e}ko(e,n,r,t)}n=n.child}return n;case 5:return Ga(n),null===e&&sa(n),r=n.type,l=n.pendingProps,u=null!==e?e.memoizedProps:null,o=l.children,tl(r,l)?o=null:null!==u&&tl(r,u)&&(n.flags|=32),Co(e,n),ko(e,n,o,t),n.child;case 6:return null===e&&sa(n),null;case 13:return Io(e,n,t);case 4:return Ya(n,n.stateNode.containerInfo),r=n.pendingProps,null===e?n.child=ka(n,null,r,t):ko(e,n,r,t),n.child;case 11:return r=n.type,l=n.pendingProps,wo(e,n,r,l=n.elementType===r?l:no(r,l),t);case 7:return ko(e,n,n.pendingProps,t),n.child;case 8:case 12:return ko(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(r=n.type._context,l=n.pendingProps,u=n.memoizedProps,o=l.value,_l(Sa,r._currentValue),r._currentValue=o,null!==u)if(or(u.value,o)){if(u.children===l.children&&!Pl.current){n=Qo(e,n,t);break e}}else for(null!==(u=n.child)&&(u.return=n);null!==u;){var i=u.dependencies;if(null!==i){o=u.child;for(var s=i.firstContext;null!==s;){if(s.context===r){if(1===u.tag){(s=Ua(-1,t&-t)).tag=2;var c=u.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?s.next=s:(s.next=f.next,f.next=s),c.pending=s}}u.lanes|=t,null!==(s=u.alternate)&&(s.lanes|=t),Na(u.return,t,n),i.lanes|=t;break}s=s.next}}else if(10===u.tag)o=u.type===n.type?null:u.child;else if(18===u.tag){if(null===(o=u.return))throw Error(a(341));o.lanes|=t,null!==(i=o.alternate)&&(i.lanes|=t),Na(o,t,n),o=u.sibling}else o=u.child;if(null!==o)o.return=u;else for(o=u;null!==o;){if(o===n){o=null;break}if(null!==(u=o.sibling)){u.return=o.return,o=u;break}o=o.return}u=o}ko(e,n,l.children,t),n=n.child}return n;case 9:return l=n.type,r=n.pendingProps.children,Pa(n,t),r=r(l=Ta(l)),n.flags|=1,ko(e,n,r,t),n.child;case 14:return l=no(r=n.type,n.pendingProps),So(e,n,r,l=no(r.type,l),t);case 15:return xo(e,n,n.type,n.pendingProps,t);case 17:return r=n.type,l=n.pendingProps,l=n.elementType===r?l:no(r,l),Wo(e,n),n.tag=1,Ml(r)?(e=!0,Ol(n)):e=!1,Pa(n,t),ao(n,r,l),oo(n,r,l,t),No(null,n,r,!0,e,t);case 19:return Ho(e,n,t);case 22:return Eo(e,n,t)}throw Error(a(156,n.tag))};var Ks="function"==typeof reportError?reportError:function(e){console.error(e)};function qs(e){this._internalRoot=e}function Ys(e){this._internalRoot=e}function Xs(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Gs(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zs(){}function Js(e,n,t,r,l){var a=t._reactRootContainer;if(a){var u=a;if("function"==typeof l){var o=l;l=function(){var e=Qs(u);o.call(e)}}Ws(n,u,e,l)}else u=function(e,n,t,r,l){if(l){if("function"==typeof r){var a=r;r=function(){var e=Qs(u);a.call(e)}}var u=Hs(n,r,e,0,null,!1,0,"",Zs);return e._reactRootContainer=u,e[ml]=u.current,Hr(8===e.nodeType?e.parentNode:e),cs(),u}for(;l=e.lastChild;)e.removeChild(l);if("function"==typeof r){var o=r;r=function(){var e=Qs(i);o.call(e)}}var i=As(e,0,!1,null,0,!1,0,"",Zs);return e._reactRootContainer=i,e[ml]=i.current,Hr(8===e.nodeType?e.parentNode:e),cs((function(){Ws(n,i,t,r)})),i}(t,n,e,l,r);return Qs(u)}Ys.prototype.render=qs.prototype.render=function(e){var n=this._internalRoot;if(null===n)throw Error(a(409));Ws(e,n,null,null)},Ys.prototype.unmount=qs.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var n=e.containerInfo;cs((function(){Ws(null,e,null,null)})),n[ml]=null}},Ys.prototype.unstable_scheduleHydration=function(e){if(e){var n=Cn();e={blockedOn:null,target:e,priority:n};for(var t=0;t<Rn.length&&0!==n&&n<Rn[t].priority;t++);Rn.splice(t,0,e),0===t&&Un(e)}},Sn=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=dn(n.pendingLanes);0!==t&&(bn(n,1|t),rs(n,Ge()),0==(6&Ni)&&(Hi=Ge()+500,Hl()))}break;case 13:cs((function(){var n=Ra(e,1);if(null!==n){var t=es();ts(n,e,1,t)}})),$s(e,1)}},xn=function(e){if(13===e.tag){var n=Ra(e,134217728);null!==n&&ts(n,e,134217728,es()),$s(e,134217728)}},En=function(e){if(13===e.tag){var n=ns(e),t=Ra(e,n);null!==t&&ts(t,e,n,es()),$s(e,n)}},Cn=function(){return kn},_n=function(e,n){var t=kn;try{return kn=e,n()}finally{kn=t}},Se=function(e,n,t){switch(n){case"input":if(Z(e,t),n=t.name,"radio"===t.type&&null!=n){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var r=t[n];if(r!==e&&r.form===e.form){var l=wl(r);if(!l)throw Error(a(90));K(r),Z(r,l)}}}break;case"textarea":ae(e,t);break;case"select":null!=(n=t.value)&&te(e,!!t.multiple,n,!1)}},Ne=ss,Pe=cs;var ec={usingClientEntryPoint:!1,Events:[bl,kl,wl,_e,ze,ss]},nc={findFiberByHostInstance:yl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=je(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{ln=rc.inject(tc),an=rc}catch(ce){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,n.createPortal=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xs(n))throw Error(a(200));return function(e,n,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:n,implementation:t}}(e,n,null,t)},n.createRoot=function(e,n){if(!Xs(e))throw Error(a(299));var t=!1,r="",l=Ks;return null!=n&&(!0===n.unstable_strictMode&&(t=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onRecoverableError&&(l=n.onRecoverableError)),n=As(e,1,!1,null,0,t,0,r,l),e[ml]=n.current,Hr(8===e.nodeType?e.parentNode:e),new qs(n)},n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var n=e._reactInternals;if(void 0===n){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=je(n))?null:e.stateNode},n.flushSync=function(e){return cs(e)},n.hydrate=function(e,n,t){if(!Gs(n))throw Error(a(200));return Js(null,e,n,!0,t)},n.hydrateRoot=function(e,n,t){if(!Xs(e))throw Error(a(405));var r=null!=t&&t.hydratedSources||null,l=!1,u="",o=Ks;if(null!=t&&(!0===t.unstable_strictMode&&(l=!0),void 0!==t.identifierPrefix&&(u=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),n=Hs(n,null,e,1,null!=t?t:null,l,0,u,o),e[ml]=n.current,Hr(e),r)for(e=0;e<r.length;e++)l=(l=(t=r[e])._getVersion)(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,l]:n.mutableSourceEagerHydrationData.push(t,l);return new Ys(n)},n.render=function(e,n,t){if(!Gs(n))throw Error(a(200));return Js(null,e,n,!1,t)},n.unmountComponentAtNode=function(e){if(!Gs(e))throw Error(a(40));return!!e._reactRootContainer&&(cs((function(){Js(null,null,e,!1,(function(){e._reactRootContainer=null,e[ml]=null}))})),!0)},n.unstable_batchedUpdates=ss,n.unstable_renderSubtreeIntoContainer=function(e,n,t,r){if(!Gs(t))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Js(e,n,t,!1,r)},n.version="18.3.1-next-f1338f8080-20240426"},961:(e,n,t)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=t(551)},463:(e,n)=>{function t(e,n){var t=e.length;e.push(n);e:for(;0<t;){var r=t-1>>>1,l=e[r];if(!(0<a(l,n)))break e;e[r]=n,e[t]=l,t=r}}function r(e){return 0===e.length?null:e[0]}function l(e){if(0===e.length)return null;var n=e[0],t=e.pop();if(t!==n){e[0]=t;e:for(var r=0,l=e.length,u=l>>>1;r<u;){var o=2*(r+1)-1,i=e[o],s=o+1,c=e[s];if(0>a(i,t))s<l&&0>a(c,i)?(e[r]=c,e[s]=t,r=s):(e[r]=i,e[o]=t,r=o);else{if(!(s<l&&0>a(c,t)))break e;e[r]=c,e[s]=t,r=s}}}return n}function a(e,n){var t=e.sortIndex-n.sortIndex;return 0!==t?t:e.id-n.id}if("object"==typeof performance&&"function"==typeof performance.now){var u=performance;n.unstable_now=function(){return u.now()}}else{var o=Date,i=o.now();n.unstable_now=function(){return o.now()-i}}var s=[],c=[],f=1,d=null,p=3,m=!1,h=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function k(e){for(var n=r(c);null!==n;){if(null===n.callback)l(c);else{if(!(n.startTime<=e))break;l(c),n.sortIndex=n.expirationTime,t(s,n)}n=r(c)}}function w(e){if(g=!1,k(e),!h)if(null!==r(s))h=!0,F(S);else{var n=r(c);null!==n&&R(w,n.startTime-e)}}function S(e,t){h=!1,g&&(g=!1,y(_),_=-1),m=!0;var a=p;try{for(k(t),d=r(s);null!==d&&(!(d.expirationTime>t)||e&&!P());){var u=d.callback;if("function"==typeof u){d.callback=null,p=d.priorityLevel;var o=u(d.expirationTime<=t);t=n.unstable_now(),"function"==typeof o?d.callback=o:d===r(s)&&l(s),k(t)}else l(s);d=r(s)}if(null!==d)var i=!0;else{var f=r(c);null!==f&&R(w,f.startTime-t),i=!1}return i}finally{d=null,p=a,m=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,C=null,_=-1,z=5,N=-1;function P(){return!(n.unstable_now()-N<z)}function T(){if(null!==C){var e=n.unstable_now();N=e;var t=!0;try{t=C(!0,e)}finally{t?x():(E=!1,C=null)}}else E=!1}if("function"==typeof b)x=function(){b(T)};else if("undefined"!=typeof MessageChannel){var L=new MessageChannel,M=L.port2;L.port1.onmessage=T,x=function(){M.postMessage(null)}}else x=function(){v(T,0)};function F(e){C=e,E||(E=!0,x())}function R(e,t){_=v((function(){e(n.unstable_now())}),t)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(e){e.callback=null},n.unstable_continueExecution=function(){h||m||(h=!0,F(S))},n.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<e?Math.floor(1e3/e):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return r(s)},n.unstable_next=function(e){switch(p){case 1:case 2:case 3:var n=3;break;default:n=p}var t=p;p=n;try{return e()}finally{p=t}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=p;p=e;try{return n()}finally{p=t}},n.unstable_scheduleCallback=function(e,l,a){var u=n.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?u+a:u,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:f++,callback:l,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>u?(e.sortIndex=a,t(c,e),null===r(s)&&e===r(c)&&(g?(y(_),_=-1):g=!0,R(w,a-u))):(e.sortIndex=o,t(s,e),h||m||(h=!0,F(S))),e},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(e){var n=p;return function(){var t=p;p=n;try{return e.apply(this,arguments)}finally{p=t}}}},982:(e,n,t)=>{e.exports=t(463)},594:e=>{e.exports=React}},n={},t=function t(r){var l=n[r];if(void 0!==l)return l.exports;var a=n[r]={exports:{}};return e[r](a,a.exports,t),a.exports}(961);window.ReactDOM=t})();
/*! This file is auto-generated */
(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{escapeAmpersand:()=>n,escapeAttribute:()=>u,escapeEditableHTML:()=>i,escapeHTML:()=>c,escapeLessThan:()=>o,escapeQuotationMark:()=>a,isValidAttributeName:()=>p});const r=/[\u007F-\u009F "'>/="\uFDD0-\uFDEF]/;function n(e){return e.replace(/&(?!([a-z0-9]+|#[0-9]+|#x[a-f0-9]+);)/gi,"&amp;")}function a(e){return e.replace(/"/g,"&quot;")}function o(e){return e.replace(/</g,"&lt;")}function u(e){return function(e){return e.replace(/>/g,"&gt;")}(a(n(e)))}function c(e){return o(n(e))}function i(e){return o(e.replace(/&/g,"&amp;"))}function p(e){return!r.test(e)}(window.wp=window.wp||{}).escapeHtml=t})();
/*! This file is auto-generated */
(()=>{"use strict";var e={4140:(e,t,n)=>{var r=n(5795);t.H=r.createRoot,t.c=r.hydrateRoot},5795:e=>{e.exports=window.ReactDOM}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{Children:()=>e.Children,Component:()=>e.Component,Fragment:()=>e.Fragment,Platform:()=>b,PureComponent:()=>e.PureComponent,RawHTML:()=>A,StrictMode:()=>e.StrictMode,Suspense:()=>e.Suspense,cloneElement:()=>e.cloneElement,concatChildren:()=>h,createContext:()=>e.createContext,createElement:()=>e.createElement,createInterpolateElement:()=>f,createPortal:()=>g.createPortal,createRef:()=>e.createRef,createRoot:()=>y.H,findDOMNode:()=>g.findDOMNode,flushSync:()=>g.flushSync,forwardRef:()=>e.forwardRef,hydrate:()=>g.hydrate,hydrateRoot:()=>y.c,isEmptyElement:()=>v,isValidElement:()=>e.isValidElement,lazy:()=>e.lazy,memo:()=>e.memo,render:()=>g.render,renderToString:()=>G,startTransition:()=>e.startTransition,switchChildrenNodeName:()=>m,unmountComponentAtNode:()=>g.unmountComponentAtNode,useCallback:()=>e.useCallback,useContext:()=>e.useContext,useDebugValue:()=>e.useDebugValue,useDeferredValue:()=>e.useDeferredValue,useEffect:()=>e.useEffect,useId:()=>e.useId,useImperativeHandle:()=>e.useImperativeHandle,useInsertionEffect:()=>e.useInsertionEffect,useLayoutEffect:()=>e.useLayoutEffect,useMemo:()=>e.useMemo,useReducer:()=>e.useReducer,useRef:()=>e.useRef,useState:()=>e.useState,useSyncExternalStore:()=>e.useSyncExternalStore,useTransition:()=>e.useTransition});const e=window.React;let t,o,i,a;const s=/<(\/)?(\w+)\s*(\/)?>/g;function l(e,t,n,r,o){return{element:e,tokenStart:t,tokenLength:n,prevOffset:r,leadingTextStart:o,children:[]}}const c=t=>{const n="object"==typeof t,r=n&&Object.values(t);return n&&r.length&&r.every((t=>(0,e.isValidElement)(t)))};function u(n){const r=function(){const e=s.exec(t);if(null===e)return["no-more-tokens"];const n=e.index,[r,o,i,a]=e,l=r.length;if(a)return["self-closed",i,n,l];if(o)return["closer",i,n,l];return["opener",i,n,l]}(),[c,u,f,h]=r,m=a.length,g=f>o?o:null;if(!n[u])return d(),!1;switch(c){case"no-more-tokens":if(0!==m){const{leadingTextStart:e,tokenStart:n}=a.pop();i.push(t.substr(e,n))}return d(),!1;case"self-closed":return 0===m?(null!==g&&i.push(t.substr(g,f-g)),i.push(n[u]),o=f+h,!0):(p(l(n[u],f,h)),o=f+h,!0);case"opener":return a.push(l(n[u],f,h,f+h,g)),o=f+h,!0;case"closer":if(1===m)return function(n){const{element:r,leadingTextStart:o,prevOffset:s,tokenStart:l,children:c}=a.pop(),u=n?t.substr(s,n-s):t.substr(s);u&&c.push(u);null!==o&&i.push(t.substr(o,l-o));i.push((0,e.cloneElement)(r,null,...c))}(f),o=f+h,!0;const r=a.pop(),s=t.substr(r.prevOffset,f-r.prevOffset);r.children.push(s),r.prevOffset=f+h;const c=l(r.element,r.tokenStart,r.tokenLength,f+h);return c.children=r.children,p(c),o=f+h,!0;default:return d(),!1}}function d(){const e=t.length-o;0!==e&&i.push(t.substr(o,e))}function p(n){const{element:r,tokenStart:o,tokenLength:i,prevOffset:s,children:l}=n,c=a[a.length-1],u=t.substr(c.prevOffset,o-c.prevOffset);u&&c.children.push(u),c.children.push((0,e.cloneElement)(r,null,...l)),c.prevOffset=s||o+i}const f=(n,r)=>{if(t=n,o=0,i=[],a=[],s.lastIndex=0,!c(r))throw new TypeError("The conversionMap provided is not valid. It must be an object with values that are React Elements");do{}while(u(r));return(0,e.createElement)(e.Fragment,null,...i)};function h(...t){return t.reduce(((t,n,r)=>(e.Children.forEach(n,((n,o)=>{n&&"string"!=typeof n&&(n=(0,e.cloneElement)(n,{key:[r,o].join()})),t.push(n)})),t)),[])}function m(t,n){return t&&e.Children.map(t,((t,r)=>{if("string"==typeof t?.valueOf())return(0,e.createElement)(n,{key:r},t);const{children:o,...i}=t.props;return(0,e.createElement)(n,{key:r,...i},o)}))}var g=n(5795),y=n(4140);const v=e=>"number"!=typeof e&&("string"==typeof e?.valueOf()||Array.isArray(e)?!e.length:!e),b={OS:"web",select:e=>"web"in e?e.web:e.default,isWeb:!0};
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function k(e){return"[object Object]"===Object.prototype.toString.call(e)}var w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},w.apply(this,arguments)};Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;function S(e){return e.toLowerCase()}var x=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],O=/[^A-Z0-9]+/gi;function C(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce((function(e,t){return e.replace(t,n)}),e)}function E(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var n=t.splitRegexp,r=void 0===n?x:n,o=t.stripRegexp,i=void 0===o?O:o,a=t.transform,s=void 0===a?S:a,l=t.delimiter,c=void 0===l?" ":l,u=C(C(e,r,"$1\0$2"),i,"\0"),d=0,p=u.length;"\0"===u.charAt(d);)d++;for(;"\0"===u.charAt(p-1);)p--;return u.slice(d,p).split("\0").map(s).join(c)}(e,w({delimiter:"."},t))}function R(e,t){return void 0===t&&(t={}),E(e,w({delimiter:"-"},t))}const T=window.wp.escapeHtml;function A({children:t,...n}){let r="";return e.Children.toArray(t).forEach((e=>{"string"==typeof e&&""!==e.trim()&&(r+=e)})),(0,e.createElement)("div",{dangerouslySetInnerHTML:{__html:r},...n})}const{Provider:M,Consumer:I}=(0,e.createContext)(void 0),L=(0,e.forwardRef)((()=>null)),P=new Set(["string","boolean","number"]),j=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),H=new Set(["allowfullscreen","allowpaymentrequest","allowusermedia","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","typemustmatch"]),z=new Set(["autocapitalize","autocomplete","charset","contenteditable","crossorigin","decoding","dir","draggable","enctype","formenctype","formmethod","http-equiv","inputmode","kind","method","preload","scope","shape","spellcheck","translate","type","wrap"]),D=new Set(["animation","animationIterationCount","baselineShift","borderImageOutset","borderImageSlice","borderImageWidth","columnCount","cx","cy","fillOpacity","flexGrow","flexShrink","floodOpacity","fontWeight","gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart","lineHeight","opacity","order","orphans","r","rx","ry","shapeImageThreshold","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","tabSize","widows","x","y","zIndex","zoom"]);function V(e,t){return t.some((t=>0===e.indexOf(t)))}function W(e){return"key"===e||"children"===e}function _(e,t){return"style"===e?function(e){if(t=e,!1===k(t)||void 0!==(n=t.constructor)&&(!1===k(r=n.prototype)||!1===r.hasOwnProperty("isPrototypeOf")))return e;var t,n,r;let o;for(const t in e){const n=e[t];if(null==n)continue;o?o+=";":o="";o+=q(t)+":"+X(t,n)}return o}(t):t}const F=["accentHeight","alignmentBaseline","arabicForm","baselineShift","capHeight","clipPath","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","dominantBaseline","enableBackground","fillOpacity","fillRule","floodColor","floodOpacity","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","horizAdvX","horizOriginX","imageRendering","letterSpacing","lightingColor","markerEnd","markerMid","markerStart","overlinePosition","overlineThickness","paintOrder","panose1","pointerEvents","renderingIntent","shapeRendering","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","textAnchor","textDecoration","textRendering","underlinePosition","underlineThickness","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","vHanging","vIdeographic","vMathematical","vectorEffect","vertAdvY","vertOriginX","vertOriginY","wordSpacing","writingMode","xmlnsXlink","xHeight"].reduce(((e,t)=>(e[t.toLowerCase()]=t,e)),{}),N=["allowReorder","attributeName","attributeType","autoReverse","baseFrequency","baseProfile","calcMode","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","suppressContentEditableWarning","suppressHydrationWarning","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector"].reduce(((e,t)=>(e[t.toLowerCase()]=t,e)),{}),U=["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","xmlns:xlink"].reduce(((e,t)=>(e[t.replace(":","").toLowerCase()]=t,e)),{});function $(e){switch(e){case"htmlFor":return"for";case"className":return"class"}const t=e.toLowerCase();return N[t]?N[t]:F[t]?R(F[t]):U[t]?U[t]:t}function q(e){return e.startsWith("--")?e:V(e,["ms","O","Moz","Webkit"])?"-"+R(e):R(e)}function X(e,t){return"number"!=typeof t||0===t||D.has(e)?t:t+"px"}function B(t,n,r={}){if(null==t||!1===t)return"";if(Array.isArray(t))return Z(t,n,r);switch(typeof t){case"string":return(0,T.escapeHTML)(t);case"number":return t.toString()}const{type:o,props:i}=t;switch(o){case e.StrictMode:case e.Fragment:return Z(i.children,n,r);case A:const{children:t,...o}=i;return Y(Object.keys(o).length?"div":null,{...o,dangerouslySetInnerHTML:{__html:t}},n,r)}switch(typeof o){case"string":return Y(o,i,n,r);case"function":return o.prototype&&"function"==typeof o.prototype.render?function(e,t,n,r={}){const o=new e(t,r);"function"==typeof o.getChildContext&&Object.assign(r,o.getChildContext());const i=B(o.render(),n,r);return i}(o,i,n,r):B(o(i,r),n,r)}switch(o&&o.$$typeof){case M.$$typeof:return Z(i.children,i.value,r);case I.$$typeof:return B(i.children(n||o._currentValue),n,r);case L.$$typeof:return B(o.render(i),n,r)}return""}function Y(e,t,n,r={}){let o="";if("textarea"===e&&t.hasOwnProperty("value")){o=Z(t.value,n,r);const{value:e,...i}=t;t=i}else t.dangerouslySetInnerHTML&&"string"==typeof t.dangerouslySetInnerHTML.__html?o=t.dangerouslySetInnerHTML.__html:void 0!==t.children&&(o=Z(t.children,n,r));if(!e)return o;const i=function(e){let t="";for(const n in e){const r=$(n);if(!(0,T.isValidAttributeName)(r))continue;let o=_(n,e[n]);if(!P.has(typeof o))continue;if(W(n))continue;const i=H.has(r);if(i&&!1===o)continue;const a=i||V(n,["data-","aria-"])||z.has(r);("boolean"!=typeof o||a)&&(t+=" "+r,i||("string"==typeof o&&(o=(0,T.escapeAttribute)(o)),t+='="'+o+'"'))}return t}(t);return j.has(e)?"<"+e+i+"/>":"<"+e+i+">"+o+"</"+e+">"}function Z(e,t,n={}){let r="";e=Array.isArray(e)?e:[e];for(let o=0;o<e.length;o++){r+=B(e[o],t,n)}return r}const G=B})(),(window.wp=window.wp||{}).element=r})();
/**
 * Scripting for MEGA's custom components for WordPress blocks.
 */

class MegaComponent extends wp.element.Component {
    props;
    state = { };

    _tandle = null;

    constructor(props) {
        super(...arguments);

        this.props = props;

        this.state.isSelected = false;

        this.onFocus = this.onFocus.bind(this);
        this.onBlur = this.onBlur.bind(this);
    }

    onFocus(e) {
        if (this._tandle) {
            clearTimeout(this._tandle);
            this._tandle = null;
        }

        e.currentTarget.style.border = '2px solid var(--wp-admin-theme-color)';
        this.setState({ isSelected: true });
    }

    onBlur(e) {
        if (this._tandle) {
            clearTimeout(this._tandle);
            this._tandle = null;
        }

        e.currentTarget.style.removeProperty('border');

        // Delay the state update to give time for the inspector options to gain focus and cancel deselection,
        // otherwise inspector options will disappear and so never gain focus.
        this._tandle = setTimeout(() => {
            this.setState({ isSelected: false });
        }, 100);
    }

    render() {
        const preview = this._renderPreview();
        const inspector = this.state.isSelected ? this._renderInspector() : '';

        return wp.element.createElement('div', {
            tabIndex: 0,
            onFocus: this.onFocus,
            onBlur: this.onBlur,
            style: {
              display: 'contents'
            },
            ...this._getWrapperAttributes(),
        }, preview, inspector);
    }

    _renderInspector() { }

    _renderPreview() { }

    _getWrapperAttributes() {
        return { };
    }
}

// TODO: superseded by IconEditorComponent, remove once usages updated.
class IconStyleComponent extends MegaComponent {
    static iconClassOptions = [
        { label: 'None', value: '' },
        { label: 'Airplay MTO', value: 'airplay-mto' },
        { label: 'Alert Triangle SRO', value: 'alert-triangle' },
        { label: 'Archive Arrow Up MTO', value: 'archive-arrow-up-mto' },
        { label: 'Arrow Left MRO', value: 'arrow-left' },
        { label: 'Arrow Right MRO', value: 'arrow-right' },
        { label: 'Atom MRO', value: 'atom-mro' },
        { label: 'Atom MTO', value: 'atom-mto' },
        { label: 'Bell Ringing MTO', value: 'bell-ringing-mto' },
        { label: 'Bucket Triangle MRO', value: 'bucket-triangle-mro' },
        { label: 'Calendar 01 MRO', value: 'calendar' },
        { label: 'Cast MTO', value: 'cast-mto' },
        { label: 'Check MRO', value: 'check' },
        { label: 'Check Circle MRO', value: 'check-circle' },
        { label: 'Check Circle MTO', value: 'check-circle-mto' },
        { label: 'Chevrons Left SRO', value: 'chevron-2left' },
        { label: 'Chevrons Right SRO', value: 'chevron-2right' },
        { label: 'Chevron Down MRO', value: 'chevron-down' },
        { label: 'Chevron Left SRO', value: 'chevron-left' },
        { label: 'Chevron Right SRO', value: 'chevron-right' },
        { label: 'Chevron Up MRO', value: 'chevron-up' },
        { label: 'Clock Rotate MTO', value: 'clock-rotate-mto' },
        { label: 'Cloud MRO', value: 'cloud' },
        { label: 'Cloud Download MTO', value: 'cloud-download-mto' },
        { label: 'Cloud MTO', value: 'cloud-mto' },
        { label: 'Cloud Upload MRO', value: 'cloud-upload-mro' },
        { label: 'Cloud Upload MTO', value: 'cloud-upload-mto' },
        { label: 'Cloud White', value: 'cloud-white' },
        { label: 'Code', value: 'code' },
        { label: 'Code Browser MRO', value: 'code-browser-mro' },
        { label: 'Code Browser MTO', value: 'code-browser-mto' },
        { label: 'Copy MRO', value: 'copy' },
        { label: 'Crown MTO', value: 'crown-mto' },
        { label: 'Currency Dollar Circle MRO', value: 'currency-dollar-circle-mro' },
        { label: 'Currency Dollar Circle MTO', value: 'currency-dollar-circle-mto' },
        { label: 'Database MRO', value: 'database' },
        { label: 'Database MTO', value: 'database-mto' },
        { label: 'Edit 3 MTO', value: 'edit-3-mto' },
        { label: 'Emoji Happy MTO', value: 'emoji-happy-mto' },
        { label: 'Emoji Smile MTO', value: 'emoji-smile-mto' },
        { label: 'Emoji Wink MTO', value: 'emoji-wink-mto' },
        { label: 'Expand MRO', value: 'expand-mro' },
        { label: 'Expand MTO', value: 'expand-mto' },
        { label: 'File Attachment 02 MRO', value: 'file-attachment-02-mro' },
        { label: 'File Edit MRO', value: 'file-edit-mro' },
        { label: 'File Text MRO', value: 'file-text-mro' },
        { label: 'File Text MTO', value: 'file-text-mto' },
        { label: 'File Upload MTO', value: 'file-upload-mto' },
        { label: 'Filter MRO', value: 'file-filter' },
        { label: 'Folder Arrow 01 MTO', value: 'folder-arrow-01-mto' },
        { label: 'Folder Lock MRO', value: 'folder-lock-mro' },
        { label: 'Folder MRO', value: 'folder-mro' },
        { label: 'Folder Sync MTO', value: 'folder-sync-mto' },
        { label: 'Globe 01 MRO', value: 'globe' },
        { label: 'Globe 02 MTO', value: 'globe-02-mto' },
        { label: 'Globe Eurafrica MRO', value: 'globe-eurafrica-mro' },
        { label: 'Globe Eurafrica MTO', value: 'globe-eurafrica-mto' },
        { label: 'Hard Drive MRO', value: 'hard-drive' },
        { label: 'Headset MRO', value: 'headset-mro' },
        { label: 'Headset MTO', value: 'headset-mto' },
        { label: 'Heart MTO', value: 'heart-mto' },
        { label: 'Help circle MRO', value: 'help-circle' },
        { label: 'Image 01 MTO', value: 'image-01-mto' },
        { label: 'Info MRO', value: 'info' },
        { label: 'Key 01 MRO', value: 'key-01-mro' },
        { label: 'Key 01 MTO', value: 'key-01-mto' },
        { label: 'Link 01 MRO', value: 'link-01-mro' },
        { label: 'Lock MRO', value: 'lock-mro' },
        { label: 'Lock MTO', value: 'lock-mto' },
        { label: 'Mail', value: 'mail' },
        { label: 'Mail MTO', value: 'mail-mto' },
        { label: 'Map Pin', value: 'map-pin' },
        { label: 'Map Pin MTO', value: 'map-pin-mto' },
        { label: 'Mega MTO', value: 'mega-mto' },
        { label: 'Menu MRO', value: 'menu' },
        { label: 'Message Check MTO', value: 'message-check-mto' },
        { label: 'Message Circle MTO', value: 'message-circle-mto' },
        { label: 'Message Square MRO', value: 'message-square' },
        { label: 'Minus MRO', value: 'minus' },
        { label: 'Minus Circle MRO', value: 'minus-circle-mro' },
        { label: 'Monitor MRO', value: 'monitor-mro' },
        { label: 'Monitor MTO', value: 'monitor-mto' },
        { label: 'Moon MRO', value: 'moon' },
        { label: 'More Horizontal MRO', value: 'more-horizontal-mro' },
        { label: 'Move MTO', value: 'move-mto' },
        { label: 'Objects MRO', value: 'objects-mro' },
        { label: 'Palette MTO', value: 'palette-mto' },
        { label: 'Password MRO', value: 'password-mro' },
        { label: 'Play Square MTO', value: 'play-square-mto' },
        { label: 'Plus MRO', value: 'plus' },
        { label: 'Plus Circle MRO', value: 'plus-circle' },
        { label: 'Printer MRO', value: 'printer-mro'},
        { label: 'Printer MTO', value: 'printer-mto'},
        { label: 'Rocket MTO', value: 'rocket-mto' },
        { label: 'RSS', value: 'rss' },
        { label: 'Search SRO', value: 'search' },
        { label: 'Server MTO', value: 'server-mto' },
        { label: 'Share MRO', value: 'share' },
        { label: 'Share MTO', value: 'share-mto' },
        { label: 'Shield MRO', value: 'shield' },
        { label: 'Shield MTO', value: 'shield-mto' },
        { label: 'Sliders Horizontal 01 MRO', value: 'sliders-horizontal-01-mro' },
        { label: 'Sliders Vertical 01 MTO', value: 'sliders-vertical-01-mto' },
        { label: 'Social Facebook M', value: 'social-facebook' },
        { label: 'Social Instagram M', value: 'social-instagram' },
        { label: 'Social LinkedIn M', value: 'social-linkedin' },
        { label: 'Social X M', value: 'social-X' },
        { label: 'Social Youtube M', value: 'social-youtube' },
        { label: 'Social Threads M', value: 'social-threads'},
        { label: 'Star MTO', value: 'star-mto' },
        { label: 'Star Spark MTO', value: 'star-spark-mto' },
        { label: 'Sun', value: 'sun' },
        { label: 'Sync MRO', value: 'sync' },
        { label: 'Sync MTO', value: 'sync-mto' },
        { label: 'User Circle MTO', value: 'user-circle-mto' },
        { label: 'User Plus MTO', value: 'user-plus-mto' },
        { label: 'Users MRO', value: 'users-mro' },
        { label: 'Users MTO', value: 'users-mto' },
        { label: 'Video MRO', value: 'video-mro' },
        { label: 'Video MTO', value: 'video-mto' },
        { label: 'X STO', value: 'x' },
        { label: 'X MRO', value: 'x-mro' },
        { label: 'Zap MRO', value: 'zap-mro' },
        { label: 'Zap MTO', value: 'zap-mto' },
        { label: 'Zap Off MRO', value: 'zap-off-mro' },
        { label: 'Zap Off MTO', value: 'zap-off-mto' },

        /* Duotone icons */
        { label: 'Android 01 Duotone', value: 'android' },
        { label: 'Brain Duotone', value: 'brain' },
        { label: 'Bug Duotone', value: 'bug' },
        { label: 'C++ Duotone', value: 'c-plus-plus' },
        { label: 'CMD Duotone', value: 'CMD' },
        { label: 'Copyright Duotone', value: 'copyright' },
        { label: 'Extension Duotone', value: 'extension' },
        { label: 'Hand Duotone', value: 'hand' },
        { label: 'iOS Duotone', value: 'iOS' },
        { label: 'Lifebuoy Duotone', value: 'lifebuoy' },
        { label: 'Lightbulb Duotone', value: 'lightbulb' },
        { label: 'Media Duotone', value: 'media' },
        { label: 'Sync Duotone', value: 'mega-sync' },
        { label: 'Privacy Duotone', value: 'privacy' },
        { label: 'SDK Duotone', value: 'SDK' },
        { label: 'Scale Duotone', value: 'scale' },
        { label: 'Shield Duotone', value: 'shield-duotone' },
        { label: 'Thunderbird Duotone', value: 'thunderbird' },
        { label: 'TM Duotone', value: 'tm' },
        { label: 'Web Duotone', value: 'web' },
    ];

    get availableIcons() {
        return this.props.styles || IconStyleComponent.iconClassOptions;
    }

    _renderInspector() {
        const iconStyleControl = wp.element.createElement(wp.components.SelectControl, {
            label: 'Icon Styles',
            value: this.props.value,
            options: this.availableIcons,
            onChange: this.props.onChange,
        });

        // Dropdown menu in the inspector
        const iconInspectorPanel = wp.element.createElement(wp.components.PanelBody, {
            title: 'Icon Settings',
            initialOpen: true,
        }, iconStyleControl);

        return wp.element.createElement(wp.blockEditor.InspectorControls, { },
                this.availableIcons.length > 1 ? iconInspectorPanel : '');
    }

    _renderPreview() {
        const iconElement = wp.element.createElement('div', {
            className: `icon ${this.props.value}`,
            tabIndex: '0', // Enable focus / blur
        });

        return wp.element.createElement('div', {
            className: 'icon-box',
        }, iconElement);
    }
}

class IconEditorComponent extends MegaComponent {
    static iconColourOptions = [
        { label: 'default', value: 'color-brand-black' },
        { label: 'Primary red 500', value: 'color-primary-red-500' },
    ];

    static defaultAttributesSchema = {
        type: 'object',
        default: {
            style: '',
            colour: '',
        },
    };

    constructor(props) {
        super(...arguments);

        this.onChange = this.onChange.bind(this);
    }

    get availableIcons() {
        return this.props.styles || IconStyleComponent.iconClassOptions;
    }

    get availableColours() {
        return this.props.colours || IconEditorComponent.iconColourOptions;
    }

    onChange(key, value) {
        const newIcon = Object.assign({}, this.props.value);
        newIcon[key] = value;
        this.props.onChange(newIcon);
    }

    _renderInspector() {
        const iconColourControl = wp.element.createElement(wp.components.SelectControl, {
            label: 'Colour',
            value: this.props.value.colour,
            options: this.availableColours,
            onChange: (colour) => this.onChange('colour', colour),
        });

        const iconStyleControl = wp.element.createElement(wp.components.SelectControl, {
            label: 'Styles',
            value: this.props.value.style,
            options: this.availableIcons,
            onChange: (style) => this.onChange('style', style),
        });

        // Dropdown menu in the inspector
        const iconInspectorPanel = wp.element.createElement(wp.components.PanelBody, {
            title: 'Icon Settings',
            initialOpen: true,
        },
            this.availableIcons.length > 1 ? iconStyleControl : '',
            this.availableColours.length > 1 ? iconColourControl : '');

        return wp.element.createElement(wp.blockEditor.InspectorControls, { }, iconInspectorPanel);
    }

    _renderPreview() {
        const iconProps = {
            className: `icon ${this.props.style || this.props.value.style}`,
            tabIndex: '0', // Enable focus / blur
        };

        const colour = this.props.colour || this.props.value.colour;
        if (colour) {
            iconProps.style = { backgroundColor: `var(--${colour})` };
        }

        const iconElement = wp.element.createElement('div', iconProps);

        return wp.element.createElement('div', {
            className: 'icon-box',
        }, iconElement);
    }
}

class ButtonEditorComponent extends MegaComponent {
    static buttonStyles = [
        { label: 'Please select', value: '' },
        { label: 'Primary', value: 'primary' },
        { label: 'Secondary', value: 'secondary' },
        { label: 'Outline', value: 'outline' },
        { label: 'Text', value: 'text' },
        { label: 'Primary (muted)', value: 'primary-muted' },
        { label: 'Secondary (muted)', value: 'secondary-muted' },
        { label: 'Outline (muted)', value: 'outline-muted' },
        { label: 'Text (muted)', value: 'text-muted' },
    ];

    static defaultAttributesSchema = {
        type: 'object',
        default: {
            label: '',
            href: '',
            newTab: false,
            beforeIcon: '',
            afterIcon: '',
            style: '',
        },
    };

    static helpStyle = {
        paddingBottom: '20px',
        fontSize: '12px',
        color: 'rgb(117, 117, 117)',
    }

    get availableStyles() {
        return this.props.styles || ButtonEditorComponent.buttonStyles;
    }

    constructor(props) {
        super(...arguments);

        this.onChange = this.onChange.bind(this);
    }

    onChange(key, value) {
        const newButton = Object.assign({ }, this.props.value);
        newButton[key] = value;
        this.props.onChange(newButton);
    }

    _renderInspector() {
        const helpLabel = wp.element.createElement('label', {
            style: ButtonEditorComponent.helpStyle,
        }, 'This button is controlled by scripting.');

        const hrefControl = wp.element.createElement(wp.components.TextControl, {
            label: 'Link To',
            value: this.props.value.href,
            onChange: (href) => this.onChange('href', href),
        });

        const newTabControl = wp.element.createElement(wp.components.CheckboxControl, {
            label: 'Open in New Tab',
            checked: this.props.value.newTab,
            onChange: (newTab) => this.onChange('newTab', newTab),
        });

        const styleSelectControl = wp.element.createElement(wp.components.SelectControl, {
            label: 'Style',
            value: this.props.value.style,
            options: this.availableStyles,
            onChange: (style) => this.onChange('style', style),
        });

        const controls = [];
        const showHrefOption = this.props.showHrefOption !== undefined ? this.props.showHrefOption : this.props.type !== 'script';
        const showNewTabOption = this.props.showNewTabOption !== undefined ? this.props.showNewTabOption : this.props.type !== 'script';

        if (this.props.type === 'script') {
            controls.push(helpLabel);
        }

        if (showHrefOption) {
            controls.push(hrefControl);
        }
        if (showNewTabOption) {
            controls.push(newTabControl);
        }

        if (this.availableStyles.length >= 2) {
            controls.push(styleSelectControl);
        }

        const buttonInspectorPanel = wp.element.createElement(wp.components.PanelBody, {
            title: 'Button Settings',
            initialOpen: true,
        }, ...controls);

        return wp.element.createElement(wp.blockEditor.InspectorControls, { }, buttonInspectorPanel);
    }

    _renderPreview() {
        const label = wp.element.createElement(wp.blockEditor.RichText, {
            tagName: 'span',
            placeholder: this.props.labelPlaceholder || 'Button Label',
            value: this.props.label || this.props.value.label,
            allowedFormats: [],
            onChange: (label) => this.onChange('label', label),
        });

        const beforeIcon = wp.element.createElement(IconStyleComponent, {
            colours: [], // Editor shouldn't choose any icon colours for icons in buttons
            value: this.props.beforeIcon || this.props.value.beforeIcon,
            onChange: (beforeIcon) => this.onChange('beforeIcon', beforeIcon),
        });
        const afterIcon = wp.element.createElement(IconStyleComponent, {
            colours: [],
            value: this.props.afterIcon || this.props.value.afterIcon,
            onChange: (afterIcon) => this.onChange('afterIcon', afterIcon),
        });

        const fallbackStyle = this.availableStyles[0]?.value;
        const classes = ['button lg', this.props.style || this.props.value.style || fallbackStyle, this.props.className || ''];
        return wp.element.createElement('div', {
            className: classes.join(' '),
            style: { // Minimal CSS changes to look OK in the editor
                display: 'flex',
                width: 'fit-content',
            },
        }, beforeIcon, label, afterIcon);
    }
}

class ImagePickerComponent extends MegaComponent {
    static defaultAttributesSchema = {
        type: 'object',
        default: {
            id: -1,
            url: '',
            altText: '',
        },
    };

    constructor(props) {
        super(...arguments);
        this.props = props;

        this.onChange.bind(this);
        this.onImageChange = this.onImageChange.bind(this);
    }

    get image() { return this.props.image }

    onChange(key, value) {
        const newImage = Object.assign({ }, this.props.value);
        newImage[key] = value;
        this.props.onChange(newImage);
    }

    onImageChange(image) {
        this.props.onChange({
            id: image.id,
            url: image.url,
            altText: image.altText,
        });
    }

    onImageClear = () => {
        this.props.onChange({
            id: -1,
            url: '',
            altText: '',
        });
    }

        _renderInspector() {
            const AltControl = wp.element.createElement(wp.components.TextControl, {
                label: 'Alt text',
                value: this.props.value.altText,
                onChange:  (altText) => this.onChange('altText', altText),
            });
            const imageInspectorPanel = wp.element.createElement(wp.components.PanelBody, {
                title: 'Image Settings',
                initialOpen: true,
            }, this.props.type === 'script' ? '' : AltControl);

            return wp.element.createElement(wp.blockEditor.InspectorControls, { }, imageInspectorPanel);
        }

        _renderPreview() {

        const imagePlaceholder = wp.element.createElement(wp.blockEditor.MediaPlaceholder, {
            icon: 'format-image',
            accept: 'image/*',
            allowedTypes: ['image'],
            value: this.props.value.id,
            onSelect: this.onImageChange,
            onSelectURL: (url) => this.onChange('url', url),
            style: this.props.style,
        });

        const imageEdit = wp.element.createElement(wp.blockEditor.MediaUpload, {
            accept: 'image/*',
            allowedTypes: ['image'],
            value: this.props.value.id,
            onSelect: this.onImageChange,
            render: (obj) => {
                return wp.element.createElement(wp.components.Button, {
                    icon: 'edit',
                    onClick: obj.open,
                });
            },
        });

        const imageClear = wp.element.createElement(wp.components.Button, {
            icon: 'trash',
            onClick: this.onImageClear,
        });

        const imageView = wp.element.createElement('div', {
            className: 'img',
            style: {
                backgroundImage: `url('${this.props.value.url}')`,
                ...this.props.innerStyle || { },
            },
        });

        const imageButtons = wp.element.createElement('div', {
            className: 'img-buttons',
            style: {
                position: 'absolute',
                top: 0,
                right: 0,
                zIndex: 1,
                backgroundColor: '#aaad',
                borderBottomLeftRadius: '10px',
            },
        }, imageEdit, imageClear);

        const imageBox = wp.element.createElement('div', {
            className: 'img-box',
            style: Object.assign({
                position: 'relative',
                border: '1px solid #e2e3e3',
            }, this.props.style),
        }, imageView, imageButtons);

        // Render image if it exists, else an image placeholder.
        return this.props.value.url ? imageBox : imagePlaceholder;
    }
}

class VideoPickerComponent extends wp.element.Component {
    static defaultAttributesSchema = {
        type: 'object',
        default: {
            id: -1,
            url: '',
        },
    };

    constructor(props) {
        super(...arguments);
        this.props = props;

        this.onVideoChange = this.onVideoChange.bind(this);
    }

    get video() { return this.props.video }

    onVideoChange(video) {
        this.props.onChange({
            id: video.id,
            url: video.url,
        });
    }

    onVideoClear = () => {
        this.props.onChange({
            id: -1,
            url: '',
        });
    }

    render() {
        const videoPlaceholder = wp.element.createElement(wp.blockEditor.MediaPlaceholder, {
            icon: 'format-video',
            accept: 'video/*',
            allowedTypes: ['video'],
            value: this.props.value.id,
            onSelect: this.onVideoChange,
            style: this.props.style,
        });

        const videoEdit = wp.element.createElement(wp.blockEditor.MediaUpload, {
            accept: 'video/*',
            allowedTypes: ['video'],
            value: this.props.value.id,
            onSelect: this.onVideoChange,
            render: (obj) => {
                return wp.element.createElement(wp.components.Button, {
                    icon: 'edit',
                    onClick: obj.open,
                });
            },
        });

        const videoClear = wp.element.createElement(wp.components.Button, {
            icon: 'trash',
            onClick: this.onVideoClear,
        });

        const videoView = wp.element.createElement('video', {
            className: 'video',
            controls: true,
            src: this.props.value.url,
        });

        const videoButtons = wp.element.createElement('div', {
            className: 'video-buttons',
            style: {
                position: 'absolute',
                top: 0,
                right: 0,
                zIndex: 1,
                backgroundColor: '#aaad',
                borderBottomLeftRadius: '10px',
            },
        }, videoEdit, videoClear);

        const videoBox = wp.element.createElement('figure', {
            className: 'video-box',
            style: Object.assign({
                position: 'relative',
                border: '1px solid #e2e3e3',
            }, this.props.style),
        }, videoView, videoButtons);

        // Render video if it exists, else a video placeholder.
        return this.props.value.url ? videoBox : videoPlaceholder;
    }
}

class ThemedVideoPickerComponent extends wp.element.Component {
    static defaultAttributesSchema = {
        type: 'object',
        default: {
            light: VideoPickerComponent.defaultAttributesSchema.default,
            dark: VideoPickerComponent.defaultAttributesSchema.default,
            safariLight: VideoPickerComponent.defaultAttributesSchema.default,
            safariDark: VideoPickerComponent.defaultAttributesSchema.default,
        },
    };

    constructor(props) {
        super(...arguments);
        this.props = props;

        this.onChange = this.onChange.bind(this);
    }

    onChange(key, value) {
        const newThing = Object.assign({ }, this.props.value);
        newThing[key] = value;
        this.props.onChange(newThing);
    }

    render() {
        const lightLabel = wp.element.createElement(wp.components.BaseControl, {
            help: 'Light mode:',
        });
        const lightVideo = wp.element.createElement(VideoPickerComponent, {
            value: this.props.value.light,
            onChange: (light) => this.onChange('light', light),
        });

        const darkLabel = wp.element.createElement(wp.components.BaseControl, {
            help: 'Dark mode:',
        });
        const darkVideo = wp.element.createElement(VideoPickerComponent, {
            value: this.props.value.dark,
            onChange: (dark) => this.onChange('dark', dark),
        });
        const safariLightVideoLabel = wp.element.createElement(wp.components.BaseControl, {
            help: 'Light mode image for Safari browser',
        });
        const safariLightVideo = wp.element.createElement(VideoPickerComponent, {
            value: this.props.value.safariLight,
            onChange: (safariLight) => this.onChange('safariLight', safariLight),
        });
        const safariDarkVideoLabel = wp.element.createElement(wp.components.BaseControl, {
            help: 'Dark mode image for Safari browser',
        });
        const safariDarkVideo = wp.element.createElement(VideoPickerComponent, {
            value: this.props.value.safariDark,
            onChange: (safariDark) => this.onChange('safariDark', safariDark),
        });

        return wp.element.createElement('div', this.props, lightLabel, lightVideo, darkLabel, darkVideo,
            safariLightVideoLabel, safariLightVideo, safariDarkVideoLabel, safariDarkVideo);
    }
}

class InspectorKvp extends wp.element.Component {
    static kvpStyle = {
        display: 'flex',
        flexDirection: 'column',
        border: '1px solid #efefef',
        marginBottom: '8px',
        padding: '4px',
    };

    static labelInputWrapperStyle = {
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'space-between',
        gap: '8px',
    };

    static labelStyle = {
        flexShrink: 0,
        fontSize: '13px',
    };

    render() {
        const keyLabel = wp.element.createElement('label', {
            style: InspectorKvp.labelStyle,
        }, this.props.keyLabel || 'Key');

        const keyControl = wp.element.createElement(wp.components.TextControl, {
            value: this.props.value.key,
            onChange: (key) => this.props.onChange({ ...this.props.value, key }),
        });

        const keyInputGroup = wp.element.createElement('div', {
            style: InspectorKvp.labelInputWrapperStyle,
        }, keyLabel, keyControl);

        const nonUniqueErrorMsg = wp.element.createElement('p', {
            className: 'error',
            style: {
                marginBottom: '8px',
                textAlign: 'right',
                color: 'red',
            },
        }, 'Key must be unique');

        const keyInputField = wp.element.createElement(wp.element.Fragment, null,
                keyInputGroup, this.props.showNonUniqueError ? nonUniqueErrorMsg : '');

        const valueLabel = wp.element.createElement('label', {
            style: InspectorKvp.labelStyle,
        }, this.props.valueLabel || 'Value');

        const valueControl = wp.element.createElement(wp.components.TextControl, {
            value: this.props.value.value,
            onChange: (value) => this.props.onChange({ ...this.props.value, value }),
        });

        const valueInputGroup = wp.element.createElement('div', {
            style: InspectorKvp.labelInputWrapperStyle,
        }, valueLabel, valueControl);

        const removeControl = wp.element.createElement(wp.components.Button, {
            isDestructive: true,
            onClick: () => this.props.onRemove(),
            style: {
                width: 'fit-content',
                alignSelf: 'end',
            }
        }, 'Remove');

        return wp.element.createElement('div', {
            style: InspectorKvp.kvpStyle,
        }, keyInputField, valueInputGroup, removeControl);
    }
}

class InspectorKvpComponent extends wp.element.Component {
    static defaultAttributesSchema = { type: 'array', default: [] }

    static helpStyle = {
        fontSize: '13px',
        color: 'rgb(117, 117, 117)',
        marginBottom: '8px',
    };

    props;
    state = { };

    constructor(props) {
        super(...arguments);

        this.onChange = this.onChange.bind(this);
        this.updateKvp = this.updateKvp.bind(this);
        this.removeKvp = this.removeKvp.bind(this);
    }

    onChange(kvps) {
        this.props.onChange(kvps);
    }

    addKvp(key, value) {
        const kvps = [...this.props.value, { key: key, value: value }];

        this.onChange(kvps);
    }

    removeKvp(i) {
        this.props.value.splice(i, 1);

        this.onChange(this.props.value);
    }

    updateKvp(i, kvp) {
        if (this.props.uniqueKeys) {
            const foundI = this.props.value.findIndex(testKvp => testKvp.key === kvp.key);
            if (foundI !== -1 && foundI !== i) {
                // Key was changed to one that already exists, when unique keys are wanted
                this.setState({...this.state, nonUniqueKey: i });
                return;
            }
            else {
                this.setState({ ...this.state, nonUniqueKey: _ });
            }
        }

        this.props.value[i] = kvp;

        this.onChange(this.props.value);
    }

    render() {
        const helpControl = wp.element.createElement('p', {
            style: InspectorKvpComponent.helpStyle,
        }, this.props.help || '');

        const kvpControls = [];
        for (let i = 0; i < this.props.value.length; i++) {
            const kvp = this.props.value[i];
            const kvpControl = wp.element.createElement(InspectorKvp, {
                value: kvp,
                keyLabel: this.props.keyLabel,
                valueLabel: this.props.valueLabel,
                onChange: (kvp) => this.updateKvp(i, kvp),
                onRemove: () => this.removeKvp(i),
                showNonUniqueError: this.props.uniqueKeys && i === this.state.nonUniqueKey,
            });

            kvpControls.push(kvpControl);
        }

        const kvpsFragment = wp.element.createElement(wp.components.PanelBody, {
            title: this.props.title || 'Key-value pairs',
            initialOpen: false,
        }, this.props.help ? helpControl : '', ...kvpControls, this._renderAddKvpControl());

        return kvpsFragment;
    }

    _renderAddKvpControl() {
        const newKey = this.state.newKey;
        const newValue = this.state.newValue;

        const newKvpHelpLabel = wp.element.createElement('span', {
            style: InspectorKvpComponent.helpStyle,
        }, this.props.newKvpHelp || 'Add a new key-value pair.');

        const newKeyLabel = wp.element.createElement('label', {
            style: InspectorKvp.labelStyle,
        }, this.props.keyLabel || 'Key');

        const newKeyControl = wp.element.createElement(wp.components.TextControl, {
            value: newKey,
            onChange: (newKey) => this.setState({ newKey }),
        });

        const newKeyInputGroup = wp.element.createElement('div', {
            style: InspectorKvp.labelInputWrapperStyle,
        }, newKeyLabel, newKeyControl);

        const newValueLabel = wp.element.createElement('label', {
            style: InspectorKvp.labelStyle,
        }, this.props.valueLabel || 'Value');

        const newValueControl = wp.element.createElement(wp.components.TextControl, {
            value: newValue,
            onChange: (newValue) => this.setState({ newValue }),
        });

        const newValueInputGroup = wp.element.createElement('div', {
            style: InspectorKvp.labelInputWrapperStyle,
        }, newValueLabel, newValueControl);

        const newKvpAddControl = wp.element.createElement(wp.components.Button, {
            isSecondary: true,
            onClick: () => {
                this.addKvp(newKey, newValue);
                this.setState({
                    newKey: '',
                    newValue: '',
                });
            },
            style: {
                width: 'fit-content',
                alignSelf: 'end',
            },
            disabled: !newKey || !newValue || (this.props.uniqueKeys && this.props.value.find(kvp => kvp.key === newKey)),
        }, 'Add');

        return wp.element.createElement('div', {
            style: {
                display: 'flex',
                flexDirection: 'column',
                marginTop: '16px',
                paddingTop: '8px',
                borderTop: '1px solid #ddd',
            },
        }, newKvpHelpLabel, newKeyInputGroup, newValueInputGroup, newKvpAddControl);
    }
}

class FormTextComponent extends MegaComponent {
    static defaultAttributesSchema = {
        type: 'object',
        default: {
            label: '',
            placeholder: '',
            isOptional: false,
            errors: { },
        },
    };

    constructor(props) {
        super(...arguments);

        this.onChange = this.onChange.bind(this);
    }

    onChange(value) {
        this.props.onChange({ ...this.props.value, ...value });
    }

    _renderInspector() {
        const isOptionalControl = wp.element.createElement(wp.components.CheckboxControl, {
            label: 'Is optional',
            help: 'Select whether filling the field is optional.',
            checked: this.props.value.isOptional || false,
            onChange: (isOptional) => this.onChange({ isOptional }),
        });

        let errors = {
            tooShort: {
                label: 'Too short error message',
                help: 'Provide an error message to display when the user\'s input is too short.',
            },
        };

        if (this.props.type === 'email') {
            errors.invalidEmail = {
                label: 'Invalid email error message',
                help: 'Provide an error message to display when the user\'s provided email address is invalid.',
            }
        }

        errors = { ...errors, ...this.props.extraErrors || { } };

        const errorControls = [];
        for (const [key, details] of Object.entries(errors)) {
            errorControls.push(wp.element.createElement(wp.components.TextControl, {
                label: details.label || '',
                help: details.help || '',
                value: this.props.value.errors[key] || '',
                onChange: (errorMsg) => this.onChange({ errors: { ...this.props.value.errors, [key]: errorMsg } }),
            }));
        }

        const inspectorPanel = wp.element.createElement(wp.components.PanelBody, {
            title: 'Text Input Form Field Settings',
            initialOpen: true,
        }, isOptionalControl, ...errorControls);

        return wp.element.createElement(wp.blockEditor.InspectorControls, { }, inspectorPanel);
    }

    _renderPreview() {
        const fieldLabelControl = wp.element.createElement(wp.blockEditor.RichText, {
            tagName: 'label',
            placeholder: 'Text input form field label',
            allowedFormats: [],
            value: this.props.label || this.props.value.label,
            onChange: (label) => this.onChange({ label }),
        });

        const textInputControl = wp.element.createElement(wp.components.TextControl, {
            className: 'm-text lg',
            placeholder: 'Placeholder text',
            value: this.props.placeholder || this.props.value.placeholder,
            onChange: (placeholder) => this.onChange({ placeholder }),
        });

        return wp.element.createElement('div', { className: 'field' }, fieldLabelControl, textInputControl);
    }
}

class FormTextareaComponent extends FormTextComponent {
    _renderPreview() {
        const fieldLabelControl = wp.element.createElement(wp.blockEditor.RichText, {
            tagName: 'label',
            placeholder: 'Text input form field label',
            allowedFormats: [],
            value: this.props.label || this.props.value.label,
            onChange: (label) => this.onChange({ label }),
        });

        const textareaControl = wp.element.createElement(wp.components.TextareaControl, {
            className: 'm-textarea lg',
            placeholder: 'Placeholder text',
            value: this.props.placeholder || this.props.value.placeholder,
            onChange: (placeholder) => this.onChange({ placeholder }),
        });

        return wp.element.createElement('div', { className: 'field' }, fieldLabelControl, textareaControl);
    }
}

class FormDropdownComponent extends MegaComponent {
    static defaultAttributesSchema = {
        type: 'object',
        default: {
            label: '',
            options: [],
            errors: { },
        },
    };

    constructor(props) {
        super(...arguments);

        this.onChange = this.onChange.bind(this);
    }

    onChange(value) {
        this.props.onChange({ ...this.props.value, ...value });
    }

    _renderInspector() {
        const optionsControl = wp.element.createElement(InspectorKvpComponent, {
            title: 'Dropdown Options',
            keyLabel: 'Option Value',
            valueLabel: 'Option Label',
            newKvpHelp: 'Add a dropdown option.',
            value: this.props.value.options.map(option => ({ key: option.value, value: option.label })),
            onChange: (kvps) => this.onChange({ options: kvps.map(kvp => ({ value: kvp.key, label: kvp.value })) }),
        });

        const errorMsgControl = wp.element.createElement(wp.components.TextControl, {
            label: 'No value error message',
            help: 'Provide an error message to display when the user hasn\'t selected an option.',
            value: this.props.value.errors.noValue || '',
            onChange: (errorMsg) => this.onChange({ errors: { ...this.props.value.errors, noValue: errorMsg } }),
        });

        const inspectorPanel = wp.element.createElement(wp.components.PanelBody, {
            title: 'Dropdown Form Field Settings',
            initialOpen: true,
        }, optionsControl, errorMsgControl);

        return wp.element.createElement(wp.blockEditor.InspectorControls, { }, inspectorPanel);
    }

    _renderPreview() {
        const fieldLabelControl = wp.element.createElement(wp.blockEditor.RichText, {
            tagName: 'label',
            placeholder: 'Dropdown form field label',
            allowedFormats: [],
            value: this.props.label || this.props.value.label,
            onChange: (label) => this.onChange({ label }),
        });

        const dropdownControl = wp.element.createElement(wp.components.SelectControl, {
            className: 'dropdown lg',
            options: this.props.options || this.props.value.options || [
                { label: 'Please select' },
            ],
        });

        return wp.element.createElement('div', { className: 'field' }, fieldLabelControl, dropdownControl);
    }
}

class FormRadioComponent extends MegaComponent {
    static defaultAttributesSchema = {
        type: 'object',
        default: {
            label: '',
            options: [],
            errors: { },
            hasCustom: false,
            customKey: '',
        },
    };

    constructor(props) {
        super(...arguments);

        this.onChange = this.onChange.bind(this);
    }

    onChange(value) {
        this.props.onChange({ ...this.props.value, ...value });
    }

    _renderInspector() {
        const optionsControl = wp.element.createElement(InspectorKvpComponent, {
            title: 'Radio Options',
            keyLabel: 'Option Value',
            valueLabel: 'Option Label',
            help: this.props.optionsHelp || '',
            newKvpHelp: 'Add a radio option.',
            value: this.props.value.options.map(option => ({ key: option.value, value: option.label })),
            onChange: (kvps) => this.onChange({ options: kvps.map(kvp => ({ value: kvp.key, label: kvp.value })) }),
        });

        const hasCustomControl = wp.element.createElement(wp.components.CheckboxControl, {
            label: 'Has custom field',
            help: 'Enable if one of the radio options should provide a text input for a user-chosen value when selected.',
            checked: this.props.value.hasCustom,
            onChange: (hasCustom) => this.onChange({ hasCustom }),
        });

        const customKeyControl = wp.element.createElement(wp.components.TextControl, {
            label: 'Custom option identifier',
            help: 'Provide the option\'s identifying value.',
            value: this.props.value.customKey,
            onChange: (customKey) => this.onChange({ customKey }),
        });

        const customTsErrorMsgControl = wp.element.createElement(wp.components.TextControl, {
            label: 'Too short error message for custom input',
            help: 'Provide an error message to display when the user has selected a custom-type option but the input is too short.',
            value: this.props.value.errors.customTooShort || '',
            onChange: (errorMsg) => this.onChange({ errors: { ...this.props.value.errors, customTooShort: errorMsg } }),
        });

        const customControls = wp.element.createElement(wp.element.Fragment, null, customKeyControl, customTsErrorMsgControl);

        const errorMsgControl = wp.element.createElement(wp.components.TextControl, {
            label: 'No value error message',
            help: 'Provide an error message to display when the user hasn\'t selected an option.',
            value: this.props.value.errors.noValue || '',
            onChange: (errorMsg) => this.onChange({ errors: { ...this.props.value.errors, noValue: errorMsg } }),
        });

        const inspectorPanel = wp.element.createElement(wp.components.PanelBody, {
            title: 'Radio Form Field Settings',
            initialOpen: true,
        }, optionsControl, hasCustomControl, this.props.value.hasCustom ? customControls : '', errorMsgControl);

        return wp.element.createElement(wp.blockEditor.InspectorControls, { }, inspectorPanel);
    }

    _renderPreview() {
        const fieldLabelControl = wp.element.createElement(wp.blockEditor.RichText, {
            tagName: 'label',
            placeholder: 'Radio form field label',
            value: this.props.label || this.props.value.label,
            allowedFormats: [],
            onChange: (label) => this.onChange({ label }),
        });

        return wp.element.createElement('div', { className: 'field' }, fieldLabelControl);
    }
}

class AgreeCheckboxComponent extends MegaComponent {
    static defaultAttributesSchema = {
        type: 'object',
        default: {
            label: '',
            errors: { },
        },
    };

    onChange(value) {
        this.props.onChange({ ...this.props.value, ...value });
    }

    _renderInspector() {
        const errorMsgControl = wp.element.createElement(wp.components.TextControl, {
            label: 'Not checked error message',
            help: 'Provide an error message to display when the user hasn\'t yet agreed.',
            value: this.props.value.errors.notChecked || '',
            onChange: (errorMsg) => this.onChange({ errors: { ...this.props.value.errors, notChecked: errorMsg } }),
        });

        const inspectorPanel = wp.element.createElement(wp.components.PanelBody, {
            title: 'Agree Checkbox Form Field Settings',
            help: 'Provide a label or description (like a T&C) for a checkbox that must be ticked in order for the form to successfully validate.',
            initialOpen: true,
        }, errorMsgControl);

        return wp.element.createElement(wp.blockEditor.InspectorControls, { }, inspectorPanel);
    }

    _renderPreview() {
        const agreeControl = wp.element.createElement(wp.components.CheckboxControl);

        const agreeLabelControl = wp.element.createElement(wp.blockEditor.RichText, {
            tagName: 'label',
            placeholder: 'Label or description for an agreement checkbox that must be checked to proceed.',
            value: this.props.value.label,
            onChange: (label) => this.onChange({ label }),
        });

        const disabledInput = wp.element.createElement(wp.components.Disabled, { },
            agreeControl,
        );

        const inputControl = wp.element.createElement('div', {
            className: 'checkbox-component'
        }, disabledInput, agreeLabelControl);

        return wp.element.createElement('div', { className: 'field' }, inputControl);
    }
}

class CodeInputComponent extends MegaComponent {
    static defaultAttributesSchema = {
        type: 'object',
        default: {
            label: '',
            errors: { },
        },
    };

    onChange(value) {
        this.props.onChange({ ...this.props.value, ...value });
    }

    _renderInspector() {
        const errorMsgControl = wp.element.createElement(wp.components.TextControl, {
            label: 'Not complete error message',
            help: 'Provide an error message to display when the code input fields aren\'t completely filled.',
            value: this.props.value.errors.notComplete || '',
            onChange: (errorMsg) => this.onChange({ errors: { ...this.props.value.errors, notComplete: errorMsg } }),
        });

        const inspectorPanel = wp.element.createElement(wp.components.PanelBody, {
            title: 'Code Input Form Field Settings',
            initialOpen: true,
        }, errorMsgControl);

        return wp.element.createElement(wp.blockEditor.InspectorControls, { }, inspectorPanel);
    }

    _renderPreview() {
        const fieldLabelControl = wp.element.createElement(wp.blockEditor.RichText, {
            tagName: 'label',
            placeholder: 'Code input form field label',
            allowedFormats: [],
            value: this.props.label || this.props.value.label,
            onChange: (label) => this.onChange({ label }),
        });

        const codeCharInputControl = wp.element.createElement(wp.components.TextControl, {
            className: 'code-input-char',
        });

        const codeInputControl = wp.element.createElement('div', {
            className: 'code-input',
        }, ...Array(this.props.size || 4).fill(codeCharInputControl));

        return wp.element.createElement('div', { className: 'field' }, fieldLabelControl, codeInputControl);
    }
}

class ToastComponent extends MegaComponent {
    static defaultAttributesSchema = {
        type: 'object',
        default: {
            icon: '',
            message: '',
        },
    };

    constructor(props) {
        super(...arguments);

        this.onChange = this.onChange.bind(this);
    }

    onChange(value) {
        this.props.onChange({ ...this.props.value, ...value });
    }

    _renderPreview() {
        const iconControl = wp.element.createElement(IconStyleComponent, {
            className: 'toast-icon',
            colours: [], // Editor shouldn't choose any icon colours for icons in toast notifications
            value: this.props.icon || this.props.value.icon,
            onChange: (icon) => this.onChange({ icon }),
        });

        const messageControl = wp.element.createElement(wp.blockEditor.RichText, {
            tagName: 'span',
            className: 'message',
            placeholder: this.props.messagePlaceholder || 'Toast notification message',
            value: this.props.message || this.props.value.message,
            onChange: (message) => this.onChange({ message }),
        });

        const contentElement = wp.element.createElement('div', {
            className: 'content',
        }, iconControl, messageControl);

        const closeButtonControl = wp.element.createElement(IconStyleComponent, {
            colours: [],
            styles: ['x-mro'],
            value: 'x-mro',
        });

        return wp.element.createElement('div', {
            className: 'toast',
        }, contentElement, closeButtonControl);
    }
}

class ModalComponent extends MegaComponent {
    static defaultAttributesSchema = {
        type: 'object',
        default: {
            title: '',
            imageryType: '',
            // icon: '', // TODO stub
            image: ImagePickerComponent.defaultAttributesSchema.default,
            blurb: '',
            buttonPrimary: ButtonEditorComponent.defaultAttributesSchema.default,
            buttonSecondary: ButtonEditorComponent.defaultAttributesSchema.default,
        },
    }

    constructor(props) {
        super(...arguments);

        this.onChange = this.onChange.bind(this);
    }

    onChange(value) {
        this.props.onChange({ ...this.props.value, ...value });
    }

    _renderInspector() {
        const imageryType = wp.element.createElement(wp.components.RadioControl, {
            label: 'Imagery type',
            selected: this.props.value.imageryType,
            options: [
                { label: 'None', value: '' },
                // { label: 'Icon', value: 'icon' }, // TODO stub
                { label: 'Image', value: 'image' },
            ],
            onChange: (imageryType) => this.onChange({ imageryType }),
        });

        const inspectorPanel = wp.element.createElement(wp.components.PanelBody, {
            title: 'Message modal settings',
            initialOpen: true,
        }, imageryType);

        return wp.element.createElement(wp.blockEditor.InspectorControls, { }, inspectorPanel);
    }

    _renderPreview() {
        const image = wp.element.createElement(ImagePickerComponent, {
            value: this.props.value.image,
            onChange: (image) => this.onChange({ image }),
        });

        const title = wp.element.createElement(wp.blockEditor.RichText, {
            tagName: 'h5',
            className: 'heading',
            placeholder: 'Message modal title',
            value: this.props.value.title,
            onChange: (title) => this.onChange({ title }),
        });

        const blurb = wp.element.createElement(wp.blockEditor.RichText, {
            tagName: 'p',
            className: 'blurb',
            placeholder: 'Blurb text or description for this message modal.',
            value: this.props.value.blurb,
            onChange: (blurb) => this.onChange({ blurb }),
        });

        const content = wp.element.createElement('div', { className: 'content' }, blurb);

        const primaryButton = wp.element.createElement(ButtonEditorComponent, {
            value: this.props.value.buttonPrimary,
            onChange: (buttonPrimary) => this.onChange({ buttonPrimary }),
        });

        const secondaryButton = wp.element.createElement(ButtonEditorComponent, {
            value: this.props.value.buttonSecondary,
            onChange: (buttonSecondary) => this.onChange({ buttonSecondary }),
        });

        const buttons = wp.element.createElement('div', {
            className: 'buttons'
        }, primaryButton, secondaryButton);

        return wp.element.createElement('div', {
            className: 'm-modal',
            style: {
                border: '1px solid var(--color-grey-200)',
            },
        }, title, this.props.value.imageryType === 'image' ? image : '', content, buttons);
    }
}

/**
 * Frontend scripting for the plan pricing calculator module.
 */

class PlanPricingCalculator {
    $pricingCalculator;

    $estimatePriceValue;
    $errorMessage;

    isBusinessSlider;

    planPrice;
    extraStoragePrice;
    extraUserPrice;
    currency;

    initEstimatePrice;

    constructor(element) {
        this.element = element;

        this.$pricingCalculator = $(element);
        this.$estimatePrice = $('.estimate-price', this.$pricingCalculator);
        this.$estimatePriceValue = $('.estimate-price .cost .value', this.$pricingCalculator);
        this.$errorMessage = $('.error-message', this.$pricingCalculator);

        $('.flexi-slider', this.$pricingCalculator).each((i, element) => {
            const $flexiSlider = $(element);
            this.isBusinessSlider = $flexiSlider.attr('id') === 'number-of-users';
            const inputBoxValue = $(`.slider-input#${$flexiSlider.attr('id')}`, this.$pricingCalculator).val();

            this.adjustFlexiSliderTooltipPosition($flexiSlider, inputBoxValue);
        });

        Reactor.addEventListener('breakpoint-changed',(newBreakpoint) => {
            this.$errorMessage.toggleClass('mobile', !newBreakpoint.gteq(Breakpoint.LG));
        });

        $('.flexi-slider', this.$pricingCalculator).on('input', (e) => {
            const $currentSlider = $(e.target, this.$pricingCalculator);
            const sliderValue = $currentSlider.val();
            $currentSlider.attr('value', sliderValue);
            const sliderId = $currentSlider.attr('id');
            this.isBusinessSlider = sliderId === 'number-of-users';

            this.setSliderValue($currentSlider, sliderValue);
        });

        $('.slider-input', this.$pricingCalculator).on('change', (e) => {
            const currentInputBox = $(e.target, this.$pricingCalculator);
            let inputBoxValue = currentInputBox.val();

            const sliderId = currentInputBox.attr('id');
            this.isBusinessSlider = sliderId === 'number-of-users';

            const $flexiSlider = $(`.${sliderId}.flexi-slider`, this.$pricingCalculator);
            $flexiSlider.attr('value', inputBoxValue);
            this.setSliderThumb($flexiSlider, currentInputBox, inputBoxValue);
            this.calculateMonthlyEstimatePrice();
        });
    }

    setSliderValue($currentSlider, sliderValue) {
        // marks = array of range slider marks [min, 2nd, 3rd, max]
        const marks = this.isBusinessSlider ? [3, 75, 150, 300] : [3, 100, 1000, 10000];
        // sliderMidpoints = array of range slider marks [2nd, 3rd]
        const sliderMidpoints = this.isBusinessSlider ? [30, 64] : [50, 75];
        // divisors = what to multiply the sliderValue by to get the true input box value
        const divisors = this.isBusinessSlider ? [2.4, 2.27, 4.26] : [1.94, 37.5, 375];

        if (this.isBusinessSlider) {
            this.$errorMessage.toggleClass('hidden', true);
        }

        let value = 3;
        if (sliderValue == 0) {
            value = 3;
        }
        else if (sliderValue > 0 && sliderValue <= sliderMidpoints[0]) {
            value = Math.ceil((sliderValue * divisors[0]) + marks[0]);
        }
        else if (sliderValue == (sliderMidpoints[0] + 1)) {
            value = (marks[1] + 1);
        }
        else if (sliderValue > (sliderMidpoints[0] + 1) && sliderValue <= (sliderMidpoints[1])) {
            value = Math.ceil((sliderValue - (sliderMidpoints[0] + 1)) * divisors[1]) + marks[1];
        }
        else if (sliderValue == (sliderMidpoints[1] + 1)) {
            value = (marks[2] + 1);
        }
        else if (sliderValue > (sliderMidpoints[1] + 1) && sliderValue < 100) {
            value = Math.ceil((sliderValue - (sliderMidpoints[1] + 1)) * divisors[2]) + (marks[2]);
        }
        else if (sliderValue == 100) {
            value = marks[3];
        }

        if (document.documentElement.dir === 'rtl') {
            $currentSlider.css('background',
                `linear-gradient(to left,
                var(--color-secondary-cobalt-900) ${sliderValue}%,
                var(--color-grey-150) ${sliderValue}% 100%)`
            );
        }
        else {
            $currentSlider.css('background',
                `linear-gradient(to right,
                var(--color-secondary-cobalt-900) ${sliderValue}%,
                var(--color-grey-150) ${sliderValue}% 100%)`
            );
        }

        $(`.${$currentSlider.attr('id')}.slider .slider-input`, this.$pricingCalculator).val(value);

        this.adjustFlexiSliderTooltipPosition($currentSlider, value);
        this.calculateMonthlyEstimatePrice();
    }

    setSliderThumb($flexiSlider, currentInputBox, inputBoxValue) {
        let sliderValue = 0;

        // marks = array of range slider marks [min, 2nd, 3rd, max]
        const marks = this.isBusinessSlider ? [3, 75, 150, 300] : [3, 100, 1000, 10000];
        // sliderMidpoints = array of range slider marks [2nd, 3rd]
        const sliderMidpoints = this.isBusinessSlider ? [30, 64] : [50, 75];
        // divisors = what to divide the (inputBoxValue - marks) by to get the true slider value %
        const divisors = this.isBusinessSlider ? [2.4, 2.27, 4.26] : [1.94, 37.5, 375];

        if (this.isBusinessSlider) {
            this.$errorMessage.toggleClass('hidden', true);
        }

        if (inputBoxValue <= marks[0]) {
            sliderValue = 0;
            currentInputBox.val(marks[0]);
            inputBoxValue = marks[0];
        }
        else if (inputBoxValue > marks[0] && inputBoxValue <= marks[1]) {
            sliderValue = Math.floor((inputBoxValue - marks[0]) / divisors[0]);
        }
        else if (inputBoxValue == (marks[1] + 1)) {
            sliderValue = (sliderMidpoints[0] + 1);
        }
        else if (inputBoxValue > (marks[1] + 1) && inputBoxValue <= marks[2]) {
            sliderValue = Math.floor((inputBoxValue - marks[1]) / divisors[1]) + (sliderMidpoints[0] + 1);
        }
        else if (inputBoxValue == (marks[2] + 1)) {
            sliderValue = (sliderMidpoints[1] + 1);
        }
        else if (inputBoxValue > (marks[2] + 1) && inputBoxValue <= marks[3]) {
            sliderValue = Math.floor((inputBoxValue - marks[2]) / divisors[2]) + (sliderMidpoints[1] + 1);
        }
        else if (inputBoxValue > marks[3]) {
            if (this.isBusinessSlider) {
                this.$errorMessage.toggleClass('hidden', false);
            }

            sliderValue = 100;
            currentInputBox.val(marks[3]);
            inputBoxValue = marks[3];
        }

        if (document.documentElement.dir === 'rtl') {
            $flexiSlider.css('background',
                `linear-gradient(to left,
                var(--color-secondary-cobalt-900) ${sliderValue}%,
                var(--color-grey-150) ${sliderValue}% 100%)`
            );
        }
        else {
            $flexiSlider.css('background',
                `linear-gradient(to right,
                var(--color-secondary-cobalt-900) ${sliderValue}%,
                var(--color-grey-150) ${sliderValue}% 100%)`
            );
        }

        $flexiSlider.val(sliderValue);

        this.adjustFlexiSliderTooltipPosition($flexiSlider, inputBoxValue);
    }

    // Adjust the position of the tooltip for the given flexi slider relative to
    // the position of the slider's track thumb (circle)
    adjustFlexiSliderTooltipPosition($currentInputBox, value) {
        const minVal = $currentInputBox.attr('min');
        const maxVal = $currentInputBox.attr('max');
        const currentValue = $currentInputBox.val();

        const newValue = ((currentValue - minVal) * 100) / (maxVal - minVal);

        const currentInputBoxId = $currentInputBox.attr('id');

        const $currentSlider = $(`.${currentInputBoxId}.slider`, this.$pricingCalculator);
        const $rangeSliderTooltip = $currentInputBox.next();
        const $rangeSliderValueAndUnits = $('.value-and-units', $currentSlider);

        if (this.isBusinessSlider) {
            $('.tb-unit', $rangeSliderValueAndUnits).toggleClass('hidden', true);
            $('.pb-unit', $rangeSliderValueAndUnits).toggleClass('hidden', true);
        }
        else {
            const petabytes = (value >= 1000);
            if (petabytes) {
                value = Math.floor(value / 1000);
            }

            $('.tb-unit', $rangeSliderValueAndUnits).toggleClass('hidden', petabytes);
            $('.pb-unit', $rangeSliderValueAndUnits).toggleClass('hidden', !petabytes);
        }

        $('.number-value', $rangeSliderValueAndUnits).text(value);

        if (document.documentElement.dir === 'rtl') {
            const newPosition = -15 - (newValue * 0.3);
            $rangeSliderTooltip.css('right', `calc(${newValue}% + (${newPosition}px))`);
        }
        else {
            const newPosition = 15 - (newValue * 0.3);
            $rangeSliderTooltip.css('left', `calc(${newValue}% + (${newPosition}px))`);
        }
    }

    calculateMonthlyEstimatePrice() {
        const currencyIsNotEuros = this.currency !== 'EUR';
        const currency = currencyIsNotEuros ? 'local' : 'euro';

        const $storageSlider = $('.storage.slider', this.$pricingCalculator);
        const $transferSlider = $('.transfer.slider', this.$pricingCalculator);
        const $numOfUsersSlider = $('.number-of-users.slider', this.$pricingCalculator);

        const largestStorageTransferSliderValue = Math.max(
            $('.slider-input', $transferSlider).val(), $('.slider-input', $storageSlider).val());
        const extraStoragePrice = this.extraStoragePrice * (largestStorageTransferSliderValue - 3);

        const businessSliderValue = $('.slider-input', $numOfUsersSlider).val() || 0;
        const extraUsersPrice = this.extraUserPrice * (businessSliderValue - 3);

        this.initEstimatePrice = this.planPrice + extraStoragePrice + extraUsersPrice;
        const formattedEstimatePrice = CurrencyLocalizer.formatPrice(this.initEstimatePrice, this.currency, 'narrowSymbol');

        const $prices = $('.price', this.$estimatePrice);
        const $visiblePrice = $(`.price.${currency}`, this.$estimatePrice);

        $prices.addClass('hidden');
        $visiblePrice.removeClass('hidden');

        $('.value', $visiblePrice).text(formattedEstimatePrice);

        // Only replace placeholder if currency is defined
        if (this.currency) {
            const $localPrice = $('.price.local', this.$estimatePrice);
            const $localPriceUnits = $('.units', $localPrice);

            const priceUnitsText = currencyIsNotEuros ? this.currency : '';
            $localPriceUnits.text($localPriceUnits.text().replace('%1', priceUnitsText));
        }

        if ($visiblePrice[0]) {
            TextScaler.instance.scale($visiblePrice[0].querySelector('.cost'));
        }

        this.element.classList.remove('loading');
    }
}

/**
 * Frontend scripting for the pro flexi pricing module.
 */

class ProFlexiBusinessPricing {
    constructor(element) {
        this.element = element;

        this.planNumber = parseInt(this.element.dataset.planNumber);
        this.card = new ProFlexiBusinessPricingCard(this.element.querySelector('.plan-card'));
        this.calculator = new PlanPricingCalculator(this.element.querySelector('.pricing-calculator'));
        this.footnote = this.element.querySelector('.footnote');

        this.selectedCurrency = L10n.currency;
        L10n.onCurrencyPrefChanged.addListener((newCurrency) => {
            this.selectedCurrency = newCurrency;
            this.card.setDisplayMode(newCurrency === L10n.currency);
            this.initCalculator();
            this.footnote.classList.toggle('hidden', newCurrency === L10n.currency);
        });

        this.init();
    }

    async init() {
        const allPlans = await Plans.instance.get();
        this.plan = allPlans.find((plan => plan.accountLevel === this.planNumber && plan.months === BillingPeriod.Monthly));
        if (!this.plan) {
            console.warn('[ProFlexiBusinessPricing] Plan unexpectedly missing.');
            this.element.classList.add('hidden');
            return;
        }

        this.card.setPlan(this.plan);
        this.card.setDisplayMode(this.selectedCurrency === L10n.currency);

        this.element.classList.remove('loading');

        this.initCalculator();
    }

    initCalculator() {
        if (!this.plan) return;

        const plan = this.plan;
        const calculator = this.calculator;

        calculator.currency = this.selectedCurrency;
        const isLocalCurrency = calculator.currency !== L10n.currency;

        if (plan instanceof ProFlexiPlan) {
            calculator.planPrice = isLocalCurrency ? plan.base.localPrice : plan.base.price;
            calculator.extraStoragePrice = isLocalCurrency ? plan.extra.storageLocalPrice : plan.extra.storagePrice;
            calculator.extraUserPrice = 0;
            calculator.calculateMonthlyEstimatePrice();
        }
        else if (plan instanceof BusinessPlan) {
            calculator.planPrice = (isLocalCurrency ? plan.extra.userLocalPrice : plan.extra.userPrice) * plan.minUsers;
            calculator.extraStoragePrice = isLocalCurrency ? plan.extra.storageLocalPrice : plan.extra.storagePrice;
            calculator.extraUserPrice = isLocalCurrency ? plan.extra.userLocalPrice : plan.extra.userPrice;
            calculator.calculateMonthlyEstimatePrice();
        }
    }
}

class ProFlexiBusinessPricingCard {
    constructor(element) {
        this.element = element;

        this.defaultPrice = this.element.querySelector('.pricing.euro .price');
        this.localPrice = this.element.querySelector('.pricing.local .price');
        this.usersText = this.element.querySelector('.users');
        this.quotaText = this.element.querySelector('.quota');
        this.defaultCaption = this.element.querySelector('.caption.euro');
        this.localCaption = this.element.querySelector('.caption.local');
        this.button = this.element.querySelector('.button.buy-plan');

        this.usersTextTpl = this.usersText.textContent;
        this.quotaTextTpl = this.quotaText.textContent;
        this.defaultCaptionTextTpl = this.defaultCaption.textContent;
        this.localCaptionTextTpl = this.localCaption.textContent;

        if (!this.defaultPrice || !this.localPrice) {
            console.warn('Missing plan price elements in a pricing plan card. Are translation placeholders intact?');
            this.element.classList.add('hidden');
            this.element.classList.remove('loading');
            this.isMissingElements = true;
        }
    }

    setPlan(plan) {
        if (plan instanceof ProFlexiPlan) {
            const defaultPrice = plan.base.price;
            const localPrice = plan.base.localPrice;
            this.populatePriceStrings(defaultPrice, localPrice);
        }
        else if (plan instanceof BusinessPlan) {
            const defaultPrice = plan.extra.userPrice * plan.minUsers;
            const localPrice = plan.extra.userLocalPrice * plan.minUsers;
            this.populatePriceStrings(defaultPrice, localPrice);
        }

        this.setUsersText(plan.minUsers);
        this.setQuotaText(plan.base.storage);
        this.populateCaptionStrings(plan.extra.storagePrice, plan.extra.storageLocalPrice);

        if (window.user && window.user.planNum) {
            if (plan.accountLevel === window.user.planNum) {
                this.setAsCurrentPlan();
            }
            else if ([Plans.AccountLevels.ProFlexi, Plans.AccountLevels.Business].includes(window.user.planNum)) {
                this.setAsUnavailable();
            }
        }
    }

    populatePriceStrings(defaultPrice, localPrice) {
        if (this.isMissingElements) return;

        const defaultPriceElement = this.defaultPrice.querySelector('.amount');
        const localPriceElement = this.localPrice.querySelector('.amount');
        const localCurrencyElement = this.localPrice.parentElement.querySelector('.unit');

        if (defaultPriceElement) {
            defaultPrice = CurrencyLocalizer.formatPrice(defaultPrice, Plans.instance.currency, 'narrowSymbol');
            defaultPriceElement.textContent = defaultPriceElement.textContent.replace('%1', defaultPrice);
        }

        if (localPriceElement) {
            localPrice = CurrencyLocalizer.formatPrice(localPrice, Plans.instance.localCurrency, 'narrowSymbol');
            localPriceElement.textContent = localPriceElement.textContent.replace('%1', localPrice);
        }

        if (localCurrencyElement) {
            localCurrencyElement.textContent = localCurrencyElement.textContent.replace('%2', Plans.instance.localCurrency);
        }
    }

    setUsersText(users) {
        users = parseInt(users);
        if (!users || users === Number.NaN) {
            this.usersText.classList.add('hidden');
            return;
        }

        this.usersText.textContent = this.usersTextTpl.replace('^{minUsers}', parseInt(users));
    }

    setQuotaText(quotaGb) {
        const quota = quotaGb >= 1024
            ? Formatter.formatTb(Math.floor(quotaGb / 1024))
            : Formatter.formatGb(quotaGb);

        this.quotaText.textContent = this.quotaTextTpl.replace('^{quotaAmount}', quota);
    }

    populateCaptionStrings(defaultPrice, localPrice) {
        this.defaultCaption.textContent = this.defaultCaptionTextTpl.replace('%s', CurrencyLocalizer.formatPrice(defaultPrice));
        this.localCaption.textContent = this.localCaptionTextTpl.replace('%s', CurrencyLocalizer.formatPrice(localPrice, Plans.instance.localCurrency));
    }

    setDisplayMode(isDefaultCurrency) {
        if (this.isMissingElements) return;

        this.defaultPrice.parentElement.classList.toggle('hidden', !isDefaultCurrency);
        this.localPrice.parentElement.classList.toggle('hidden', isDefaultCurrency);

        this.defaultCaption.classList.toggle('hidden', !isDefaultCurrency);
        this.localCaption.classList.toggle('hidden', isDefaultCurrency);

        TextScaler.instance.scale(isDefaultCurrency ? this.defaultPrice : this.localPrice);

        this.element.classList.remove('loading');
    }

    setAsCurrentPlan() {
        this.button.disabled = true;
        this.button.textContent = this.element.dataset.currentPlanBtnLabel;
    }

    setAsUnavailable() {
        this.button.disabled = true;
        this.button.classList.add('tooltip', 'bottom');
    }
}

/**
 * Frontend scripting for the hero section module.
 */

class LeadershipTeamList {
    $leadershipTeamList;
    $cardsContainer;
    $card;
    $button;
    $buttonText;

    constructor (element) {
        this.$leadershipTeamList = $(element);
        this.$cardsContainer = $('.cards', this.$leadershipTeamList);
        this.$card = $('.staff-card', this.$cardsContainer);
        this.$button = $('.text-button', this.$leadershipTeamList);
        this.$buttonText = $('.label', this.$button);
        this.$buttonIcon = $('.icon', this.$button);

        if (this.$card.length <= 4) {
            !Breakpointer.currentBreakpoint.eq(Breakpoint.MD) ? this.$button.addClass('hidden') : '';

        }

        Breakpointer.currentBreakpoint.eq(Breakpoint.MD) ? this.$card.slice(3).addClass('hidden') : this.$card.slice(4).addClass('hidden');

        Reactor.addEventListener('breakpoint-changed', (newBreakpoint) => {
            if (newBreakpoint.eq(Breakpoint.MD)) {
                if (this.$buttonText.hasClass('see-more')) {
                    this.$card.removeClass('hidden');
                    this.$card.slice(3).addClass('hidden');
                }
                if (this.$card.length <= 4) {
                    this.$button.removeClass('hidden');
                }
            }
            else {
                if (this.$buttonText.hasClass('see-more')) {
                    this.$card.removeClass('hidden');
                    this.$card.slice(4).addClass('hidden');
                }
                if (this.$card.length <= 4) {
                    this.$button.addClass('hidden');
                }
            }
        });

        this.$button.on('click', () => {
            const seeMoreText = this.$button.data('see-more-text');
            const collapseText = this.$button.data('collapse-text');
            this.$buttonText.hasClass('see-more') ? this.expandedView(collapseText) : this.defaultView(seeMoreText);
        });
    }

    expandedView(collapseText) {
        this.$card.removeClass('hidden');
        this.$buttonText.text(collapseText);
        this.$buttonText.removeClass('see-more collapse').addClass('collapse');
        this.$buttonIcon.removeClass('chevron-down chevron-up').addClass('chevron-up');
    }

    defaultView(seeMoreText) {
        this.$buttonText.text(seeMoreText);
        this.$buttonText.removeClass('see-more collapse').addClass('see-more');
        this.$buttonIcon.removeClass('chevron-down chevron-up').addClass('chevron-down');
        this.$card.removeClass('hidden');
        Breakpointer.currentBreakpoint.eq(Breakpoint.MD) ? this.$card.slice(3).addClass('hidden') : this.$card.slice(4).addClass('hidden');
    }
}

/**
 * Frontend scripting for the business page pricing module.
 */

class BusinessPagePricing {
    $businessPagePricing;

    $banner;
    $leftContainer;
    $rightContainer;

    $calculatorToggle;
    $toggleEstimationNote;
    $calculatorPricingEstimationNote;
    $estimatedUsageButton;

    $pricingCalculator;
    $planPricingCalculator;

    /** @type DropdownComponent */
    currencyDropdown;

    currentCurrency;

    localPlanPrice;
    localExtraStoragePrice;
    localExtraUserPrice;
    euroPlanPrice;
    euroExtraStoragePrice;
    euroExtraUserPrice;

    constructor(element) {
        this.element = element;
        this.$businessPagePricing = $(element);

        this.$banner = $('.business-card-banner', this.$businessPagePricing);
        this.$leftContainer = $('.left-container', this.$banner);
        this.$rightContainer = $('.right-container', this.$banner);
        this.$buyPlanButton = $('.get-started-btn .button', this.$banner);

        this.$calculatorToggle = $('.calculator-toggle', this.$businessPagePricing);

        this.$toggleEstimationNote = $('.pricing-estimation-note', this.$calculatorToggle);
        this.$calculatorPricingEstimationNote = $('.calculator-pricing-estimation-note', this.$businessPagePricing);
        this.$estimatedUsageButton = $('.estimated-usage-btn', this.$calculatorToggle);

        this.fetchBusinessPlanInfo();

        this.$pricingCalculator = $('.pricing-calculator', this.$businessPagePricing);
        this.$pricingCalculator.toggleClass('hidden', true).addClass('business');

        this._initCurrencyDropdown();

        if (!this.$planPricingCalculator) {
            this.$estimatedUsageButton.addClass('hidden');
            this.$calculatorToggle.addClass('hidden');
        }

        this.$planPricingCalculator = new PlanPricingCalculator(this.$pricingCalculator[0]);

        $('.cost', this.$banner).addClass('hidden');

        this.$estimatedUsageButton.rebind('click', () => {
            const $icon = $('.icon', this.$estimatedUsageButton);

            const $calculatorToggleHeading = $('.pricing-calculator-heading', this.$calculatorToggle);

            const toHide = $icon.hasClass('plus') ? true : false;
            const iconToRemove = $icon.hasClass('plus') ? 'plus' : 'minus';
            const iconToAdd = $icon.hasClass('plus') ? 'minus' : 'plus';

            $calculatorToggleHeading.toggleClass('hidden', !toHide);
            $icon.removeClass(iconToRemove).addClass(iconToAdd);
            this.$pricingCalculator.toggleClass('hidden', !toHide);

            this.showHidePriceEstimationNotes();
        });

        L10n.onCurrencyPrefChanged.addListener((newCurrency) => {
            this.currentCurrency = newCurrency;

            this.showHidePriceEstimationNotes();

            this.getPriceValues();

            const currency = this.currentCurrency === 'EUR' ? 'euro' : 'local';

            $('.cost', this.$banner).addClass('hidden');
            $(`.cost.${currency}`, this.$banner).removeClass('hidden');
        });

        // Don't allow user to buy Pro Flexi plan if they're on a Business plan
        //  Don't allow user to buy Pro Flexi/Business plan if they're on a Pro Flexi plan
        if (window.user && (window.user.planNum === Plans.AccountLevels.Business || window.user.planNum === Plans.AccountLevels.ProFlexi)) {
            this.$buyPlanButton
                .removeClass('hidden primary')
                .addClass('outline-muted disabled')
                .prop('disabled', true);

            $('.get-started-btn', this.$banner)
                .addClass('tooltip bottom');

        }
    }

    showHidePriceEstimationNotes() {
        if (!this.$pricingCalculator.hasClass('hidden')) {
            this.$calculatorPricingEstimationNote.toggleClass('hidden', false || (this.currentCurrency === 'EUR'));
            this.$toggleEstimationNote.addClass('hidden');
        }
        else {
            this.$calculatorPricingEstimationNote.addClass('hidden');
            this.$toggleEstimationNote.toggleClass('hidden', this.currentCurrency === 'EUR');
        }
    }

    // Fetch info for the Business plan from the API
    async fetchBusinessPlanInfo() {
        const allPlans = await Plans.instance.get();
        this.currentCurrency = Plans.instance.localCurrency;

        for (const plan of allPlans) {
            if (plan instanceof BusinessPlan && plan.months === 1) {
                this.euroPlanPrice = plan.extra.userPrice * plan.minUsers;
                this.euroExtraUserPrice = plan.extra.userPrice;
                this.euroExtraStoragePrice = plan.extra.storagePrice;

                this.localPlanPrice = plan.extra.userLocalPrice * plan.minUsers;
                this.localExtraUserPrice = plan.extra.userLocalPrice;
                this.localExtraStoragePrice = plan.extra.storageLocalPrice;

                this.formatPriceValues();

                this.$businessPagePricing.removeClass('hidden');

                return;
            }
        }
    }

    // Format all price values for this module
    formatPriceValues() {
        const currencyIsEuros = this.currentCurrency === 'EUR';

        $('.pricing-estimation-note', this.$businessPagePricing).toggleClass('hidden', currencyIsEuros);
        $('.cost.local', this.$businessPagePricing).toggleClass('hidden', currencyIsEuros);
        $('.cost.euro', this.$businessPagePricing).toggleClass('hidden', !currencyIsEuros);

        const localiser = new CurrencyLocalizer(this.currentCurrency, 'narrowSymbol');
        const currencies = ['local', 'euro'];

        for (const currency of currencies) {
            // left container
            const $users = $('.users', this.$leftContainer);
            const $extraStorageAndTransfer = $('.extra-s-and-t', this.$leftContainer);

            let $monthlyCost = $(`.cost.${currency}`, $users);
            let $leftContainerValue = $('.value', $monthlyCost);

            localiser.currency = currency === 'euro' ? 'EUR' : Plans.instance.localCurrency;

            let price = currency === 'euro' ? this.euroExtraUserPrice : this.localExtraUserPrice;
            $leftContainerValue.text($leftContainerValue.text().replace('%1', localiser.format(price)));

            $monthlyCost = $(`.cost.${currency}`, $extraStorageAndTransfer);
            $leftContainerValue = $('.value', $monthlyCost);

            price = currency === 'euro' ? this.euroExtraStoragePrice : this.localExtraStoragePrice;
            $leftContainerValue.text($leftContainerValue.text().replace('%1', localiser.format(price)));

            // right container
            $monthlyCost = $(`.cost.${currency}`, this.$rightContainer);

            const $rightContainerValue = $('.plan-price .value', $monthlyCost);
            price = currency === 'euro' ? this.euroPlanPrice : this.localPlanPrice;
            $rightContainerValue.text($rightContainerValue.text().replace('%1', localiser.format(price)));
        }

        const $localPlanUnits = $('.plan-units.local', this.$businessPagePricing);
        const planUnitsText = this.currentCurrency !== 'EUR' ? this.currentCurrency : '';

        $localPlanUnits.text($localPlanUnits.text().replace('%2', planUnitsText));

        this.getPriceValues();
    }

    // Get the correct price values for each slider to feed into the PlanPricingCalculator class variable
    getPriceValues() {
        const currencyIsNotEuros = (this.currentCurrency !== 'EUR');

        const planCost = currencyIsNotEuros ? this.localPlanPrice : this.euroPlanPrice;
        const extraStorageCost = currencyIsNotEuros ? this.localExtraStoragePrice : this.euroExtraStoragePrice;
        const extraUsersCost = currencyIsNotEuros ? this.localExtraUserPrice : this.euroExtraUserPrice;

        this.$planPricingCalculator.planPrice = planCost;
        this.$planPricingCalculator.extraStoragePrice = extraStorageCost;
        this.$planPricingCalculator.extraUserPrice = extraUsersCost;
        this.$planPricingCalculator.currency = this.currentCurrency;

        this.$planPricingCalculator.calculateMonthlyEstimatePrice();
    }

    async _initCurrencyDropdown() {
        this.currencyDropdown = new DropdownComponent(this.element.querySelector('.header-btn-container .dropdown'));
        this.currencyDropdown.selectionChangedEvent.addListener((newSelection) => {
            L10n.setPreferredCurrency(newSelection.value);
        });

        Breakpointer.breakpointChangedEvent.addListener((newBreakpoint) => {
            let sizeClass = newBreakpoint.gteq(Breakpoint.LG) ? 'lg' :
                (newBreakpoint.gteq(Breakpoint.MD) ? 'md' : 'sm');

            this.currencyDropdown.setSize(sizeClass);
        });

        const currency = await L10n.getLocalCurrency();

        if (currency && currency !== 'EUR') {
            this.currencyDropdown.addOption(currency, currency);
            this.currencyDropdown.selectOption(currency);
        }
    }
}

/**
 * Frontend scripting for the Refer pricing module.
 */

class ReferCalculator {
    $referCalculator;
    $numberOfUsersSlider;
    $selectedPlan;
    $megaPlanSlider;
    $estimatePriceValue;

    planTitle;
    initEstimatePrice;

    constructor(element) {
        this.$referCalculator = $(element);
        this.megePlan = $('.mega-plan', this.$referCalculator);
        this.$numberOfUsersSlider = $('.number-of-users.flexi-slider', this.$referCalculator);
        this.$megaPlanSlider = $('.mega-plan.flexi-slider', this.$referCalculator);
        this.$selectedPlan = $('.sub-heading .users', this.$referCalculator);
        this.$estimatePriceValue = $('.total-number', this.$referCalculator);
        this.$sliderMarker = $('.slider-mark', this.megePlan);

        this.$selectedPlan.text(10);
        this.fetchPlansPrice(10);

        $('.flexi-slider').rebind('input', (e) => {
            const $currentSlider = $(e.target);
            const sliderValue = $currentSlider.val();
            this.setSliderValue($currentSlider, sliderValue);
        });
    }

    setSliderValue($currentSlider, sliderValue) {
        if (document.documentElement.dir === 'rtl') {
            $currentSlider.css('background',
                `linear-gradient(to left,
                var(--color-secondary-cobalt-900) ${sliderValue}%,
                var(--color-grey-150) ${sliderValue}% 100%)`
            );
        }
        else {
            $currentSlider.css('background',
                `linear-gradient(to right,
                var(--color-secondary-cobalt-900) ${sliderValue}%,
                var(--color-grey-150) ${sliderValue}% 100%)`
            );
        }

        let accountLevel = 1;
        this.planTitle = '';

        $currentSlider.attr('value', sliderValue);
        this.$singularBlurb = $('.sub-heading.singular', this.$referCalculator);
        this.$pluralBlurb = $('.sub-heading.plural', this.$referCalculator);

        const numberOfNumbers = this.$numberOfUsersSlider.val();

        if ($currentSlider.hasClass('mega-plan')) {
            if (sliderValue == 1) {
                accountLevel = 4;
                this.planTitle = $(this.$sliderMarker[0]).text();
            }
            else if (sliderValue == 34) {
                accountLevel = 1;
                this.planTitle = $(this.$sliderMarker[1]).text();
            }
            else if (sliderValue == 67) {
                accountLevel = 2;
                this.planTitle = $(this.$sliderMarker[2]).text();
            }
            else if (sliderValue == 100) {
                accountLevel = 3;
                this.planTitle = $(this.$sliderMarker[3]).text();
            }

            $('.plan', this.$referCalculator).text(this.planTitle);
            this.$megaPlanSlider.attr('data-account-level', accountLevel);
        }
        else {
            if (sliderValue == 1) {
                this.$pluralBlurb.addClass('hidden');
                this.$singularBlurb.removeClass('hidden');
            }
            else {
                this.$pluralBlurb.removeClass('hidden');
                this.$singularBlurb.addClass('hidden');
            }

            $('.users', this.$referCalculator).text(sliderValue);
        }
        this.fetchPlansPrice(numberOfNumbers);
    }

    calculateReferEstimatePrice(numberOfUsers, price) {
        const commissionRate = parseFloat(this.$referCalculator.attr('data-commission-rate')) / 100;
        this.initEstimatePrice = price * numberOfUsers * commissionRate;
        const formattedEstimatePrice = CurrencyLocalizer.formatPrice(this.initEstimatePrice, L10n.currency, 'narrowSymbol');
        this.$estimatePriceValue.text(formattedEstimatePrice);
    }

    // Fetch prices for the Mega plans from the API
    async fetchPlansPrice(numberOfNumbers) {

        const accountLevel = parseInt(this.$megaPlanSlider.attr('data-account-level'));

        const allPlans = await Plans.instance.getAll();

        for (const plan of allPlans) {
            if (accountLevel === plan.accountLevel && plan.months === 12) {
                this.calculateReferEstimatePrice(numberOfNumbers, plan.price);

                return;
            }
        }
    }
}

/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(ie,e){"use strict";var oe=[],r=Object.getPrototypeOf,ae=oe.slice,g=oe.flat?function(e){return oe.flat.call(e)}:function(e){return oe.concat.apply([],e)},s=oe.push,se=oe.indexOf,n={},i=n.toString,ue=n.hasOwnProperty,o=ue.toString,a=o.call(Object),le={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},C=ie.document,u={type:!0,src:!0,nonce:!0,noModule:!0};function m(e,t,n){var r,i,o=(n=n||C).createElement("script");if(o.text=e,t)for(r in u)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[i.call(e)]||"object":typeof e}var t="3.7.1",l=/HTML$/i,ce=function(e,t){return new ce.fn.init(e,t)};function c(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!v(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function fe(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}ce.fn=ce.prototype={jquery:t,constructor:ce,length:0,toArray:function(){return ae.call(this)},get:function(e){return null==e?ae.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ce.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ce.each(this,e)},map:function(n){return this.pushStack(ce.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ce.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(ce.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:oe.sort,splice:oe.splice},ce.extend=ce.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||v(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(ce.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||ce.isPlainObject(n)?n:{},i=!1,a[t]=ce.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},ce.extend({expando:"jQuery"+(t+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==i.call(e))&&(!(t=r(e))||"function"==typeof(n=ue.call(t,"constructor")&&t.constructor)&&o.call(n)===a)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){m(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(c(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)while(t=e[r++])n+=ce.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(c(Object(e))?ce.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:se.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!l.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(c(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:le}),"function"==typeof Symbol&&(ce.fn[Symbol.iterator]=oe[Symbol.iterator]),ce.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var pe=oe.pop,de=oe.sort,he=oe.splice,ge="[\\x20\\t\\r\\n\\f]",ve=new RegExp("^"+ge+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ge+"+$","g");ce.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var f=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function p(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}ce.escapeSelector=function(e){return(e+"").replace(f,p)};var ye=C,me=s;!function(){var e,b,w,o,a,T,r,C,d,i,k=me,S=ce.expando,E=0,n=0,s=W(),c=W(),u=W(),h=W(),l=function(e,t){return e===t&&(a=!0),0},f="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",t="(?:\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",p="\\["+ge+"*("+t+")(?:"+ge+"*([*^$|!~]?=)"+ge+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+t+"))|)"+ge+"*\\]",g=":("+t+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+p+")*)|.*)\\)|)",v=new RegExp(ge+"+","g"),y=new RegExp("^"+ge+"*,"+ge+"*"),m=new RegExp("^"+ge+"*([>+~]|"+ge+")"+ge+"*"),x=new RegExp(ge+"|>"),j=new RegExp(g),A=new RegExp("^"+t+"$"),D={ID:new RegExp("^#("+t+")"),CLASS:new RegExp("^\\.("+t+")"),TAG:new RegExp("^("+t+"|[*])"),ATTR:new RegExp("^"+p),PSEUDO:new RegExp("^"+g),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ge+"*(even|odd|(([+-]|)(\\d*)n|)"+ge+"*(?:([+-]|)"+ge+"*(\\d+)|))"+ge+"*\\)|)","i"),bool:new RegExp("^(?:"+f+")$","i"),needsContext:new RegExp("^"+ge+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ge+"*((?:-\\d)?\\d*)"+ge+"*\\)|)(?=[^-]|$)","i")},N=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,L=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,H=/[+~]/,O=new RegExp("\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\([^\\r\\n\\f])","g"),P=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},M=function(){V()},R=J(function(e){return!0===e.disabled&&fe(e,"fieldset")},{dir:"parentNode",next:"legend"});try{k.apply(oe=ae.call(ye.childNodes),ye.childNodes),oe[ye.childNodes.length].nodeType}catch(e){k={apply:function(e,t){me.apply(e,ae.call(t))},call:function(e){me.apply(e,ae.call(arguments,1))}}}function I(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(V(e),e=e||T,C)){if(11!==p&&(u=L.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return k.call(n,a),n}else if(f&&(a=f.getElementById(i))&&I.contains(e,a)&&a.id===i)return k.call(n,a),n}else{if(u[2])return k.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&e.getElementsByClassName)return k.apply(n,e.getElementsByClassName(i)),n}if(!(h[t+" "]||d&&d.test(t))){if(c=t,f=e,1===p&&(x.test(t)||m.test(t))){(f=H.test(t)&&U(e.parentNode)||e)==e&&le.scope||((s=e.getAttribute("id"))?s=ce.escapeSelector(s):e.setAttribute("id",s=S)),o=(l=Y(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+Q(l[o]);c=l.join(",")}try{return k.apply(n,f.querySelectorAll(c)),n}catch(e){h(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return re(t.replace(ve,"$1"),e,n,r)}function W(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function F(e){return e[S]=!0,e}function $(e){var t=T.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function B(t){return function(e){return fe(e,"input")&&e.type===t}}function _(t){return function(e){return(fe(e,"input")||fe(e,"button"))&&e.type===t}}function z(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&R(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function X(a){return F(function(o){return o=+o,F(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function U(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function V(e){var t,n=e?e.ownerDocument||e:ye;return n!=T&&9===n.nodeType&&n.documentElement&&(r=(T=n).documentElement,C=!ce.isXMLDoc(T),i=r.matches||r.webkitMatchesSelector||r.msMatchesSelector,r.msMatchesSelector&&ye!=T&&(t=T.defaultView)&&t.top!==t&&t.addEventListener("unload",M),le.getById=$(function(e){return r.appendChild(e).id=ce.expando,!T.getElementsByName||!T.getElementsByName(ce.expando).length}),le.disconnectedMatch=$(function(e){return i.call(e,"*")}),le.scope=$(function(){return T.querySelectorAll(":scope")}),le.cssHas=$(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}}),le.getById?(b.filter.ID=function(e){var t=e.replace(O,P);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&C){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(O,P);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&C){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},b.find.CLASS=function(e,t){if("undefined"!=typeof t.getElementsByClassName&&C)return t.getElementsByClassName(e)},d=[],$(function(e){var t;r.appendChild(e).innerHTML="<a id='"+S+"' href='' disabled='disabled'></a><select id='"+S+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+ge+"*(?:value|"+f+")"),e.querySelectorAll("[id~="+S+"-]").length||d.push("~="),e.querySelectorAll("a#"+S+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=T.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),r.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=T.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+ge+"*name"+ge+"*="+ge+"*(?:''|\"\")")}),le.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),l=function(e,t){if(e===t)return a=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!le.sortDetached&&t.compareDocumentPosition(e)===n?e===T||e.ownerDocument==ye&&I.contains(ye,e)?-1:t===T||t.ownerDocument==ye&&I.contains(ye,t)?1:o?se.call(o,e)-se.call(o,t):0:4&n?-1:1)}),T}for(e in I.matches=function(e,t){return I(e,null,null,t)},I.matchesSelector=function(e,t){if(V(e),C&&!h[t+" "]&&(!d||!d.test(t)))try{var n=i.call(e,t);if(n||le.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){h(t,!0)}return 0<I(t,T,null,[e]).length},I.contains=function(e,t){return(e.ownerDocument||e)!=T&&V(e),ce.contains(e,t)},I.attr=function(e,t){(e.ownerDocument||e)!=T&&V(e);var n=b.attrHandle[t.toLowerCase()],r=n&&ue.call(b.attrHandle,t.toLowerCase())?n(e,t,!C):void 0;return void 0!==r?r:e.getAttribute(t)},I.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ce.uniqueSort=function(e){var t,n=[],r=0,i=0;if(a=!le.sortStable,o=!le.sortStable&&ae.call(e,0),de.call(e,l),a){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)he.call(e,n[r],1)}return o=null,e},ce.fn.uniqueSort=function(){return this.pushStack(ce.uniqueSort(ae.apply(this)))},(b=ce.expr={cacheLength:50,createPseudo:F,match:D,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(O,P),e[3]=(e[3]||e[4]||e[5]||"").replace(O,P),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||I.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&I.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return D.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&j.test(n)&&(t=Y(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(O,P).toLowerCase();return"*"===e?function(){return!0}:function(e){return fe(e,t)}},CLASS:function(e){var t=s[e+" "];return t||(t=new RegExp("(^|"+ge+")"+e+"("+ge+"|$)"))&&s(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=I.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(v," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,e,t,h,g){var v="nth"!==d.slice(0,3),y="last"!==d.slice(-4),m="of-type"===e;return 1===h&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u=v!==y?"nextSibling":"previousSibling",l=e.parentNode,c=m&&e.nodeName.toLowerCase(),f=!n&&!m,p=!1;if(l){if(v){while(u){o=e;while(o=o[u])if(m?fe(o,c):1===o.nodeType)return!1;s=u="only"===d&&!s&&"nextSibling"}return!0}if(s=[y?l.firstChild:l.lastChild],y&&f){p=(a=(r=(i=l[S]||(l[S]={}))[d]||[])[0]===E&&r[1])&&r[2],o=a&&l.childNodes[a];while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if(1===o.nodeType&&++p&&o===e){i[d]=[E,a,p];break}}else if(f&&(p=a=(r=(i=e[S]||(e[S]={}))[d]||[])[0]===E&&r[1]),!1===p)while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if((m?fe(o,c):1===o.nodeType)&&++p&&(f&&((i=o[S]||(o[S]={}))[d]=[E,p]),o===e))break;return(p-=g)===h||p%h==0&&0<=p/h}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||I.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?F(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=se.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:F(function(e){var r=[],i=[],s=ne(e.replace(ve,"$1"));return s[S]?F(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:F(function(t){return function(e){return 0<I(t,e).length}}),contains:F(function(t){return t=t.replace(O,P),function(e){return-1<(e.textContent||ce.text(e)).indexOf(t)}}),lang:F(function(n){return A.test(n||"")||I.error("unsupported lang: "+n),n=n.replace(O,P).toLowerCase(),function(e){var t;do{if(t=C?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=ie.location&&ie.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===function(){try{return T.activeElement}catch(e){}}()&&T.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:z(!1),disabled:z(!0),checked:function(e){return fe(e,"input")&&!!e.checked||fe(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return N.test(e.nodeName)},button:function(e){return fe(e,"input")&&"button"===e.type||fe(e,"button")},text:function(e){var t;return fe(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:X(function(){return[0]}),last:X(function(e,t){return[t-1]}),eq:X(function(e,t,n){return[n<0?n+t:n]}),even:X(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:X(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:X(function(e,t,n){var r;for(r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:X(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=B(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=_(e);function G(){}function Y(e,t){var n,r,i,o,a,s,u,l=c[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=y.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=m.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ve," ")}),a=a.slice(n.length)),b.filter)!(r=D[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?I.error(e):c(e,s).slice(0)}function Q(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function J(a,e,t){var s=e.dir,u=e.next,l=u||s,c=t&&"parentNode"===l,f=n++;return e.first?function(e,t,n){while(e=e[s])if(1===e.nodeType||c)return a(e,t,n);return!1}:function(e,t,n){var r,i,o=[E,f];if(n){while(e=e[s])if((1===e.nodeType||c)&&a(e,t,n))return!0}else while(e=e[s])if(1===e.nodeType||c)if(i=e[S]||(e[S]={}),u&&fe(e,u))e=e[s]||e;else{if((r=i[l])&&r[0]===E&&r[1]===f)return o[2]=r[2];if((i[l]=o)[2]=a(e,t,n))return!0}return!1}}function K(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Z(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function ee(d,h,g,v,y,e){return v&&!v[S]&&(v=ee(v)),y&&!y[S]&&(y=ee(y,e)),F(function(e,t,n,r){var i,o,a,s,u=[],l=[],c=t.length,f=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)I(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),p=!d||!e&&h?f:Z(f,u,d,n,r);if(g?g(p,s=y||(e?d:c||v)?[]:t,n,r):s=p,v){i=Z(s,l),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(s[l[o]]=!(p[l[o]]=a))}if(e){if(y||d){if(y){i=[],o=s.length;while(o--)(a=s[o])&&i.push(p[o]=a);y(null,s=[],i,r)}o=s.length;while(o--)(a=s[o])&&-1<(i=y?se.call(e,a):u[o])&&(e[i]=!(t[i]=a))}}else s=Z(s===t?s.splice(c,s.length):s),y?y(null,t,s,r):k.apply(t,s)})}function te(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=J(function(e){return e===i},a,!0),l=J(function(e){return-1<se.call(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!=w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[J(K(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return ee(1<s&&K(c),1<s&&Q(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ve,"$1"),t,s<n&&te(e.slice(s,n)),n<r&&te(e=e.slice(n)),n<r&&Q(e))}c.push(t)}return K(c)}function ne(e,t){var n,v,y,m,x,r,i=[],o=[],a=u[e+" "];if(!a){t||(t=Y(e)),n=t.length;while(n--)(a=te(t[n]))[S]?i.push(a):o.push(a);(a=u(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=E+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==T||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==T||(V(o),n=!C);while(s=v[a++])if(s(o,t||T,n)){k.call(r,o);break}i&&(E=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=pe.call(r));f=Z(f)}k.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&ce.uniqueSort(r)}return i&&(E=h,w=p),c},m?F(r):r))).selector=e}return a}function re(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&Y(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&C&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(O,P),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=D.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(O,P),H.test(o[0].type)&&U(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&Q(o)))return k.apply(n,r),n;break}}}return(l||ne(e,c))(r,t,!C,n,!t||H.test(e)&&U(t.parentNode)||t),n}G.prototype=b.filters=b.pseudos,b.setFilters=new G,le.sortStable=S.split("").sort(l).join("")===S,V(),le.sortDetached=$(function(e){return 1&e.compareDocumentPosition(T.createElement("fieldset"))}),ce.find=I,ce.expr[":"]=ce.expr.pseudos,ce.unique=ce.uniqueSort,I.compile=ne,I.select=re,I.setDocument=V,I.tokenize=Y,I.escape=ce.escapeSelector,I.getText=ce.text,I.isXML=ce.isXMLDoc,I.selectors=ce.expr,I.support=ce.support,I.uniqueSort=ce.uniqueSort}();var d=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&ce(e).is(n))break;r.push(e)}return r},h=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},b=ce.expr.match.needsContext,w=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function T(e,n,r){return v(n)?ce.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?ce.grep(e,function(e){return e===n!==r}):"string"!=typeof n?ce.grep(e,function(e){return-1<se.call(n,e)!==r}):ce.filter(n,e,r)}ce.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ce.find.matchesSelector(r,e)?[r]:[]:ce.find.matches(e,ce.grep(t,function(e){return 1===e.nodeType}))},ce.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(ce(e).filter(function(){for(t=0;t<r;t++)if(ce.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)ce.find(e,i[t],n);return 1<r?ce.uniqueSort(n):n},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,"string"==typeof e&&b.test(e)?ce(e):e||[],!1).length}});var k,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ce.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||k,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:S.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ce?t[0]:t,ce.merge(this,ce.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),w.test(r[1])&&ce.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=C.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(ce):ce.makeArray(e,this)}).prototype=ce.fn,k=ce(C);var E=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){while((e=e[t])&&1!==e.nodeType);return e}ce.fn.extend({has:function(e){var t=ce(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ce.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&ce(e);if(!b.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ce.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?ce.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?se.call(ce(e),this[0]):se.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ce.uniqueSort(ce.merge(this.get(),ce(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ce.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,"parentNode")},parentsUntil:function(e,t,n){return d(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return d(e,"nextSibling")},prevAll:function(e){return d(e,"previousSibling")},nextUntil:function(e,t,n){return d(e,"nextSibling",n)},prevUntil:function(e,t,n){return d(e,"previousSibling",n)},siblings:function(e){return h((e.parentNode||{}).firstChild,e)},children:function(e){return h(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(fe(e,"template")&&(e=e.content||e),ce.merge([],e.childNodes))}},function(r,i){ce.fn[r]=function(e,t){var n=ce.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=ce.filter(t,n)),1<this.length&&(j[r]||ce.uniqueSort(n),E.test(r)&&n.reverse()),this.pushStack(n)}});var D=/[^\x20\t\r\n\f]+/g;function N(e){return e}function q(e){throw e}function L(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}ce.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},ce.each(e.match(D)||[],function(e,t){n[t]=!0}),n):ce.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){ce.each(e,function(e,t){v(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==x(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return ce.each(arguments,function(e,t){var n;while(-1<(n=ce.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<ce.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},ce.extend({Deferred:function(e){var o=[["notify","progress",ce.Callbacks("memory"),ce.Callbacks("memory"),2],["resolve","done",ce.Callbacks("once memory"),ce.Callbacks("once memory"),0,"resolved"],["reject","fail",ce.Callbacks("once memory"),ce.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return ce.Deferred(function(r){ce.each(o,function(e,t){var n=v(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,v(t)?s?t.call(e,l(u,o,N,s),l(u,o,q,s)):(u++,t.call(e,l(u,o,N,s),l(u,o,q,s),l(u,o,N,o.notifyWith))):(a!==N&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){ce.Deferred.exceptionHook&&ce.Deferred.exceptionHook(e,t.error),u<=i+1&&(a!==q&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(ce.Deferred.getErrorHook?t.error=ce.Deferred.getErrorHook():ce.Deferred.getStackHook&&(t.error=ce.Deferred.getStackHook()),ie.setTimeout(t))}}return ce.Deferred(function(e){o[0][3].add(l(0,e,v(r)?r:N,e.notifyWith)),o[1][3].add(l(0,e,v(t)?t:N)),o[2][3].add(l(0,e,v(n)?n:q))}).promise()},promise:function(e){return null!=e?ce.extend(e,a):a}},s={};return ce.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=ae.call(arguments),o=ce.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?ae.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(L(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||v(i[t]&&i[t].then)))return o.then();while(t--)L(i[t],a(t),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ce.Deferred.exceptionHook=function(e,t){ie.console&&ie.console.warn&&e&&H.test(e.name)&&ie.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},ce.readyException=function(e){ie.setTimeout(function(){throw e})};var O=ce.Deferred();function P(){C.removeEventListener("DOMContentLoaded",P),ie.removeEventListener("load",P),ce.ready()}ce.fn.ready=function(e){return O.then(e)["catch"](function(e){ce.readyException(e)}),this},ce.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ce.readyWait:ce.isReady)||(ce.isReady=!0)!==e&&0<--ce.readyWait||O.resolveWith(C,[ce])}}),ce.ready.then=O.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?ie.setTimeout(ce.ready):(C.addEventListener("DOMContentLoaded",P),ie.addEventListener("load",P));var M=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n))for(s in i=!0,n)M(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,v(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(ce(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},R=/^-ms-/,I=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function F(e){return e.replace(R,"ms-").replace(I,W)}var $=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function B(){this.expando=ce.expando+B.uid++}B.uid=1,B.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[F(t)]=n;else for(r in t)i[F(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][F(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(F):(t=F(t))in r?[t]:t.match(D)||[]).length;while(n--)delete r[t[n]]}(void 0===t||ce.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ce.isEmptyObject(t)}};var _=new B,z=new B,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,U=/[A-Z]/g;function V(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(U,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:X.test(i)?JSON.parse(i):i)}catch(e){}z.set(e,t,n)}else n=void 0;return n}ce.extend({hasData:function(e){return z.hasData(e)||_.hasData(e)},data:function(e,t,n){return z.access(e,t,n)},removeData:function(e,t){z.remove(e,t)},_data:function(e,t,n){return _.access(e,t,n)},_removeData:function(e,t){_.remove(e,t)}}),ce.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=z.get(o),1===o.nodeType&&!_.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=F(r.slice(5)),V(o,r,i[r]));_.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){z.set(this,n)}):M(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=z.get(o,n))?t:void 0!==(t=V(o,n))?t:void 0;this.each(function(){z.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){z.remove(this,e)})}}),ce.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=_.get(e,t),n&&(!r||Array.isArray(n)?r=_.access(e,t,ce.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ce.queue(e,t),r=n.length,i=n.shift(),o=ce._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){ce.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return _.get(e,n)||_.access(e,n,{empty:ce.Callbacks("once memory").add(function(){_.remove(e,[t+"queue",n])})})}}),ce.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?ce.queue(this[0],t):void 0===n?this:this.each(function(){var e=ce.queue(this,t,n);ce._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ce.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ce.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ce.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=_.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var G=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Y=new RegExp("^(?:([+-])=|)("+G+")([a-z%]*)$","i"),Q=["Top","Right","Bottom","Left"],J=C.documentElement,K=function(e){return ce.contains(e.ownerDocument,e)},Z={composed:!0};J.getRootNode&&(K=function(e){return ce.contains(e.ownerDocument,e)||e.getRootNode(Z)===e.ownerDocument});var ee=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&K(e)&&"none"===ce.css(e,"display")};function te(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return ce.css(e,t,"")},u=s(),l=n&&n[3]||(ce.cssNumber[t]?"":"px"),c=e.nodeType&&(ce.cssNumber[t]||"px"!==l&&+u)&&Y.exec(ce.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)ce.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,ce.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ne={};function re(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=_.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ee(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ne[s])||(o=a.body.appendChild(a.createElement(s)),u=ce.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ne[s]=u)))):"none"!==n&&(l[c]="none",_.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}ce.fn.extend({show:function(){return re(this,!0)},hide:function(){return re(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ee(this)?ce(this).show():ce(this).hide()})}});var xe,be,we=/^(?:checkbox|radio)$/i,Te=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;xe=C.createDocumentFragment().appendChild(C.createElement("div")),(be=C.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),xe.appendChild(be),le.checkClone=xe.cloneNode(!0).cloneNode(!0).lastChild.checked,xe.innerHTML="<textarea>x</textarea>",le.noCloneChecked=!!xe.cloneNode(!0).lastChild.defaultValue,xe.innerHTML="<option></option>",le.option=!!xe.lastChild;var ke={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Se(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&fe(e,t)?ce.merge([e],n):n}function Ee(e,t){for(var n=0,r=e.length;n<r;n++)_.set(e[n],"globalEval",!t||_.get(t[n],"globalEval"))}ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,le.option||(ke.optgroup=ke.option=[1,"<select multiple='multiple'>","</select>"]);var je=/<|&#?\w+;/;function Ae(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))ce.merge(p,o.nodeType?[o]:o);else if(je.test(o)){a=a||f.appendChild(t.createElement("div")),s=(Te.exec(o)||["",""])[1].toLowerCase(),u=ke[s]||ke._default,a.innerHTML=u[1]+ce.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;ce.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<ce.inArray(o,r))i&&i.push(o);else if(l=K(o),a=Se(f.appendChild(o),"script"),l&&Ee(a),n){c=0;while(o=a[c++])Ce.test(o.type||"")&&n.push(o)}return f}var De=/^([^.]*)(?:\.(.+)|)/;function Ne(){return!0}function qe(){return!1}function Le(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Le(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=qe;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return ce().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=ce.guid++)),e.each(function(){ce.event.add(this,t,i,r,n)})}function He(e,r,t){t?(_.set(e,r,!1),ce.event.add(e,r,{namespace:!1,handler:function(e){var t,n=_.get(this,r);if(1&e.isTrigger&&this[r]){if(n)(ce.event.special[r]||{}).delegateType&&e.stopPropagation();else if(n=ae.call(arguments),_.set(this,r,n),this[r](),t=_.get(this,r),_.set(this,r,!1),n!==t)return e.stopImmediatePropagation(),e.preventDefault(),t}else n&&(_.set(this,r,ce.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Ne)}})):void 0===_.get(e,r)&&ce.event.add(e,r,Ne)}ce.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.get(t);if($(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&ce.find.matchesSelector(J,i),n.guid||(n.guid=ce.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof ce&&ce.event.triggered!==e.type?ce.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(D)||[""]).length;while(l--)d=g=(s=De.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=ce.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=ce.event.special[d]||{},c=ce.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ce.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),ce.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.hasData(e)&&_.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(D)||[""]).length;while(l--)if(d=g=(s=De.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=ce.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||ce.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)ce.event.remove(e,d+t[l],n,r,!0);ce.isEmptyObject(u)&&_.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=ce.event.fix(e),l=(_.get(this,"events")||Object.create(null))[u.type]||[],c=ce.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=ce.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((ce.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<ce(i,this).index(l):ce.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(ce.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[ce.expando]?e:new ce.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,"input")&&He(t,"click",!0),!1},trigger:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,"input")&&He(t,"click"),!0},_default:function(e){var t=e.target;return we.test(t.type)&&t.click&&fe(t,"input")&&_.get(t,"click")||fe(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ce.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ce.Event=function(e,t){if(!(this instanceof ce.Event))return new ce.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ne:qe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ce.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ce.expando]=!0},ce.Event.prototype={constructor:ce.Event,isDefaultPrevented:qe,isPropagationStopped:qe,isImmediatePropagationStopped:qe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ne,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ne,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ne,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ce.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ce.event.addProp),ce.each({focus:"focusin",blur:"focusout"},function(r,i){function o(e){if(C.documentMode){var t=_.get(this,"handle"),n=ce.event.fix(e);n.type="focusin"===e.type?"focus":"blur",n.isSimulated=!0,t(e),n.target===n.currentTarget&&t(n)}else ce.event.simulate(i,e.target,ce.event.fix(e))}ce.event.special[r]={setup:function(){var e;if(He(this,r,!0),!C.documentMode)return!1;(e=_.get(this,i))||this.addEventListener(i,o),_.set(this,i,(e||0)+1)},trigger:function(){return He(this,r),!0},teardown:function(){var e;if(!C.documentMode)return!1;(e=_.get(this,i)-1)?_.set(this,i,e):(this.removeEventListener(i,o),_.remove(this,i))},_default:function(e){return _.get(e.target,r)},delegateType:i},ce.event.special[i]={setup:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i);n||(C.documentMode?this.addEventListener(i,o):e.addEventListener(r,o,!0)),_.set(t,i,(n||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i)-1;n?_.set(t,i,n):(C.documentMode?this.removeEventListener(i,o):e.removeEventListener(r,o,!0),_.remove(t,i))}}}),ce.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){ce.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||ce.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),ce.fn.extend({on:function(e,t,n,r){return Le(this,e,t,n,r)},one:function(e,t,n,r){return Le(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ce(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=qe),this.each(function(){ce.event.remove(this,e,n,t)})}});var Oe=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Re(e,t){return fe(e,"table")&&fe(11!==t.nodeType?t:t.firstChild,"tr")&&ce(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function We(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(_.hasData(e)&&(s=_.get(e).events))for(i in _.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)ce.event.add(t,i,s[i][n]);z.hasData(e)&&(o=z.access(e),a=ce.extend({},o),z.set(t,a))}}function $e(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=v(d);if(h||1<f&&"string"==typeof d&&!le.checkClone&&Pe.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),$e(t,r,i,o)});if(f&&(t=(e=Ae(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=ce.map(Se(e,"script"),Ie)).length;c<f;c++)u=e,c!==p&&(u=ce.clone(u,!0,!0),s&&ce.merge(a,Se(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,ce.map(a,We),c=0;c<s;c++)u=a[c],Ce.test(u.type||"")&&!_.access(u,"globalEval")&&ce.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?ce._evalUrl&&!u.noModule&&ce._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):m(u.textContent.replace(Me,""),u,l))}return n}function Be(e,t,n){for(var r,i=t?ce.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ce.cleanData(Se(r)),r.parentNode&&(n&&K(r)&&Ee(Se(r,"script")),r.parentNode.removeChild(r));return e}ce.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=K(e);if(!(le.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ce.isXMLDoc(e)))for(a=Se(c),r=0,i=(o=Se(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&we.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||Se(e),a=a||Se(c),r=0,i=o.length;r<i;r++)Fe(o[r],a[r]);else Fe(e,c);return 0<(a=Se(c,"script")).length&&Ee(a,!f&&Se(e,"script")),c},cleanData:function(e){for(var t,n,r,i=ce.event.special,o=0;void 0!==(n=e[o]);o++)if($(n)){if(t=n[_.expando]){if(t.events)for(r in t.events)i[r]?ce.event.remove(n,r):ce.removeEvent(n,r,t.handle);n[_.expando]=void 0}n[z.expando]&&(n[z.expando]=void 0)}}}),ce.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return M(this,function(e){return void 0===e?ce.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return $e(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)})},prepend:function(){return $e(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ce.cleanData(Se(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ce.clone(this,e,t)})},html:function(e){return M(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!ke[(Te.exec(e)||["",""])[1].toLowerCase()]){e=ce.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ce.cleanData(Se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return $e(this,arguments,function(e){var t=this.parentNode;ce.inArray(this,n)<0&&(ce.cleanData(Se(this)),t&&t.replaceChild(e,this))},n)}}),ce.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){ce.fn[e]=function(e){for(var t,n=[],r=ce(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),ce(r[o])[a](t),s.apply(n,t.get());return this.pushStack(n)}});var _e=new RegExp("^("+G+")(?!px)[a-z%]+$","i"),ze=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=ie),t.getComputedStyle(e)},Ue=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ve=new RegExp(Q.join("|"),"i");function Ge(e,t,n){var r,i,o,a,s=ze.test(t),u=e.style;return(n=n||Xe(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(ve,"$1")||void 0),""!==a||K(e)||(a=ce.style(e,t)),!le.pixelBoxStyles()&&_e.test(a)&&Ve.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",J.appendChild(u).appendChild(l);var e=ie.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),J.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=C.createElement("div"),l=C.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",le.clearCloneStyle="content-box"===l.style.backgroundClip,ce.extend(le,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=C.createElement("table"),t=C.createElement("tr"),n=C.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",J.appendChild(e).appendChild(t).appendChild(n),r=ie.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,J.removeChild(e)),a}}))}();var Qe=["Webkit","Moz","ms"],Je=C.createElement("div").style,Ke={};function Ze(e){var t=ce.cssProps[e]||Ke[e];return t||(e in Je?e:Ke[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;while(n--)if((e=Qe[n]+t)in Je)return e}(e)||e)}var et=/^(none|table(?!-c[ea]).+)/,tt={position:"absolute",visibility:"hidden",display:"block"},nt={letterSpacing:"0",fontWeight:"400"};function rt(e,t,n){var r=Y.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function it(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=ce.css(e,n+Q[a],!0,i)),r?("content"===n&&(u-=ce.css(e,"padding"+Q[a],!0,i)),"margin"!==n&&(u-=ce.css(e,"border"+Q[a]+"Width",!0,i))):(u+=ce.css(e,"padding"+Q[a],!0,i),"padding"!==n?u+=ce.css(e,"border"+Q[a]+"Width",!0,i):s+=ce.css(e,"border"+Q[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u+l}function ot(e,t,n){var r=Xe(e),i=(!le.boxSizingReliable()||n)&&"border-box"===ce.css(e,"boxSizing",!1,r),o=i,a=Ge(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(_e.test(a)){if(!n)return a;a="auto"}return(!le.boxSizingReliable()&&i||!le.reliableTrDimensions()&&fe(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===ce.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===ce.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+it(e,t,n||(i?"border":"content"),o,r,a)+"px"}function at(e,t,n,r,i){return new at.prototype.init(e,t,n,r,i)}ce.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=F(t),u=ze.test(t),l=e.style;if(u||(t=Ze(s)),a=ce.cssHooks[t]||ce.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=Y.exec(n))&&i[1]&&(n=te(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(ce.cssNumber[s]?"":"px")),le.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=F(t);return ze.test(t)||(t=Ze(s)),(a=ce.cssHooks[t]||ce.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ge(e,t,r)),"normal"===i&&t in nt&&(i=nt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),ce.each(["height","width"],function(e,u){ce.cssHooks[u]={get:function(e,t,n){if(t)return!et.test(ce.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ot(e,u,n):Ue(e,tt,function(){return ot(e,u,n)})},set:function(e,t,n){var r,i=Xe(e),o=!le.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===ce.css(e,"boxSizing",!1,i),s=n?it(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-it(e,u,"border",!1,i)-.5)),s&&(r=Y.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=ce.css(e,u)),rt(0,t,s)}}}),ce.cssHooks.marginLeft=Ye(le.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ce.each({margin:"",padding:"",border:"Width"},function(i,o){ce.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+Q[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(ce.cssHooks[i+o].set=rt)}),ce.fn.extend({css:function(e,t){return M(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Xe(e),i=t.length;a<i;a++)o[t[a]]=ce.css(e,t[a],!1,r);return o}return void 0!==n?ce.style(e,t,n):ce.css(e,t)},e,t,1<arguments.length)}}),((ce.Tween=at).prototype={constructor:at,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||ce.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ce.cssNumber[n]?"":"px")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,n=at.propHooks[this.prop];return this.options.duration?this.pos=t=ce.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):at.propHooks._default.set(this),this}}).init.prototype=at.prototype,(at.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ce.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){ce.fx.step[e.prop]?ce.fx.step[e.prop](e):1!==e.elem.nodeType||!ce.cssHooks[e.prop]&&null==e.elem.style[Ze(e.prop)]?e.elem[e.prop]=e.now:ce.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ce.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ce.fx=at.prototype.init,ce.fx.step={};var st,ut,lt,ct,ft=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function dt(){ut&&(!1===C.hidden&&ie.requestAnimationFrame?ie.requestAnimationFrame(dt):ie.setTimeout(dt,ce.fx.interval),ce.fx.tick())}function ht(){return ie.setTimeout(function(){st=void 0}),st=Date.now()}function gt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=Q[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function vt(e,t,n){for(var r,i=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function yt(o,e,t){var n,a,r=0,i=yt.prefilters.length,s=ce.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=st||ht(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:ce.extend({},e),opts:ce.extend(!0,{specialEasing:{},easing:ce.easing._default},t),originalProperties:e,originalOptions:t,startTime:st||ht(),duration:t.duration,tweens:[],createTween:function(e,t){var n=ce.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=F(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ce.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=yt.prefilters[r].call(l,o,c,l.opts))return v(n.stop)&&(ce._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return ce.map(c,vt,l),v(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),ce.fx.timer(ce.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}ce.Animation=ce.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return te(n.elem,e,Y.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(D);for(var n,r=0,i=e.length;r<i;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ee(e),v=_.get(e,"fxshow");for(r in n.queue||(null==(a=ce._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,ce.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ft.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||ce.style(e,r)}if((u=!ce.isEmptyObject(t))||!ce.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=_.get(e,"display")),"none"===(c=ce.css(e,"display"))&&(l?c=l:(re([e],!0),l=e.style.display||l,c=ce.css(e,"display"),re([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===ce.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=_.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&re([e],!0),p.done(function(){for(r in g||re([e]),_.remove(e,"fxshow"),d)ce.style(e,r,d[r])})),u=vt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),ce.speed=function(e,t,n){var r=e&&"object"==typeof e?ce.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return ce.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in ce.fx.speeds?r.duration=ce.fx.speeds[r.duration]:r.duration=ce.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&ce.dequeue(this,r.queue)},r},ce.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ee).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=ce.isEmptyObject(t),o=ce.speed(e,n,r),a=function(){var e=yt(this,ce.extend({},t),o);(i||_.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=ce.timers,r=_.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&pt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||ce.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=_.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=ce.timers,o=n?n.length:0;for(t.finish=!0,ce.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),ce.each(["toggle","show","hide"],function(e,r){var i=ce.fn[r];ce.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(gt(r,!0),e,t,n)}}),ce.each({slideDown:gt("show"),slideUp:gt("hide"),slideToggle:gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){ce.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),ce.timers=[],ce.fx.tick=function(){var e,t=0,n=ce.timers;for(st=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ce.fx.stop(),st=void 0},ce.fx.timer=function(e){ce.timers.push(e),ce.fx.start()},ce.fx.interval=13,ce.fx.start=function(){ut||(ut=!0,dt())},ce.fx.stop=function(){ut=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fn.delay=function(r,e){return r=ce.fx&&ce.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=ie.setTimeout(e,r);t.stop=function(){ie.clearTimeout(n)}})},lt=C.createElement("input"),ct=C.createElement("select").appendChild(C.createElement("option")),lt.type="checkbox",le.checkOn=""!==lt.value,le.optSelected=ct.selected,(lt=C.createElement("input")).value="t",lt.type="radio",le.radioValue="t"===lt.value;var mt,xt=ce.expr.attrHandle;ce.fn.extend({attr:function(e,t){return M(this,ce.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ce.removeAttr(this,e)})}}),ce.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?ce.prop(e,t,n):(1===o&&ce.isXMLDoc(e)||(i=ce.attrHooks[t.toLowerCase()]||(ce.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void ce.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=ce.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!le.radioValue&&"radio"===t&&fe(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(D);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?ce.removeAttr(e,n):e.setAttribute(n,n),n}},ce.each(ce.expr.match.bool.source.match(/\w+/g),function(e,t){var a=xt[t]||ce.find.attr;xt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=xt[o],xt[o]=r,r=null!=a(e,t,n)?o:null,xt[o]=i),r}});var bt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;function Tt(e){return(e.match(D)||[]).join(" ")}function Ct(e){return e.getAttribute&&e.getAttribute("class")||""}function kt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(D)||[]}ce.fn.extend({prop:function(e,t){return M(this,ce.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ce.propFix[e]||e]})}}),ce.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ce.isXMLDoc(e)||(t=ce.propFix[t]||t,i=ce.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ce.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),le.optSelected||(ce.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ce.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ce.propFix[this.toLowerCase()]=this}),ce.fn.extend({addClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).addClass(t.call(this,e,Ct(this)))}):(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).removeClass(t.call(this,e,Ct(this)))}):arguments.length?(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<e.length;o++){i=e[o];while(-1<n.indexOf(" "+i+" "))n=n.replace(" "+i+" "," ")}a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(t,n){var e,r,i,o,a=typeof t,s="string"===a||Array.isArray(t);return v(t)?this.each(function(e){ce(this).toggleClass(t.call(this,e,Ct(this),n),n)}):"boolean"==typeof n&&s?n?this.addClass(t):this.removeClass(t):(e=kt(t),this.each(function(){if(s)for(o=ce(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==a||((r=Ct(this))&&_.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":_.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+Tt(Ct(n))+" ").indexOf(t))return!0;return!1}});var St=/\r/g;ce.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=v(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,ce(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=ce.map(t,function(e){return null==e?"":e+""})),(r=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=ce.valHooks[t.type]||ce.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(St,""):null==e?"":e:void 0}}),ce.extend({valHooks:{option:{get:function(e){var t=ce.find.attr(e,"value");return null!=t?t:Tt(ce.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!fe(n.parentNode,"optgroup"))){if(t=ce(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=ce.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<ce.inArray(ce.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ce.each(["radio","checkbox"],function(){ce.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ce.inArray(ce(e).val(),t)}},le.checkOn||(ce.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Et=ie.location,jt={guid:Date.now()},At=/\?/;ce.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new ie.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||ce.error("Invalid XML: "+(n?ce.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Dt=/^(?:focusinfocus|focusoutblur)$/,Nt=function(e){e.stopPropagation()};ce.extend(ce.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||C],d=ue.call(e,"type")?e.type:e,h=ue.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(d+ce.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[ce.expando]?e:new ce.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:ce.makeArray(t,[e]),c=ce.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!y(n)){for(s=c.delegateType||d,Dt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||C)&&p.push(a.defaultView||a.parentWindow||ie)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(_.get(o,"events")||Object.create(null))[e.type]&&_.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&$(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!$(n)||u&&v(n[d])&&!y(n)&&((a=n[u])&&(n[u]=null),ce.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Nt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Nt),ce.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=ce.extend(new ce.Event,n,{type:e,isSimulated:!0});ce.event.trigger(r,null,t)}}),ce.fn.extend({trigger:function(e,t){return this.each(function(){ce.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ce.event.trigger(e,t,n,!0)}});var qt=/\[\]$/,Lt=/\r?\n/g,Ht=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Pt(n,e,r,i){var t;if(Array.isArray(e))ce.each(e,function(e,t){r||qt.test(n)?i(n,t):Pt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==x(e))i(n,e);else for(t in e)Pt(n+"["+t+"]",e[t],r,i)}ce.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!ce.isPlainObject(e))ce.each(e,function(){i(this.name,this.value)});else for(n in e)Pt(n,e[n],t,i);return r.join("&")},ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ce.prop(this,"elements");return e?ce.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ce(this).is(":disabled")&&Ot.test(this.nodeName)&&!Ht.test(e)&&(this.checked||!we.test(e))}).map(function(e,t){var n=ce(this).val();return null==n?null:Array.isArray(n)?ce.map(n,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}}):{name:t.name,value:n.replace(Lt,"\r\n")}}).get()}});var Mt=/%20/g,Rt=/#.*$/,It=/([?&])_=[^&]*/,Wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ft=/^(?:GET|HEAD)$/,$t=/^\/\//,Bt={},_t={},zt="*/".concat("*"),Xt=C.createElement("a");function Ut(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(D)||[];if(v(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Vt(t,i,o,a){var s={},u=t===_t;function l(e){var r;return s[e]=!0,ce.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Gt(e,t){var n,r,i=ce.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ce.extend(!0,e,r),e}Xt.href=Et.href,ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,ce.ajaxSettings),t):Gt(ce.ajaxSettings,e)},ajaxPrefilter:Ut(Bt),ajaxTransport:Ut(_t),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=ce.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?ce(y):ce.event,x=ce.Deferred(),b=ce.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Wt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace($t,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(D)||[""],null==v.crossDomain){r=C.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Xt.protocol+"//"+Xt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=ce.param(v.data,v.traditional)),Vt(Bt,v,t,T),h)return T;for(i in(g=ce.event&&v.global)&&0==ce.active++&&ce.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ft.test(v.type),f=v.url.replace(Rt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Mt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(At.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(It,"$1"),o=(At.test(f)?"&":"?")+"_="+jt.guid+++o),v.url=f+o),v.ifModified&&(ce.lastModified[f]&&T.setRequestHeader("If-Modified-Since",ce.lastModified[f]),ce.etag[f]&&T.setRequestHeader("If-None-Match",ce.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+zt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Vt(_t,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=ie.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&ie.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<ce.inArray("script",v.dataTypes)&&ce.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(ce.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(ce.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--ce.active||ce.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return ce.get(e,t,n,"json")},getScript:function(e,t){return ce.get(e,void 0,t,"script")}}),ce.each(["get","post"],function(e,i){ce[i]=function(e,t,n,r){return v(t)&&(r=r||n,n=t,t=void 0),ce.ajax(ce.extend({url:e,type:i,dataType:r,data:t,success:n},ce.isPlainObject(e)&&e))}}),ce.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),ce._evalUrl=function(e,t,n){return ce.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){ce.globalEval(e,t,n)}})},ce.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=ce(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(e){ce(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ce(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=v(t);return this.each(function(e){ce(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ce(this).replaceWith(this.childNodes)}),this}}),ce.expr.pseudos.hidden=function(e){return!ce.expr.pseudos.visible(e)},ce.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ce.ajaxSettings.xhr=function(){try{return new ie.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Qt=ce.ajaxSettings.xhr();le.cors=!!Qt&&"withCredentials"in Qt,le.ajax=Qt=!!Qt,ce.ajaxTransport(function(i){var o,a;if(le.cors||Qt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Yt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&ie.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),ce.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ce.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ce.globalEval(e),e}}}),ce.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ce.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=ce("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),C.head.appendChild(r[0])},abort:function(){i&&i()}}});var Jt,Kt=[],Zt=/(=)\?(?=&|$)|\?\?/;ce.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||ce.expando+"_"+jt.guid++;return this[e]=!0,e}}),ce.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Zt,"$1"+r):!1!==e.jsonp&&(e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||ce.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=ie[r],ie[r]=function(){o=arguments},n.always(function(){void 0===i?ce(ie).removeProp(r):ie[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(r)),o&&v(i)&&i(o[0]),o=i=void 0}),"script"}),le.createHTMLDocument=((Jt=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Jt.childNodes.length),ce.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(le.createHTMLDocument?((r=(t=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,t.head.appendChild(r)):t=C),o=!n&&[],(i=w.exec(e))?[t.createElement(i[1])]:(i=Ae([e],t,o),o&&o.length&&ce(o).remove(),ce.merge([],i.childNodes)));var r,i,o},ce.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=Tt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&ce.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?ce("<div>").append(ce.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ce.expr.pseudos.animated=function(t){return ce.grep(ce.timers,function(e){return t===e.elem}).length},ce.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=ce.css(e,"position"),c=ce(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=ce.css(e,"top"),u=ce.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),v(t)&&(t=t.call(e,n,ce.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},ce.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ce.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===ce.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===ce.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=ce(e).offset()).top+=ce.css(e,"borderTopWidth",!0),i.left+=ce.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-ce.css(r,"marginTop",!0),left:t.left-i.left-ce.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===ce.css(e,"position"))e=e.offsetParent;return e||J})}}),ce.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;ce.fn[t]=function(e){return M(this,function(e,t,n){var r;if(y(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),ce.each(["top","left"],function(e,n){ce.cssHooks[n]=Ye(le.pixelPosition,function(e,t){if(t)return t=Ge(e,n),_e.test(t)?ce(e).position()[n]+"px":t})}),ce.each({Height:"height",Width:"width"},function(a,s){ce.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){ce.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return M(this,function(e,t,n){var r;return y(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?ce.css(e,t,i):ce.style(e,t,n,i)},s,n?e:void 0,n)}})}),ce.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ce.fn[t]=function(e){return this.on(t,e)}}),ce.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),ce.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){ce.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var en=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;ce.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return r=ae.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(ae.call(arguments)))}).guid=e.guid=e.guid||ce.guid++,i},ce.holdReady=function(e){e?ce.readyWait++:ce.ready(!0)},ce.isArray=Array.isArray,ce.parseJSON=JSON.parse,ce.nodeName=fe,ce.isFunction=v,ce.isWindow=y,ce.camelCase=F,ce.type=x,ce.now=Date.now,ce.isNumeric=function(e){var t=ce.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},ce.trim=function(e){return null==e?"":(e+"").replace(en,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return ce});var tn=ie.jQuery,nn=ie.$;return ce.noConflict=function(e){return ie.$===ce&&(ie.$=nn),e&&ie.jQuery===ce&&(ie.jQuery=tn),ce},"undefined"==typeof e&&(ie.jQuery=ie.$=ce),ce});
jQuery.noConflict();
/*! jQuery Migrate v3.4.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */
"undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e,window)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery"),window):t(jQuery,window)}(function(s,n){"use strict";function e(e){return 0<=function(e,t){for(var r=/^(\d+)\.(\d+)\.(\d+)/,n=r.exec(e)||[],o=r.exec(t)||[],a=1;a<=3;a++){if(+o[a]<+n[a])return 1;if(+n[a]<+o[a])return-1}return 0}(s.fn.jquery,e)}s.migrateVersion="3.4.1";var t=Object.create(null);s.migrateDisablePatches=function(){for(var e=0;e<arguments.length;e++)t[arguments[e]]=!0},s.migrateEnablePatches=function(){for(var e=0;e<arguments.length;e++)delete t[arguments[e]]},s.migrateIsPatchEnabled=function(e){return!t[e]},n.console&&n.console.log&&(s&&e("3.0.0")&&!e("5.0.0")||n.console.log("JQMIGRATE: jQuery 3.x-4.x REQUIRED"),s.migrateWarnings&&n.console.log("JQMIGRATE: Migrate plugin loaded multiple times"),n.console.log("JQMIGRATE: Migrate is installed"+(s.migrateMute?"":" with logging active")+", version "+s.migrateVersion));var o={};function u(e,t){var r=n.console;!s.migrateIsPatchEnabled(e)||s.migrateDeduplicateWarnings&&o[t]||(o[t]=!0,s.migrateWarnings.push(t+" ["+e+"]"),r&&r.warn&&!s.migrateMute&&(r.warn("JQMIGRATE: "+t),s.migrateTrace&&r.trace&&r.trace()))}function r(e,t,r,n,o){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return u(n,o),r},set:function(e){u(n,o),r=e}})}function a(e,t,r,n,o){var a=e[t];e[t]=function(){return o&&u(n,o),(s.migrateIsPatchEnabled(n)?r:a||s.noop).apply(this,arguments)}}function c(e,t,r,n,o){if(!o)throw new Error("No warning message provided");return a(e,t,r,n,o),0}function i(e,t,r,n){return a(e,t,r,n),0}s.migrateDeduplicateWarnings=!0,s.migrateWarnings=[],void 0===s.migrateTrace&&(s.migrateTrace=!0),s.migrateReset=function(){o={},s.migrateWarnings.length=0},"BackCompat"===n.document.compatMode&&u("quirks","jQuery is not compatible with Quirks Mode");var d,l,p,f={},m=s.fn.init,y=s.find,h=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,g=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,v=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;for(d in i(s.fn,"init",function(e){var t=Array.prototype.slice.call(arguments);return s.migrateIsPatchEnabled("selector-empty-id")&&"string"==typeof e&&"#"===e&&(u("selector-empty-id","jQuery( '#' ) is not a valid selector"),t[0]=[]),m.apply(this,t)},"selector-empty-id"),s.fn.init.prototype=s.fn,i(s,"find",function(t){var r=Array.prototype.slice.call(arguments);if("string"==typeof t&&h.test(t))try{n.document.querySelector(t)}catch(e){t=t.replace(g,function(e,t,r,n){return"["+t+r+'"'+n+'"]'});try{n.document.querySelector(t),u("selector-hash","Attribute selector with '#' must be quoted: "+r[0]),r[0]=t}catch(e){u("selector-hash","Attribute selector with '#' was not fixed: "+r[0])}}return y.apply(this,r)},"selector-hash"),y)Object.prototype.hasOwnProperty.call(y,d)&&(s.find[d]=y[d]);c(s.fn,"size",function(){return this.length},"size","jQuery.fn.size() is deprecated and removed; use the .length property"),c(s,"parseJSON",function(){return JSON.parse.apply(null,arguments)},"parseJSON","jQuery.parseJSON is deprecated; use JSON.parse"),c(s,"holdReady",s.holdReady,"holdReady","jQuery.holdReady is deprecated"),c(s,"unique",s.uniqueSort,"unique","jQuery.unique is deprecated; use jQuery.uniqueSort"),r(s.expr,"filters",s.expr.pseudos,"expr-pre-pseudos","jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),r(s.expr,":",s.expr.pseudos,"expr-pre-pseudos","jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos"),e("3.1.1")&&c(s,"trim",function(e){return null==e?"":(e+"").replace(v,"$1")},"trim","jQuery.trim is deprecated; use String.prototype.trim"),e("3.2.0")&&(c(s,"nodeName",function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},"nodeName","jQuery.nodeName is deprecated"),c(s,"isArray",Array.isArray,"isArray","jQuery.isArray is deprecated; use Array.isArray")),e("3.3.0")&&(c(s,"isNumeric",function(e){var t=typeof e;return("number"==t||"string"==t)&&!isNaN(e-parseFloat(e))},"isNumeric","jQuery.isNumeric() is deprecated"),s.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),c(s,"type",function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?f[Object.prototype.toString.call(e)]||"object":typeof e},"type","jQuery.type is deprecated"),c(s,"isFunction",function(e){return"function"==typeof e},"isFunction","jQuery.isFunction() is deprecated"),c(s,"isWindow",function(e){return null!=e&&e===e.window},"isWindow","jQuery.isWindow() is deprecated")),s.ajax&&(l=s.ajax,p=/(=)\?(?=&|$)|\?\?/,i(s,"ajax",function(){var e=l.apply(this,arguments);return e.promise&&(c(e,"success",e.done,"jqXHR-methods","jQXHR.success is deprecated and removed"),c(e,"error",e.fail,"jqXHR-methods","jQXHR.error is deprecated and removed"),c(e,"complete",e.always,"jqXHR-methods","jQXHR.complete is deprecated and removed")),e},"jqXHR-methods"),e("4.0.0")||s.ajaxPrefilter("+json",function(e){!1!==e.jsonp&&(p.test(e.url)||"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&p.test(e.data))&&u("jsonp-promotion","JSON-to-JSONP auto-promotion is deprecated")}));var j=s.fn.removeAttr,b=s.fn.toggleClass,w=/\S+/g;function x(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}i(s.fn,"removeAttr",function(e){var r=this,n=!1;return s.each(e.match(w),function(e,t){s.expr.match.bool.test(t)&&r.each(function(){if(!1!==s(this).prop(t))return!(n=!0)}),n&&(u("removeAttr-bool","jQuery.fn.removeAttr no longer sets boolean properties: "+t),r.prop(t,!1))}),j.apply(this,arguments)},"removeAttr-bool"),i(s.fn,"toggleClass",function(t){return void 0!==t&&"boolean"!=typeof t?b.apply(this,arguments):(u("toggleClass-bool","jQuery.fn.toggleClass( boolean ) is deprecated"),this.each(function(){var e=this.getAttribute&&this.getAttribute("class")||"";e&&s.data(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==t&&s.data(this,"__className__")||"")}))},"toggleClass-bool");var Q,A,R=!1,C=/^[a-z]/,N=/^(?:Border(?:Top|Right|Bottom|Left)?(?:Width|)|(?:Margin|Padding)?(?:Top|Right|Bottom|Left)?|(?:Min|Max)?(?:Width|Height))$/;s.swap&&s.each(["height","width","reliableMarginRight"],function(e,t){var r=s.cssHooks[t]&&s.cssHooks[t].get;r&&(s.cssHooks[t].get=function(){var e;return R=!0,e=r.apply(this,arguments),R=!1,e})}),i(s,"swap",function(e,t,r,n){var o,a,i={};for(a in R||u("swap","jQuery.swap() is undocumented and deprecated"),t)i[a]=e.style[a],e.style[a]=t[a];for(a in o=r.apply(e,n||[]),t)e.style[a]=i[a];return o},"swap"),e("3.4.0")&&"undefined"!=typeof Proxy&&(s.cssProps=new Proxy(s.cssProps||{},{set:function(){return u("cssProps","jQuery.cssProps is deprecated"),Reflect.set.apply(this,arguments)}})),e("4.0.0")?(A={animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},"undefined"!=typeof Proxy?s.cssNumber=new Proxy(A,{get:function(){return u("css-number","jQuery.cssNumber is deprecated"),Reflect.get.apply(this,arguments)},set:function(){return u("css-number","jQuery.cssNumber is deprecated"),Reflect.set.apply(this,arguments)}}):s.cssNumber=A):A=s.cssNumber,Q=s.fn.css,i(s.fn,"css",function(e,t){var r,n,o=this;return e&&"object"==typeof e&&!Array.isArray(e)?(s.each(e,function(e,t){s.fn.css.call(o,e,t)}),this):("number"==typeof t&&(r=x(e),n=r,C.test(n)&&N.test(n[0].toUpperCase()+n.slice(1))||A[r]||u("css-number",'Number-typed values are deprecated for jQuery.fn.css( "'+e+'", value )')),Q.apply(this,arguments))},"css-number");var S,P,k,H,E=s.data;i(s,"data",function(e,t,r){var n,o,a;if(t&&"object"==typeof t&&2===arguments.length){for(a in n=s.hasData(e)&&E.call(this,e),o={},t)a!==x(a)?(u("data-camelCase","jQuery.data() always sets/gets camelCased names: "+a),n[a]=t[a]):o[a]=t[a];return E.call(this,e,o),t}return t&&"string"==typeof t&&t!==x(t)&&(n=s.hasData(e)&&E.call(this,e))&&t in n?(u("data-camelCase","jQuery.data() always sets/gets camelCased names: "+t),2<arguments.length&&(n[t]=r),n[t]):E.apply(this,arguments)},"data-camelCase"),s.fx&&(k=s.Tween.prototype.run,H=function(e){return e},i(s.Tween.prototype,"run",function(){1<s.easing[this.easing].length&&(u("easing-one-arg","'jQuery.easing."+this.easing.toString()+"' should use only one argument"),s.easing[this.easing]=H),k.apply(this,arguments)},"easing-one-arg"),S=s.fx.interval,P="jQuery.fx.interval is deprecated",n.requestAnimationFrame&&Object.defineProperty(s.fx,"interval",{configurable:!0,enumerable:!0,get:function(){return n.document.hidden||u("fx-interval",P),s.migrateIsPatchEnabled("fx-interval")&&void 0===S?13:S},set:function(e){u("fx-interval",P),S=e}}));var M=s.fn.load,q=s.event.add,O=s.event.fix;s.event.props=[],s.event.fixHooks={},r(s.event.props,"concat",s.event.props.concat,"event-old-patch","jQuery.event.props.concat() is deprecated and removed"),i(s.event,"fix",function(e){var t,r=e.type,n=this.fixHooks[r],o=s.event.props;if(o.length){u("event-old-patch","jQuery.event.props are deprecated and removed: "+o.join());while(o.length)s.event.addProp(o.pop())}if(n&&!n._migrated_&&(n._migrated_=!0,u("event-old-patch","jQuery.event.fixHooks are deprecated and removed: "+r),(o=n.props)&&o.length))while(o.length)s.event.addProp(o.pop());return t=O.call(this,e),n&&n.filter?n.filter(t,e):t},"event-old-patch"),i(s.event,"add",function(e,t){return e===n&&"load"===t&&"complete"===n.document.readyState&&u("load-after-event","jQuery(window).on('load'...) called after load event occurred"),q.apply(this,arguments)},"load-after-event"),s.each(["load","unload","error"],function(e,t){i(s.fn,t,function(){var e=Array.prototype.slice.call(arguments,0);return"load"===t&&"string"==typeof e[0]?M.apply(this,e):(u("shorthand-removed-v3","jQuery.fn."+t+"() is deprecated"),e.splice(0,0,t),arguments.length?this.on.apply(this,e):(this.triggerHandler.apply(this,e),this))},"shorthand-removed-v3")}),s.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,r){c(s.fn,r,function(e,t){return 0<arguments.length?this.on(r,null,e,t):this.trigger(r)},"shorthand-deprecated-v3","jQuery.fn."+r+"() event shorthand is deprecated")}),s(function(){s(n.document).triggerHandler("ready")}),s.event.special.ready={setup:function(){this===n.document&&u("ready-event","'ready' event is deprecated")}},c(s.fn,"bind",function(e,t,r){return this.on(e,null,t,r)},"pre-on-methods","jQuery.fn.bind() is deprecated"),c(s.fn,"unbind",function(e,t){return this.off(e,null,t)},"pre-on-methods","jQuery.fn.unbind() is deprecated"),c(s.fn,"delegate",function(e,t,r,n){return this.on(t,e,r,n)},"pre-on-methods","jQuery.fn.delegate() is deprecated"),c(s.fn,"undelegate",function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},"pre-on-methods","jQuery.fn.undelegate() is deprecated"),c(s.fn,"hover",function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)},"pre-on-methods","jQuery.fn.hover() is deprecated");function T(e){var t=n.document.implementation.createHTMLDocument("");return t.body.innerHTML=e,t.body&&t.body.innerHTML}var F=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi;s.UNSAFE_restoreLegacyHtmlPrefilter=function(){s.migrateEnablePatches("self-closed-tags")},i(s,"htmlPrefilter",function(e){var t,r;return(r=(t=e).replace(F,"<$1></$2>"))!==t&&T(t)!==T(r)&&u("self-closed-tags","HTML tags must be properly nested and closed: "+t),e.replace(F,"<$1></$2>")},"self-closed-tags"),s.migrateDisablePatches("self-closed-tags");var D,W,_,I=s.fn.offset;return i(s.fn,"offset",function(){var e=this[0];return!e||e.nodeType&&e.getBoundingClientRect?I.apply(this,arguments):(u("offset-valid-elem","jQuery.fn.offset() requires a valid DOM element"),arguments.length?this:void 0)},"offset-valid-elem"),s.ajax&&(D=s.param,i(s,"param",function(e,t){var r=s.ajaxSettings&&s.ajaxSettings.traditional;return void 0===t&&r&&(u("param-ajax-traditional","jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),t=r),D.call(this,e,t)},"param-ajax-traditional")),c(s.fn,"andSelf",s.fn.addBack,"andSelf","jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),s.Deferred&&(W=s.Deferred,_=[["resolve","done",s.Callbacks("once memory"),s.Callbacks("once memory"),"resolved"],["reject","fail",s.Callbacks("once memory"),s.Callbacks("once memory"),"rejected"],["notify","progress",s.Callbacks("memory"),s.Callbacks("memory")]],i(s,"Deferred",function(e){var a=W(),i=a.promise();function t(){var o=arguments;return s.Deferred(function(n){s.each(_,function(e,t){var r="function"==typeof o[e]&&o[e];a[t[1]](function(){var e=r&&r.apply(this,arguments);e&&"function"==typeof e.promise?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[t[0]+"With"](this===i?n.promise():this,r?[e]:arguments)})}),o=null}).promise()}return c(a,"pipe",t,"deferred-pipe","deferred.pipe() is deprecated"),c(i,"pipe",t,"deferred-pipe","deferred.pipe() is deprecated"),e&&e.call(a,a),a},"deferred-pipe"),s.Deferred.exceptionHook=W.exceptionHook),s});

/**
 * Scripting for common MEGA WP manager and helper classes.
 */

const $ = jQuery;

/**
 * Remove and re-add the given event listener to the given event
 * to ensure there is just one instance of the given listener bound.
 *
 * @param event
 * @param listener
 * @returns {*|jQuery}
 */
$.fn.rebind = function (event, listener) {
    return this.off(event, listener).on(event, listener);
};

/**
 * Bag of utility functions.
 */
class Utils {
    /**
     * Sleep for the given amount of milliseconds.
     *
     * @param ms duration in milliseconds.
     * @returns {Promise<unknown>}
     */
    static async sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    /**
     * Similar to {@link String.replace} but with asynchronous callback support.
     * The resulting string is returned after all matches are replaced.
     * Courtesy of {@link https://stackoverflow.com/questions/33631041/javascript-async-await-in-replace Chris Morgan}
     *
     * @param string
     * @param regexp
     * @param replacerFunction
     * @returns {Promise<*>}
     */
    static async replaceAsync(string, regexp, replacerFunction) {
        const replacements = await Promise.all(
            Array.from(string.matchAll(regexp),
                match => replacerFunction(...match)));
        let i = 0;
        return string.replace(regexp, () => replacements[i++]);
    }

    /**
     * Convert a string to an {@link ArrayBuffer}.
     *
     * @param {string} b
     *
     * @returns {ArrayBuffer}
     */
    static strToAb(b) {
        let ab = new ArrayBuffer((b.length + 15) & -16);
        let u8 = new Uint8Array(ab);

        for (let i = b.length; i--;) {
            u8[i] = b.charCodeAt(i);
        }

        return ab;
    }

    /**
     * Scrolls the given element into view, but only if out of view.
     * FIXME: may need tweaking for use-cases other than document scrolling, tweak as needed.
     *
     * @param element The element to scroll into view.
     * @param options The options for scrolling. Supports position: 'start', 'center', 'end'
     */
    static scrollIntoViewIfNeeded(element, options = { position: 'start' }) {
        const topHeight = parseInt($(':root').css('--top-height').trim());

        const rect = element.getBoundingClientRect();
        const inViewVertically = rect.top >= topHeight && rect.bottom <= window.innerHeight;
        const inViewHorizontally = rect.left >= 0 && rect.right <= window.innerWidth;

        if (!inViewVertically || !inViewHorizontally) {
            const end = ['start', 'center', 'end'].includes(options.position) ? options.position : 'end';

            element.scrollIntoView({ block: end, inline: end });
        }
    }

    /**
     * Convert a base64 string to an {@link ArrayBuffer}.
     *
     * @param {string} a
     * @returns {ArrayBuffer}
     */
    static base64ToAb(a) {
        return Utils.strToAb(Utils.base64UrlDecode(a));
    }

    /**
     * Encode a string as Base64 URL.
     *
     * @param {string} string
     * @returns {string}
     */
    static base64UrlEncode(string) {
        string = unescape(encodeURIComponent(string)); // Unicode to UTF-8
        string = btoa(string); // To base64
        // Replace characters according to the Base64 URL specifications
        return string.replace(/\+/g, '-').replace(/\//g, '_').replace(/=/g, '');
    }

    /**
     * Decode a base64-encoded string.
     *
     * @param {string} data
     * @returns {string}
     */
    static base64UrlDecode(data) {
        data += '=='.substr((2 - data.length * 3) & 3);
        data = data.replace(/\-/g, '+').replace(/_/g, '/').replace(/,/g, '');

        try {
            return atob(data);
        }
        catch (e) {
            return '';
        }
    }

    /**
     * Encode a string as URL-safe Base64.
     *
     * @param {string} str
     * @returns {string}
     */
    static base64UrlEncodeUtf8(str) {
        const utf8Bytes = new TextEncoder().encode(str);
        const base64 = btoa(String.fromCharCode(...utf8Bytes));

        // // Replace characters according to the Base64 URL specifications
        return base64.replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '');
    }

    /**
     * Decode a url-safe base64-encoded string.
     *
     * @param {string} str
     * @returns {string}
     */
    static base64UrlDecodeUtf8(str) {
        // URL-safe base64 to base64
        str = str.replace(/-/g, '+').replace(/_/g, '/') + '=='.substr((2 - str.length * 3) & 3);

        const base64Bytes = atob(str).split('').map(c => c.charCodeAt(0));
        return new TextDecoder().decode(new Uint8Array(base64Bytes));
    }

    /**
     * Floors a number to the specified number of significant figures.
     *
     * @param {number} number
     * @param {number} sigFigs
     *
     * @returns {number}
     */
    static floorToSigFigs(number, sigFigs) {
        if (number === 0) return 0;

        const factor = Math.pow(10, Math.floor(Math.log10(Math.abs(number))) - (sigFigs - 1));
        return Math.floor(number / factor) * factor;
    }

    /**
     * Check if a {@link URL} has a filename - e.g. /downloads/mega.exe
     *
     * @param {URL} url
     * @returns {boolean} true if the URL looks like a filename
     */
    static hasFilename(url) {
        return /\/[^\/]+\.[^\/]+$/.test(url.pathname);
    }
}

/** Helper utilities from webclient */
class WebclientUtils {
    // From webclient copyright.js validateUrl()
    /**
     * Parse the given URL to validate as a MEGA share link, and check what type of link (file, folder etc.)
     *
     * @param {string} link
     */
    static parseMegaUrl(link) {
        let url = '';

        try {
            url = new URL(link);
        }
        catch (e) {
            return false;
        }

        if (!url) {
            return null;
        }

        const s4Match = /(?<bucket>[\w-]*)\.?(?:s3\.(?<region>\w+)\.s4\.mega\.io)\/(?<path>\S+)/i.exec(url.href);
        if (s4Match) {
            return ['s4', s4Match.groups];
        }

        const ext = String(url.protocol).endsWith('-extension:');

        const ourDomains = { 'mega.co.nz': 1, 'mega.nz': 1, 'mega.io': 1 };

        if (!ourDomains[url.host] && !ext) {
            return null;
        }
        let path = (ext ? '' : url.pathname) + url.hash;

        if (url.hash) {
            const hash = String(url.hash).replace('#', '');

            if (hash[0] === '!' || hash[0] === 'F' && hash[1] === '!') {
                path = hash[0] === 'F'
                    ? hash.replace('F!', '/folder/').replace('!', '#').replace('!', '/folder/').replace('?', '/file/')
                    : hash.replace('!', '/file/').replace('!', '#');
            }
            else if (hash[0] === 'P' && hash[1] === '!') {
                const a = Utils.base64UrlDecode(hash.substring(2));
                const b = String.fromCharCode(a.charCodeAt(2))
                    + String.fromCharCode(a.charCodeAt(3))
                    + String.fromCharCode(a.charCodeAt(4))
                    + String.fromCharCode(a.charCodeAt(5))
                    + String.fromCharCode(a.charCodeAt(6))
                    + String.fromCharCode(a.charCodeAt(7));
                path = '/file/' + Utils.base64UrlEncode(b);
            }
        }

        const match = path.match(/^[#/]*(file|folder|embed|collection|album)[!#/]+([\w-]{8})\b/i);

        if (!match) {
            return null;
        }
        const result = [match[1], match[2]];

        if (match[1] === 'folder') {
            const ffmatch = path.replace(match[0], '').match(/(file|folder)\/([\w-]{8})/i) || [];
            if (ffmatch[1] === 'file') {
                result[0] = 'file';
            }
            result.push(ffmatch[2]);
        }
        return result;
    }
}

/* region Managers, Helpers */

/**
 * An event object for simple event listener registration and invocation to
 * provide events without requiring attachment to DOM elements.
 * For global events, consider using Reactor.
 *
 * @see Reactor
 */
class Event {
    constructor() {
        this._callbacks = new Set();
    }

    invoke(...eventArgs) {
        for (const callback of this._callbacks) {
            callback(...eventArgs);
        }
    }

    addListener(callback) {
        this._callbacks.add(callback);
    }

    removeListener(callback) {
        this._callbacks.delete(callback);
    }
}

/**
 * A simple event system to provide events without requiring attachment to DOM elements.
 * Reactor is intended for global events. For scoped events, you can just instantiate an Event.
 *
 * Inspired by https://stackoverflow.com/questions/15308371/custom-events-model-without-using-dom-events-in-javascript
 * Courtesy of Mohsen
 *
 * @see Event
 */
class Reactor {
    static events = {};

    static registerEvent(eventName) {
        Reactor.events[eventName] = new Event();
    }

    static dispatchEvent(eventName, eventArgs) {
        const event = Reactor.events[eventName];
        if (!event) {
            console.warn(`An attempt was made to dispatch a non-existent event '${eventName}'.`);
            return;
        }

        console.log(`Dispatching '${eventName}' event.`);
        event.invoke(eventArgs);
    }

    static addEventListener(eventName, callback) {
        const event = Reactor.events[eventName];
        if (!event) {
            console.warn(`An attempt was made to register an event listener to a non-existent event '${eventName}'.`);
            return;
        }

        event.addListener(callback);
    }

    static removeEventListener(eventName, callback) {
        const event = Reactor.events[eventName];
        if (!event) {
            console.warn(`An attempt was made to remove an event listener from a non-existent event '${eventName}'.`);
            return;
        }

        event.removeListener(callback);
    }
}

class MemoryStorage {
    constructor() {
        this._data = {};
    }

    get length() {
        return Object.keys(this._data).length;
    }

    key(index) {
        const keys = Object.keys(this._data);
        return keys[index] || null;
    }

    /** @returns {string|null} */
    getItem(key) {
        return this._data.hasOwnProperty(key) ? this._data[key] : null;
    }

    setItem(key, value) {
        this._data[key] = String(value);
    }

    removeItem(key) {
        delete this._data[key];
    }

    clear() {
        this._data = {};
    }
}

class Storage {
    /** Get localStorage, or fall back to sessionStorage or even in-memory storage if not available. */
    static get local() {
        if (this.isLocalAvailable()) return window.localStorage;
        if (this.isSessionAvailable()) return window.sessionStorage;

        this.memoryStorage = this.memoryStorage || new MemoryStorage();
        return this.memoryStorage;
    }

    /** Get sessionStorage or fall back to in-memory storage if not available. */
    static get session() {
        if (this.isSessionAvailable()) return window.sessionStorage;

        this.memoryStorage = this.memoryStorage || new MemoryStorage();
        return this.memoryStorage;
    }

    static isLocalAvailable() {
        if (this._isLsAvailable !== undefined) return this._isLsAvailable;

        try {
            localStorage.setItem('test.ls', '1');
            this._isLsAvailable = localStorage.getItem('test.ls') === '1';
            localStorage.removeItem('test.ls');
        }
        catch (e) {
            this._isLsAvailable = false;
        }

        return this._isLsAvailable;
    }

    static isSessionAvailable() {
        if (this._isSsAvailable !== undefined) return this._isSsAvailable;

        try {
            sessionStorage.setItem('test.ss', '1');
            this._isSsAvailable = sessionStorage.getItem('test.ss') === '1';
            sessionStorage.removeItem('test.ss');
        }
        catch (e) {
            this._isSsAvailable = false;
        }

        return this._isSsAvailable;
    }
}

class CookieSettings {
    static onConsentChanged = new Event();

    static isPrefsAllowed() {
        return !!this.getConsent().preferences;
    }

    static isAnalyticsAllowed() {
        return !!this.getConsent().analytics;
    }

    static isMarketingAllowed() {
        return !!this.getConsent().marketing;
    }

    static isConsentSet() {
        const consent = this.getConsent();

        return Object.keys(consent).length > 0;
    }

    /** @returns {object} */
    static getConsent() {
        if (this._consent) return this._consent;

        const consent = Cookies.get('cookieConsent');
        try {
            this._consent = JSON.parse(consent);
        }
        catch {
            this._consent = {};
        }

        if (!this._consent || typeof this._consent !== 'object') {
            this._consent = {};
        }

        return this._consent;
    }

    /** @param {object} value */
    static setConsent(value) {
        const oldConsent = this._consent;

        this._consent = value;

        Cookies.set('cookieConsent', JSON.stringify(value), 365);
        this.onConsentChanged.invoke(this._consent, oldConsent);
    }
}

class Cookies {
    static get(name) {
        const cookies = document.cookie.split(';');
        for (const cookie of cookies) {
            const [key, value] = cookie.trim().split('=');

            if (key === name) {
                return value;
            }
        }
    }

    static set(name, value, days) {
        const properties = new Map();
        properties.set(name, value);

        if (days) {
            const date = new Date();
            date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
            properties.set('Expires', date.toUTCString());
        }

        const host = (new URL(window.location)).hostname;
        properties.set('Domain', host.endsWith('mega.io') ? 'mega.io' : host);
        properties.set('Path', '/');
        properties.set('SameSite', 'Strict; Secure');

        let cookie = '';
        for (const [key, value] of properties.entries()) {
            cookie += `${key}=${value};`;
        }

        document.cookie = cookie;
    }
}

class Prefs {
    static init() {
        CookieSettings.onConsentChanged.addListener(this._onConsentChanged.bind(this));
    }

    static remove(pref) {
        const key = `pref.${pref}`;

        Storage.local.removeItem(key);
        Storage.session.removeItem(key);
    }

    /** @returns {string|null} */
    static get(pref) {
        const key = `pref.${pref}`;

        const storage = CookieSettings.isPrefsAllowed() ? Storage.local : Storage.session;

        return storage.getItem(key);
    }

    static set(pref, value) {
        const key = `pref.${pref}`;

        const storage = CookieSettings.isPrefsAllowed() ? Storage.local : Storage.session;

        storage.setItem(key, value);
    }

    static _onConsentChanged(newConsent, oldConsent) {
        // Move preferences to sessionStorage or localStorage on preference cookie setting change.
        let newStorage;
        let oldStorage;

        if (newConsent.preferences && !oldConsent.preferences) {
            newStorage = Storage.local;
            oldStorage = Storage.session;
        }
        else if (!newConsent.preferences && oldConsent.preferences) {
            newStorage = Storage.session;
            oldStorage = Storage.local;
        }
        else return;

        for (let i = 0; i < oldStorage.length; i++) {
            const key = oldStorage.key(i);
            if (!key.startsWith('pref.')) continue;

            const value = oldStorage.getItem(key);
            newStorage.setItem(key, value);
        }
    }
}

/**
 * Communicate with the MEGA API servers.
 * {@link https://confluence.developers.mega.co.nz/display/API/API+Overview View API Documentation}
 * @see ApiErrors
 */
class Api {
    static get domain() {
        return Storage.local.getItem('d.api.domain') || 'https://g.api.mega.co.nz/';
    }

    static get csUrl() {
        Api._csUrl ||= this._getCsUrl();

        return Api._csUrl.href;
    }

    /** @param {string} domain */
    static setDomain(domain) {
        if (!domain) {
            Storage.local.removeItem('d.api.domain');
            return;
        }

        if (typeof domain !== 'string') {
            console.warn(`[API] Unexpected request URL domain value "${domain}". Expecting a non-empty string.`);
            return;
        }

        Storage.local.setItem('d.api.domain', domain);
    }

    /** @param {object} params */
    static setRequestUrlParams(params) {
        if (!params) {
            Storage.local.removeItem('d.api.requestParams');
            return;
        }

        if (typeof params !== 'object') {
            console.warn('[API] Unexpected request URL parameters value. Expecting a non-empty object.');
            return;
        }

        Storage.local.setItem('d.api.requestParams', JSON.stringify(params));
    }

    /**
     * Send a single request to the API servers.
     * Returns a promise.
     *
     * @param request
     * @returns {Promise<*>}
     */
    static async request(request) {
        const response = await Api._sendRequest(request);

        return Api._handleResponse(response);
    }

    static async _sendRequest(request) {
        const maxRetries = 4;

        // Send the request to the API.
        // If network error encountered, retry with exponential backoff.
        // If HTTP error encountered, retry with exponential backoff.
        // If max retries reached, throw error.

        for (let i = 1; i <= maxRetries; i++) {
            let response;

            try {
                response = await fetch(Api.csUrl, {
                    method: 'POST',
                    body: JSON.stringify([request]),
                });
            }
            catch (e) {
                // Network error encountered.
                console.warn(`[API] Network error encountered for API request (attempt ${i} of ${maxRetries}).`);

                if (i >= maxRetries) {
                    console.error(`[API] Couldn't send an API request after ${maxRetries} attempts.`);
                    console.debug(e);
                    throw new ApiRequestError(`[API] Sending the API request failed after ${maxRetries} attempts (network error).`);
                }

                // Let's retry w/ exponential backoff
                await Utils.sleep((i ** 2) * 1000);
                continue;
            }

            if (response.ok) return response;

            // HTTP error encountered.
            console.warn(`[API] HTTP error ${response.status} (${response.statusText}) encountered for API request (attempt ${i} of ${maxRetries}).`);

            if (i >= maxRetries) {
                console.error(`[API] Max retries reached on API request (HTTP error ${response.status}, ${response.statusText}).`);
                throw new ApiRequestError(`[API] The API request failed after ${maxRetries} attempts (HTTP error ${response.status}, ${response.statusText}).`);
            }

            // Let's retry w/ exponential backoff
            await Utils.sleep((i ** 2) * 1000);
        }
    }

    static async _handleResponse(response) {
        let responseBody;
        try {
            responseBody = await response.json();
        }
        catch (e) {
            console.error('[API] Couldn\'t decode an API response as json.', e);
            throw new ApiRequestError('Decoding the API response failed.');
        }

        // If the API just returns a negative integer and not json, there is an issue with this api layer.
        if (Number.isInteger(responseBody)) {
            console.error(`[API] API error ${responseBody}: ${ApiErrors.getMessage(responseBody)}`);
            throw new ApiRequestError('API error.');
        }

        if (!Array.isArray(responseBody) || responseBody.length < 1) {
            console.error('[API] API returned something unexpected.');
            throw new ApiRequestError('API returned unexpected response.');
        }

        return responseBody[0];
    }

    static _getCsUrl() {
        const url = new URL(Api.domain);
        url.pathname = '/cs';

        let customUrlParams = Storage.local.getItem('d.api.requestParams');
        try {
            customUrlParams = JSON.parse(customUrlParams);
        }
        catch (e) {
            console.warn('[API] Unable to parse custom API request URL parameters. Expecting valid JSON.');
            return url;
        }

        if (!customUrlParams) return url;

        if (typeof customUrlParams !== 'object') {
            console.warn('[API] Unable to load custom API request URL parameters. Expecting an object.')
            return url;
        }

        url.search = new URLSearchParams(customUrlParams).toString();

        return url;
    }

    /**
     * @param {number} id
     * @param {string} message
     * @returns {Promise<*>}
     */
    static async log(id, message) {
        let response;
        try {
            response = await Api.request({ a: 'log', e: id, m: message });
        }
        catch (e) {
            console.error(`[API] Unable to log event "${id}."`, e.message);
            return false;
        }

        if (response !== 0) {
            console.error(`[API] API returned unexpected response when logging event "${id}."`,
                Number.isInteger(response) ? `Code: ${response} (${ApiErrors.getMessage(response)})` : '');
            return false;
        }

        return true;
    }
}

/**
 * Stub error (add properties like error code as needed)
 *
 * @see Api
 */
class ApiRequestError extends Error {}

/**
 * Definitions for errors returned by the API servers.
 * {@link https://confluence.developers.mega.co.nz/display/SUPPORT/Api_error_codes View API Codes Documentation}
 * @see Api
 */
class ApiErrors {
    /** -1 */ static EINTERNAL = -1;
    /** -2 */ static EARGS = -2;
    /** -3 */ static EAGAIN = -3;
    /** -4 */ static ERATELIMIT = -4;
    /** -5 */ static EFAILED = -5;
    /** -6 */ static ETOOMANY = -6;

    /** -8 */ static EEXPIRED = -8;
    /** -9 */ static ENOENT = -9;

    /** -11 */ static EACCESS = -11;
    /** -12 */ static EEXIST = -12;

    /** -15 */ static ESID = -15;
    /** -16 */ static EBLOCKED = -16;

    /** -18 */ static ETEMPUNAVAIL = -18;
    /** -19 */ static ETOOMANYCONNECTIONS = -19;

    /** -26 */ static EMFAREQUIRED = -26;

    // Generic messages when reasons more specific for a command aren't available
    static messages = {
        [ApiErrors.EINTERNAL]: 'An unexpected error occurred in the API.',
        [ApiErrors.EARGS]: 'The required arguments provided to the API command were invalid or missing.',
        [ApiErrors.EAGAIN]: 'The API dropped the request. Try again later.',
        [ApiErrors.ERATELIMIT]: 'API rate limit exceeded.',
        [ApiErrors.EFAILED]: 'The API failed to handle the request.',
        [ApiErrors.ETOOMANY]: 'Too many actions done recently.',
        [ApiErrors.EEXPIRED]: 'The resource has expired.',

        [ApiErrors.ENOENT]: 'The API could not find the requested entity.',
        [ApiErrors.EEXIST]: 'The API has already performed this action.',

        [ApiErrors.EACCESS]: 'The request was not authorised.',

        [ApiErrors.ESID]: ' The session authentication is invalid and is required for the command, or the command is otherwise not available.',
        [ApiErrors.EBLOCKED]: 'The API refused the request.',

        [ApiErrors.ETEMPUNAVAIL]: 'The API cannot handle this request at the time. Try again later.',
        [ApiErrors.ETOOMANYCONNECTIONS]: 'The API refused the request because there are too many connections.',

        [ApiErrors.EMFAREQUIRED]: 'Multi-factor authentication is required.',
    };

    static getMessage(code) {
        return ApiErrors.messages[code] || `Unknown error, code '${code}'.`;
    }
}

/**
 * Represents a layout breakpoint to define layout at a particular screen width.
 */
class Breakpoint {
    static XL = new Breakpoint('XL', 1320, Infinity);
    static LG = new Breakpoint('LG', 1080, 1320);
    static MD = new Breakpoint('MD', 768, 1080);
    static SM = new Breakpoint('SM', 0, 768);
    static SM_Old = new Breakpoint('SM_Old', 576, 768);
    static XS_Old = new Breakpoint('XS_Old', 0, 576);

    name;
    min;
    max;

    constructor(name, min, max) {
        this.name = name;
        this.min = min;
        this.max = max;
        Object.freeze(this);
    }

    /* Override operators in JS, when? */

    eq(breakpoint) {
        return this.min === breakpoint.min;
    }

    lt(breakpoint) {
        return this.min < breakpoint.min;
    }

    gt(breakpoint) {
        return this.min > breakpoint.min;
    }

    lteq(breakpoint) {
        return this.min <= breakpoint.min;
    }

    gteq(breakpoint) {
        return this.min >= breakpoint.min;
    }

    isWidthInside(width) {
        return width >= this.min && width <= this.max;
    }

    toString() {
        return this.name;
    }
}

/**
 * Simple static class to handle page layout breakpoint scripting.
 */
class Breakpointer {
    static breakpoints = [Breakpoint.XL, Breakpoint.LG, Breakpoint.MD, Breakpoint.SM];

    static currentBreakpoint = Breakpoint.XL;

    static breakpointChangedEvent = new Event();
    static initialisedEvent = new Event();

    static _isInitialised = false;

    static init() {
        Reactor.registerEvent('breakpoint-changed');

        document.addEventListener('load', () => Breakpointer._listen());
        window.addEventListener('resize', () => Breakpointer._listen());
    }

    /**
     * Get the appropriate breakpoint from the given width.
     */
    static fromWidth(width) {
        for (const breakpoint of this.breakpoints) {
            if (breakpoint.isWidthInside((width))) {
                return breakpoint;
            }
        }

        return Breakpoint.XL;
    }

    /**
     * Updates the current breakpoint based on the window's size.
     */
    static setCurrent() {
        const newBreakpoint = this.fromWidth(window.innerWidth);
        if (newBreakpoint.eq(this.currentBreakpoint)) return;

        this.currentBreakpoint = newBreakpoint;
        Reactor.dispatchEvent('breakpoint-changed', this.currentBreakpoint);
        this.breakpointChangedEvent.invoke(this.currentBreakpoint);
        console.log(`New breakpoint set: ${this.currentBreakpoint}.`);
    }

    static _listen() {
        Breakpointer.setCurrent();

        if (!this._isInitialised) {
            this.initialisedEvent.invoke(Breakpointer.currentBreakpoint);
            this._isInitialised = true;
        }
    }
}

/**
 * Simple static class to handle themes
 */
class ThemeManager {
    static themes = [];
    static currentTheme;
    static deviceColorScheme;

    static themeChangedEvent = new Event();

    static init() {
        Reactor.registerEvent('theme-changed');

        // Set the theme ASAP (when <body> is added) to eliminate white-screen flash.
        const observer = new MutationObserver((mutations) => {
            for (const mutation of mutations) {
                for (const node of mutation.addedNodes) {
                    if (node.tagName === 'BODY') {
                        ThemeManager.applyTheme();
                        observer.disconnect();
                    }
                }
            }
        });

        observer.observe(document.documentElement, { childList: true });

        window.addEventListener('pageshow', (event) => {
            if (event.persisted) {
                // Check for and apply theme changes when showing a cached page
                ThemeManager.currentTheme = null; // preferred theme now unknown
                ThemeManager.applyTheme();
            }
        });

        this.initPrintEventListeners();
    }

    static get preferredTheme() {
        return Prefs.get('theme');
    }

    static registerThemes(themes) {
        if (!Array.isArray(themes)) {
            console.warn('Provided themes parameter is not an array. Not registering themes.');
        }

        ThemeManager.themes = [...ThemeManager.themes, ...themes];
    }

    static getTheme() {
        return ThemeManager.currentTheme;
    }

    static setTheme(theme) {
        if (!theme) {
            console.warn('Missing or invalid theme parameter given. Not setting theme.');
            return;
        }

        if (!ThemeManager.themes.includes(theme)) {
            console.warn(`Unrecognised theme '${theme}'. Not setting theme.`);
            return;
        }

        if (theme === ThemeManager.currentTheme) {
            console.warn(`Theme '${theme}' already set.`);
            return;
        }

        ThemeManager.currentTheme = theme;
        ThemeManager.applyTheme();
    }

    static applyTheme() {
        // Determine by current set theme or user preference, if set
        if (!ThemeManager.currentTheme) {
            ThemeManager.currentTheme = ThemeManager.preferredTheme;
        }

        // or default to OS/browser setting, if available
        if (!ThemeManager.currentTheme && window.matchMedia) {
            ThemeManager.deviceColorScheme = window.matchMedia('(prefers-color-scheme: dark)');
            ThemeManager.currentTheme = ThemeManager.deviceColorScheme.matches ? 'dark' : 'light';

            ThemeManager.deviceColorScheme.removeEventListener('change', ThemeManager.onDeviceSchemeChange);
            ThemeManager.deviceColorScheme.addEventListener('change', ThemeManager.onDeviceSchemeChange);
        }

        if (!ThemeManager.currentTheme) {
            console.warn(`Unable to determine theme to apply.`);
            return;
        }

        document.body.classList.remove(...ThemeManager.themes.map(name => `theme-${name}`));
        document.body.classList.add(`theme-${ThemeManager.currentTheme}`);

        Reactor.dispatchEvent('theme-changed', ThemeManager.currentTheme);
        ThemeManager.themeChangedEvent.invoke(ThemeManager.currentTheme);
        console.log(`Theme '${ThemeManager.currentTheme}' applied.`);
    }

    static savePreference() {
        Prefs.set('theme', ThemeManager.currentTheme);
        console.log(`Theme preference saved as '${ThemeManager.preferredTheme}'.`);
    }

    static removePreference() {
        const storedValue = Prefs.get('theme');
        Prefs.remove('theme');
        console.log(`Theme preference of '${storedValue}' removed.`);
    }

    static onDeviceSchemeChange() {
        if (ThemeManager.preferredTheme) {
            // User has now set a preferred theme, which always overrides browser/OS setting.
            ThemeManager.deviceColorScheme.removeEventListener('change', ThemeManager.onDeviceSchemeChange);
            return;
        }

        ThemeManager.setTheme(ThemeManager.deviceColorScheme.matches ? 'dark' : 'light');
    }

    static initPrintEventListeners() {
        let theme;
        window.addEventListener('beforeprint', () => {
            theme = ThemeManager.getTheme();
            if (theme !== 'light') {
                ThemeManager.setTheme('light');
            }
        });

        window.addEventListener('afterprint', () => {
            if (theme && theme !== ThemeManager.getTheme()) {
                ThemeManager.setTheme(theme);
            }
        });
    }
}

/**
 * Simple class to facilitate modal registrations with which the codebase can fetch modals by name.
 */
class ModalRegister {
    /** @var HTMLElement */
    static get modalContainer() {
        this._modalContainer = this._modalContainer || document.body.querySelector(':scope > .modals');
        return this._modalContainer;
    };

    static _modalContainer;
    static _modals = {};

    /**
     *
     * @param {Modal} modal
     */
    static registerModal(modal) {
        if (!(modal instanceof Modal)) {
            console.warn('An attempt was made to register a modal that was not of type \'Modal\'.');
            return;
        }

        ModalRegister._modals[modal.getName()] = modal;
    }

    /**
     *
     * @param modalName
     * @returns {Modal}
     */
    static getModal(modalName) {
        return ModalRegister._modals[modalName] || null;
    }
}

class L10n {
    /** Default currency */
    static currency = 'EUR';
    static currencySymbol = '';

    /** Invoked when the user selects a different currency */
    static onCurrencyPrefChanged = new Event();

    /** User's local currency based on IP via API */
    static _localCurrency;
    static _localCurrencySymbol;

    /** User's preferred currency */
    static _preferredCurrency;

    /** User's country code based on IP via API */
    static _countryCode;
    static _siteLocale;

    static _numberFormatter;

    /**
     * Locale of the site content. Not to be confused with the user's preferred browser locale.
     * Some locales don't include the region, like "th".
     * */
    static get siteLocale() {
        return this._siteLocale ||= document.documentElement.lang;
    }

    /**
     * Get a set of all supported locales based on the language links in the <head>.
     *
     * @returns {Set<string>}
     */
    static get supportedLocales() {
        if (!this._supportedLocales) {
            this._parseAlternateLinks();
        }

        return this._supportedLocales;
    }

    /** @returns {Map<string, string>} hreflang => href */
    static get alternateLocalePaths() {
        if (!this._hreflangs) {
            this._parseAlternateLinks();
        }

        return this._hreflangs;
    }

    static _parseAlternateLinks() {
        this._supportedLocales = new Set();
        this._hreflangs = new Map();

        for (const link of document.head.querySelectorAll(':scope > link[rel="alternate"]')) {
            const hreflang = link.getAttribute('hreflang');
            const href = link.getAttribute('href');

            if (hreflang && href) {
                this._hreflangs.set(hreflang, href);

                if (hreflang !== 'x-default') {
                    this._supportedLocales.add(hreflang);
                }
            }
        }
    }

    static async getLocalCurrency() {
        await (this._initPromise ||= this._ensureInit());

        return this._localCurrency;
    }

    static async getLocalCurrencySymbol() {
        await (this._initPromise ||= this._ensureInit());

        return this._localCurrencySymbol;
    }

    static async getPreferredCurrency() {
        return this._preferredCurrency || await this.getLocalCurrency();
    }

    static setPreferredCurrency(value) {
        this._preferredCurrency = value;
        this.onCurrencyPrefChanged.invoke(this._preferredCurrency);
    }

    static formatNumber(value) {
        this._numberFormatter ||= new Intl.NumberFormat(this.getFormatLocale());

        value = typeof value === 'string' ? parseFloat(value) : value;

        return this._numberFormatter.format(value);
    }

    static async _ensureInit() {
        if (!this._localCurrency) {
            let details = {};
            try {
                details = await Api.request({ a: 'lcc', amount: 1 });
            }
            catch (e) {
                console.error('Couldn\'t request local currency details from API. Defaulting to euros.', e.message);
            }

            this._countryCode = details.country;
            this._localCurrency = details.name || this.currency;
            this._localCurrencySymbol = details.symbol || this.currencySymbol;
        }
    }

    /**
     * Get the user's country code as determined by the API.
     * Null if the code couldn't be determined.
     * @return {string|null}
     * */
    static async getCountry() {
        await this._ensureInit();
        return this._countryCode || null;
    }

    /**
     * Get the user's site locale preference,or their first preferred browser-set locale that is supported.
     * This is not necessarily the same as the current site locale.
     * For that, use {@linkcode L10n.siteLocale}, {@linkcode L10n.getLocale()} or {@linkcode L10n.getFormatLocale()}.
     *
     * @returns {string|null} their preferred locale, or null if none of their preferred locales are supported.
     */
    static tryGetPreferredLocale() {
        let preferredLocale = Prefs.get('language');
        if (!L10n.supportedLocales.has(preferredLocale)) {
            if (preferredLocale) {
                console.warn(`[L10n] Unsupported or invalid locale preference "${preferredLocale}". Removing.`);
                Prefs.remove('language');
            }

            preferredLocale = this.tryGetBrowserLocale();
        }

        return preferredLocale;
    }

    /**
     * Get the user's first preferred browser locale that is supported, if it exists.
     *
     * @returns {string|null} user's preferred browser locale if it exists, or null
     */
    static tryGetBrowserLocale() {
        // First look for an exact locale match, language and region
        // Then strip region from both supported and browser locales to get the first locale where the languages match

        if (!this._supportedLanguages) {
            this._supportedLanguages = new Map();
            for (const locale of this.supportedLocales) {
                this._supportedLanguages.set(new Intl.Locale(locale).language, locale);
            }
        }

        for (const locale of navigator.languages) {
            if (L10n.supportedLocales.has(locale)) {
                return locale;
            }

            const intlLocale = new Intl.Locale(locale);
            if (L10n.supportedLocales.has(intlLocale.language)) {
                return intlLocale.language;
            }
            if (this._supportedLanguages.has(intlLocale.language)) {
                return this._supportedLanguages.get(intlLocale.language);
            }
        }

        return null;
    }

    /**
     * Identify the most appropriate locale for the site.
     * The locale of the site content is matched against the user's browser locale preferences.
     *
     * @returns {string} The user's preferred locale compatible with the locale of the site content, or the site content locale.
     */
    static getLocale() {
        let locale = L10n.siteLocale;

        if (navigator.languages) {
            if (locale.includes('-') && navigator.languages.includes(locale)) { // e.g. site locale zh-CN => zh-CN
                return locale; // Site locale (language and region) matched with a browser locale
            }

            // No site locale and browser locale match; try without region
            locale = locale.replace(/-.*/, '');
            let matchedLocale = navigator.languages.filter(l => l.startsWith(`${locale}-`))[0]; // e.g. ar => ar-EG
            if (matchedLocale) {
                return matchedLocale; // Browser locale with site language and browser region found
            }

            matchedLocale = navigator.languages.filter(l => l.startsWith(locale))[0]; // ar => ar
            if (matchedLocale) {
                return matchedLocale;
            }
        }

        // Default to the locale of the site content if no compatible browser-set locale found.
        return locale;
    }

    /** Get locale appropriate for formatting */
    static getFormatLocale() {
        const locale = this.getLocale();

        // Ensure Western Arabic numerals if locale region for Arabic is not defined.
        return locale === 'ar' ? 'ar-AE' : locale;
    }
}

class LinkManager {
    /**
     * Returns a cached map of {@link HTMLAnchorElement}s and their parsed {@link URL}s found on the current page.
     *
     * @returns {Map<HTMLAnchorElement, URL>}
     */
    static getLinks() {
        if (this._allLinks) return this._allLinks;

        this._allLinks = new Map();

        for (const a of document.getElementsByTagName('a')) {
            if (!a || !a.href) continue;

            let url;
            try {
                url = new URL(a.href);
            }
            catch (e) {
                console.warn('Element with invalid href found.');
                console.trace(a);
                continue;
            }

            this._allLinks.set(a, url);
        }

        return this._allLinks;
    }

    /**
     * Returns a cached map of {@link HTMLAnchorElement}s and their parsed {@link URL}s
     * for all webclient links found on the current page.
     *
     * @returns {Map<HTMLAnchorElement, URL>}
     */
    static getWebclientLinks() {
        if (this._webclientLinks) return this._webclientLinks;

        this._webclientLinks = new Map();

        for (const [a, url] of LinkManager.getLinks().entries()) {
            if (url.hostname !== 'mega.nz') continue;
            if (Utils.hasFilename(url)) continue; // Don't include MEGA package download links - such links are not part of webclient
            if (url.pathname.startsWith('/linux')) continue; // Linux downloads directory explorer is not webclient

            this._webclientLinks.set(a, url);
        }

        return this._webclientLinks;
    }

    /**
     * Returns a cached map of {@link HTMLAnchorElement}s and their parsed {@link URL}s
     * for all app store links of known MEGA apps found on the current page.
     *
     * @returns {Map<any, any>}
     */
    static getAppStoreLinks() {
        if (this._appStoreLinks) return this._appStoreLinks;

        const knownApps = new Map([
            ['apps.apple.com', ['/app/mega/id706857885', '/app/mega-vpn-privacy-online/id6456784858']],
            ['play.google.com', ['mega.privacy.android.app', 'mega.vpn.android.app']],
        ]);

        this._appStoreLinks = new Map();

        for (const [a, url] of LinkManager.getLinks().entries()) {
            if (url.hostname === 'apps.apple.com' && knownApps.get(url.hostname).includes(url.pathname)) {
                this._appStoreLinks.set(a, url);
            }
            else if (url.hostname === 'play.google.com'
                    && url.pathname.includes('/store/apps/details')
                    && knownApps.get(url.hostname).includes(url.searchParams.get('id'))) {
                this._appStoreLinks.set(a, url);
            }
        }

        return this._appStoreLinks;
    }
}

/**
 * Instance of a placeholder within the content.
 */
class Placeholder {
    /** Unique key for this placeholder. The placeholder can be used more than once. */
    key;

    /** Cached value */
    value;

    /**
     * Get a new Placeholder instance from Object.
     *
     * @param {Object} object
     * @returns {Placeholder}
     */
    static fromObject(object) {
        const placeholder = new Placeholder(object.key);
        Object.assign(placeholder, object);

        return placeholder;
    }

    constructor(key) {
        this.key = key;
    }

    /**
     * Asynchronously get the value of this placeholder. Returns a cached result if available.
     *
     * @returns {Promise<string>}
     */
    async getValue() {
        if (this.value !== undefined) return this.value;

        this._fetchPromise = this._fetchPromise || this._fetchValue();
        this.value = await this._fetchPromise;

        return this.value;
    }

    async _fetchValue() { }
}

/**
 * Find placeholders within the content and populate them with values.
 */
class PlaceholderPopulator {
    static _searchLocations = ['.page-container'];

    static regex = /!{(\w+)}/g;

    static _placeholders = {};

    static _unregisteredMatches = new Set();

    static init() {
        document.addEventListener('DOMContentLoaded', () => {
            if (!Object.keys(this._placeholders).length) return;

            this.populatePlaceholders(); // Async fire and forget.

            if (this._unregisteredMatches.size > 0) {
                const matches = [...this._unregisteredMatches].map(match => `"!{${match}}"`).join(', ');
                console.warn(`Unregistered placeholders ${matches} detected. Ignoring.`);
            }
        });
    }

    /**
     * From the given placeholder data as an array of objects,
     * instantiate {@link Placeholder} objects and register them.
     *
     * @param {object[]} placeholders
     */
    static registerPlaceholders(placeholders) {
        if (typeof placeholders !== 'object') {
            console.warn(`Placeholders must be an object, got ${typeof placeholders}`);
            return;
        }

        for (const placeholder of placeholders) {
            this.registerPlaceholder(Placeholder.fromObject(placeholder));
        }
    }

    /**
     * Register a single {@link Placeholder} instance, if the key is available.
     * @param {Placeholder} placeholder
     */
    static registerPlaceholder(placeholder) {
        if (this._placeholders[placeholder.key]) {
            console.warn(`Attempted to register placeholder with key "${placeholder.key}", but it is already in use. Ignoring.`);
            return;
        }

        this._placeholders[placeholder.key] = Placeholder.fromObject(placeholder);
    }

    /**
     * Get the placeholder, if it exists.
     *
     * @param {string} key
     * @returns {Placeholder|undefined}
     */
    static getPlaceholder(key) {
        return this._placeholders[key];
    }

    /**
     * Find placeholders within the defined search locations and replace them with values.
     */
    static async populatePlaceholders() {
        // Asynchronously check each location for text node strings with placeholders.
        await Promise.allSettled(this._searchLocations.map((location) =>
            this.populateElement(document.querySelector(location))));
    }

    /**
     * Find placeholders in text nodes within the given element and replace them with values.
     * @param {Node} element
     */
    static async populateElement(element) {
        let textNodes = this.getTextNodes(element);
        textNodes = textNodes.map((node) => {
            const matches = [...node.nodeValue.matchAll(this.regex)].map(match => match[1]);

            const placeholders = [];
            for (const match of matches) {
                const placeholder = this._placeholders[match];
                if (!(placeholder instanceof Placeholder)) {
                    this._unregisteredMatches.add(match);
                    continue;
                }

                placeholders.push(placeholder);
            }

            return {
                node: node,
                placeholders: placeholders,
            };
        });

        textNodes = textNodes.filter(data => data.placeholders.length > 0);

        // Update each string as soon as all placeholder values are available.
        await Promise.allSettled(textNodes.map(async ({ node, placeholders }) => {
            // Consider adding these classes at PHP render time if still not sufficient.
            node.parentElement.classList.add('skeleton');
            node.parentElement.parentElement.classList.add('loading');
            await this.populateNode(node, placeholders);
            node.parentElement.parentElement.classList.remove('loading');
        }));
    }

    /**
     * Get an array of viable text nodes found descending the given element.
     *
     * @param {Node} element
     * @returns {Text[]}
     */
    static getTextNodes(element) {
        const walker = document.createTreeWalker(element, NodeFilter.SHOW_TEXT,
            (node) => node.nodeValue.length > 3 && node.nodeValue.includes('!{')
                ? NodeFilter.FILTER_ACCEPT
                : NodeFilter.FILTER_REJECT);

        const textNodes = [];

        let node;
        while (node = walker.nextNode()) {
            textNodes.push(node);
        }

        return textNodes;
    }

    /**
     * Replace the placeholders in the given node with the values of the given placeholder objects.
     *
     * @param {Node} node
     * @param {Placeholder[]} placeholders
     * @returns {Promise<void>}
     */
    static async populateNode(node, placeholders) {
        const values = await Promise.all(placeholders.map((placeholder) => placeholder.getValue()));

        let nodeValue = node.nodeValue;
        placeholders.forEach((placeholder, index) => {
            nodeValue = nodeValue.split(`!{${placeholder.key}}`).join(values[index]);
        });

        node.nodeValue = nodeValue;
    }
}

/**
 * A class to redirect a page to the user's preferred language. If they're viewing the
 * website in a language which isn't English, then no redirections will occur.
 */
class LanguageRedirector {
    static redirect() {
        const currentLocale = L10n.siteLocale;
        const preferredLocale = L10n.tryGetPreferredLocale();

        // No redirection if no preference
        if (!preferredLocale) return;

        // No redirection if we're already on the preferred page
        if (currentLocale === preferredLocale) return;

        // No redirection if we don't support their preference
        if (!L10n.supportedLocales.has(preferredLocale)) return;

        // No redirection if their site preference is not set and their browser preference is matched to our default
        if (!Prefs.get('language') && preferredLocale === 'en-NZ') return;

        this.redirectTo(preferredLocale);
    }

    static redirectTo(locale) {
        const target = L10n.alternateLocalePaths.get(locale);
        if (!target) return;

        this.isRedirecting = true;

        window.location.replace(target);
    }
}

class CampaignTagger {
    static init() {
        this.tag = this.tryGetTagFromUrl() || Storage.session.getItem('mct');
        if (!this.tag) return;

        if (CookieSettings.isAnalyticsAllowed()) {
            this.sendTag();
        }
        else {
            Storage.session.setItem('mct', this.tag);
            CookieSettings.onConsentChanged.addListener(this.consentListener.bind(this));
        }
    }

    /** @returns {string|null} */
    static tryGetTagFromUrl() {
        const url = new URL(window.location);

        if (url.searchParams.has('mct')) {
            const tag = url.searchParams.get('mct');
            url.searchParams.delete('mct');
            window.history.replaceState({}, '', url.toString());

            return tag;
        }

        return null;
    }

    static consentListener() {
        if (CookieSettings.isAnalyticsAllowed()) {
            CookieSettings.onConsentChanged.removeListener(this.consentListener);
            this.sendTag();
        }
    }

    static async sendTag() {
        await Api.log(99988, this.tag);
        Storage.session.removeItem('mct');
    }
}

/** Urchin, Matomo tagging */
class CampaignTracker {
    static validPeriod = 86400 * 90;

    static init() {
        const tags = this.tryGetTagsFromUrl();
        if (tags) {
            const event = JSON.stringify({
                tags,
                ts: Math.floor(Date.now() / 1000),
            });

            Storage.session.setItem('ct_utm_mtm', event);
        }

        this.updateLinkTargets();
    }

    /** @returns {object|null} */
    static tryGetTagsFromUrl() {
        const tags = { };

        const url = new URL(window.location);
        for (const [key, value] of url.searchParams.entries()) {
            if (key.startsWith('utm_') || key.startsWith('mtm_')) {
                tags[key] = value;
            }
        }

        for (const key of Object.keys(tags)) {
            url.searchParams.delete(key);
        }
        window.history.replaceState({ }, '', url.toString());

        return Object.keys(tags).length > 0 ? tags : null;
    }

    /** @returns {object|null} */
    static _tryGetEventFromSession() {
        const eventStr = Storage.session.getItem('ct_utm_mtm');
        if (!eventStr) return null;

        let event;
        try {
            event = JSON.parse(eventStr);
        }
        catch (e) {
            console.error("Couldn't parse tracking data.");
            console.trace(e, eventStr);
            return null;
        }

        if (!event.ts || Math.floor(Date.now() / 1000) - event.ts > this.validPeriod) {
            Storage.session.removeItem('ct_utm_mtm');
            return null;
        }

        // Try to promote to local storage
        if (CookieSettings.isAnalyticsAllowed()) {
            Storage.local.setItem('ct_utm_mtm', eventStr);
            Storage.session.removeItem('ct_utm_mtm');
        }
        else {
            // Listen for cookie acceptance
            const listener = () => {
                if (CookieSettings.isAnalyticsAllowed()) {
                    Storage.local.setItem('ct_utm_mtm', eventStr);
                    Storage.session.removeItem('ct_utm_mtm');
                    CookieSettings.onConsentChanged.removeListener(listener);
                }
            }
            CookieSettings.onConsentChanged.addListener(listener);
        }

        return event;
    }

    /** @returns {object|null} */
    static _tryGetEventFromLocal() {
        let event = Storage.local.getItem('ct_utm_mtm');
        if (!event) return null;

        try {
            event = JSON.parse(event);
        }
        catch (e) {
            console.error("Couldn't parse tracking data.");
            console.trace(e, event);
            return null;
        }

        if (!event.ts || Math.floor(Date.now() / 1000) - event.ts > this.validPeriod) {
            Storage.local.removeItem('ct_utm_mtm');
            return null;
        }

        return event;
    }

    static updateLinkTargets() {
        const event = this._tryGetEventFromSession() || this._tryGetEventFromLocal();
        if (!event) return;

        const tags = Object.entries(event.tags || { });
        for (const [a, url] of LinkManager.getWebclientLinks().entries()) {
            for (const [key, value] of tags) {
                url.searchParams.set(key, value);
            }

            a.href = url.href;
        }

        let storeReferrer = new URLSearchParams();
        for (const [key, value] of tags) {
            storeReferrer.set(key, value);
        }

        for (const[a, url] of LinkManager.getAppStoreLinks().entries()) {
            // Note that Apple app store may not support the same referral system as the Play Store (or at all?)
            url.searchParams.set('referrer', storeReferrer.toString());
            a.href = url.href;
        }
    }
}

/** Allow an object to change state based on the URL fragment. */
class FragmentMonitor {
    /** @param {string} fragment The fragment string to monitor */
    constructor(fragment) {
        this.fragment = fragment;

        this.onFragmentChanged = new Event();
        window.addEventListener('popstate', () => this.onFragmentChanged.invoke(this.isMatch));
    }

    /** @return true if the URL fragment matches this fragment */
    get isMatch() { return window.location.hash === this.fragment }

    /**
     * Add this fragment to the URL.
     * This should only be called when the object is activated programmatically and not via <a> links with #fragments.
     */
    addFragment() {
        if (window.location.hash !== this.fragment) {
            history.pushState({ fragmentMonitor: 'add' }, null, this.fragment);
        }
    }

    /** Clear the fragment from the URL. */
    removeFragment() {
        if (window.location.hash === this.fragment) {
            history.pushState({ fragmentMonitor: 'remove' }, null, window.location.pathname);
        }
    }
}

class AddLangToWebclientURL {
    static addLangInfoToURL() {
        if (!Prefs.get('language')) return; // Only localise webclient urls if user has explicitly set a preferred language

        for (const [a, url] of LinkManager.getWebclientLinks().entries()) {
            // Unable to localise MEGA share links as webclient expects it as part of the path, not a query param
            // TODO - consider updating webclient to support a l10n query param instead
            if (WebclientUtils.parseMegaUrl(url.href)) continue;

            this.localiseWebclientUrl(url);
            a.href = url.href;
        }
    }

    /** @param {URL} url */
    static localiseWebclientUrl(url) {
        if (!Prefs.get('language')) return; // Only localise webclient urls if user has explicitly set a preferred language

        if (url.hostname === 'mega.nz') {
            const mappedLang = this.wpLocaleToWebclient(L10n.siteLocale);
            if (mappedLang) {
                const path = url.pathname.endsWith('/') ? url.pathname.slice(0, -1) : url.pathname;
                url.pathname = `${path}/lang_${mappedLang}`;
            }
        }
    }

    static wpLocaleToWebclient(locale) {
        const mappings = {
            'zh-CN': 'cn',
            'zh-TW': 'ct',
        };

        if (mappings[locale]) return mappings[locale];

        locale = locale.replace(/-.*/, ''); // en-NZ => en
        return locale;
    }
}

class Formatter {
    static get numberFormatter() {
        return Formatter._numberFormatter ||= new Intl.NumberFormat(L10n.getFormatLocale());
    }

    static get percentFormatter() {
        return Formatter._percentFormatter ||= new Intl.NumberFormat(L10n.getFormatLocale(), {
            style: 'percent',
        });
    }

    static get monthsFormatter() {
        return Formatter._monthsFormatter ||= new Intl.NumberFormat(L10n.getFormatLocale(), {
            style: 'unit',
            unit: 'month',
            unitDisplay: 'long',
        });
    }

    static get yearsFormatter() {
        return Formatter._yearsFormatter ||= new Intl.NumberFormat(L10n.getFormatLocale(), {
            style: 'unit',
            unit: 'year',
            unitDisplay: 'long',
        });
    }

    static get currencyFormatter() {
        return Formatter._currencyFormatter ||= new Intl.NumberFormat(L10n.getFormatLocale(), {
            style: 'currency',
            currency: Plans.instance.localCurrency,
        });
    }

    static get gbFormatter() {
        return Formatter._gbFormatter ||= new Intl.NumberFormat(L10n.getFormatLocale(), {
            style: 'unit',
            unit: 'gigabyte',
            unitDisplay: 'short',
        });
    }

    static get tbFormatter() {
        return Formatter._tbFormatter ||= new Intl.NumberFormat(L10n.getFormatLocale(), {
            style: 'unit',
            unit: 'terabyte',
            unitDisplay: 'short',
        });
    }

    static formatNumber(number) {
        return Formatter.numberFormatter.format(number);
    }

    static formatMonths(months) {
        return Formatter.monthsFormatter.format(months);
    }

    static formatYears(years) {
        return Formatter.yearsFormatter.format(years);
    }

    static formatPercent(percent) {
        return Formatter.percentFormatter.format(percent);
    }

    static formatCurrency(amount) {
        return Formatter.currencyFormatter.format(amount);
    }

    static formatGb(gb) {
        return Formatter.gbFormatter.format(gb);
    }

    static formatTb(tb) {
        return Formatter.tbFormatter.format(tb);
    }
}

class SkeletonLoader {
    static init() {
        document.addEventListener('DOMContentLoaded', () => {
            document.documentElement.style.setProperty('--skeleton-play-state', 'running');
        });
    }
}

/** Agnostic text scaler that uses CSS transform to make text fit in its parent element */
class TextScaler {
    static get instance() {
        return this._instance ||= new TextScaler();
    }

    constructor() {
        this.elements = new Set();
        this.transformOrigin = document.documentElement.dir === 'rtl' ? 'right' : 'left';

        this._onResize = this._onResize.bind(this);
        this._resizeScale = this._resizeScale.bind(this);

        this.observer = new IntersectionObserver((entries) => {
            for (const entry of entries) {
                if (entry.isIntersecting) {
                    requestAnimationFrame(() => this._scale(entry.target))
                    this.observer.unobserve(entry.target); // job done
                }
            }
        });

        window.addEventListener('resize', () => {
            if (this.elements > 20) { // arbitrary
                clearTimeout(this.resizeDebounce);
                this.resizeDebounce = setTimeout(this._onResize, 100);
            }
            else {
                this._resizeScale();
            }
        });
    }

    /** Scale text size to fit in its parent element */
    scale(element) {
        if (!(element instanceof HTMLElement) || !element.parentElement) return;

        this.elements.add(element);

        requestAnimationFrame(() => this._scale(element));
    }

    _scale(element) {
        if (element.parentElement.offsetWidth === 0 || element.scrollWidth === 0) {
            // Assume not visible; apply scaling when visible
            this.observer.observe(element);
            return;
        }

        const scaleFactorX = element.parentElement.offsetWidth / element.scrollWidth;
        const scaleFactorY = element.parentElement.offsetHeight / element.scrollHeight;
        const scaleFactor = Math.min(Math.max(Math.min(scaleFactorX, scaleFactorY), 0.3), 1);

        element.style.transformOrigin = getComputedStyle(element).textAlign === 'center' ? 'center' : this.transformOrigin;
        element.style.transform = `scale(${scaleFactor})`;
    }

    _resizeScale() {
        for (const element of this.elements) {
            this._scale(element);
        }
    }

    _onResize() {
        requestAnimationFrame(this._resizeScale);
    }
}

/**
 * Dynamically replace flag emojis with inline images.
 *
 * Some operating systems like Windows and possibly some Linux distributions choose not to render flag emojis.
 */
class FlagEmojiReplacer {
    static init() {
        document.addEventListener('DOMContentLoaded', () => {
            const nodesInfo = this._getNodes();
            if (nodesInfo.length > 0) {
                this._replaceEmojis(nodesInfo);
            }
        });
    }

    static _getNodes() {
        const walker = document.createTreeWalker(document.querySelector('.page-container'), NodeFilter.SHOW_TEXT);
        const nodesInfo = [];
        let node;
        while (node = walker.nextNode()) {
            const matches = Array.from(node.nodeValue.matchAll(/\p{Regional_Indicator}{2}/gu));
            if (matches.length <= 0) continue;

            const matchInfo = matches.map(match => ({
                startIndex: match.index,
                endIndex: match.index + match[0].length,
                image: this.createImageForEmoji(match[0]),
            }));
            nodesInfo.push({ node, matchInfo });
        }

        return nodesInfo;
    }

    static _replaceEmojis(nodesInfo) {
        for (const { node, matchInfo } of nodesInfo) {
            const loadPromises = matchInfo.map(info => new Promise((resolve, reject) => {
                if (!info.image) {
                    reject();
                }

                if (info.image.complete) {
                    if (info.image.naturalWidth !== 0) {
                        resolve();
                    }
                    else {
                        reject();
                    }
                }
                else {
                    info.image.onload = resolve;
                    info.image.onerror = reject;
                }
            }));

            Promise.allSettled(loadPromises).then(() => this._updateTextNode(node, matchInfo));
        }
    }

    static _updateTextNode(node, matchInfo) {
        const fragment = document.createDocumentFragment();
        let lastIndex = 0;

        for (const info of matchInfo) {
            fragment.appendChild(document.createTextNode(node.nodeValue.slice(lastIndex, info.startIndex)));
            fragment.appendChild(info.image && info.image.naturalWidth !== 0
                ? info.image
                : document.createTextNode(node.nodeValue.slice(info.startIndex, info.endIndex)));

            lastIndex = info.endIndex;
        }

        if (lastIndex < node.nodeValue.length) {
            fragment.appendChild(document.createTextNode(node.nodeValue.slice(lastIndex)));
        }

        node.parentNode.replaceChild(fragment, node);
    }

    static createImageForEmoji(emoji) {
        const countryCode = this.emojiToCountryCode(emoji);

        if (!countryCode) return null;

        const img = document.createElement('img');
        img.classList.add('inline-emoji');
        img.src = `/wp-content/themes/megapages/megalib/icons/flags/${countryCode}.png`;

        return img;
    }

    static emojiToCountryCode(emoji) {
        if (Array.from(emoji).length !== 2) return null
        if (!/^\p{Regional_Indicator}{2}$/u.test(emoji)) return null;

        return Array.from(emoji)
            .map(char => String.fromCharCode(0x41 + (char.codePointAt(0) - 0x1F1E6)))
            .join('').toLowerCase();
    }
}


class BillingPeriod {
    static Monthly = 1;
    static Yearly = 12;
}

/**
 * Abstract class for plans.
 *
 * See also {@linkcode Plans} plans manager and child plan types
 * {@linkcode StandardPlan}, {@linkcode FeaturePlan}, {@linkcode BusinessPlan}, {@linkcode ProFlexiPlan}
 */
class Plan {
    /** Unique ID for this plan */
    id;
    /** Description of this plan */
    description;
    /** Item this plan purchases, e.g. pro = 0, business/flexi = 1 */
    item;
    /** How many months this plan covers */
    months;
    /** User account level as per {@link Plans.AccountLevels} */
    accountLevel;

    static fromApiResponse(response) {
        let plan;

        if (response.al === Plans.AccountLevels.Business) {
            plan = BusinessPlan.fromApiResponse(response);
        }
        else if (response.al === Plans.AccountLevels.ProFlexi) {
            plan = ProFlexiPlan.fromApiResponse(response);
        }
        // TODO "feature plan" detection may be better with account level 99999
        else if (response.f && typeof response.f === 'object' && Object.keys(response.f).length > 0) {
            plan = FeaturePlan.fromApiResponse(response);
        }
        else {
            plan = StandardPlan.fromApiResponse(response);
        }

        plan.id = response.id;
        plan.description = response.d;
        plan.item = response.it;
        plan.months = response.m;
        plan.accountLevel = response.al;

        return plan;
    }
}

/**
 * Regular plan like Pro Lite, Pro II, etc.
 * @see Plan
 * @see Plans
 */
class StandardPlan extends Plan {
    storage;
    transfer;
    price;
    localPrice;
    monthlyBasePrice;

    static fromApiResponse(response) {
        const plan = new StandardPlan();

        plan.storage = response.s;
        plan.transfer = response.t;
        plan.price = response.p / 100;
        plan.localPrice = response.lp ? (response.lp / 100) : plan.price;
        plan.monthlyBasePrice = response.mbp / 100;

        return plan;
    }
}

/**
 * Feature plan for a standalone feature like e.g. VPN
 * {@linkcode Plan}, {@linkcode Plans}
 */
class FeaturePlan extends Plan {
    features = { };
    price;
    localPrice;
    monthlyBasePrice;
    trial = {};

    static fromApiResponse(response) {
        const plan = new FeaturePlan();

        plan.features = response.f;
        plan.price = response.p / 100;
        plan.localPrice = response.lp ? (response.lp / 100) : plan.price;
        plan.monthlyBasePrice = response.mbp / 100;
        plan.trial = response.trial;

        return plan;
    }
}

/**
 * Business plan.
 * @see Plan
 * @see Plans
 */
class BusinessPlan extends Plan {
    minUsers;
    base = {};
    extra = {};

    static fromApiResponse(response) {
        const plan = new BusinessPlan();

        plan.minUsers = response.bd.minu;

        plan.base = {
            storage: response.bd.ba.s,
            transfer: response.bd.ba.t,
        };

        plan.extra = {};
        plan.extra.storagePrice = response.bd.sto.p / 100;
        plan.extra.storageLocalPrice = response.bd.sto.lp ? (response.bd.sto.lp / 100) : plan.extra.storagePrice;
        plan.extra.transferPrice = response.bd.trns.p / 100;
        plan.extra.transferLocalPrice = response.bd.trns.lp ? (response.bd.trns.lp / 100) : plan.extra.transferPrice;
        plan.extra.userPrice = response.bd.us.p / 100;
        plan.extra.userLocalPrice = response.bd.us.lp ? (response.bd.us.lp / 100) : plan.extra.userPrice;

        return plan;
    }
}

/**
 * Pro Flexi plan.
 * @see Plan
 * @see Plans
 */
class ProFlexiPlan extends Plan {
    base = {};
    extra = {};

    static fromApiResponse(response) {
        const plan = new ProFlexiPlan();

        plan.base = {};
        plan.base.storage = response.bd.ba.s;
        plan.base.transfer = response.bd.ba.t;
        plan.base.price = response.bd.ba.p / 100;
        plan.base.localPrice = response.bd.ba.lp ? (response.bd.ba.lp / 100) : plan.base.price;

        plan.extra = {};
        plan.extra.storagePrice = response.bd.sto.p / 100;
        plan.extra.storageLocalPrice = response.bd.sto.lp ? (response.bd.sto.lp / 100) : plan.extra.storagePrice;
        plan.extra.transferPrice = response.bd.trns.p / 100;
        plan.extra.transferLocalPrice = response.bd.trns.lp ? (response.bd.trns.lp / 100) : plan.extra.transferPrice;

        return plan;
    }
}

/**
 * Singleton to manage MEGA plans.
 * @see Plan
 */
class Plans {
    static AccountLevels = {
        Free: 0,
        ProLite: 4,
        ProI: 1,
        ProII: 2,
        ProIII: 3,
        ProFlexi: 101,
        Business: 100,
    };

    static Names = {
        [Plans.AccountLevels.Free]: 'Free',
        [Plans.AccountLevels.ProLite]: 'ProLite',
        [Plans.AccountLevels.ProI]: 'ProI',
        [Plans.AccountLevels.ProII]: 'ProII',
        [Plans.AccountLevels.ProIII]: 'ProIII',
        [Plans.AccountLevels.ProFlexi]: 'ProFlexi',
        [Plans.AccountLevels.Business]: 'Business',
    }

    static _instance;

    _plans;
    _allPlans;
    _fetchPromise;
    _fetchAllPromise;

    currency = 'EUR';
    currencySymbol = '';
    localCurrency = 'EUR';
    localCurrencySymbol = '';

    /** @returns {Plans} */
    static get instance() {
        if (!Plans._instance) {
            Plans._instance = new Plans();
        }

        return Plans._instance;
    }

    /**
     * Get MEGA plans appropriate for the user's market.
     * Will fetch from API first if not already fetched.
     * Use {@link getAll} to get all plans, including plans not appropriate for the user's market.
     * @returns {Promise<Array>}
     */
    async get() {
        if (this._plans == null) {
            this._fetchPromise ||= this._fetchFromApi();
            this._plans = await this._fetchPromise;
        }

        return this._plans || [];
    }

    /**
     * Get all MEGA plans.
     * Will fetch from API first if not already fetched.
     * Use {@link get} to get only plans appropriate for the user's market.
     * @returns {Promise<Array>}
     */
    async getAll() {
        if (this._allPlans == null) {
            this._fetchAllPromise ||= this._fetchAllFromApi();
            this._allPlans = await this._fetchAllPromise;
        }

        return this._allPlans || [];
    }

    /**
     * Asynchronously fetch market-appropriate plans from the API.
     * @returns {Promise<Array|null>}
     */
    async _fetchFromApi() {
        const fetchPromise = Api.request({
            a: 'utqa', // get a list of plans
            nf: 2, // extended format
            b: 1, // also show business plans
            p: 1, // include the Pro Flexi plan
            ft: 1, // include feature plans like VPN
        });

        return this._handleResponsePromise(fetchPromise);
    }

    /**
     * Asynchronously fetch all plans from the API.
     * @returns {Promise<Array|null>}
     */
    async _fetchAllFromApi() {
        const fetchPromise = Api.request({
            a: 'utqa', // get a list of plans
            nf: 2, // extended format
            b: 1, // also show business plans
            p: 1, // include the Pro Flexi plan
            ft: 1, // include feature plans like VPN
            r: 1, // all plans (include plans hidden from user's market, like Pro Lite)
        });

        return this._handleResponsePromise(fetchPromise);
    }

    /** @returns {Promise<Array|null>} */
    async _handleResponsePromise(response) {
        try {
            response = await response;
        }
        catch (e) {
            console.error('Couldn\'t request plans from API.', e.message);
            return null;
        }

        if (!Array.isArray(response)) {
            console.error('API response to plans request is something unexpected.');
            return null;
        }

        const currencyData = response[0].l;

        this.currency = currencyData.c;
        this.currencySymbol = currencyData.cs;
        this.localCurrency = currencyData.lc || this.currency;
        this.localCurrencySymbol = currencyData.lcs || this.currencySymbol;

        return response.filter(obj => !obj.l).map(planDetails => Plan.fromApiResponse(planDetails));
    }

    /**
     * Convert the given amount into the user's local currency, as detected by the API.
     * @return {Promise<Object>}
     * */
    static async localCurrencyConvert(amount) {
        const fallback = {
            amount: amount,
            sign: '',
            name: 'EUR',
            country: 'ISO',
        };

        let response;
        try {
            response = await Api.request({ a: 'lcc', 'amount': amount });
        }
        catch (e) {
            console.error(`Couldn't get the amount "${amount}" in user's local currency via the API.`, e.message);
            return fallback;
        }

        if (!response || typeof response !== 'object') {
            console.error(`API returned unexpected response when getting the amount "${amount}" in user's local currency.`,
                Number.isInteger(response) ? `Code: ${response} (${ApiErrors.getMessage(response)})` : '');
            return fallback;
        }

        return response;
    }

    /**
     * Get all payment providers.
     * @returns {Promise<Array>}
     */
    static async getPaymentProviders() {
        let response = {};
        try {
            response = await Api.request({ a: 'ufpqfull', t: 0});
        }
        catch (e) {
            console.error('Couldn\'t request payment provider details from API.', e.message);
        }

        return response;
    }
}

/**
 * A class for localizing price values / currencies.
 *
 * Used by the pricing-page/plan-price-calculator and product-comparison modules, and
 * any future modules which require price values / currencies to be formatted.
 */
class CurrencyLocalizer {
    currency;
    display;
    noDecimals;
    locale;

    constructor(currency, display, noDecimals) {
        this.currency = currency || 'EUR';
        this.display = display || 'symbol';
        this.noDecimals = noDecimals ?? false;
        this.locale = L10n.getFormatLocale();
    }

    /**
     * Function to format currency with current locale. Adapted from webclient code (locale.js)
     * @param {Number} value Value to format
     * @param {String} [currency] Currency to use in currency formatting. Default: 'EUR'
     * @param {String} [display] display type of currency format, supporting types are below:
     *                  'symbol' - use a localized currency symbol but with country code such as "NZ$",
     *                  'narrowSymbol' - use a localized currency symbol without country code such as "$" for "NZ$",
     *                  'code' - use the ISO currency code such as "NZD",
     *                  'name' - use a localized currency name such as "dollar"
     *                  'number' - just number with correct decimal
     * @param {Boolean} noDecimals If the number should be displayed without decimals
     * @returns {String} formated currency value
     */
    format(value) {
        value = typeof value === 'string' ? parseFloat(value) : value;

        var narrowSymbol = false;

        if (this.display === 'narrowSymbol') {
            this.display = 'symbol';
            narrowSymbol = this.currency !== 'EUR'; // Euro cannot have country
        }

        const options = { 'style': 'currency', 'currency': this.currency, currencyDisplay: this.display };

        if (this.noDecimals) {
            options.maximumFractionDigits = 0;
            options.minimumFractionDigits = 0;
        }

        let result = value.toLocaleString(this.locale, options);

        // For Safari that 'symbol' result same as 'code', using fallback locale without country code to avoid the bug.
        if (this.display === 'symbol' && result.indexOf(this.currency.toUpperCase()) !== -1) {

            // Romanian with Euro Symbol currency display is currently buggy on all browsers, so doing this to polyfill it
            if (this.locale.startsWith('ro')) {
                result = value.toLocaleString('fr', options);
            }
            else {
                result = value.toLocaleString(L10n.getFormatLocale(), options);
            }
        }

        // Polyfill for narrow symbol format as lacking support on Safari and old browers
        if (narrowSymbol) {
            // Cover NZ$, $NZ kinds case to just $ and not change something like NZD
            result = result.replace(/\b[A-Z]{2}\b/, '');
        }

        if (this.locale === 'fr' && this.display === 'symbol') {
            result = result.replace(/([^1-9A-Za-z])([A-Z]{2})/, '$1 $2');
        }

        return result;
    }

    static formatPrice(price, currency, display, noDecimals) {
        return (new CurrencyLocalizer(currency, display, noDecimals)).format(price);
    }
}

class DailyStats {
    static _stats;

    static _fetchPromise;

    /** @returns {Promise<Object> | null} */
    static async get() {
        await this._ensureInit();

        return this._stats;
    }

    static async getTimestamp() {
        await this._ensureInit();

        return this._stats && this._stats.timestamp || 0;
    }

    static async getTotalUsers() {
        await this._ensureInit();

        return this._stats && this._stats.confirmedusers && this._stats.confirmedusers.total || 0;
    }

    static async getDeltaUsers() { } // TODO stub, fill as needed

    static async getTotalFiles() {
        await this._ensureInit();

        return this._stats && this._stats.files && this._stats.files.total || 0;
    }

    static async getDeltaFiles() { } // TODO stub

    /** @returns {Promise<Object> | null} */
    static async _fetchStats() {
        this._fetchPromise = this._fetchPromise || Api.request({ a: 'dailystats' });

        let response;
        try {
            response = await this._fetchPromise;
        }
        catch (e) {
            console.error('Couldn\'t request daily stats from API.', e.message);
            return null;
        }
        finally {
            this._fetchPromise = null;
        }

        if (typeof response !== 'object') {
            console.error('Unexpected response from API when fetching daily stats.',
                Number.isInteger(response) ? `${response} ${ApiErrors.getMessage(response)}` : '');
            return null;
        }

        return response;
    }

    static async _ensureInit() {
        if (!this._stats) {
            this._stats = await this._fetchStats();
        }
    }
}

/* endregion */

(() => {
    const placeholders = [
        {
            key: 'freePlanStorage',
            _fetchValue: async () => {
                let freePlan;
                try {
                    freePlan = await Api.request({ a: 'mafu' });
                }
                catch (e) {
                    console.error('Couldn\'t request storage amount of free plan details from API.', e.message);
                    return Number.NaN;
                }

                return Formatter.formatGb(Math.floor(freePlan.s / 1073741824));
            },
        },
        {
            key: 's4StorageValue',
            _fetchValue: async () => {
                const s4StorageValue = await Plans.localCurrencyConvert(1000);

                const localisedPrice = CurrencyLocalizer
                    .formatPrice(s4StorageValue.amount, s4StorageValue.name, 'narrowSymbol', true);
                return `${localisedPrice} ${s4StorageValue.name}`;
            },
        },
        {
            key: 's4PerTBPrice',
            _fetchValue: async () => {
                const s4PerTBPrice = await Plans.localCurrencyConvert(2.99);

                const localisedPrice = CurrencyLocalizer
                    .formatPrice(s4PerTBPrice.amount, s4PerTBPrice.name, 'narrowSymbol', true);
                return `${localisedPrice} ${s4PerTBPrice.name}`;
            },
        },
        {
            key: 'totalUsersCompactLong',
            _fetchValue: async () => {
                const totalUsers = Utils.floorToSigFigs(await DailyStats.getTotalUsers(), 3);

                const formatter = new Intl.NumberFormat(L10n.getFormatLocale(), {
                    notation: 'compact',
                    compactDisplay: 'long',
                });

                return formatter.format(totalUsers);
            }
        },
        {
            key: 'vpnPriceLocalMonthly',
            _fetchValue: async () => {
                const plans = await Plans.instance.getAll();
                const vpnPlan = plans.find((plan) =>
                    plan instanceof FeaturePlan && plan.features.vpn && plan.months === BillingPeriod.Monthly);

                const price = vpnPlan ? vpnPlan.localPrice : Number.NaN;
                return Formatter.formatCurrency(price);
            }
        },
        {
            key: 'pwmPriceLocalMonthly',
            _fetchValue: async () => {
                const plans = await Plans.instance.getAll();
                // TODO features.pwm yet to be confirmed
                const vpnPlan = plans.find((plan) =>
                    plan instanceof FeaturePlan && plan.features.pwm && plan.months === BillingPeriod.Monthly);

                const price = vpnPlan ? vpnPlan.localPrice : Number.NaN;
                return Formatter.formatCurrency(price);
            }
        }
    ];

    Prefs.init();
    Breakpointer.init();
    ThemeManager.init();
    SkeletonLoader.init();
    PlaceholderPopulator.registerPlaceholders(placeholders);
    PlaceholderPopulator.init();
    FlagEmojiReplacer.init();
})();

/**
 * Scripting for common MEGA WP components.
 */

/**
 * Simple class to handle overlay state.
 */
class Overlay {
    _$overlay;
    _sources = {};

    constructor($overlay) {
        this._$overlay = $overlay;
    }

    enable(sourceKey) {
        if (sourceKey) {
            this._sources[sourceKey] = 1;
        }

        this._$overlay.addClass('active');
        // Assume anything that invokes an overlay will also want to prevent background scrolling.
        $('body').addClass('no-scroll');
    }

    disable(sourceKey) {
        if (sourceKey) {
            delete this._sources[sourceKey];
            if (Object.keys(this._sources).length) return;
        }

        this._$overlay.removeClass('active');

        // Only remove no-scroll if no other overlays are currently active
        if (!($('.overlay').hasClass('active'))) {
            $('body').removeClass('no-scroll');
        }
    }
}

class Header {
    $header;
    $mobileMenuButton;
    $mobileMenuButtonIcon;
    $searchButton;
    $searchButtonIcon;
    $languageButton;
    $themeButton;
    $themeButtonIcon;
    $menuItems;
    $lower;
    $submenus;

    /**
     * @param {jQuery} $headerElement jQuery object for the header component main div.
     */
    constructor($headerElement) {
        this.$header = $headerElement;
        this.$mobileMenuButton = $('.mobile-menu-btn', this.$header);
        this.$mobileMenuButtonIcon = $('.icon', this.$mobileMenuButton);
        this.$searchButton = $('.search-btn', this.$header);
        this.$searchButtonIcon = $('.icon', this.$searchButton);
        this.$languageButton = $('.language-btn', this.$header);
        this.$themeButton = $('.theme-btn', this.$header);
        this.$themeButtonIcon = $('span.icon', this.$themeButton);
        this.$menuItems = $('.menu-item', this.$header);
        this.$lower = $('.lower', this.$header);
        this.$submenus = $('.submenu', this.$header);

        this.onDocumentClick = this.onDocumentClick.bind(this);

        this.$menuItems.on('click', (e) => {
            const $menuItem = $(e.currentTarget);
            const submenuTarget = $menuItem.data('target');
            if (submenuTarget) {
                this.toggleSubmenu(submenuTarget);
            }
        })

        this.$mobileMenuButton.on('click', (e) => {
            e.stopPropagation();
            window.mobileNavMenu.toggle();
            this.$header.toggleClass('mobile-menu-open', window.mobileNavMenu.isOpen());
        });

        this.$searchButton.on('click', (e) => {
            e.stopPropagation();
            window.mobileSearch.toggle();
        });

        this.$languageButton.on('click', (e) => {
            e.stopPropagation();
            ModalRegister.getModal('language-switcher').open();
        });

        this.$themeButton.on('click', () => {
            ThemeManager.setTheme(ThemeManager.getTheme() === 'dark' ? 'light' : 'dark');
            ThemeManager.savePreference();
        });

        window.mobileNavMenu.visibilityChangedEvent.addListener((isOpen) => {
            this.$mobileMenuButtonIcon.removeClass('menu x-mro');
            this.$mobileMenuButton.attr('aria-label', isOpen ? 'Close' : 'Menu');
            this.$mobileMenuButtonIcon.addClass(isOpen ? 'x-mro' : 'menu');
        });
        Reactor.addEventListener('theme-changed', () => this.setThemeBtnIcon());

        if (window.mobileSearch) {
            window.mobileSearch.visibilityChangedEvent.addListener((isOpen) => {
                this.$mobileMenuButton.toggleClass('hidden');
                this.$searchButtonIcon.removeClass('search x');
                this.$searchButtonIcon.addClass(isOpen ? 'x' : 'search');
            });
        }

        this.setThemeBtnIcon();
    }

    openSubmenu(className) {
        const $relatedMenuBtn = this.$menuItems.filter(`[data-target='${className}']`);
        const $submenu = this.getSubmenuByClass(className);

        // Set submenu outer background colours
        const outerBackgrounds = $submenu.data('bgs');
        const leftBg = outerBackgrounds['left'] ? '--color-bg-page' : '--color-bg-surface-1';
        const rightBg = outerBackgrounds['right'] ? '--color-bg-page' : '--color-bg-surface-1';
        this.$lower.css('background', `linear-gradient(90deg, var(${leftBg}) 50%, var(${rightBg}) 50%)`);

        this.closeSubmenus();
        $submenu.removeClass('hidden');
        $relatedMenuBtn.addClass('active');

        $(document).on('click', this.onDocumentClick);
        window.overlayWithHeader.enable('header');
    }

    closeSubmenus() {
        $(document).off('click', this.onDocumentClick);

        this.$menuItems.removeClass('active');
        this.$submenus.addClass('hidden');
        window.overlayWithHeader.disable('header');
    }

    toggleSubmenu(className) {
        const $submenu = this.getSubmenuByClass(className);
        if ($submenu.hasClass('hidden')) {
            this.openSubmenu(className);
        }
        else {
            this.closeSubmenus();
        }
    }

    getSubmenuByClass(className) {
        return $(`.${className}`, this.$header);
    }

    onDocumentClick(e) {
        if ($(e.target).is(this.$menuItems) || this.$menuItems.has(e.target).length) {
            return;
        }

        if ($('.lower', this.$header).has(e.target).length) {
            return;
        }

        this.closeSubmenus();
    }

    setThemeBtnIcon() {
        this.$themeButtonIcon.removeClass('sun moon').addClass(ThemeManager.getTheme() === 'dark' ? 'sun' : 'moon');
    }

    setAccountBtnsVisibility(isVisible) {
        $('.sign-in-btn, .sign-up-btn', this.$header).toggleClass('hidden', !isVisible);
    }

    /**
     * Set avatar to the default avatar with the given first name and colour.
     *
     * @param {string} firstName
     * @param {string} colour
     */
    setAvatar(firstName, colour) {
        const $vr = $('.right-group .vr', this.$header).removeClass('hidden');
        const $avatarBox = $('.right-group .avatar-box', this.$header).removeClass('hidden');
        const $avatar = $('.avatar', $avatarBox).addClass(colour).text(firstName.charAt(0));
    }

    /**
     * Set avatar to the given URL of a custom avatar.
     *
     * @param {string} url
     */
    setCustomAvatar(url) {
        const $vr = $('.right-group .vr', this.$header).removeClass('hidden');
        const $avatarBox = $('.right-group .custom-avatar-box', this.$header).removeClass('hidden');
        const $avatar = $('img', $avatarBox).attr('src', url);
    }
}

class Footer {
    constructor(element) {
        if (element instanceof jQuery) element = element[0]; // TODO remove once projects updated
        this.element = element;

        this.accordion = new AccordionComponent(this.element.querySelector('.mobile-links'));
    }
}

/**
 * Base class for modals.
 */
class Modal {
    $modal;
    /** Reference by which to obtain this modal through the {@link ModalRegister}. */
    name;
    /** Optional URL fragment to associate this modal with. */
    fragment;
    overlay = window.overlay;
    onOpened = new Event();
    onClosed = new Event();
    visibilityChangedEvent = new Event();

    constructor(modal) {
        this.modal = modal;
        this.$modal = $(modal);
        this.constrainer = this.modal.parentNode.classList.contains('modal-constrainer') ? this.modal.parentNode : null;

        this.onDocumentClick = this.onDocumentClick.bind(this);
        this.onEscapeKey = this.onEscapeKey.bind(this);
        this.close = this.close.bind(this);

        this.closeButton = modal.querySelector('button.close'); // top-right X
        if (this.closeButton) {
            this.closeButton.addEventListener('click', this.close);
        }
    }

    getName() {
        return this.name;
    }

    isOpen() {
        return !this.modal.classList.contains('hidden');
    }

    open() {
        this.overlay.enable(`modal-${this.name}`);
        if (this.constrainer) this.constrainer.classList.remove('hidden');
        this.modal.classList.remove('hidden');

        $(document).rebind('click', this.onDocumentClick);
        $(document).rebind('keydown', this.onEscapeKey);

        if (this.fragmentMonitor) {
            this.fragmentMonitor.addFragment();
        }

        this.onOpened.invoke();
        this.visibilityChangedEvent.invoke(true);
        console.log(`Modal '${this.name}' opened.`);
    }

    close() {
        $(document).off('keydown', this.onEscapeKey);
        $(document).off('click', this.onDocumentClick);

        this.modal.classList.add('hidden');
        if (this.constrainer) this.constrainer.classList.add('hidden');
        this.overlay.disable(`modal-${this.name}`);

        if (this.fragmentMonitor) {
            this.fragmentMonitor.removeFragment();
        }

        this.onClosed.invoke();
        this.visibilityChangedEvent.invoke(false);
        console.log(`Modal '${this.name}' closed.`);
    }

    setOpen(state) {
        if (state) {
            this.open();
        }
        else {
            this.close()
        }
    }

    toggle() {
        this.setOpen(!this.isOpen());
    }

    setTitle(title) {
        this.heading ||= this.modal.querySelector('.heading');

        this.heading.textContent = title;
    }

    setBlurb(blurb) {
        this.blurb ||= this.modal.querySelector('.blurb');

        this.blurb.textContent = blurb;
    }

    setImage(url) {
        this.imgBox ||= this.modal.querySelector('.img-box');
        this.img ||= this.imgBox.querySelector('.img');
        this.img.style.backgroundImage = `url('${url}')`;
        this.imgBox.classList.toggle('hidden', !url);
    }

    onDocumentClick(e) {
        if (this.$modal.is(e.target) || this.$modal.has(e.target).length) {
            return;
        }

        this.close();
    }

    onEscapeKey(e) {
        if (e.key !== "Escape") {
            return;
        }
        this.close();
    }

    _monitorFragment(fragment) {
        this.fragmentMonitor = new FragmentMonitor(fragment);
        if (this.fragmentMonitor.isMatch) {
            this.open();
        }

        this.fragmentMonitor.onFragmentChanged.addListener((isMatch) => {
            if (isMatch && !this.isOpen()) {
                this.open();
            }
            else if (!isMatch && this.isOpen()) {
                this.close();
            }
        });
    }
}

/** Instantiate new, generic message modals. */
class MessageModal {
    /**
     * Create and display a new message modal with the given title and blurb.
     * The modal will have an "OK" primary button by default, which simply dismisses the modal.
     *
     * @param {string} name Name (handle) of the modal.
     * @param {string} title Title of the modal.
     * @param {string} blurb Blurb or description for the modal.
     */
    constructor(name, title = '', blurb = '') {
        const modals = document.querySelector('.modals');
        const template = modals.querySelector('template.generic-msg-modal');
        const templateInstance = template.content.firstElementChild.cloneNode(true);
        modals.appendChild(templateInstance);
        const modalElement = templateInstance.querySelector('dialog.modal');

        this.modal = new Modal(modalElement);
        this.modal.name = name;
        this.modal.setTitle(title);
        this.modal.setBlurb(blurb);

        this._buttonCache = { };

        // Default behaviour
        this.setPrimaryButton(template.dataset.defaultPrimaryBtnLabel, '', () => this.hide());
        this.show();
    }

    show() {
        this.modal.open();
    }

    hide() {
        this.modal.close();
    }

    /**
     * Set the modal's details as from ModalComponent block component attributes.
     *
     * @param {object} modalDetails
     */
    setDetails(modalDetails) {
        this.modal.setTitle(modalDetails.title);
        this.modal.setBlurb(modalDetails.blurb);
        this.modal.setImage(modalDetails.image.url);

        const primary = modalDetails.buttonPrimary;
        const secondary = modalDetails.buttonSecondary;

        this.setPrimaryButton(primary.label, primary.href, primary.action);
        this.setSecondaryButton(secondary.label, secondary.href, secondary.action);
    }

    /**
     * Set up a primary button for the modal.
     *
     * @param {string} label
     * @param {string} href
     * @param {function()} action
     */
    setPrimaryButton(label, href = '', action = null) {
        this._setButton('primaryButton', label, href, action);
    }

    /** Set up a secondary button for the modal.
     *
     * @param {string} label
     * @param {string} href
     * @param {function()} action
     */
    setSecondaryButton(label, href = '', action = null) {
        this._setButton('secondaryButton', label, href, action);
    }

    _setButton(buttonClass, label, href = '', action = null) {
        const cache = this._buttonCache[buttonClass] ||= { };
        cache['link'] ||= this.modal.modal.querySelector(`a.${buttonClass}`);
        cache['button'] ||= this.modal.modal.querySelector(`button.${buttonClass}`);
        cache['link'].classList.add('hidden');
        cache['button'].classList.add('hidden');

        let button = cache['button'];
        if (href) {
            button = cache['link'];
            button.href = href;
        }

        button.textContent = label;
        if (cache['action']) {
            cache['link'].removeEventListener('click', cache['action']);
            cache['button'].removeEventListener('click', cache['action']);
        }
        if (action && typeof action === 'function') {
            cache['action'] = action;
            button.addEventListener('click', cache['action']);
        }

        if (label && (href || action)) {
            button.classList.remove('hidden');
        }
    }
}

class MobileMenuModal extends Modal {
    name = 'mobile-menu';
    $toggleThemeBtn;
    $languageBtn;
    $bottomBar;

    constructor(modal) {
        super(modal);
        this.overlay = window.overlayWithHeader;

        this.$toggleThemeBtn = $('.theme-btn', this.$modal);
        this.$languageBtn = $('.language-btn', this.$modal);
        this.$bottomBar = $('.bottom-bar', this.$modal);

        this.accordion = new AccordionComponent(this.modal.querySelector('.scroll-pane'));

        this.onBreakpointChanged = this.onBreakpointChanged.bind(this);

        this.$toggleThemeBtn.on('click', () => {
            ThemeManager.setTheme(ThemeManager.getTheme() === 'dark' ? 'light' : 'dark');
            ThemeManager.savePreference();
        });

        this.$languageBtn.on('click', (e) => {
            e.stopPropagation();
            ModalRegister.getModal('language-switcher').open();
        });

        Reactor.addEventListener('theme-changed', () => this.updateThemeBtn());

        this.updateThemeBtn();
    }

    open() {
        super.open();
        Reactor.addEventListener('breakpoint-changed', this.onBreakpointChanged);
    }

    close() {
        super.close();
        Reactor.removeEventListener('breakpoint-changed', this.onBreakpointChanged);
    }

    setAccountBtnsVisibility(isVisible) {
        this.$bottomBar.toggleClass('hidden', !isVisible);
    }

    updateThemeBtn() {
        const $buttonText = $('.label', this.$toggleThemeBtn);
        const $buttonIcon = $('.icon', this.$toggleThemeBtn);

        if (ThemeManager.getTheme() === 'dark') {
            $buttonText.text(this.$toggleThemeBtn.data('light-text'));
            $buttonIcon.removeClass('moon').addClass('sun');
        }
        else {
            $buttonText.text(this.$toggleThemeBtn.data('dark-text'));
            $buttonIcon.removeClass('sun').addClass('moon');
        }
    }

    onBreakpointChanged(newBreakpoint) {
        if (newBreakpoint.gt(Breakpoint.MD)) {
            this.close();
        }
    }

    onDocumentClick(e) {
        // Do nothing; override default behaviour
    }
}

class MobileSearchModal extends Modal {
    name = 'mobile-search';
    $searchInput;

    constructor($modal) {
        super($modal[0]);
        this.overlay = window.overlayWithHeader;
        this.$searchInput = $('.search-field', this.$modal);

        this.onBreakpointChanged = this.onBreakpointChanged.bind(this);
    }

    open() {
        super.open();
        this.$searchInput.trigger('focus');
        Breakpointer.breakpointChangedEvent.addListener(this.onBreakpointChanged);
    }

    close() {
        super.close();
        Breakpointer.breakpointChangedEvent.removeListener(this.onBreakpointChanged);
    }

    onBreakpointChanged(newBreakpoint) {
        if (newBreakpoint.gt(Breakpoint.MD)) {
            this.close();
        }
    }

    onDocumentClick(e) {
        // Do nothing; override default behaviour
    }
}

class LanguageSwitcher extends Modal {
    name = 'language-switcher';
    $options;
    $saveButton;

    constructor(modal) {
        super(modal);

        this.$options = $('.language-options .language-option', this.$modal);
        this.$saveButton = $('.buttons button.save-language', this.$modal);

        this.$options.on('click', (e) => {
            this.$options.removeClass('active');
            $(e.currentTarget).addClass('active');
        });

        this.$saveButton.on('click', () => {
            const url = this.getSelectedLanguageUrl();
            if (url) {
                Prefs.set('language', this.getSelectedLanguageCode());
                window.location.href = url;
            }

            this.close();
        });
    }

    getSelectedLanguageUrl() {
        return this.$options.filter('.active').data('link');
    }

    getSelectedLanguageCode() {
        return this.$options.filter('.active').data('code');
    }
}

/**
 * Base class for expandable components.
 */
class ExpandableComponent {
    constructor(element) {
        if (element instanceof jQuery) element = element[0]; // TODO remove once projects updated
        this.element = element;
    }

    isExpanded() {
        return this.element.classList.contains('expanded');
    }

    expand() {
        this.element.classList.add('expanded');
    }

    contract() {
        this.element.classList.remove('expanded');
    }

    toggle() {
        if (this.isExpanded()) {
            this.contract();
        }
        else {
            this.expand();
        }
    }
}

class ShowHideComponent extends ExpandableComponent {
    constructor(element) {
        if (element instanceof jQuery) element = element[0]; // TODO remove once projects updated
        super(element);

        this.element.querySelector('.show-hide-toggle').addEventListener('click', () => this.toggle());
    }
}

class AccordionLeaf extends ExpandableComponent {
    expandStartEvent = new Event();

    transitionOptions = {
        easing: 'swing',
        duration: 200,
        complete: () => {
            // Reset to automatic height for resize responsiveness
            this.drawer.style.height = 'auto';
        },
    };

    constructor(element) {
        if (element instanceof jQuery) element = element[0]; // TODO remove once projects updated
        super(element);

        this.onToggled = new Event();

        this.drawer = this.element.querySelector('.accordion-content');
        this.$drawer = $(this.drawer);
        this.drawer.style.display = 'none';

        this.element.querySelector('.accordion-toggle').addEventListener('click', () => {
            this.onToggled.invoke();
            this.toggle();
        });
    }

    setTransitionOptions(newOptions) {
        this.transitionOptions = Object.assign(this.transitionOptions, newOptions);
    }

    expand() {
        this.expandStartEvent.invoke();
        super.expand();

        this.$drawer.stop();

        if (this.transitionOptions.duration === 0) {
            this.drawer.style.height = 'auto';
            this.drawer.style.opacity = 1;
            this.drawer.style.removeProperty('display');
        }
        else {
            this.$drawer.animate({
                height: 'show',
                opacity: 'show',
            }, this.transitionOptions);
        }
    }

    contract() {
        super.contract();

        this.$drawer.stop();

        if (this.transitionOptions.duration === 0) {
            this.drawer.style.display = 'none';
            this.drawer.style.removeProperty('height')
            this.drawer.style.removeProperty('opacity');
        }
        else {
            this.$drawer.animate({
                height: 'hide',
                opacity: 'hide',
            }, this.transitionOptions);
        }
    }
}

class AccordionComponent {
    constructor(element) {
        if (element instanceof jQuery) element = element[0]; // TODO remove once projects updated
        this.element = element;
        this.leaves = [];

        for (const leafElement of this.element.querySelectorAll('.accordion')) {
            const leaf = new AccordionLeaf(leafElement);
            leaf.onToggled.addListener(() => this._onToggle(leaf));

            this.leaves.push(leaf);
        }
    }

    setTransitionOptions(options) {
        for (const leaf of this.leaves) {
            leaf.setTransitionOptions(options);
        }
    }

    _onToggle(toggledLeaf) {
        for (const leaf of this.leaves) {
            if (leaf !== toggledLeaf && leaf.isExpanded()) {
                leaf.contract();
            }
        }
    }
}

/**
 * Scripting for the search component.
 */
class SearchComponent {
    suggestionItemTemplate = '<a></a>';
    searchSuggestions = [];

    $searchComponent;
    $searchForm;
    $searchField;
    $clearButton;
    $suggestionsList;

    /**
     * @param {jQuery} $searchElement jQuery object for the search component main div.
     */
    constructor($searchElement) {
        this.$searchComponent = $searchElement;
        this.$searchForm = $searchElement.parent();
        this.$searchField = $('.search-field', this.$searchComponent);
        this.$clearButton = $('.input-clear-txt', this.$searchComponent);
        this.$suggestionsList = $('.search-suggestions', this.$searchComponent);
        this.$suggestionsList.children('a').each((i, suggestion) => {
            let $suggestion = $(suggestion);
            let $tags = '';
            $suggestion.data('tags').map((tag) => {
                $tags += tag.name.toLowerCase() + ' ';
            });
            this.searchSuggestions.push({
                label: $suggestion.text(),
                tags: $tags,
                url: $suggestion.attr('href'),
            })
        });

        this.$suggestionsList.empty();

        this.clearInputAndFocus = this.clearInputAndFocus.bind(this);

        this.$searchField.on('input', () => this.setClearBtnState());

        this.setClearBtnState();
        this.initSearchSuggestions();

    }

    openSuggestionList () {
        this.$suggestionsList.removeClass('hidden');
        $(document).on('click', this.onDocumentClick.bind(this));
    }

    closeSuggestionList() {
        this.$suggestionsList.addClass('hidden');
        $(document).off('click', this.onDocumentClick);
    }

    onDocumentClick(e) {
        if (e.target && this.$searchComponent.has(e.target).length) return;
        this.closeSuggestionList();
    }

    setClearBtnState() {
        if (this.$searchField.val()) {
            this.$clearButton.off('click', this.clearInputAndFocus); // Bind the listener just once
            this.$clearButton.on('click', this.clearInputAndFocus);
            this.$clearButton.removeClass('hidden');
        }
        else {
            this.$clearButton.off('click', this.clearInputAndFocus);
            this.$clearButton.addClass('hidden');
        }
    }

    clearInputAndFocus() {
        this.$searchField.val('');
        this.setClearBtnState();
        this.$searchField.trigger('focus');
    }

    initSearchSuggestions() {
        this.$searchField.on('focus', () => {
            let query = this.$searchField.val().replace("'","");

            if (this.tryPopulateSuggestions(query)) {
                this.openSuggestionList();
            }
        });

        this.$searchField.on('input', () => {
            let query = this.$searchField.val().replace("'","");

            if (this.tryPopulateSuggestions(query)) {
                this.openSuggestionList();
            }
            else {
                this.closeSuggestionList();
            }
        });

        this.$searchForm.on('submit', () => {
            // prevent submission if empty
            return !!this.$searchField.val().trim();
        });
    }

    filterSuggestions(query) {
        if (!query) {
            // Don't filter with empty string.
            return [];
        }

        const reg = new RegExp(query.toLowerCase().split(" ").join(".*?[ ]"), 'i');

        return this.searchSuggestions.filter(
                suggestion => suggestion['label'].toLowerCase().includes(query.toLowerCase())
                    ||  suggestion['label'].toLowerCase().match(reg)
                    || (suggestion['tags'] && suggestion['tags'].includes(query.toLowerCase()))

        );
    }

    tryPopulateSuggestions(query) {
        this.$suggestionsList.empty();

        let suggestions = this.filterSuggestions(query);
        if (!suggestions.length) return false;

        let count = 0;
        for (let suggestion of suggestions) {
            if (count >= 5) break;

            this.addSearchSuggestion(suggestion['label'], suggestion['url'], suggestion['tags'], query);
            count++;
        }

        return true;
    }

    addSearchSuggestion(label, url, tags, emboldenText) {
        let suggestion = document.createElement('a');
        suggestion.textContent = label;
        suggestion.href = url;
        suggestion.dataset.tag = tags;

        const keywords = emboldenText.trim().split(' ');
        const keywordsCapture = keywords.map(keyword => `(${keyword})`);
        const reg = new RegExp(keywordsCapture.join(".*?[ ]"), 'ig');

        let tempLabel = label;
        const matches = label.matchAll(reg);

        const arr = {};
        for (const match of matches) {
            match.forEach((item, index) => {
                if (index !== 0) {
                    arr[item] = `<b>${item}</b>`;
                }
            })
        }

        for (const [key, value] of Object.entries(arr)) {
            tempLabel = tempLabel.split(key).join(value);
        }
        suggestion.textContent = tempLabel;
        let cleanedTxt = suggestion.innerHTML;

        cleanedTxt = cleanedTxt.replaceAll('&lt;&lt;b&gt;b&lt;/b&gt;&gt;', '<b>').replaceAll('&lt;/&lt;b&gt;b&lt;/b&gt;&gt;', '</b>')
            .replaceAll('&lt;b&gt;','<b>').replaceAll('&lt;/b&gt;', '</b>');

        suggestion.innerHTML = cleanedTxt;
        this.$suggestionsList.append(suggestion);
    }
}

/**
 * Scripting for the dropdown component.
 */
class DropdownComponent {
    $dropdown;
    $selector;
    $selectorText;
    $selectorIcon;
    $optionsList;
    $options;

    onOpenedEvent = new Event();
    onClosedEvent = new Event();
    selectionChangedEvent = new Event();

    $selectedOptions;

    _search = '';
    _searchCooldown;

    /**
     * @param {HTMLDivElement} element HTMLDivElement for the dropdown component main div.
     */
    constructor(element) {
        this.element = element;
        this.$dropdown = $(element);
        this.$selector = $('.selector', this.$dropdown);
        this.$selectorText = $('.selector-text', this.$selector);
        this.$selectorIcon = $('.selector-icon span.icon', this.$selector)
        this.$optionsList = $('.options-list', this.$dropdown);
        this.$options = $('.option', this.$optionsList);

        this.$selectedOptions = this.$options.filter('.selected');
        if (this.$selectedOptions.length) {
            this._selectOption(this.$selectedOptions.first());
        }

        this.$selector.on('click keyup', (event) => {
            if (event.type === 'keyup' && event.key !== 'Enter') return;

            if (this.$optionsList.hasClass('hidden')) {
                this.open();
            }
            else {
                this.close();
            }
        });

        this.$options.on('click', (e) => this._onOptionClick(e));
        this.$options.on('blur', (e) => this._onOptionBlur(e));
        this.$options.on('keydown', (e) => this._onOptionKeyDown(e));

        const $form = this.$dropdown.closest('form');
        if ($form) {
            $form.on('reset', () => this.reset());
        }
    }

    get isOpen() { return this.$dropdown.hasClass('active') };

    get value() { return this.getSelected().value; }

    set value(value) { this.selectOption(value); }

    selectOption(value) {
        const $option = this.$options.filter(`.option[data-value="${value}"]`);
        if (!$option) {
            console.warn(`Attempted to select a non-existing select option with value ${value}. Ignoring.`);
            return;
        }

        this._selectOption($option);
    }

    _selectOption($option) {
        this.$selectedOptions.removeClass('selected');
        $option.addClass('selected');

        this.$selectedOptions = $option;
        this._determineSelectorText();
        $option.trigger('focus');

        // Emulate native 'change' event
        this.element.dispatchEvent(new CustomEvent('change', { bubbles: true }));
        this.selectionChangedEvent.invoke(this.getSelected());
    }

    getSelected() {
        const $option = this.$selectedOptions.first();

        return {
            name: $option.text(),
            value: $option.data('value'),
        }
    }

    open() {
        this.$dropdown.addClass('active');
        this.$optionsList.removeClass('hidden');
        this.$selectorIcon.addClass('chevron-up').removeClass('chevron-down');
        const firstOption = this.$selectedOptions[0] || this.$options[0];
        if (firstOption) firstOption.focus();

        this.onOpenedEvent.invoke();
    }

    close() {
        this.$dropdown.removeClass('active');
        this.$optionsList.addClass('hidden');
        this.$selectorIcon.addClass('chevron-down').removeClass('chevron-up');
        this.onClosedEvent.invoke();
    }

    reset() {
        this.close();
        this._selectOption($());
    }

    /**
     * Set the size of this particular dropdown component.
     *
     * @param sizeClass Name of the size class. Expecting 'lg', 'md', 'sm'.
     */
    setSize(sizeClass) {
        const sizes = ['lg', 'md', 'sm'];

        if (sizes.includes(sizeClass)) {
            this.$dropdown.removeClass('lg md sm').addClass(sizeClass);
        }
    }

    addOption(value, name) {
        const $newOption = $(`<div class="option" tabIndex="0">
            <span class="name"></span>
            <div class="icon-box">
                <span class="icon check"></span>
            </div>
        </div>`);

        $('.name', $newOption).text(name);
        $newOption.attr('data-value', value);
        $newOption.on('click', (e) => this._onOptionClick(e));
        $newOption.on('blur', (e) => this._onOptionBlur(e));
        $newOption.on('keydown', (e) => this._onOptionKeyDown(e));

        this.$optionsList.append($newOption);

        this.$options = $('.option', this.$optionsList);
    }

    showErrorHighlight() {
        this.$selector.addClass('error-highlight');
    }

    hideErrorHighlight() {
        this.$selector.removeClass('error-highlight');
    }

    _determineSelectorText() {
        this.$selectorText.text(this.$selectedOptions.first().text());
    }

    _onOptionClick(event) {
        this._selectOption($(event.currentTarget));
        this.close();
    }

    _onOptionBlur(event) {
        if (!this.isOpen) return; // Dropdown already closed, ignore
        if ($(event.relatedTarget).is(this.$dropdown)) return; // If focus went to dropdown component root element, keep open
        if (this.$dropdown.has(event.relatedTarget).length > 0) return; // If focus remained within the dropdown component, keep open

        this.close();
    }

    _onOptionKeyDown(event) {
        if (event.key === 'Escape') {
            this.close();
        }
        else if (event.key === 'Enter') {
            this._selectOption($(event.currentTarget));
            this.close();
        }
        else if (event.key === 'ArrowUp') {
            if (event.currentTarget.previousElementSibling) {
                event.currentTarget.previousElementSibling.focus();
            }
            event.preventDefault(); // Don't scroll
        }
        else if (event.key === 'ArrowDown') {
            if (event.currentTarget.nextElementSibling) {
                event.currentTarget.nextElementSibling.focus();
            }
            event.preventDefault();
        }
        else {
            // Try to focus option by search
            this._search += event.key;
            this.$options.filter((i, element) => {
                return element.textContent.trim().toLowerCase().startsWith(this._search);
            }).first().trigger('focus');

            clearTimeout(this._searchCooldown);
            this._searchCooldown = setTimeout(() => {
                this._search = '';
            }, 750);
        }
    }
}

class MultiselectDropdown extends DropdownComponent {
    constructor($dropdownElement) {
        super($dropdownElement);

        // Finding selected options by checkbox value and not .selected class
        // allows value to be remembered after refreshing page
        this.$selectedOptions = this.$options.filter(':has(input[type="checkbox"]:checked)');
        for (const element of this.$selectedOptions) {
            this._selectOption($(element));
        }
    }

    getSelected() {
        return this.$selectedOptions.toArray().map((element) => {
            return {
                name: element.querySelector('.name').textContent,
                value: element.dataset.value,
            };
        });
    }

    clearSelected() {
        $('.checkbox', this.$selectedOptions).attr('checked', false);
        this.$selectedOptions = this.$selectedOptions.removeClass('selected').filter('.selected');

        this._determineSelectorText();
        this.selectionChangedEvent.invoke({ });
    }

    addOption(value, name) {
        // TODO stub
    }

    reset() {
        this.close();
        this.clearSelected();
    }

    _selectOption($option) {
        $option.toggleClass('selected');
        $option[0].querySelector('.checkbox').checked = $option.hasClass('selected');

        this.$selectedOptions = this.$options.filter('.selected');
        this._determineSelectorText();
        $option.trigger('focus');
        this.selectionChangedEvent.invoke(this.getSelected());
    }

    _determineSelectorText() {
        const pluralSelectorText = this.$dropdown.data('plural-selector');
        this.$selectorText.text(this.$selectedOptions.length < 2
                ? this.$selectedOptions.first().text()
                : pluralSelectorText.replace('%1', this.$selectedOptions.length));
    }

    _onOptionClick(event) {
        this._selectOption($(event.currentTarget));
    }

    _onOptionKeyDown(event) {
        if (event.key === 'Enter') {
            this._selectOption($(event.currentTarget));
        }
        else {
            super._onOptionKeyDown(event);
        }
    }
}

class ToggleControl {
    constructor(toggle) {
        this.toggle = toggle;

        this.toggle.addEventListener('click', () => {
            if (this.toggle.classList.contains('disabled')) return;

            this.value = !this.value;
        });

        this.toggle.addEventListener('keydown', (e) => {
            if (e.key !== ' ' && e.key !== 'Enter') return;

            if (this.toggle.classList.contains('disabled')) return;

            this.value = !this.value;
        });
    }

    get value() {
        return this.toggle.classList.contains('on');
    }

    set value(value) {
        this.toggle.classList.toggle('on', value);
        this.toggle.classList.toggle('off', !value);
    }
}

class RadioOptions {
    /** @type HTMLDivElement */
    radioOptions;

    constructor(element) {
        this.radioOptions = element;

        this._setCustomInputVisibility(this._selectedOption);

        for (const element of this.radioOptions.querySelectorAll('.input-n-label input')) {
            element.addEventListener('change', (event) => {
                const option = event.target.parentElement.parentElement;
                this._setCustomInputVisibility(option);
            });
        }
    }

    get value() {
        const option = this._selectedOption;
        if (!option) return null;

        return option.classList.contains('custom-option')
            ? option.querySelector('input.custom-input').value
            : option.querySelector('.input-n-label input').value;
    }

    set value(value) {
        const input = this.radioOptions.querySelector(`.input-n-label input[value="${value}"]`);
        if (!input) {
            console.warn(`Attempted to select a non-existing radio option with value ${value}. Ignoring.`);
            return;
        }

        input.checked = true;
    }

    get isCustomSelected() {
        const option = this._selectedOption;
        if (!option) return false;

        return option.classList.contains('custom-option');
    }

    get _selectedOption() {
        const input = this.radioOptions.querySelector('.input-n-label input:checked');
        if (!input) return null;

        return input.parentElement.parentElement;
    }

    showErrorHighlight() {
        if (this.isCustomSelected) {
            this.radioOptions.querySelector('input.custom-input').classList.add('error-highlight');
        }
    }

    hideErrorHighlight() {
        const customInput = this.radioOptions.querySelector('input.custom-input');
        if (!customInput) return;

        customInput.classList.remove('error-highlight');
    }

    _setCustomInputVisibility(option) {
        // Hide other custom inputs
        for (const element of this.radioOptions.querySelectorAll('input.custom-input')) {
            element.classList.add('hidden');
        }

        if (option && option.classList.contains('custom-option')) {
            const customInput = option.querySelector('input.custom-input');
            customInput.classList.remove('hidden');
        }
    }
}

class CarouselComponent {
    $carousel;
    $controlButtons;
    $content;
    content;

    constructor($carousel) {
        this.$carousel = $carousel;
        this.$controlButtons = $('.carousel-controls button', this.$carousel);
        this.$content = $('.carousel-content', this.$carousel)
        this.content = this.$content[0];

        if (!this.content || !this.$controlButtons.length) {
            console.error(`Missing elements in '${this.$carousel.attr('class')}' carousel.`);
            return;
        }

        this.$controlButtons.on('click', (e) => {
            // Assume the content has a 'gap' property (but this is really up to the implementer - fix if needed)
            const gridGap = parseInt(this.$content.css('gap'));
            const itemWidth = parseInt(this.$content.children().first().css('width'));

            // Ensure each item gets 100 % visibility at some point during scrolling
            const itemFitCount = Math.floor(this.content.clientWidth / itemWidth);
            const scrollAmount = Math.min(this.content.clientWidth + gridGap, (itemWidth + gridGap) * itemFitCount);

            this.scrollTo($(e.currentTarget).hasClass('left')
                ? this.content.scrollLeft - scrollAmount
                : this.content.scrollLeft + scrollAmount);
        });

        $(this.content).on('scroll', () => this.setButtonStates());

        this.setButtonStates();
    }

    get itemCount() { return this.$content.children().length }

    scrollTo(leftValue) {
        this.content.scroll({
            left: leftValue,
            behavior: 'smooth',
        });
    }

    setButtonStates() {
        if (document.documentElement.dir === 'rtl') {
            this.$controlButtons[1].disabled = this.content.scrollLeft >= 0;
            this.$controlButtons[0].disabled = 0 - this.content.scrollLeft + this.content.clientWidth >= this.content.scrollWidth;
        }
        else {
            this.$controlButtons[0].disabled = this.content.scrollLeft <= 0;
            this.$controlButtons[1].disabled = this.content.scrollLeft + this.content.clientWidth >= this.content.scrollWidth;
        }
    }
}

class TabStructure {
    constructor(element) {
        this.tabStructure = element;

        this.onTabChanged = new Event();

        this._tabIds = [];
        this._tablist = this.tabStructure.querySelector('.tab-buttons');
        this._tabButtons = this._tablist.querySelectorAll('.tab-button');
        this._tabPanes = this.tabStructure.querySelectorAll('.tab-pane');

        if (this.tabStructure.dataset.tablistSpan) {
            this.setTablistSpan(this.tabStructure.dataset.tablistSpan);
            Breakpointer.breakpointChangedEvent.addListener(() => this.setTablistSpan(this.tabStructure.dataset.tablistSpan));
        }

        for (const tabButton of this._tabButtons) {
            this._tabIds.push(tabButton.dataset.tabId);
            tabButton.addEventListener('click', () => {
                this.setActiveTab(tabButton.dataset.tabId);
            });
        }

        // Prevent layout shift when emboldening the labels by reserving space for the bold lettering in CSS
        if (this.tabStructure.classList.contains('type-b')) {
            for (const tabButton of this._tabButtons) {
                const title = tabButton.querySelector('.tab-title');
                title.dataset.title = title.textContent;
            }
        }

        if (this._tabPanes.length > 0) {
            this.setActiveTab(this._tabPanes[0].dataset.tabId);
        }
    }

    get tabIds() { return this._tabIds; }

    get tabButtons() { return this._tabButtons; }

    get tabPanes() { return this._tabPanes; }

    setTablistSpan(columns) {
        if (Breakpointer.currentBreakpoint.gt(Breakpoint.MD)) {
            this._tablist.style.gridColumn = `span ${columns}`;
        }
        else {
            this._tablist.style.removeProperty('grid-column');
        }
    }

    getTabPane(tabId) {
        return Array.from(this._tabPanes).find((pane) => pane.dataset.tabId === tabId);
    }

    setActiveTab(tabId) {
        for (const tabButton of this._tabButtons) {
            tabButton.classList.toggle('active', tabButton.dataset.tabId == tabId);
        }

        for (const tabPane of this._tabPanes) {
            tabPane.classList.toggle('hidden', tabPane.dataset.tabId != tabId);
        }

        if (this.tabStructure.classList.contains('type-b') && Breakpointer.currentBreakpoint.eq(Breakpoint.SM)) {
            this.scrollToButton(tabId);
        }

        this.onTabChanged.invoke(tabId);
        this.activeTab = tabId;
    }

    /** Side-scroll the button of the given tab ID into view, if needed */
    scrollToButton(tabId) {
        if (this._tablist.offsetWidth >= this._tablist.scrollWidth) return; // No scrolling required. All buttons are in view.

        const scrollTo = (leftOffset) => {
            this._tablist.scrollTo({
                left: leftOffset,
                behavior: 'smooth',
            });
        };

        const button = Array.from(this._tabButtons).find(button => button.dataset.tabId == tabId);
        if (!button) return;

        const maskLeftEdge = this._tablist.scrollLeft;
        const maskRightEdge = this._tablist.scrollLeft + this._tablist.offsetWidth;
        const buttonLeftEdge = button.offsetLeft;
        const buttonRightEdge = button.offsetLeft + button.offsetWidth;

        // Somewhat arbitrary offset to ensure adjacent buttons are revealed,
        // provided the clicked button doesn't take all the space (therefore 0-54px)
        const offset = Math.min(Math.max(this._tablist.offsetWidth - button.offsetWidth, 0), 54);

        if (buttonLeftEdge <= maskLeftEdge) {
            scrollTo(buttonLeftEdge - offset);
        }
        else if (buttonRightEdge > maskRightEdge) {
            scrollTo(buttonRightEdge + offset - this._tablist.offsetWidth);
        }
    }
}

class ToastNotification {
    constructor(element) {
        this.toast = element;
        this.messageElement = this.toast.querySelector('.message');

        this.toast.querySelector('button.close').addEventListener('click', () => this.hide());
    }

    setMessage(message) {
        this.toast.querySelector('.message').textContent = message;
    }

    showMessage(message, timeout) {
        this.setMessage(message);
        this.show(timeout);
    }

    show(timeout) {
        this.toast.classList.remove('hidden');

        clearTimeout(this._tandle);

        if (timeout <= 0) return;

        this._tandle = setTimeout(() => {
            this.hide();
        }, timeout);
    }

    hide() {
        this.toast.classList.add('hidden');
        clearTimeout(this._tandle);
    }
}

/**
 * Simple controller for the radio button group component.
 */
class RadioGroup {
    $group;
    $buttons;
    selectionChangedEvent = new Event();

    constructor($group) {
        this.$group = $group;
        this.$buttons = $('.radio-option-btn', this.$group);

        this.$buttons.on('click', (e) => {
            this.setActiveButton(e.target);
        });
    }

    getActiveButton() {
        return this.$buttons.filter('.active')[0];
    }

    setActiveButton(button) {
        this.$buttons.removeClass('active');

        if (button && this.$group.has(button).length) {
            button.classList.add('active');
            this.selectionChangedEvent.invoke(button);
        }
        else {
            this.selectionChangedEvent.invoke();
        }
    }
}

class CookieBanner {
    /** @type HTMLDivElement */
    banner;

    /**
     * @param {HTMLDivElement} cookieBanner
     */
    constructor(cookieBanner) {
        this.banner = cookieBanner;

        this.acceptAllCookies = this.acceptAllCookies.bind(this);
        this.rejectNonessentialCookies = this.rejectNonessentialCookies.bind(this);

        this.banner.querySelector('button.accept-all').addEventListener('click', this.acceptAllCookies);

        this.init();
    }

    async init() {
        if (!CookieSettings.isConsentSet()) {
            await this.displayRejectButton();
            this.show();
            CookieSettings.onConsentChanged.addListener(() => this.hide());
        }
    }

    async displayRejectButton() {
        const currency = await L10n.getLocalCurrency();
        const getLocalCountry = await L10n.getCountry();

        // GDPR countries but not use euro
        const GDPR = ['BG', 'HR', 'CZ', 'DK', 'HU', 'PL', 'RO', 'SE', 'UK'];

        if (currency === 'EUR' || GDPR.includes(getLocalCountry)) {
            this.banner.querySelector('button.reject').classList.remove('hidden');
            this.banner.querySelector('button.reject').addEventListener('click', this.rejectNonessentialCookies);
        }
    }

    show() {
        this.banner.classList.remove('hidden');
    }

    hide() {
        this.banner.classList.add('hidden');
    }

    acceptAllCookies() {
        CookieSettings.setConsent({
            preferences: true,
            analytics: true,
            marketing: true,
        });

        console.log('All cookies accepted.');
        this.banner.classList.add('hidden');
    }

    rejectNonessentialCookies() {
        CookieSettings.setConsent({
            preferences: false,
            analytics: false,
            marketing: false,
        });

        console.log('Non-essential cookies rejected.');
        this.banner.classList.add('hidden');
    }
}

class CookieDialog extends Modal {
    name = 'cookie-dialog';

    constructor(modal) {
        super(modal);

        this.preferencesToggle = new ToggleControl(this.modal.querySelector('.toggle-control.preferences'));
        this.analyticsToggle = new ToggleControl(this.modal.querySelector('.toggle-control.analytics'));
        this.marketingToggle = new ToggleControl(this.modal.querySelector('.toggle-control.marketing'));

        this.modal.querySelector('button.save').addEventListener('click', () => this.onSave());

        this._monitorFragment('#cookie-settings-dialog');
        this.loadValues();
    }

    loadValues() {
        if (CookieSettings.isConsentSet()) {
            const consent = CookieSettings.getConsent();

            this.preferencesToggle.value = !!consent.preferences;
            this.analyticsToggle.value = !!consent.analytics;
            this.marketingToggle.value = !!consent.marketing;
        }
    }

    onSave() {
        CookieSettings.setConsent({
            preferences: this.preferencesToggle.value,
            analytics: this.analyticsToggle.value,
            marketing: this.marketingToggle.value,
        });

        this.close();
    }
}

class SplitFlapTimer {
    constructor(element) {
        this.element = element;

        this.daysCell0 = this.element.querySelector('.days .cell:first-child');
        this.daysCell1 = this.element.querySelector('.days .cell:nth-child(2)');
        this.hoursCell0 = this.element.querySelector('.hours .cell:first-child');
        this.hoursCell1 = this.element.querySelector('.hours .cell:nth-child(2)');
        this.minutesCell0 = this.element.querySelector('.minutes .cell:first-child');
        this.minutesCell1 = this.element.querySelector('.minutes .cell:nth-child(2)');
    }

    setTime(seconds) {
        this._time = seconds;

        const days = Math.floor(seconds / (3600 * 24));

        seconds -= days * 3600 * 24;
        const hours = Math.floor(seconds / 3600);

        seconds -= hours * 3600
        const minutes = Math.floor(seconds / 60);

        this.setDays(days);
        this.setHours(hours);
        this.setMinutes(minutes);
    }

    setDays(days) {
        days = Math.floor(days);
        days = Math.max(0, Math.min(99, days));
        days = days.toString().padStart(2, '0');

        this.daysCell0.textContent = days.charAt(0);
        this.daysCell1.textContent = days.charAt(1);
    }

    setHours(hours) {
        hours = Math.floor(hours);
        hours = Math.max(0, Math.min(99, hours));
        hours = hours.toString().padStart(2, '0');

        this.hoursCell0.textContent = hours.charAt(0);
        this.hoursCell1.textContent = hours.charAt(1);
    }

    setMinutes(minutes) {
        minutes = Math.floor(minutes);
        minutes = Math.max(0, Math.min(99, minutes));
        minutes = minutes.toString().padStart(2, '0');

        this.minutesCell0.textContent = minutes.charAt(0);
        this.minutesCell1.textContent = minutes.charAt(1);
    }

    beginCountdown() {
        clearInterval(this._updateInterval);
        this._updateInterval = setInterval(() => {
            if (this._time - 60 <= 0) {
                clearInterval(this._updateInterval);
                return;
            }

            this.setTime(this._time - 60);
        }, 60 * 1000);
    }
}

/**
 * Frontend scripting for the tab structure module.
 */

class TabStructureBlock {
    constructor(element) {
        this.block = element;
        this.tabStructure = new TabStructure(this.block.querySelector('.tab-structure'));

        if (!this.setActiveTabViaFragment() && this.block.dataset.isOsFamilies) {
            this.setActiveTabViaAgent();
        }

        this.tabStructure.onTabChanged.addListener((tabId) => {
            const pane = this.tabStructure.getTabPane(tabId);
            if (!pane || !pane.id) return;

            if (window.location.hash !== `#${pane.id}`) {
                history.pushState({ fragmentMonitor: 'add' }, null, `#${pane.id}`);
            }
        });

        window.addEventListener('popstate', () => this.setActiveTabViaFragment());
    }

    /** @returns true if fragment used for tab selection */
    setActiveTabViaFragment() {
        if (!window.location.hash) return false;

        const target = document.getElementById(window.location.hash.slice(1)); // remove #
        if (!target) return false;

        const containingTab = target.closest('.tab-pane');
        if (!containingTab) return false;

        if (!this.tabStructure.tabIds.includes(containingTab.dataset.tabId)) return false;

        if (this.tabStructure.activeTab !== containingTab.dataset.tabId) {
            this.tabStructure.setActiveTab(containingTab.dataset.tabId);
        }

        requestAnimationFrame(() => {
            target.scrollIntoView();
        }); // browser's native scrolling doesn't handle our tabs; ensure we have the last say

        return true;
    }

    setActiveTabViaAgent() {
        const OsFamilies = {
            Windows: '1',
            Mac: '2',
            Linux: '3',
            Android: '4',
            iOS: '5',
        }

        if (this.tabStructure.tabIds.length <= 0) return;

        const platform = (window.navigator.userAgentData ? window.navigator.userAgentData.platform : null) ||
            window.navigator.platform;
        const macPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K', 'macOS'];
        const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];

        if (this.tabStructure.tabIds.includes(OsFamilies.Windows) && windowsPlatforms.indexOf(platform) !== -1) {
            this.tabStructure.setActiveTab(OsFamilies.Windows);
        }
        else if (this.tabStructure.tabIds.includes(OsFamilies.Mac) && macPlatforms.indexOf(platform) !== -1) {
            this.tabStructure.setActiveTab(OsFamilies.Mac);
        }
        else if (this.tabStructure.tabIds.includes(OsFamilies.Android) && /android/i.test(platform)) {
            this.tabStructure.setActiveTab(OsFamilies.Android);
        }
        else if (this.tabStructure.tabIds.includes(OsFamilies.Linux) && /Linux/.test(platform)) {
            this.tabStructure.setActiveTab(OsFamilies.Linux);
        }
        else if (this.tabStructure.tabIds.includes(OsFamilies.iOS) && /iPhone|iPad|iPod/.test(platform)) {
            this.tabStructure.setActiveTab(OsFamilies.iOS);
        }
    }
}

/**
 * Frontend scripting for the package downloads block.
 */

class PackageDownloads {
    constructor(element) {
        this.packageDownloads = element;

        const copyToastElement = this.packageDownloads.querySelector('.copy-toast');
        document.querySelector('.toast-notifications-container').appendChild(copyToastElement);
        this.copyToast = new ToastNotification(copyToastElement);

        this._initPackageCards();
        this._initDropdownFilter();
    }

    _initPackageCards() {
        this.packageCards = [];
        for (const cardElement of this.packageDownloads.querySelectorAll('.package-card')) {
            const card = new PackageCard(cardElement);
            card.copyToast = this.copyToast;
            this.packageCards.push(card);
        }
    }

    _initDropdownFilter() {
        const dropdownElement = this.packageDownloads.querySelector('.dropdown.os-filter');
        if (dropdownElement) {
            this.osDropdown = new DropdownComponent(dropdownElement);

            this.osDropdown.selectionChangedEvent.addListener((newSelection) => {
                for (const card of this.packageCards) {
                    if (card.osId == newSelection.value) {
                        card.show();
                    }
                    else {
                        card.hide();
                    }
                }
            });

            Breakpointer.breakpointChangedEvent.addListener((newBreakpoint) => {
                const sizeClass = newBreakpoint.gteq(Breakpoint.LG) ? 'lg' : 'md';
                this.osDropdown.setSize(sizeClass);
            });

            this.osDropdown.selectOption(this.osDropdown.$options.first().data('value'));
        }
    }
}

class PackageCard {
    constructor(element) {
        this.card = element;

        this.osId = this.card.dataset.osId;
        this.links = JSON.parse(this.card.dataset.links);

        this.downloadButton = this.card.querySelector('.download-button');
        this.betaButton = this.card.querySelector('.beta-button');

        this.installCmdField = this.card.querySelector('.install-cmd-field');
        if (this.installCmdField) {
            this.installCmdElement = this.installCmdField.querySelector('.install-cmd');
            this.installCmdSnippetTpl = this.installCmdElement.textContent;
            this.installCmdField.querySelector('.copy-btn').addEventListener('click', () => this.copyInstallCmdSnippet());
            this._populateSnippetPlaceholders();
        }

        this._initArchitectureRadios();
    }

    show() {
        this.card.classList.remove('hidden');
    }

    hide() {
        this.card.classList.add('hidden');
    }

    setArchitecture(value) {
        if (this.downloadButton) {
            this.downloadButton.href = value == 32 ? this.links.link32 : this.links.link64;
            this.downloadButton.classList.toggle('hidden', !this.downloadButton.getAttribute('href'));
        }

        if (this.betaButton) {
            this.betaButton.href = value == 32 ? this.links.beta32 : this.links.beta64;
            this.betaButton.classList.toggle('hidden', !this.betaButton.getAttribute('href'));
        }

        if (this.installCmdField) {
            this._populateSnippetPlaceholders();
        }
    }

    async copyInstallCmdSnippet() {
        if (!this.installCmdField) return;

        await navigator.clipboard.writeText(this.installCmdElement.textContent);

        this.copyToast.show(5000);
    }

    _populateSnippetPlaceholders() {
        const downloadUrl = new URL(this.downloadButton.getAttribute('href'));
        downloadUrl.searchParams.delete('aff');

        const packageFilename = downloadUrl.href.substring(downloadUrl.href.lastIndexOf('/') + 1);

        this.installCmdElement.textContent = this.installCmdSnippetTpl
            .replace('^{packageDownloadUrl}', downloadUrl.href)
            .replace('^{packageFilename}', packageFilename);
    }

    _initArchitectureRadios() {
        const architectureRadio = this.card.querySelector('.arch-options');
        for (const input of architectureRadio.querySelectorAll('input')) {
            input.addEventListener('change', () => this.setArchitecture(input.value));
        }

        const hr = this.card.querySelector('hr');
        const header = this.card.querySelector('.card-header');
        Breakpointer.breakpointChangedEvent.addListener((newBreakpoint) => {
            if (newBreakpoint.lteq(Breakpoint.SM)) {
                hr.after(architectureRadio);
            }
            else {
               header.appendChild(architectureRadio);
            }
        });

        const checkedArchRadio = architectureRadio.querySelector('input:checked');
        if (!checkedArchRadio) return; // No links available for this package.

        this.setArchitecture(checkedArchRadio.value);
    }
}

/**
 * Frontend scripting for the animated hero block.
 */

class AnimatedHero {
    $hero;
    $media;
    $canvas;
    $video;
    $textPane;
    $buttons;
    media;
    canvas;
    canvasContext;
    video;

    _bgImages = [];

    _textPaneBottom;
    _totalBlockHeight;
    _visibleBlockHeight;
    _currentBreakpoint;
    _isShowingCanvas = true;
    /** @type {Breakpoint} */
    _xxlBreakpoint; // Unique breakpoint for this block.

    constructor(element) {
        this.$hero = $(element);
        this.$media = $('.media', this.$hero);
        this.$canvas = $('canvas', this.$media);
        this.$video = $('video', this.$media);
        this.$textPane = $('.text-pane', this.$hero);
        this.$buttons = $('.button', this.$textPane);

        this.media = this.$media[0];
        this.canvas = this.$canvas[0];
        this.canvasContext = this.canvas.getContext('2d');
        this.video = this.$video[0];

        this._xxlBreakpoint = new Breakpoint('XXL', 2560, Infinity);

        this._onResize();
        this._updateTextPaneEffects();

        Breakpointer.initialisedEvent.addListener((breakpoint) => this._onBreakpointChanged(breakpoint));
        Breakpointer.breakpointChangedEvent.addListener((breakpoint) => this._onBreakpointChanged(breakpoint));
        ThemeManager.themeChangedEvent.addListener(() => this._setVideoSrc());

        document.addEventListener('scroll', () => {
            this._updateTextPaneEffects();
            this.updateAnimation();
        });

        window.addEventListener('resize', () => this._onResize());

        if (this.$buttons.length) {
            Breakpointer.breakpointChangedEvent.addListener((newBreakpoint) => {
                const sizeClass = newBreakpoint.gteq(Breakpoint.LG) ? 'lg' : 'md';
                this.$buttons.removeClass('xl lg md sm').addClass(sizeClass);
            });

            if ($('.button.user', this.$hero).length) {
                const buttonsToKeep = window.user ? 'user' : 'non-user';

                if (window.user) {
                    $(`.button:not(.${buttonsToKeep})`, this.$hero).remove();
                }
                else {
                    $(`.button.user`, this.$hero).remove();
                }

            }
            $(`.button`, this.$hero).removeClass('hidden');
        }
    }

    updateAnimation() {
        // No jQuery here for performance on scroll listener

        const imageCount = this._bgImages.length;
        // Ensure the final image is displayed while the block is still in full view, before switching to the video.
        const pixelsPerImage = (this._totalBlockHeight - this._visibleBlockHeight) / imageCount;
        const imageIndex = Math.floor(window.scrollY / pixelsPerImage);
        // Transition from image sequence to video when end of sequence reached
        const transitionReached = imageIndex > imageCount - 1;

        if (transitionReached) {
            if (this._isShowingCanvas && this.video.readyState >= this.video.HAVE_CURRENT_DATA) {
                // Hide canvas, show video and play it
                this.media.classList.add('show-video');
                this.video.play();
                this._isShowingCanvas = false;
            }
        }
        else {
            // Show canvas if not already visible, hide and rewind video
            if (!this._isShowingCanvas) {
                if (this.video.readyState >= this.video.HAVE_METADATA) {
                    this.video.pause();
                    this.video.currentTime = 0;
                }

                this.media.classList.remove('show-video');
                this._isShowingCanvas = true;
            }

            this._setBgImage(Math.min(imageIndex, imageCount - 1));
        }
    }

    _onResize() {
        this._updateSizeValues();
        this._onBreakpointChanged(Breakpointer.currentBreakpoint);
    }

    _onBreakpointChanged(newBreakpoint) {
        if (window.innerWidth > this._xxlBreakpoint.min) {
            // Arbitrary but reasonable spacing tweak for the different media at XXL.
            this.$hero.css('margin-bottom', `${this.canvas.height / -4}px`);
            newBreakpoint = this._xxlBreakpoint;
        }
        else {
            this.$hero.css('margin-bottom', 'calc(var(--spacing-12) * -1)');
        }

        // Only fetch larger media - no point fetching smaller if we've already fetched larger
        // (except if the current breakpoint the special XXL breakpoint as the media is different)
        if (this._currentBreakpoint
                && this._currentBreakpoint.gteq(newBreakpoint)
                && this._currentBreakpoint.lt(this._xxlBreakpoint)) {
            this.updateAnimation();
            return;
        }

        this._currentBreakpoint = newBreakpoint;

        this._prefetchImages();
        this._setVideoSrc();
        this.updateAnimation();
    }

    _updateSizeValues() {
        this._textPaneBottom = this.$textPane.offset().top - this.$textPane.parent().offset().top + this.$textPane.height();
        this._totalBlockHeight = this.$hero.height();
        this._visibleBlockHeight = this.$media.height();
        this.canvas.width = this.$canvas.parent().width();
        this.canvas.height = this.$canvas.parent().height();
    }

    _getImageSrcs(breakpoint) {
        const srcs = [];

        const mediaPath = this.media.dataset.mediaPath;
        const breakpointName = breakpoint.name.toLowerCase();

        for (let i = 0; i <= 60; i++) {
            const number = i.toString().padStart(2, '0');
            srcs.push(`${mediaPath}/bgimg-${breakpointName}/${number}.png`);
        }

        return srcs;
    }

    _prefetchImages() {
        const imageSrcs = this._getImageSrcs(this._currentBreakpoint);

        for (let i = 0; i < imageSrcs.length; i++) {
            const image = new Image();
            image.onload = () => {
                // Image for the current step may have been loading, so update animation
                this.updateAnimation();
            }
            image.src = imageSrcs[i];
            this._bgImages[i] = image;
        }
    }

    _setVideoSrc() {
        this.video.pause();
        this.video.onloadeddata = () => this.updateAnimation();
        const mediaPath = this.media.dataset.mediaPath;
        const breakpointName = this._currentBreakpoint.name.toLowerCase();

        const ua = window.navigator.userAgent.toLowerCase();
        const isAndroid = ua.indexOf('android') !== -1; //Mobile Android
        const isDesktopSafari = (ua.indexOf('safari') !== -1) && (!(ua.indexOf('chrome') !== -1) && (ua.indexOf('version/') !== -1) && (ua.indexOf('mac os') !== -1)); //Desktop Safari on Mac OS
        const isMobileOS = (ua.indexOf('safari') !== -1) && (ua.indexOf('mobile') !== -1) && (ua.indexOf('mac os') !== -1); //Mobile Apple device (FF,chrome,safari)

        if (isAndroid) {
            this.video.src = `${mediaPath}/video/${breakpointName}.webm`;
        }
        else if (isMobileOS) {
            this.video.src = `${mediaPath}/video/${breakpointName}.mov`;
        }
        else if (isDesktopSafari) {
            this.video.src = `${mediaPath}/video/${breakpointName}.mov`;
        }
        else {
            // windows/linux/chrome based desktop
            this.video.src = `${mediaPath}/video/${breakpointName}.webm`;
        }

        this.video.load();
    }

    _setBgImage(index) {
        const image = this._bgImages[index];
        if (!image || !image.complete || image.naturalWidth === 0) return; // Not yet loaded or errored; don't update canvas

        const hRatio = this.canvas.width / image.width;
        const vRatio = this.canvas.height / image.height;
        const ratio = Math.max(hRatio, vRatio);
        const centreShiftX = (this.canvas.width - image.width * ratio) / 2;
        const centreShiftY = (this.canvas.height - image.height * ratio) / 2;

        this.canvasContext.clearRect(0, 0, this.canvas.width, this.canvas.height);
        this.canvasContext.drawImage(image,
            0, 0, image.width, image.height, // Source rectangle of image
            centreShiftX, centreShiftY, image.width * ratio, image.height * ratio); // Destination rectangle in canvas
    }

    _updateTextPaneEffects() {
        // Transition text-pane transparency as it is scrolled out of view
        let positionMultiplier = Math.min(Math.max(window.scrollY / this._textPaneBottom, 0), 1); // 0: in centre => 1: out of view
        positionMultiplier -= 0.2; // Start transitioning at 20% progress
        const gradientStart = positionMultiplier * 1.5 * 100; // in percent
        const gradientEnd = gradientStart + (positionMultiplier * 100);
        const topOpacity = Math.max(1 - (positionMultiplier * 4), 0.15);

        this.$textPane.css('mask-image', `linear-gradient(
            rgba(0, 0, 0, ${topOpacity}) ${gradientStart}%,
            rgba(0, 0, 0, 1) ${gradientEnd}%,
            rgba(0, 0, 0, 1))`);

        const blur = Math.min(Math.max(positionMultiplier - 0.1, 0) * 10); // Delay start of blur effect by extra 10% progress
        this.$textPane.css('filter', `blur(${blur}px)`);
    }
}

/**
 * Frontend scripting for the single slice feature module.
 */

class SingleSlice {
    singleSlice;
    videos;

    /**
     * @param {HTMLElement} element
     */
    constructor(element) {
        this.singleSlice = element;
        this.videos = this.singleSlice.querySelectorAll('video');

        for (const video of this.videos) {
            if (video.loop) {
                VideoPauser.instance.registerVideo(video);
            }
        }
    }
}

/**
 * Frontend scripting for the alternating feature type A block.
 */

class FeatureAlternatingBlockA {
    blockA;
    videos;

    /**
     * @param {HTMLElement} element
     */
    constructor(element) {
        this.blockA = element;
        this.videos = this.blockA.querySelectorAll('video');

        for (const video of this.videos) {
            if (video.loop) {
                VideoPauser.instance.registerVideo(video);
            }
        }
    }
}

/**
 * Frontend scripting for the alternating feature module.
 */

class FeatureAlternating {
    $featureAlternating;
    $buttons;
    $typeBTextPanes;
    features = [];

    constructor(element) {
        this.$featureAlternating = $(element);
        this.$buttons = $('.text-button', this.$featureAlternating);
        this.$typeBTextPanes = $('.features .type-b .text-pane', this.$featureAlternating);
        this.videos = this.$featureAlternating[0].querySelectorAll('video');

        for (const child of this.$featureAlternating[0].querySelector('.features').children) {
            this.block = child;

            if (child.classList.contains('coming-soon')) {
                this.features.push(new ComingSoon($(child)));
            }
            else {
                this.videos = this.block.querySelectorAll('video');
                for (const video of this.videos) {
                    if (video.loop) {
                        VideoPauser.instance.registerVideo(video);
                    }
                }
            }
        }

        Breakpointer.breakpointChangedEvent.addListener((newBreakpoint) => {
            const sizeClass = newBreakpoint.lt(Breakpoint.LG) ? 'md' : 'lg';
            this.$buttons.removeClass('xl lg md sm').addClass(sizeClass);

            this.$typeBTextPanes.toggleClass('main-grid', newBreakpoint.eq(Breakpoint.MD));
        });
    }
}

/**
 * Frontend scripting for the competitor matrix module
 */

class CompetitorMatrixCard {
    $competitorMatrixCard;
    $matrixCardPrice;

    constructor(element) {
        this.$competitorMatrixCard = $(element);
        this.$matrixCardPrice = $('.price .value', this.$competitorMatrixCard);

        this.$matrixCardPrice.text(CurrencyLocalizer.formatPrice(this.$matrixCardPrice.text(), 'EUR', 'narrowSymbol'));
    }
}

/**
 * Frontend scripting for the alternating feature coming soon module.
 */

class ComingSoon {
    $comingSoon;
    $notifyBtn;
    $emailInput;
    $betaTestCheckbox;
    $betaTestCheckboxInput;
    $icon;
    $iconBox;
    $messageWrapper;

    campaignId;

    _sendForm;

    constructor($element) {
        this.$comingSoon = $element;
        this.$notifyBtn = $('.button', this.$comingSoon);
        this.$emailInput = $('.email-field', this.$comingSoon);
        this.$betaTestCheckbox = $('.checkbox-component.beta-tester', this.$comingSoon);
        this.$betaTestCheckboxInput = $('input', this.$betaTestCheckbox);
        this.$icon = $('.icon', this.$comingSoon);
        this.$iconBox = $('.icon-box', this.$comingSoon);
        this.$messageWrapper = $('.message-wrapper', this.$comingSoon);

        this.campaignId = +this.$comingSoon.attr('data-campaign-id'); // convert string to number

        if (!(this.$emailInput.hasClass('hidden'))) {
            this.$notifyBtn.rebind('click', () => {
                this.submitInput();
            });

            this.$emailInput.rebind('keydown', (e) => {
                if (e.key === 'Enter') {
                    this.submitInput();
                }
            });
        }

        Reactor.addEventListener('breakpoint-changed',(newBreakpoint) => {
            const sizeClass = newBreakpoint.gteq(Breakpoint.XL) ? 'lg' : 'md';
            this.$notifyBtn.removeClass('xl lg md sm').addClass(sizeClass);
        });
    }

    submitInput() {
        this.$messageWrapper.removeClass('hidden');

        if (!this.validateInput()) {
            this.$emailInput.addClass('invalid');
            this.$messageWrapper.addClass('invalid');

            this.$iconBox.addClass('error');
            $('.error-text', this.$comingSoon).removeClass('hidden');
            this.$messageWrapper.removeClass('hidden');
        }
        else {
            this.$notifyBtn.addClass('hidden');

            this.$emailInput.removeClass('invalid').addClass('hidden');
            this.$betaTestCheckbox.addClass('hidden');

            this.$iconBox.removeClass('error').addClass('success');
            $('.error-text', this.$comingSoon).addClass('hidden');
            $('.thank-you-text', this.$comingSoon).removeClass('hidden');
            this.$icon.removeClass('alert-triangle').addClass('check-circle');

            $('.call-to-action-section', this.$comingSoon).addClass('submitted');
            this.$messageWrapper.removeClass('invalid hidden').addClass('valid');

            this.sendForm();
        }
    }

    async sendForm() {
        if (!this._sendForm) {
            this._sendForm = Api.request({
                a: 'mrs',   // "marketing record survey"
                e: this.$emailInput.val(), // email address of the user
                c: this.campaignId, // campaign id from data attribute
                l: this.$betaTestCheckboxInput.is(':checked') ? "Y" : "N", // beta tester identifier, "Y" if user wants to be a beta tester and "N" if not
                d: 1, // Survey data, will be empty for coming soon module, so will hardcode to 1
            });
        }

        let response;
        try {
            response = await this._sendForm;
        }
        catch (e) {
            console.error("Email submission has failed", e.message);
            return;
        }
    }

    // Check if email input is valid, return result
    validateInput() {
        // regEx source: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email#basic_validation
        const regEx = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/

        return this.$emailInput.val() && regEx.test(this.$emailInput.val())
    }
}

/**
 * Frontend scripting for the full width banner module.
 */

class FullWidthBanner {
    $fullWidthBanner;
    $buttons;

    constructor(element) {
        this.$fullWidthBanner = $(element);
        this.$buttons = $('.button', this.$fullWidthBanner);

        if ($(`.button.primary-user-button`).length) {
            const buttonsToKeep = window.user ? 'primary-user-button' : 'primary-button';
            $(`.button:not(.${buttonsToKeep})`, this.$fullWidthBanner).remove();
            $(`.button.${buttonsToKeep}`, this.$fullWidthBanner).removeClass('hidden');
        }
    }
}

/**
 * Frontend scripting for the home page social proof module.
 */

class HomeSocialProof {
    $homeSocialProof;
    _usersCounter;
    _filesCounter;

    fetchRate = 30000; // ms
    tickRate = 1000 / 24; // ms

    _numberFormatter = new Intl.NumberFormat(L10n.getFormatLocale(), {
        maximumFractionDigits: 0,
    });

    isFetching = false;
    stats;

    isScrolling = false;
    isObscured = false;

    _scrollTimeout;
    _displayInterval;

    usersPerMs;
    filesPerMs;

    extrapolatedUsersCount;
    extrapolatedFilesCount;

    displayedUsersCount;
    displayedFilesCount;

    constructor(element) {
        this.$homeSocialProof = $(element);

        const buttonsToKeep = window.user ? 'user' : 'non-user';
        $(`.button:not(.${buttonsToKeep})`, this.$homeSocialProof).remove();
        $(`.button.${buttonsToKeep}`, this.$homeSocialProof).removeClass('hidden');

        const usersCounter = $('.registered-users .value', this.$homeSocialProof)[0];
        const filesCounter = $('.uploaded-files .value', this.$homeSocialProof)[0];

        usersCounter.textContent = 0;
        filesCounter.textContent = 0;

        this._usersCounter = usersCounter.childNodes[0];
        this._filesCounter = filesCounter.childNodes[0];

        this.fetchStats = this.fetchStats.bind(this);
        this._onScroll = this._onScroll.bind(this);
        this._onObserve = this._onObserve.bind(this);
        this._tick = this._tick.bind(this);
        this._updateDisplay = this._updateDisplay.bind(this);

        this._setup();
    }

    async fetchStats() {
        const dailyStats = await DailyStats._fetchStats(); // Skipping the DailyStats cache

        if (dailyStats) {
            this.stats = dailyStats;
        }
    }

    tryStartDisplay() {
        if (this.isScrolling || this.isObscured) return;

        this.startDisplay();
    }

    startDisplay() {
        this._calculate();

        // Jump the display to the latest extrapolated values.
        this.displayedUsersCount = this.extrapolatedUsersCount;
        this.displayedFilesCount = this.extrapolatedFilesCount;

        this._displayInterval = setInterval(this._tick, this.tickRate);
    }

    stopDisplay() {
        clearInterval(this._displayInterval);
    }

    async _setup() {
        await this.fetchStats();

        if (!this.stats) return;

        setInterval(this.fetchStats, this.fetchRate);

        window.addEventListener('scroll', this._onScroll);

        const observer = new IntersectionObserver(this._onObserve);
        observer.observe(this.$homeSocialProof[0]);
    }

    _onObserve(observables) {
        for (const observable of observables) {
            if (observable.target === this.$homeSocialProof[0]) {
                this.isObscured = !observable.isIntersecting;

                if (this.isObscured) {
                    this.stopDisplay();
                }
                else {
                    this.tryStartDisplay();
                }

                break;
            }
        }
    }

    _onScroll() {
        this.isScrolling = true;
        this.stopDisplay();

        // TODO replace with scrollend event when widely supported.
        clearTimeout(this._scrollTimeout);
        this._scrollTimeout = setTimeout(() => {
            this.isScrolling = false;
            this.tryStartDisplay();
        }, 100);
    }

    _calculate() {
        // We decouple the provided counts from the displayed counts
        // so that the counter doesn't go backwards or jump to a smaller number
        // if the previous estimation was inaccurate.

        const statsAgeMs = Date.now() - (this.stats.timestamp * 1000);

        this.usersPerMs = this.stats.confirmedusers.dailydelta / 86400 / 1000;
        this.filesPerMs = this.stats.files.dailydelta / 86400 / 1000;

        this.extrapolatedUsersCount = this.stats.confirmedusers.total + (this.usersPerMs * statsAgeMs);
        this.extrapolatedFilesCount = this.stats.files.total + (this.filesPerMs * statsAgeMs);
    }

    _tick() {
        this._calculate();

        let usersPerTick = this.usersPerMs * this.tickRate;
        let filesPerTick = this.filesPerMs * this.tickRate;

        // Speed up or slow down by 80 % to sync with latest count extrapolation.
        usersPerTick += (usersPerTick * 0.8 * Math.sign(this.extrapolatedUsersCount - this.displayedUsersCount));
        filesPerTick += (filesPerTick * 0.8 * Math.sign(this.extrapolatedFilesCount - this.displayedFilesCount));

        this.displayedUsersCount += usersPerTick;
        this.displayedFilesCount += filesPerTick;

        requestAnimationFrame(this._updateDisplay);
    }

    _updateDisplay() {
        this._usersCounter.nodeValue = this._numberFormatter.format(this.displayedUsersCount);
        this._filesCounter.nodeValue = this._numberFormatter.format(this.displayedFilesCount);
    }
}

/**
 * Scripting for common form components.
 */

class FormField {
    /** @type HTMLDivElement */
    field;
    /** @type HTMLDivElement */
    errorBox;
    errors;

    externalValidator;

    constructor(element) {
        this.field = element;
        this.errorBox = this.field.querySelector('div.error-box');
        this.errors = JSON.parse(this.errorBox.dataset.errors);

        this.field.addEventListener('change', () => this.validate());

        const form = this.field.closest('form');
        if (form) {
            form.addEventListener('reset', () => this.hideError());
        }
    }

    get value() {
        return null;
    }

    set value(value) { };

    validate() {
        if (!this.selfValidate()) return false;

        if (!this.externalValidate()) return false;

        this.hideError();
        return true;
    }

    selfValidate() { } // Abstract stub

    externalValidate() {
        if (!this.externalValidator) return true;

        if (typeof this.externalValidator !== 'function') {
            console.warn('Unexpected external validator. Expected callable function.');
            return true;
        }

        // Defer any error messages to the external validator for handling
        return this.externalValidator(this);
    }

    hideError() {
        this.errorBox.classList.add('hidden');
    }

    showError(errorMessage) {
        this.errorBox.querySelector('.error-msg').textContent = errorMessage;
        this.errorBox.classList.remove('hidden');
    }
}

class TextField extends FormField {
    /** @type HTMLInputElement */
    input;

    constructor(element) {
        super(element);
        this.input = this.field.querySelector('input');
    }

    get isOptional() {
        return this.field.classList.contains('optional');
    }

    get value() {
        return this.input.value.trim();
    }

    set value(value) {
        this.input.value = value;
    }

    selfValidate() {
        if (!this.isOptional && this.value.length < 2) {
            this.showError(this.errors.tooShort);
            return false;
        }

        return true;
    }

    hideError() {
        super.hideError();
        this.input.classList.remove('error-highlight');
    }

    showError(errorMessage) {
        super.showError(errorMessage);
        this.input.classList.add('error-highlight');
    }
}

class EmailField extends TextField {
    /** Expression as per {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email#basic_validation} */
    regEx = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;

    selfValidate() {
        if (!super.selfValidate()) return false;

        if (this.value && !this.regEx.test(this.value)) {
            this.showError(this.errors.invalidEmail);
            return false;
        }

        return true;
    }
}

class TextareaField extends FormField {
    /** @type HTMLTextAreaElement */
    textarea;

    constructor(element) {
        super(element);
        this.textarea = this.field.querySelector('textarea');
    }

    get isOptional() {
        return this.field.classList.contains('optional');
    }

    get value() {
        return this.textarea.value.trim();
    }

    set value(value) {
        this.textarea.value = value;
    }

    selfValidate() {
        if (!this.isOptional && this.value.length < 2) {
            this.showError(this.errors.tooShort);
            return false;
        }

        return true;
    }

    hideError() {
        super.hideError();
        this.textarea.classList.remove('error-highlight');
    }

    showError(errorMessage) {
        super.showError(errorMessage);
        this.textarea.classList.add('error-highlight');
    }
}

class DropdownField extends FormField {
    /** @type DropdownComponent */
    dropdown;

    constructor(element) {
        super(element);
        this.dropdown = new DropdownComponent(this.field.querySelector('.dropdown'));
    }

    get value() {
        return this.dropdown.value;
    }

    set value(value) {
        this.dropdown.value = value;
    }

    selfValidate() {
        if (this.dropdown.getSelected().value === undefined) {
            this.showError(this.errors.noValue);
            return false;
        }

        return true;
    }

    hideError() {
        super.hideError();
        this.dropdown.hideErrorHighlight();
    }

    showError(errorMessage) {
        super.showError(errorMessage);
        this.dropdown.showErrorHighlight();
    }
}

class MultiselectField extends FormField {
    /** @type MultiselectDropdown */
    dropdown;

    constructor(element) {
        super(element);
        this.dropdown = new MultiselectDropdown($('.dropdown', this.field));
    }

    get value() {
        return this.dropdown.getSelected().map(selection => selection.value).join(', ');
    }

    selfValidate() {
        if (this.dropdown.getSelected().length < 1) {
            this.showError(this.errors.noValue);
            return false;
        }

        return true;
    }

    hideError() {
        super.hideError();
        this.dropdown.hideErrorHighlight();
    }

    showError(errorMessage) {
        super.showError(errorMessage);
        this.dropdown.showErrorHighlight();
    }
}

class RadioField extends FormField {
    radioOptions;

    constructor(element) {
        super(element);
        this.radioOptions = new RadioOptions(this.field.querySelector('.m-radio-options'));
    }

    get value() {
        return this.radioOptions.value;
    }

    selfValidate() {
        if (this.radioOptions.isCustomSelected && this.value.length < 2) {
            this.showError(this.errors.customTooShort);
            return false;
        }
        else if (!this.value) {
            this.showError(this.errors.noValue);
            return false;
        }

        return true;
    }

    hideError() {
        super.hideError();
        this.radioOptions.hideErrorHighlight();
    }

    showError(errorMessage) {
        super.showError(errorMessage);
        this.radioOptions.showErrorHighlight();
    }
}

class CheckboxField extends FormField {
    /** @type HTMLInputElement */
    input;

    constructor(element) {
        super(element);
        this.input = this.field.querySelector('input');
    }

    get value() {
        return this.input.checked;
    }

    selfValidate() {
        return true;
    }

    hideError() {
        super.hideError();
        this.input.classList.remove('error-highlight');
    }

    showError(errorMessage) {
        super.showError(errorMessage);
        this.input.classList.add('error-highlight');
    }
}

class AgreeCheckboxField extends CheckboxField {
    selfValidate() {
        if (!super.selfValidate()) return false;

        if (!this.value) {
            this.showError(this.errors.notChecked);
            return false;
        }

        return true;
    }
}

class CodeInputField extends FormField {
    constructor(element) {
        super(element);

        this._isDigitOnly = this.field.querySelector('.code-input').classList.contains('is-digit-only');
        this.inputs = element.querySelectorAll('input.code-input-char');

        for (const input of this.inputs) {
            input.addEventListener('input', (e) => this._handleInput(e, input));
            input.addEventListener('keydown', (e) => this._handleKeydown(e, input));
            input.addEventListener('focus', (e) => this._handleFocus(e, input));
        }
    }

    get value() {
        return Array.from(this.inputs).map(input => input.value).join('');
    }

    set value(value) {
        const chars = value.substring(0, this.inputs.length - 1).split('');

        this.inputs.forEach((input, i) => {
            input.value = chars[i] || '';
        });
    }

    get isDigitOnly() {
        return this._isDigitOnly;
    }

    set isDigitOnly(value) {
        this._isDigitOnly = !!value;
        this.element.classList.toggle('is-digit-only', this._isDigitOnly);
    }

    selfValidate() {
        if (this.value.length < this.inputs.length) {
            this.showError(this.errors.notComplete);
            return false;
        }

        return true;
    }

    hideError() {
        super.hideError();
        for (const input of this.inputs) {
            input.classList.remove('error-highlight');
        }
    }

    showError(errorMessage) {
        super.showError(errorMessage);
        for (const input of this.inputs) {
            input.classList.add('error-highlight');
        }
    }

    _handleInput(e, input) {
        let cleanValue = input.value;
        input.value = '';

        if (this.isDigitOnly) {
            const digits = cleanValue.match(/\d+/g);
            cleanValue = digits ? digits.join('') : '';
        }

        if (!cleanValue) return;

        let i = 0;
        let nextInput = input;
        while (nextInput && i < cleanValue.length) {
            nextInput.focus();
            nextInput.value = cleanValue.charAt(i);
            nextInput = nextInput.nextElementSibling;
            i++;
        }

        if (nextInput) {
            nextInput.focus();
        }
    }

    _handleKeydown(e, input) {
        if (e.key !== 'Backspace') return;

        input.value = '';

        if (input.previousElementSibling) {
            input.previousElementSibling.focus();
        }

        e.preventDefault(); // Don't continue to input handler.
    }

    async _handleFocus(e, input) {
        if (input.value) {
            await Utils.sleep(0); // for Safari
            input.select();
        }
    }
}

/**
 * Scripting for analytics.
 */

class Gtm {
    static get gtmId() {
        return document.documentElement.dataset.gtmId || null;
    }

    static init() {
        if (this._isInit) return;
        this._isInit = true;

        const gtmId = this.gtmId;
        if (!gtmId) return;

        window.dataLayer ||= [];
        window.dataLayer.push({
            'gtm.start': new Date().getTime(),
            event: 'gtm.js'
        });

        this.gtag('consent', 'default', {
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'analytics_storage': 'denied'
        });

        this.gtag('consent', 'update', {
            'ad_storage': 'granted',
            'ad_user_data': 'granted',
            'ad_personalization': 'granted',
            'analytics_storage': 'granted'
        });

        this._fetchTagManager(gtmId);
        this.isEnabled = true;
    }

    static gtag() {
        window.dataLayer.push(arguments);
    }

    static _fetchTagManager(gtmId) {
        const script = window.document.createElement('script');
        script.async = true;
        script.src = `https://www.googletagmanager.com/gtm.js?id=${gtmId}`;
        document.head.appendChild(script);
    }
}

class GA4 {
    static get gaMeasurementId() {
        return document.documentElement.dataset.gaMeasurementId || null;
    }

    static init() {
        if (this._isInit) return;
        this._isInit = true;

        const gaMeasurementId = this.gaMeasurementId;
        if (!gaMeasurementId) return;

        this._fetchTagScript(gaMeasurementId);

        window.dataLayer ||= [];
        this.gtag('js', new Date());
        this.gtag('config', gaMeasurementId, { cookie_flags: 'SameSite=None; Secure' });
        this.gtag('consent', 'default', {
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'analytics_storage': 'denied'
        });
        this.gtag('consent', 'update', {
            'ad_user_data': 'granted',
            'ad_personalization': 'granted',
            'ad_storage': 'granted',
            'analytics_storage': 'granted'
        });
    }

    static gtag() {
        window.dataLayer.push(arguments);
    }

    static _fetchTagScript(gaMeasurementId) {
        const script = document.createElement('script');
        script.async = true;
        script.src = `https://www.googletagmanager.com/gtag/js?id=${gaMeasurementId}`;
        document.head.appendChild(script);
    }
}

(() => {
    const initScripts = () => {
        Gtm.init();
        if (!Gtm.isEnabled) {
            // Don't init GA4 if GTM is initialized
            GA4.init();
        }
    }

    if (CookieSettings.isAnalyticsAllowed()) {
        initScripts();
    }
    else {
        CookieSettings.onConsentChanged.addListener(() => {
            if (CookieSettings.isAnalyticsAllowed()) {
                initScripts();
            }
        });
    }
})();

/**
 * Scripting for marketing.
 */

class HubSpot {
    static get scriptUrl() {
        return document.documentElement.dataset.hubspotScriptUrl || null;
    }

    static init() {
        if (this._isInit) return;
        this._isInit = true;

        const scriptUrl = this.scriptUrl;
        if (!scriptUrl) return;

        this._fetchTrackerScript(scriptUrl);
    }

    static _fetchTrackerScript(scriptUrl) {
        const script = document.createElement('script');
        script.id = 'hs-script-loader';
        script.async = true;
        script.defer = true;
        script.src = scriptUrl;
        document.head.appendChild(script);
    }
}

(() => {
    if (CookieSettings.isMarketingAllowed()) {
        HubSpot.init();
    }
    else {
        CookieSettings.onConsentChanged.addListener(() => {
            if (CookieSettings.isMarketingAllowed()) {
                HubSpot.init();
            }
        });
    }
})();

/**
 * Scripting for MEGA Pages.
 */

/**
 * If megapages is loaded with a GET parameter affiliate ID set, save it to session storage and
 * update webclient link targets with the affiliate ID, to pass it on.
 */
class AffiliateLinker {
    validPeriod = 86400 * 30; // affiliate ID valid for 30 days (in seconds)

    constructor() {
        this.setIdFromCurrentUrl();
        this.updateWebclientTargets();
    }

    /**
     * Check current URL for an affiliate ID GET parameter and save it to local storage.
     */
    setIdFromCurrentUrl() {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('aff')) {
            Storage.local.setItem('affiliate', JSON.stringify({
                id: urlParams.get('aff'),
                ts: Math.floor(Date.now() / 1000), // seconds
            }));
        }
    }

    /**
     * Try to get the affiliate ID from local storage. If the ID doesn't exist or
     * is older than the {@link validPeriod}, return undefined.
     *
     * @returns {string|undefined} affiliate ID string or undefined if not valid.
     */
    tryGetIdFromStorage() {
        let affiliate = Storage.local.getItem('affiliate');
        try {
            affiliate = JSON.parse(affiliate);
        }
        catch (e) {
            console.error("Couldn't parse affiliate data.");
            console.trace(e, affiliate);
            return;
        }

        // Check ID exists
        if (!affiliate || !affiliate.id) return;

        // If date exists check expiry
        if (affiliate.ts && Math.floor(Date.now() / 1000) - affiliate.ts > this.validPeriod) {
            // Remove expired affiliate data
            Storage.local.removeItem('affiliate');
            return;
        }

        return affiliate.id;
    }

    /**
     * Update all webclient link targets with the affiliate ID saved in session storage, if it exists.
     */
    updateWebclientTargets() {
        const affiliateId = this.tryGetIdFromStorage();
        if (!affiliateId) return;

        for (const [a, url] of LinkManager.getWebclientLinks().entries()) {
            url.searchParams.set('aff', affiliateId);
            a.href = url.href;
        }
    }
}

/** External affiliate service */
class CjAffiliateLinker {
    validPeriod = 86400 * 30; // event ID valid for 30 days (in seconds)

    constructor() {
        this.setIdFromCurrentUrl();
        this.updateWebclientTargets();
    }

    /** Check current URL for a CJ event ID GET parameter and save it to local storage. */
    setIdFromCurrentUrl() {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('cjevent')) {
            Storage.local.setItem('cj.event', JSON.stringify({
                id: urlParams.get('cjevent'),
                ts: Math.floor(Date.now() / 1000), // seconds since Epoch
            }));
        }
    }

    /**
     * Try to get the event ID from local storage. If the ID doesn't exist or
     * is older than the {@link validPeriod}, return undefined.
     *
     * @returns {string|undefined} event ID string or undefined if not valid.
     */
    tryGetIdFromStorage() {
        let event = Storage.local.getItem('cj.event');
        try {
            event = JSON.parse(event);
        }
        catch (e) {
            console.error("Couldn't parse affiliate data.");
            console.trace(e, event);
            return;
        }

        // Check ID exists
        if (!event || !event.id) return;

        // If date exists check expiry
        if (event.ts && Math.floor(Date.now() / 1000) - event.ts > this.validPeriod) {
            // Remove expired event data
            Storage.local.removeItem('cj.event');
            return;
        }

        return event.id;
    }

    /** Update all webclient link targets with the affiliate ID saved in session storage, if it exists. */
    updateWebclientTargets() {
        const eventId = this.tryGetIdFromStorage();
        if (!eventId) return;

        for (const [a, url] of LinkManager.getWebclientLinks().entries()) {
            url.searchParams.set('cjevent', eventId);
            a.href = url.href;
        }
    }
}
class Discounts {
    constructor() {
        this._discounts = { };
        this._discountPromises = { };
    }

    /** @returns {Discounts} */
    static get instance() {
        if (!Discounts._instance) {
            Discounts._instance = new Discounts();
        }

        return Discounts._instance;
    }

    /**
     * Fetch the {@see Discount} info (or otherwise the API response) for the given code from the API.
     *
     * @param code Discount URL slug name for a given discount
     * @returns {Promise<*>}
     */
    async get(code) {
        if (!code) return null;

        if (!this._discounts[code]) {
            // Reuse promises to avoid duplicate requests
            this._discountPromises[code] ||= this._fetchAndParse(code);
            const discount = await this._discountPromises[code];
            delete this._discountPromises[code];

            return discount;
        }

        return this._discounts[code];
    }

    /**
     * Fetch the {@linkcode Discount} info (or otherwise the API response) for the given code from the API.
     * The associated {@linkcode Plan} info will be attached to the {@linkcode Discount} object as field "plan".
     *
     * @param {string} code
     * @returns {Promise<*|null>}
     */
    async getWithPlan(code) {
        if (!code) return null;

        const [discount, plans] = await Promise.all([Discounts.instance.get(code), Plans.instance.getAll()]);

        if (discount instanceof Discount) {
            const plan = plans.find(plan => plan.accountLevel === discount.accountLevel);
            discount.plan = plan instanceof Plan ? plan : null;
        }

        return discount;
    }

    async _fetchAndParse(code) {
        const discountInfo = await this._fetch(code);
        if (!discountInfo || typeof discountInfo !== 'object') {
            return discountInfo;
        }

        this._discounts[code] = Discount.fromResponse(discountInfo); // Only cache successful responses

        return this._discounts[code];
    }

    async _fetch(code) {
        const request = Api.request({
            a: 'dci',
            dc: null,
            extra: true,
            su: code,
        });

        let response;
        try {
            response = await request;
        }
        catch (e) {
            console.error(`API discount information request for code '${code}' failed.`, e.message);
            return null;
        }

        if (typeof response !== 'object') {
            console.error(`API discount information request for code '${code}' failed.`, ApiErrors.getMessage(response) || response);
        }

        return response;
    }
}

class Discount {
    get planName() {
        return Plans.Names[this.accountLevel];
    }

    static fromResponse(response) {
        const discount = new Discount();

        discount.accountLevel = response.al; // Account Level
        discount.durationMonths = response.m; // Months
        discount.discountPercentage = response.pd; // Percent Discount
        /** Timestamp of when the discount offer expires */
        discount.expiryTimestamp = response.ex;
        /** Whether the user will be charged the normal plan price when the discount period ends */
        discount.compulsorySubscription = response.cs; // Compulsory Subscription
        /** Whether the discount code can be used multiple times */
        discount.multiUse = response.md // Multi-use Discount

        discount.euro = { };
        discount.euro.undiscountedPrice = response.etp; // Euro Total Price (undiscounted)
        discount.euro.discountedPrice = response.edtp; // Euro Discounted Total Price
        discount.euro.discountedAmount = response.eda // Euro Discount Amount (amount saved)

        discount.local = { };
        discount.local.undiscountedPrice = response.ltp; // Local Total Price (undiscounted)
        discount.local.discountedPrice = response.ldtp; // Local Discounted Total Price
        discount.local.discountedAmount = response.lda; // Local Discounted Amount (amount saved)

        return discount;
    }
}

/**
 * Singleton to manage MEGA job listings.
 * @see JobListing
 */
class JobListings {
    static _instance;

    _jobs;
    _fetchPromise;

    static get instance() {
        if (!JobListings._instance) {
            JobListings._instance = new JobListings();
        }

        return JobListings._instance;
    }

    /**
     * Get all job listings. Will fetch from API first if not already fetched.
     * Returns a promise.
     */
    async getAll() {
        if (this._jobs == null) {
            await this.fetchFromApi();
        }

        return this._jobs || [];
    }

    /**
     * Asynchronously set the jobs array with data from the API.
     * Returns a promise.
     */
    async fetchFromApi() {
        if (!this._fetchPromise) {
            this._fetchPromise = Api.request({
                a: 'ttfj',
            });
        }

        let response;
        try {
            response = await this._fetchPromise;
        }
        catch (e) {
            console.error('Couldn\'t request job listings from API.', e.message);
            return;
        }

        if (!Array.isArray(response)) {
            console.error('API response to job listings request is something unexpected.');
            return;
        }

        this._jobs = [];
        for (let i = 1; i < response.length; i++) {
            const jobData = response[i];
            if (jobData.length < 5) {
                console.warn('Unexpected job data instance from API response: Not enough fields.');
                continue;
            }

            this._jobs.push(new JobListing(jobData[0], jobData[1], jobData[2], jobData[3], jobData[4]));
        }
    }
}

/**
 * Instance of a MEGA job listing.
 * @see JobListings
 */
class JobListing {
    id;
    jobTitle;
    jobField;
    description;
    url;

    constructor(id, jobTitle, jobField, description, url) {
        this.id = id;
        this.jobTitle = jobTitle;
        this.jobField = jobField;
        this.description = description;
        this.url = url;
    }
}

class User {
    /** See webclient/css/avatars.css */
    static _webclientColourStylesCount = 12;

    _firstName;
    _avatar;
    _avatarColourKey;
    _planNum;

    /**
     * @param {string} firstName
     * @param {string} avatar
     * @param {int} planNum
     * @param {int} avatarColourKey
     */
    constructor(firstName, avatar, planNum, avatarColourKey) {
        this._firstName = firstName || '';
        this._avatar = avatar || '';
        this._avatarColourKey = parseInt(avatarColourKey) || 1;
        this._planNum = parseInt(planNum) || -1;

        // Check the avatar colour key is in range of available styles
        if (this._avatarColourKey < 1 || this._avatarColourKey > User._webclientColourStylesCount) {
            this._avatarColourKey = 1;
        }
    }

    /**
     * Get the first name of the user.
     *
     * @returns {String} user's first name
     */
    get name() {
        return this._firstName
    };

    /**
     * Get the base64-encoded custom avatar of the user, if it exists.
     * Otherwise, consider using {@link avatarColourKey}.
     *
     * @returns {String} user's base64-encoded avatar
     */
    get avatar() {
        return this._avatar;
    }

    /**
     * Get the webclient-generated avatar colour class of this user.
     * Defaults to "color1" if the real colour key is not available.
     * Consider using {@link avatar} if possible.
     *
     * @returns {String}
     */
    get avatarColourKey() {
        return `color${this._avatarColourKey}`;
    }

    /**
     * Get the identifying number of the user's MEGA plan.
     *
     * @returns {Number}
     */
    get planNum() {
        return this._planNum;
    }
}

/**
 * Automatically pause videos when not in view or tab loses focus, for performance.
 * Intended for video animations. Particularly beneficial for Firefox.
 */
class VideoPauser {
    constructor() {
        this._onObserve = this._onObserve.bind(this);
        this._onVisibilityChanged = this._onVisibilityChanged.bind(this);

        this.visibleVideos = new Set();
        this.observer = new IntersectionObserver(this._onObserve);

        document.addEventListener('visibilitychange', this._onVisibilityChanged);
    }

    /** @returns {VideoPauser} */
    static get instance() {
        if (!VideoPauser._instance) {
            VideoPauser._instance = new VideoPauser();
        }

        return VideoPauser._instance;
    }

    /** @param {HTMLVideoElement} video */
    registerVideo(video) {
        // Only target video animations
        if (video.loop) {
            this.observer.observe(video);
        }
    }

    _onObserve(observables) {
        for (const observable of observables) {
            if (observable.isIntersecting) {
                this.visibleVideos.add(observable.target);
                this._tryPlay(observable.target);
            }
            else {
                this.visibleVideos.delete(observable.target);
                observable.target.pause();
            }
        }
    }

    _onVisibilityChanged() {
        if (document.hidden) {
            for (const video of this.visibleVideos) {
                video.pause();
            }
        }
        else {
            for (const video of this.visibleVideos) {
                this._tryPlay(video);
            }
        }
    }

    async _tryPlay(video) {
        try {
            await video.play();
        }
        catch (e) {
            if (e instanceof DOMException &&
                (e.message.includes('play() request was interrupted')
                    || e.message.includes('media resource was aborted by the user'))) {
                // Video pause requested before async play could fulfil, this is fine
                // (e.g. still loading while video is scrolled out of view)
                return;
            }
            if (e.name !== 'AbortError') {
                throw e;
            }
        }
    }
}

function setListNumber() {
    $('.page-container ol').each((i, element) => {
        const $li = $('li', element).first();
        const startNumber = element.start;
        $li.css('counter-increment', `item ${startNumber}`);
    });
}

(() => {
    ThemeManager.registerThemes(['light', 'dark']);

    LanguageRedirector.redirect();
    if (!LanguageRedirector.isRedirecting) { // avoid duplicate logs
        CampaignTagger.init();
    }

    if (Storage.session.getItem('userFirstName')) {
        window.user = new User(
            Storage.session.getItem('userFirstName'),
            Storage.session.getItem('userAvatar'),
            parseInt(Storage.session.getItem('userPlanNum')),
            parseInt(Storage.session.getItem('userAvatarColourKey')),
        );
    }
})();

document.addEventListener('DOMContentLoaded', () => {
    console.log('Page loaded. Initializing scripting.');

    if (document.documentElement.dir === 'rtl') {
        $('.button .icon.arrow-right').addClass('arrow-left').removeClass('arrow-right');
        $('.text-button .icon.arrow-right').addClass('arrow-left').removeClass('arrow-right');
    }

    CampaignTracker.init();
    AddLangToWebclientURL.addLangInfoToURL();

    window.affiliateLinker = new AffiliateLinker();
    window.cjAffiliateLinker = new CjAffiliateLinker();
    window.overlay = new Overlay($('body > .overlay.standard'));
    window.overlayWithHeader = new Overlay($('body > .overlay.with-header'));
    window.mobileNavMenu = new MobileMenuModal(document.querySelector('.mobile-modals .nav-menu'));
    window.header = new Header($('body > header.site-header'));
    window.footer = new Footer(document.querySelector('body > footer.site-footer'));
    window.cookieBanner = new CookieBanner(document.querySelector('body > dialog.cookie-banner'));

    if (window.user) {
        window.header.setAccountBtnsVisibility(false);
        window.mobileNavMenu.setAccountBtnsVisibility(false);

        if (window.user.avatar) {
            const ab = Utils.base64ToAb(window.user.avatar);
            const blob = new Blob([ab], { type: 'image/jpeg' });
            const url = window.URL.createObjectURL(blob);

            window.header.setCustomAvatar(url);
        }
        else {
            window.header.setAvatar(window.user.name, window.user.avatarColourKey);
        }

        // Remove Achievements and Pricing links from footer if user is on a Business/Pro Flexi plan
        if (window.user.planNum === Plans.AccountLevels.Business || window.user.planNum === Plans.AccountLevels.ProFlexi) {
            $('footer.site-footer a[href*="/achievements"], footer.site-footer a[href*="/pricing"]').remove();
        }
    }

    // Modals used across multiple pages
    const modals = ModalRegister.modalContainer;
    ModalRegister.registerModal(new LanguageSwitcher(modals.querySelector('.modal.language-switcher')));
    ModalRegister.registerModal(new CookieDialog(modals.querySelector('.modal.cookie-dialog')));

    setListNumber();

    // init MEGA custom blocks
    const pageContainer = document.querySelector('.page-container');
    if (pageContainer) {
        const selectorClassMap = {
            'section.activate-s4': () => ActivateS4,
            '.downloads-dropdown': () => DownloadsDropdown,
            '.feature-accordion': () => FeatureAccordion,
            '.feature-alternating': () => FeatureAlternating,
            '.feature-cards': () => SolutionsCards,
            '.feature-columns': () => FeatureColumns,
            '.hero-section': () => HeroSection,
            '.animated-hero': () => AnimatedHero,
            '.toc-group': () => Toc,
            '.product-comparison': () => ProductComparison,
            '.single-slice': () => SingleSlice,
            '.social-proof': () => SocialProof,
            '.competitor-matrix .matrix-card': () => CompetitorMatrixCard,
            'section.pro-flexi-business-pricing': () => ProFlexiBusinessPricing,
            '.pricing-table.individual': () => PricingTableIndividual,
            '.features-table': () =>  PricingFeaturesTable,
            '.open-source-module': () => OpenSource,
            '.leadership-team-list': () =>  LeadershipTeamList,
            '.counter-module': () => CounterModule,
            '.timeline-container': () => Timeline,
            '.business-page-pricing-module': () => BusinessPagePricing,
            '.refer-calculator': () => ReferCalculator,
            '.home-social-proof': () => HomeSocialProof,
            '.full-width-banner': () => FullWidthBanner,
            '.bottom-cta': () => BottomCTA,
            'section.appeal-form': () => AppealFormBlock,
            'section.copyright-notice': () => CopyrightNotice,
            'section.currency-selector': () => CurrencySelector,
            'section.discount-banner': () => DiscountBanner,
            'section.discount-hero': () => DiscountHero,
            'section.package-downloads': () => PackageDownloads,
            'section.s4-ryi': () => S4Ryi,
            'section.tab-structure-block': () => TabStructureBlock,
            'section.feature-pricing': () => FeaturePricing,
        };

        window.blocks = new Map();
        for (const [selector, getClass] of Object.entries(selectorClassMap)) {
            const elements = pageContainer.querySelectorAll(selector);
            if (!elements.length) continue;

            let Class;
            try {
                Class = getClass();
            }
            catch (e) {
                console.error(`Error while referencing block class for selector "${selector}":`, e);
                continue;
            }

            const blocks = [];
            const startTime = performance.now();
            for (const element of elements) {
                try {
                    blocks.push(new Class(element));
                }
                catch (e) {
                    console.error(`Error while instantiating block class ${Class.name}:`, e);
                }
            }
            const time = performance.now() - startTime;

            window.blocks.set(Class.name, blocks);

            if (time > 10) {
                console.warn(`Instantiating ${Class.name} ${elements.length > 1 ? 'blocks' : 'block'} took ${time} ms.`);
            }
        }
    }

    console.log('Page ready.');
});
  </script>
 </body>
</html>
